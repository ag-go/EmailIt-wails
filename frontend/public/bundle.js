var app=function(){"use strict";function e(){}function t(e){return e()}function r(){return Object.create(null)}function i(e){e.forEach(t)}function n(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,r,i){t.$$.on_destroy.push(function(t,...r){if(null==t)return e;const i=t.subscribe(...r);return i.unsubscribe?()=>i.unsubscribe():i}(r,i))}function a(e,t,r,i){if(e){const n=l(e,t,r,i);return e[0](n)}}function l(e,t,r,i){return e[1]&&i?function(e,t){for(const r in t)e[r]=t[r];return e}(r.ctx.slice(),e[1](i(t))):r.ctx}function c(e,t,r,i){if(e[2]&&i){const n=e[2](i(r));if(void 0===t.dirty)return n;if("object"==typeof n){const e=[],r=Math.max(t.dirty.length,n.length);for(let i=0;i<r;i+=1)e[i]=t.dirty[i]|n[i];return e}return t.dirty|n}return t.dirty}function h(e,t,r,i,n,o){if(n){const s=l(t,r,i,o);e.p(s,n)}}function u(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}function d(e,t,r){return e.set(r),t}function f(e,t){e.appendChild(t)}function p(e,t,r){e.insertBefore(t,r||null)}function g(e){e.parentNode.removeChild(e)}function m(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function v(e){return document.createElement(e)}function O(e){return document.createTextNode(e)}function _(){return O(" ")}function b(){return O("")}function y(e,t,r,i){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r,i)}function w(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function S(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function C(e,t){e.value=null==t?"":t}function x(e,t,r,i){null===r?e.style.removeProperty(t):e.style.setProperty(t,r,i?"important":"")}function k(e,t){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t)return void(i.selected=!0)}e.selectedIndex=-1}function T(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function P(e,t,r){e.classList[r?"add":"remove"](t)}class Q{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}(t.nodeName):this.e=v(t.nodeName),this.t=t,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)p(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(g)}}let R;function A(e){R=e}function $(){if(!R)throw new Error("Function called outside component initialization");return R}function L(e){$().$$.on_mount.push(e)}function E(e){$().$$.after_update.push(e)}function M(){const e=$();return(t,r,{cancelable:i=!1}={})=>{const n=e.$$.callbacks[t];if(n){const o=function(e,t,{bubbles:r=!1,cancelable:i=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,r,i,t),n}(t,r,{cancelable:i});return n.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}const D=[],B=[],I=[],j=[],z=Promise.resolve();let W=!1;function q(){W||(W=!0,z.then(U))}function H(){return q(),z}function N(e){I.push(e)}function X(e){j.push(e)}const F=new Set;let Z=0;function U(){const e=R;do{for(;Z<D.length;){const e=D[Z];Z++,A(e),V(e.$$)}for(A(null),D.length=0,Z=0;B.length;)B.pop()();for(let e=0;e<I.length;e+=1){const t=I[e];F.has(t)||(F.add(t),t())}I.length=0}while(D.length);for(;j.length;)j.pop()();W=!1,F.clear(),A(e)}function V(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(N)}}const G=new Set;let Y;function K(){Y={r:0,c:[],p:Y}}function J(){Y.r||i(Y.c),Y=Y.p}function ee(e,t){e&&e.i&&(G.delete(e),e.i(t))}function te(e,t,r,i){if(e&&e.o){if(G.has(e))return;G.add(e),Y.c.push((()=>{G.delete(e),i&&(r&&e.d(1),i())})),e.o(t)}else i&&i()}function re(e,t,r){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=r,r(e.$$.ctx[i]))}function ie(e){e&&e.c()}function ne(e,r,o,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:h}=e.$$;a&&a.m(r,o),s||N((()=>{const r=l.map(t).filter(n);c?c.push(...r):i(r),e.$$.on_mount=[]})),h.forEach(N)}function oe(e,t){const r=e.$$;null!==r.fragment&&(i(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function se(t,n,o,s,a,l,c,h=[-1]){const u=R;A(t);const d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:r(),dirty:h,skip_bound:!1,root:n.target||u.$$.root};c&&c(d.root);let f=!1;if(d.ctx=o?o(t,n.props||{},((e,r,...i)=>{const n=i.length?i[0]:r;return d.ctx&&a(d.ctx[e],d.ctx[e]=n)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](n),f&&function(e,t){-1===e.$$.dirty[0]&&(D.push(e),q(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),r})):[],d.update(),f=!0,i(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(g)}else d.fragment&&d.fragment.c();n.intro&&ee(t.$$.fragment),ne(t,n.target,n.anchor,n.customElement),U()}A(u)}class ae{$destroy(){oe(this,1),this.$destroy=e}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class le{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),he.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),he.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new fe(this),n=new fe(e);for(let e=t,o=t;;){if(i.next(e),n.next(e),e=0,i.lineBreak!=n.lineBreak||i.done!=n.done||i.value!=n.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new fe(this,e)}iterRange(e,t=this.length){return new pe(this,e,t)}iterLines(e,t){let r;if(null==e)r=this.iter();else{null==t&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new ge(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new ce(e):he.from(ce.split(e,[])):le.empty}}class ce extends le{constructor(e,t=function(e){let t=-1;for(let r of e)t+=r.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let n=0;;n++){let o=this.text[n],s=i+o.length;if((t?r:s)>=e)return new me(i,s,r,o);i=s+1,r++}}decompose(e,t,r,i){let n=e<=0&&t>=this.length?this:new ce(de(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&i){let e=r.pop(),t=ue(n.text,e.text.slice(),0,n.length);if(t.length<=32)r.push(new ce(t,e.length+n.length));else{let e=t.length>>1;r.push(new ce(t.slice(0,e)),new ce(t.slice(e)))}}else r.push(n)}replace(e,t,r){if(!(r instanceof ce))return super.replace(e,t,r);let i=ue(this.text,ue(r.text,de(this.text,0,e)),t),n=this.length+r.length-(t-e);return i.length<=32?new ce(i,n):he.from(ce.split(i,[]),n)}sliceString(e,t=this.length,r="\n"){let i="";for(let n=0,o=0;n<=t&&o<this.text.length;o++){let s=this.text[o],a=n+s.length;n>e&&o&&(i+=r),e<a&&t>n&&(i+=s.slice(Math.max(0,e-n),t-n)),n=a+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let n of e)r.push(n),i+=n.length+1,32==r.length&&(t.push(new ce(r,i)),r=[],i=-1);return i>-1&&t.push(new ce(r,i)),t}}class he extends le{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,r,i){for(let n=0;;n++){let o=this.children[n],s=i+o.length,a=r+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,r,i);i=s+1,r=a+1}}decompose(e,t,r,i){for(let n=0,o=0;o<=t&&n<this.children.length;n++){let s=this.children[n],a=o+s.length;if(e<=a&&t>=o){let n=i&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!n?r.push(s):s.decompose(e-o,t-o,r,n)}o=a+1}}replace(e,t,r){if(r.lines<this.lines)for(let i=0,n=0;i<this.children.length;i++){let o=this.children[i],s=n+o.length;if(e>=n&&t<=s){let a=o.replace(e-n,t-n,r),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let n=this.children.slice();return n[i]=a,new he(n,this.length-(t-e)+r.length)}return super.replace(n,s,a)}n=s+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r="\n"){let i="";for(let n=0,o=0;n<this.children.length&&o<=t;n++){let s=this.children[n],a=o+s.length;o>e&&n&&(i+=r),e<a&&t>o&&(i+=s.sliceString(e-o,t-o,r)),o=a+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof he))return 0;let r=0,[i,n,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,n+=t){if(i==o||n==s)return r;let a=this.children[i],l=e.children[n];if(a!=l)return r+a.scanIdentical(l,t);r+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let r=0;for(let t of e)r+=t.lines;if(r<32){let r=[];for(let t of e)t.flatten(r);return new ce(r,t)}let i=Math.max(32,r>>5),n=i<<1,o=i>>1,s=[],a=0,l=-1,c=[];function h(e){let t;if(e.lines>n&&e instanceof he)for(let t of e.children)h(t);else e.lines>o&&(a>o||!a)?(u(),s.push(e)):e instanceof ce&&a&&(t=c[c.length-1])instanceof ce&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new ce(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>i&&u(),a+=e.lines,l+=e.length+1,c.push(e))}function u(){0!=a&&(s.push(1==c.length?c[0]:he.from(c,l)),l=-1,a=c.length=0)}for(let t of e)h(t);return u(),1==s.length?s[0]:new he(s,t)}}function ue(e,t,r=0,i=1e9){for(let n=0,o=0,s=!0;o<e.length&&n<=i;o++){let a=e[o],l=n+a.length;l>=r&&(l>i&&(a=a.slice(0,i-n)),n<r&&(a=a.slice(r-n)),s?(t[t.length-1]+=a,s=!1):t.push(a)),n=l+1}return t}function de(e,t,r){return ue(e,[""],t,r)}le.empty=new ce([""],0);class fe{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ce?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],n=this.offsets[r],o=n>>1,s=i instanceof ce?i.text.length:i.children.length;if(o==(t>0?s:0)){if(0==r)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&n)==(t>0?0:1)){if(this.offsets[r]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(i instanceof ce){let n=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,n.length>Math.max(0,e))return this.value=0==e?n:t>0?n.slice(e):n.slice(0,n.length-e),this;e-=n.length}else{let n=i.children[o+(t<0?-1:0)];e>n.length?(e-=n.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(n),this.offsets.push(t>0?1:(n instanceof ce?n.text.length:n.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class pe{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new fe(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class ge{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(le.prototype[Symbol.iterator]=function(){return this.iter()},fe.prototype[Symbol.iterator]=pe.prototype[Symbol.iterator]=ge.prototype[Symbol.iterator]=function(){return this});class me{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}let ve="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<ve.length;e++)ve[e]+=ve[e-1];function Oe(e){for(let t=1;t<ve.length;t+=2)if(ve[t]>e)return ve[t-1]<=e;return!1}function _e(e){return e>=127462&&e<=127487}function be(e,t,r=!0,i=!0){return(r?ye:we)(e,t,i)}function ye(e,t,r){if(t==e.length)return t;t&&Se(e.charCodeAt(t))&&Ce(e.charCodeAt(t-1))&&t--;let i=xe(e,t);for(t+=Te(i);t<e.length;){let n=xe(e,t);if(8205==i||8205==n||r&&Oe(n))t+=Te(n),i=n;else{if(!_e(n))break;{let r=0,i=t-2;for(;i>=0&&_e(xe(e,i));)r++,i-=2;if(r%2==0)break;t+=2}}}return t}function we(e,t,r){for(;t>0;){let i=ye(e,t-2,r);if(i<t)return i;t--}return 0}function Se(e){return e>=56320&&e<57344}function Ce(e){return e>=55296&&e<56320}function xe(e,t){let r=e.charCodeAt(t);if(!Ce(r)||t+1==e.length)return r;let i=e.charCodeAt(t+1);return Se(i)?i-56320+(r-55296<<10)+65536:r}function ke(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Te(e){return e<65536?1:2}const Pe=/\r\n?|\n/;var Qe=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(Qe||(Qe={}));class Re{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let n=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,n),i+=n):i+=o,r+=n}}iterChangedRanges(e,t=!1){Ee(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new Re(e)}composeDesc(e){return this.empty?e:e.empty?this:De(this,e)}mapDesc(e,t=!1){return e.empty?this:Me(this,e,t)}mapPos(e,t=-1,r=Qe.Simple){let i=0,n=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=i+s;if(a<0){if(l>e)return n+(e-i);n+=s}else{if(r!=Qe.Simple&&l>=e&&(r==Qe.TrackDel&&i<e&&l>e||r==Qe.TrackBefore&&i<e||r==Qe.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==i||t<0?n:n+a;n+=a}i=l}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return n}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let n=i+this.sections[r++];if(this.sections[r++]>=0&&i<=t&&n>=e)return!(i<e&&n>t)||"cover";i=n}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Re(e)}static create(e){return new Re(e)}}class Ae extends Re{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Ee(this,((t,r,i,n,o)=>e=e.replace(i,i+(r-t),o)),!1),e}mapDesc(e,t=!1){return Me(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,n=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s>=0){t[i]=s,t[i+1]=o;let a=i>>1;for(;r.length<a;)r.push(le.empty);r.push(o?e.slice(n,n+o):le.empty)}n+=o}return new Ae(t,r)}compose(e){return this.empty?e:e.empty?this:De(this,e,!0)}map(e,t=!1){return e.empty?this:Me(this,e,t,!0)}iterChanges(e,t=!1){Ee(this,e,t)}get desc(){return Re.create(this.sections)}filter(e){let t=[],r=[],i=[],n=new Be(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==n.len;){if(n.done)break e;let e=Math.min(n.len,a-s);$e(i,e,-1);let o=-1==n.ins?-1:0==n.off?n.ins:0;$e(t,e,o),o>0&&Le(r,t,n.text),n.forward(e),s+=e}let l=e[o++];for(;s<l;){if(n.done)break e;let e=Math.min(n.len,l-s);$e(t,e,-1),$e(i,e,-1==n.ins?-1:0==n.off?n.ins:0),n.forward(e),s+=e}}return{changes:new Ae(t,r),filtered:Re.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):0==i?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],n=[],o=0,s=null;function a(e=!1){if(!e&&!i.length)return;o<t&&$e(i,t-o,-1);let r=new Ae(i,n);s=s?s.compose(r.map(s)):r,i=[],n=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof Ae){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let h=c?"string"==typeof c?le.of(c.split(r||Pe)):c:le.empty,u=h.length;if(e==s&&0==u)return;e<o&&a(),e>o&&$e(i,e-o,-1),$e(i,s-e,u),Le(n,i,h),o=s}}(e),a(!s),s}static empty(e){return new Ae(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let n=e[i];if("number"==typeof n)t.push(n,-1);else{if(!Array.isArray(n)||"number"!=typeof n[0]||n.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==n.length)t.push(n[0],0);else{for(;r.length<i;)r.push(le.empty);r[i]=le.of(n.slice(1)),t.push(n[0],r[i].length)}}}return new Ae(t,r)}static createSet(e,t){return new Ae(e,t)}}function $e(e,t,r,i=!1){if(0==t&&r<=0)return;let n=e.length-2;n>=0&&r<=0&&r==e[n+1]?e[n]+=t:0==t&&0==e[n]?e[n+1]+=r:i?(e[n]+=t,e[n+1]+=r):e.push(t,r)}function Le(e,t,r){if(0==r.length)return;let i=t.length-2>>1;if(i<e.length)e[e.length-1]=e[e.length-1].append(r);else{for(;e.length<i;)e.push(le.empty);e.push(r)}}function Ee(e,t,r){let i=e.inserted;for(let n=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)n+=a,o+=a;else{let c=n,h=o,u=le.empty;for(;c+=a,h+=l,l&&i&&(u=u.append(i[s-2>>1])),!(r||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(n,c,o,h,u),n=c,o=h}}}function Me(e,t,r,i=!1){let n=[],o=i?[]:null,s=new Be(e),a=new Be(t);for(let e=-1;;)if(-1==s.ins&&-1==a.ins){let e=Math.min(s.len,a.len);$e(n,e,-1),s.forward(e),a.forward(e)}else if(a.ins>=0&&(s.ins<0||e==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!r))){let t=a.len;for($e(n,a.ins,-1);t;){let r=Math.min(s.len,t);s.ins>=0&&e<s.i&&s.len<=r&&($e(n,0,s.ins),o&&Le(o,n,s.text),e=s.i),s.forward(r),t-=r}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?Ae.createSet(n,o):Re.create(n);throw new Error("Mismatched change set lengths")}{let t=0,r=s.len;for(;r;)if(-1==a.ins){let e=Math.min(r,a.len);t+=e,r-=e,a.forward(e)}else{if(!(0==a.ins&&a.len<r))break;r-=a.len,a.next()}$e(n,t,e<s.i?s.ins:0),o&&e<s.i&&Le(o,n,s.text),e=s.i,s.forward(s.len-r)}}}function De(e,t,r=!1){let i=[],n=r?[]:null,o=new Be(e),s=new Be(t);for(let e=!1;;){if(o.done&&s.done)return n?Ae.createSet(i,n):Re.create(i);if(0==o.ins)$e(i,o.len,0,e),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let t=Math.min(o.len2,s.len),r=i.length;if(-1==o.ins){let r=-1==s.ins?-1:s.off?0:s.ins;$e(i,t,r,e),n&&r&&Le(n,i,s.text)}else-1==s.ins?($e(i,o.off?0:o.len,t,e),n&&Le(n,i,o.textBit(t))):($e(i,o.off?0:o.len,s.off?0:s.ins,e),n&&!s.off&&Le(n,i,s.text));e=(o.ins>t||s.ins>=0&&s.len>t)&&(e||i.length>r),o.forward2(t),s.forward(t)}}else $e(i,0,s.ins,e),n&&Le(n,i,s.text),s.next()}}class Be{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?le.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?le.empty:t[r].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ie{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Ie(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return je.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return je.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return je.range(e.anchor,e.head)}static create(e,t,r){return new Ie(e,t,r)}}class je{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:je.create(this.ranges.map((r=>r.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new je([this.main],0)}addRange(e,t=!0){return je.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,je.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new je(e.ranges.map((e=>Ie.fromJSON(e))),e.main)}static single(e,t=e){return new je([je.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let n=e[i];if(n.empty?n.from<=r:n.from<r)return je.normalized(e.slice(),t);r=n.to}return new je(e,t)}static cursor(e,t=0,r,i){return Ie.create(e,e,(0==t?0:t<0?4:8)|(null==r?3:Math.min(2,r))|(null!=i?i:33554431)<<5)}static range(e,t,r){let i=(null!=r?r:33554431)<<5;return t<e?Ie.create(t,e,24|i):Ie.create(e,t,i|(t>e?4:0))}static normalized(e,t=0){let r=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(r);for(let r=1;r<e.length;r++){let i=e[r],n=e[r-1];if(i.empty?i.from<=n.to:i.from<n.to){let o=n.from,s=Math.max(i.to,n.to);r<=t&&t--,e.splice(--r,2,i.anchor>i.head?je.range(s,o):je.range(o,s))}}return new je(e,t)}}function ze(e,t){for(let r of e.ranges)if(r.to>t)throw new RangeError("Selection points outside of document")}let We=0;class qe{constructor(e,t,r,i,n){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=We++,this.default=e([]),this.extensions="function"==typeof n?n(this):n}static define(e={}){return new qe(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:He),!!e.static,e.enables)}of(e){return new Ne([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ne(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ne(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(r=>t(r.field(e))))}}function He(e,t){return e==t||e.length==t.length&&e.every(((e,r)=>e===t[r]))}class Ne{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=We++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,n=this.id,o=e[n]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let r of this.dependencies)"doc"==r?a=!0:"selection"==r?l=!0:0==(1&(null!==(t=e[r.id])&&void 0!==t?t:1))&&c.push(e[r.id]);return{create:e=>(e.values[o]=r(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||Fe(e,c)){let t=r(e);if(s?!Xe(t,e.values[o],i):!i(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a=r(e),l=t.config.address[n];if(null!=l){let r=at(t,l);if(this.dependencies.every((r=>r instanceof qe?t.facet(r)===e.facet(r):!(r instanceof Ve)||t.field(r,!1)==e.field(r,!1)))||(s?Xe(a,r,i):i(a,r)))return e.values[o]=r,0}return e.values[o]=a,1}}}}function Xe(e,t,r){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1;return!0}function Fe(e,t){let r=!1;for(let i of t)1&st(e,i)&&(r=!0);return r}function Ze(e,t,r){let i=r.map((t=>e[t.id])),n=r.map((e=>e.type)),o=i.filter((e=>!(1&e))),s=e[t.id]>>1;function a(e){let r=[];for(let t=0;t<i.length;t++){let o=at(e,i[t]);if(2==n[t])for(let e of o)r.push(e);else r.push(o)}return t.combine(r)}return{create(e){for(let t of i)st(e,t);return e.values[s]=a(e),1},update(e,r){if(!Fe(e,o))return 0;let i=a(e);return t.compare(i,e.values[s])?0:(e.values[s]=i,1)},reconfigure(e,n){let o=Fe(e,i),l=n.config.facets[t.id],c=n.facet(t);if(l&&!o&&He(r,l))return e.values[s]=c,0;let h=a(e);return t.compare(h,c)?(e.values[s]=c,0):(e.values[s]=h,1)}}}const Ue=qe.define({static:!0});class Ve{constructor(e,t,r,i,n){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=n,this.provides=void 0}static define(e){let t=new Ve(We++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ue).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,r)=>{let i=e.values[t],n=this.updateF(i,r);return this.compareF(i,n)?0:(e.values[t]=n,1)},reconfigure:(e,r)=>null!=r.config.address[this.id]?(e.values[t]=r.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,Ue.of({field:this,create:e})]}get extension(){return this}}const Ge=4,Ye=3,Ke=2,Je=1;function et(e){return t=>new rt(t,e)}const tt={highest:et(0),high:et(Je),default:et(Ke),low:et(Ye),lowest:et(Ge)};class rt{constructor(e,t){this.inner=e,this.prec=t}}class it{of(e){return new nt(this,e)}reconfigure(e){return it.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class nt{constructor(e,t){this.compartment=e,this.inner=t}}class ot{constructor(e,t,r,i,n,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=n,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],n=Object.create(null),o=new Map;for(let r of function(e,t,r){let i=[[],[],[],[],[]],n=new Map;function o(e,s){let a=n.get(e);if(null!=a){if(a<=s)return;let t=i[a].indexOf(e);t>-1&&i[a].splice(t,1),e instanceof nt&&r.delete(e.compartment)}if(n.set(e,s),Array.isArray(e))for(let t of e)o(t,s);else if(e instanceof nt){if(r.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let i=t.get(e.compartment)||e.inner;r.set(e.compartment,i),o(i,s)}else if(e instanceof rt)o(e.inner,e.prec);else if(e instanceof Ve)i[s].push(e),e.provides&&o(e.provides,s);else if(e instanceof Ne)i[s].push(e),e.facet.extensions&&o(e.facet.extensions,s);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(t,s)}}return o(e,Ke),i.reduce(((e,t)=>e.concat(t)))}(e,t,o))r instanceof Ve?i.push(r):(n[r.facet.id]||(n[r.facet.id]=[])).push(r);let s=Object.create(null),a=[],l=[];for(let e of i)s[e.id]=l.length<<1,l.push((t=>e.slot(t)));let c=null==r?void 0:r.config.facets;for(let e in n){let t=n[e],i=t[0].facet,o=c&&c[e]||[];if(t.every((e=>0==e.type)))if(s[i.id]=a.length<<1|1,He(o,t))a.push(r.facet(i));else{let e=i.combine(t.map((e=>e.value)));a.push(r&&i.compare(e,r.facet(i))?r.facet(i):e)}else{for(let e of t)0==e.type?(s[e.id]=a.length<<1|1,a.push(e.value)):(s[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));s[i.id]=l.length<<1,l.push((e=>Ze(e,i,t)))}}let h=l.map((e=>e(s)));return new ot(e,o,h,s,a,n)}}function st(e,t){if(1&t)return 2;let r=t>>1,i=e.status[r];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;e.status[r]=4;let n=e.computeSlot(e,e.config.dynamicSlots[r]);return e.status[r]=2|n}function at(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const lt=qe.define(),ct=qe.define({combine:e=>e.some((e=>e)),static:!0}),ht=qe.define({combine:e=>e.length?e[0]:void 0,static:!0}),ut=qe.define(),dt=qe.define(),ft=qe.define(),pt=qe.define({combine:e=>!!e.length&&e[0]});class gt{constructor(e,t){this.type=e,this.value=t}static define(){return new mt}}class mt{of(e){return new gt(this,e)}}class vt{constructor(e){this.map=e}of(e){return new Ot(this,e)}}class Ot{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Ot(this.type,t)}is(e){return this.type==e}static define(e={}){return new vt(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let e=i.map(t);e&&r.push(e)}return r}}Ot.reconfigure=Ot.define(),Ot.appendConfig=Ot.define();class _t{constructor(e,t,r,i,n,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=n,this.scrollIntoView=o,this._doc=null,this._state=null,r&&ze(r,t.newLength),n.some((e=>e.type==_t.time))||(this.annotations=n.concat(_t.time.of(Date.now())))}static create(e,t,r,i,n,o){return new _t(e,t,r,i,n,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(_t.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function bt(e,t){let r=[];for(let i=0,n=0;;){let o,s;if(i<e.length&&(n==t.length||t[n]>=e[i]))o=e[i++],s=e[i++];else{if(!(n<t.length))return r;o=t[n++],s=t[n++]}!r.length||r[r.length-1]<o?r.push(o,s):r[r.length-1]<s&&(r[r.length-1]=s)}}function yt(e,t,r){var i;let n,o,s;return r?(n=t.changes,o=Ae.empty(t.changes.length),s=e.changes.compose(t.changes)):(n=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(n)),{changes:s,selection:t.selection?t.selection.map(o):null===(i=e.selection)||void 0===i?void 0:i.map(n),effects:Ot.mapEffects(e.effects,n).concat(Ot.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function wt(e,t,r){let i=t.selection,n=xt(t.annotations);return t.userEvent&&(n=n.concat(_t.userEvent.of(t.userEvent))),{changes:t.changes instanceof Ae?t.changes:Ae.of(t.changes||[],r,e.facet(ht)),selection:i&&(i instanceof je?i:je.single(i.anchor,i.head)),effects:xt(t.effects),annotations:n,scrollIntoView:!!t.scrollIntoView}}function St(e,t,r){let i=wt(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(r=!1);for(let n=1;n<t.length;n++){!1===t[n].filter&&(r=!1);let o=!!t[n].sequential;i=yt(i,wt(e,t[n],o?i.changes.newLength:e.doc.length),o)}let n=_t.create(e,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(e){let t=e.startState,r=t.facet(ft),i=e;for(let n=r.length-1;n>=0;n--){let o=r[n](e);o&&Object.keys(o).length&&(i=yt(e,wt(t,o,e.changes.newLength),!0))}return i==e?e:_t.create(t,e.changes,e.selection,i.effects,i.annotations,i.scrollIntoView)}(r?function(e){let t=e.startState,r=!0;for(let i of t.facet(ut)){let t=i(e);if(!1===t){r=!1;break}Array.isArray(t)&&(r=!0===r?t:bt(r,t))}if(!0!==r){let i,n;if(!1===r)n=e.changes.invertedDesc,i=Ae.empty(t.doc.length);else{let t=e.changes.filter(r);i=t.changes,n=t.filtered.mapDesc(t.changes).invertedDesc}e=_t.create(t,i,e.selection&&e.selection.map(n),Ot.mapEffects(e.effects,n),e.annotations,e.scrollIntoView)}let i=t.facet(dt);for(let r=i.length-1;r>=0;r--){let n=i[r](e);e=n instanceof _t?n:Array.isArray(n)&&1==n.length&&n[0]instanceof _t?n[0]:St(t,xt(n),!1)}return e}(n):n)}_t.time=gt.define(),_t.userEvent=gt.define(),_t.addToHistory=gt.define(),_t.remote=gt.define();const Ct=[];function xt(e){return null==e?Ct:Array.isArray(e)?e:[e]}var kt=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(kt||(kt={}));const Tt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Pt;try{Pt=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function Qt(e){return t=>{if(!/\S/.test(t))return kt.Space;if(function(e){if(Pt)return Pt.test(e);for(let t=0;t<e.length;t++){let r=e[t];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||Tt.test(r)))return!0}return!1}(t))return kt.Word;for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>-1)return kt.Word;return kt.Other}}class Rt{constructor(e,t,r,i,n,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=n,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)st(this,e<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(null!=r)return st(this,r),at(this,r);if(t)throw new RangeError("Field is not present in this state")}update(...e){return St(this,e,!0)}applyTransaction(e){let t,r=this.config,{base:i,compartments:n}=r;for(let t of e.effects)t.is(it.reconfigure)?(r&&(n=new Map,r.compartments.forEach(((e,t)=>n.set(t,e))),r=null),n.set(t.value.compartment,t.value.extension)):t.is(Ot.reconfigure)?(r=null,i=t.value):t.is(Ot.appendConfig)&&(r=null,i=xt(i).concat(t.value));if(r)t=e.startState.values.slice();else{r=ot.resolve(i,n,this);let e=new Rt(r,this.doc,this.selection,r.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null);t=e.values}new Rt(r,e.newDoc,e.newSelection,t,((t,r)=>r.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:je.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),n=[r.range],o=xt(r.effects);for(let r=1;r<t.ranges.length;r++){let s=e(t.ranges[r]),a=this.changes(s.changes),l=a.map(i);for(let e=0;e<r;e++)n[e]=n[e].map(l);let c=i.mapDesc(a,!0);n.push(s.range.map(c)),i=i.compose(l),o=Ot.mapEffects(o,l).concat(Ot.mapEffects(xt(s.effects),c))}return{changes:i,selection:je.create(n,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ae?e:Ae.of(e,this.doc.length,this.facet(Rt.lineSeparator))}toText(e){return le.of(e.split(this.facet(Rt.lineSeparator)||Pe))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(st(this,t),at(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Ve&&null!=this.config.address[i.id]&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r)for(let t in r)if(Object.prototype.hasOwnProperty.call(e,t)){let n=r[t],o=e[t];i.push(n.init((e=>n.spec.fromJSON(o,e))))}return Rt.create({doc:e.doc,selection:je.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=ot.resolve(e.extensions||[],new Map),r=e.doc instanceof le?e.doc:le.of((e.doc||"").split(t.staticFacet(Rt.lineSeparator)||Pe)),i=e.selection?e.selection instanceof je?e.selection:je.single(e.selection.anchor,e.selection.head):je.single(0);return ze(i,r.length),t.staticFacet(ct)||(i=i.asSingle()),new Rt(t,r,i,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(Rt.tabSize)}get lineBreak(){return this.facet(Rt.lineSeparator)||"\n"}get readOnly(){return this.facet(pt)}phrase(e,...t){for(let t of this.facet(Rt.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,r)=>{if("$"==r)return"$";let i=+(r||1);return!i||i>t.length?e:t[i-1]}))),e}languageDataAt(e,t,r=-1){let i=[];for(let n of this.facet(lt))for(let o of n(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return Qt(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),n=this.charCategorizer(e),o=e-r,s=e-r;for(;o>0;){let e=be(t,o,!1);if(n(t.slice(e,o))!=kt.Word)break;o=e}for(;s<i;){let e=be(t,s);if(n(t.slice(s,e))!=kt.Word)break;s=e}return o==s?null:je.range(o+r,s+r)}}function At(e,t,r={}){let i={};for(let t of e)for(let e of Object.keys(t)){let n=t[e],o=i[e];if(void 0===o)i[e]=n;else if(o===n||void 0===n);else{if(!Object.hasOwnProperty.call(r,e))throw new Error("Config merge conflict for field "+e);i[e]=r[e](o,n)}}for(let e in t)void 0===i[e]&&(i[e]=t[e]);return i}Rt.allowMultipleSelections=ct,Rt.tabSize=qe.define({combine:e=>e.length?e[0]:4}),Rt.lineSeparator=ht,Rt.readOnly=pt,Rt.phrases=qe.define({compare(e,t){let r=Object.keys(e),i=Object.keys(t);return r.length==i.length&&r.every((r=>e[r]==t[r]))}}),Rt.languageData=lt,Rt.changeFilter=ut,Rt.transactionFilter=dt,Rt.transactionExtender=ft,it.reconfigure=Ot.define();class $t{eq(e){return this==e}range(e,t=e){return Lt.create(e,t,this)}}$t.prototype.startSide=$t.prototype.endSide=0,$t.prototype.point=!1,$t.prototype.mapMode=Qe.TrackDel;class Lt{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Lt(e,t,r)}}function Et(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Mt{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let n=r?this.to:this.from;for(let o=i,s=n.length;;){if(o==s)return o;let i=o+s>>1,a=n[i]-e||(r?this.value[i].endSide:this.value[i].startSide)-t;if(i==o)return a>=0?o:s;a>=0?s=i:o=i+1}}between(e,t,r,i){for(let n=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,n);n<o;n++)if(!1===i(this.from[n]+e,this.to[n]+e,this.value[n]))return!1}map(e,t){let r=[],i=[],n=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,h=this.value[a],u=this.from[a]+e,d=this.to[a]+e;if(u==d){let e=t.mapPos(u,h.startSide,h.mapMode);if(null==e)continue;if(l=c=e,h.startSide!=h.endSide&&(c=t.mapPos(u,h.endSide),c<l))continue}else if(l=t.mapPos(u,h.startSide),c=t.mapPos(d,h.endSide),l>c||l==c&&h.startSide>0&&h.endSide<=0)continue;(c-l||h.endSide-h.startSide)<0||(o<0&&(o=l),h.point&&(s=Math.max(s,c-l)),r.push(h),i.push(l-o),n.push(c-o))}return{mapped:r.length?new Mt(i,n,r,s):null,pos:o}}}class Dt{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Dt(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:n=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(r&&(t=t.slice().sort(Et)),this.isEmpty)return t.length?Dt.of(t):this;let s=new jt(this,null,-1).goto(0),a=0,l=[],c=new Bt;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||i>this.chunkEnd(s.chunkIndex)||n<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||i>s.to||n<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(Lt.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?Dt.empty:this.nextLayer.update({add:l,filter:o,filterFrom:i,filterTo:n}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let n=0;n<this.chunk.length;n++){let o=this.chunkPos[n],s=this.chunk[n],a=e.touchesRange(o,o+s.length);if(!1===a)i=Math.max(i,s.maxPoint),t.push(s),r.push(e.mapPos(o));else if(!0===a){let{mapped:n,pos:a}=s.map(o,e);n&&(i=Math.max(i,n.maxPoint),t.push(n),r.push(a))}}let n=this.nextLayer.map(e);return 0==t.length?n:new Dt(r,t,n||Dt.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let n=this.chunkPos[i],o=this.chunk[i];if(t>=n&&e<=n+o.length&&!1===o.between(n,e-n,t-n,r))return}this.nextLayer.between(e,t,r)}}iter(e=0){return zt.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return zt.from(e).goto(t)}static compare(e,t,r,i,n=-1){let o=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=n)),s=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=n)),a=It(o,s,r),l=new qt(o,a,n),c=new qt(s,a,n);r.iterGaps(((e,t,r)=>Ht(l,e,c,t,r,i))),r.empty&&0==r.length&&Ht(l,0,c,0,0,i)}static eq(e,t,r=0,i){null==i&&(i=1e9);let n=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),o=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(n.length!=o.length)return!1;if(!n.length)return!0;let s=It(n,o),a=new qt(n,s,0).goto(r),l=new qt(o,s,0).goto(r);for(;;){if(a.to!=l.to||!Nt(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>i)return!0;a.next(),l.next()}}static spans(e,t,r,i,n=-1){let o=new qt(e,null,n).goto(t),s=t,a=o.openStart;for(;;){let e=Math.min(o.to,r);if(o.point?(i.point(s,e,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(e)+(o.to>e?1:0)):e>s&&(i.span(s,e,o.active,a),a=o.openEnd(e)),o.to>r)break;s=o.to,o.next()}return a}static of(e,t=!1){let r=new Bt;for(let i of e instanceof Lt?[e]:t?function(e){if(e.length>1)for(let t=e[0],r=1;r<e.length;r++){let i=e[r];if(Et(t,i)>0)return e.slice().sort(Et);t=i}return e}(e):e)r.add(i.from,i.to,i.value);return r.finish()}}Dt.empty=new Dt([],[],null,-1),Dt.empty.nextLayer=Dt.empty;class Bt{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Mt(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Bt)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Dt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=Dt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function It(e,t,r){let i=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&i.set(t.chunk[e],t.chunkPos[e]);let n=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=i.get(e.chunk[t]);null==o||(r?r.mapPos(o):o)!=e.chunkPos[t]||(null==r?void 0:r.touchesRange(o,o+e.chunk[t].length))||n.add(e.chunk[t])}return n}class jt{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class zt{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let n=0;n<e.length;n++)for(let o=e[n];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new jt(o,t,r,n));return 1==i.length?i[0]:new zt(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Wt(this.heap,e);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Wt(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Wt(this.heap,0)}}}function Wt(e,t){for(let r=e[t];;){let i=1+(t<<1);if(i>=e.length)break;let n=e[i];if(i+1<e.length&&n.compare(e[i+1])>=0&&(n=e[i+1],i++),r.compare(n)<0)break;e[i]=r,e[t]=n,t=i}}class qt{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=zt.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Xt(this.active,e),Xt(this.activeTo,e),Xt(this.activeRank,e),this.minActive=Zt(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:n}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=n;)t++;Ft(this.active,t,r),Ft(this.activeTo,t,i),Ft(this.activeRank,t,n),e&&Ft(e,t,this.cursor.from),this.minActive=Zt(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null,i=0;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),r&&Xt(r,n)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let n=this.cursor.value;if(n.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=n,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=n.endSide,this.cursor.from<e&&(i=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(r),this.cursor.next()}}}if(r){let t=0;for(;t<r.length&&r[t]<e;)t++;this.openStart=t+i}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function Ht(e,t,r,i,n,o){e.goto(t),r.goto(i);let s=i+n,a=i,l=i-t;for(;;){let t=e.to+l-r.to||e.endSide-r.endSide,i=t<0?e.to+l:r.to,n=Math.min(i,s);if(e.point||r.point?e.point&&r.point&&(e.point==r.point||e.point.eq(r.point))&&Nt(e.activeForPoint(e.to+l),r.activeForPoint(r.to))||o.comparePoint(a,n,e.point,r.point):n>a&&!Nt(e.active,r.active)&&o.compareRange(a,n,e.active,r.active),i>s)break;a=i,t<=0&&e.next(),t>=0&&r.next()}}function Nt(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=t[r]&&!e[r].eq(t[r]))return!1;return!0}function Xt(e,t){for(let r=t,i=e.length-1;r<i;r++)e[r]=e[r+1];e.pop()}function Ft(e,t,r){for(let r=e.length-1;r>=t;r--)e[r+1]=e[r];e[t]=r}function Zt(e,t){let r=-1,i=1e9;for(let n=0;n<t.length;n++)(t[n]-i||e[n].endSide-e[r].endSide)<0&&(r=n,i=t[n]);return r}function Ut(e,t,r=e.length){let i=0;for(let n=0;n<r;)9==e.charCodeAt(n)?(i+=t-i%t,n++):(i++,n=be(e,n));return i}function Vt(e,t,r,i){for(let i=0,n=0;;){if(n>=t)return i;if(i==e.length)break;n+=9==e.charCodeAt(i)?r-n%r:1,i=be(e,i)}return!0===i?-1:e.length}const Gt="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),Yt="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Kt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Jt{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function n(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let r in t){let s=t[r];if(/&/.test(r))n(r.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+r+") should be a primitive value.");n(i(r),s,a,c)}else null!=s&&a.push(r.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!r||l||s?e:e.map(r)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)n(i(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Kt[Gt]||1;return Kt[Gt]=e+1,"ͼ"+e.toString(36)}static mount(e,t){(e[Yt]||new tr(e)).mount(Array.isArray(t)?t:[t])}}let er=null;class tr{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(er)return e.adoptedStyleSheets=[er.sheet].concat(e.adoptedStyleSheets),e[Yt]=er;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),er=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Yt]=this}mount(e){let t=this.sheet,r=0,i=0;for(let n=0;n<e.length;n++){let o=e[n],s=this.modules.indexOf(o);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),-1==s){if(this.modules.splice(i++,0,o),t)for(let e=0;e<o.rules.length;e++)t.insertRule(o.rules[e],r++)}else{for(;i<s;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var rr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},ir={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},nr="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),or="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),sr="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),ar="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),lr="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),cr=nr&&(ar||+nr[1]<57)||sr&&ar,hr=0;hr<10;hr++)rr[48+hr]=rr[96+hr]=String(hr);for(hr=1;hr<=24;hr++)rr[hr+111]="F"+hr;for(hr=65;hr<=90;hr++)rr[hr]=String.fromCharCode(hr+32),ir[hr]=String.fromCharCode(hr);for(var ur in rr)ir.hasOwnProperty(ur)||(ir[ur]=rr[ur]);function dr(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function fr(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function pr(e,t){if(!t.anchorNode)return!1;try{return fr(e,t.anchorNode)}catch(e){return!1}}function gr(e){return 3==e.nodeType?Tr(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function mr(e,t,r,i){return!!r&&(Or(e,t,r,i,-1)||Or(e,t,r,i,1))}function vr(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function Or(e,t,r,i,n){for(;;){if(e==r&&t==i)return!0;if(t==(n<0?0:_r(e))){if("DIV"==e.nodeName)return!1;let r=e.parentNode;if(!r||1!=r.nodeType)return!1;t=vr(e)+(n<0?0:1),e=r}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(n<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=n<0?_r(e):0}}}function _r(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}const br={left:0,right:0,top:0,bottom:0};function yr(e,t){let r=t?e.left:e.right;return{left:r,right:r,top:e.top,bottom:e.bottom}}function wr(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class Sr{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let Cr,xr=null;function kr(e){if(e.setActive)return e.setActive();if(xr)return e.focus(xr);let t=[];for(let r=e;r&&(t.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(e.focus(null==xr?{get preventScroll(){return xr={preventScroll:!0},!0}}:void 0),!xr){xr=!1;for(let e=0;e<t.length;){let r=t[e++],i=t[e++],n=t[e++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=n&&(r.scrollLeft=n)}}}function Tr(e,t,r=t){let i=Cr||(Cr=document.createRange());return i.setEnd(e,r),i.setStart(e,t),i}function Pr(e,t,r){let i={key:t,code:t,keyCode:r,which:r,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,e.dispatchEvent(n);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,e.dispatchEvent(o),n.defaultPrevented||o.defaultPrevented}function Qr(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class Rr{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new Rr(e.parentNode,vr(e),t)}static after(e,t){return new Rr(e.parentNode,vr(e)+1,t)}}const Ar=[];class $r{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let t,r=this.dom,i=null;for(let n of this.children){if(n.dirty){if(!n.dom&&(t=i?i.nextSibling:r.firstChild)){let e=$r.get(t);e&&(e.parent||e.constructor!=n.constructor)||n.reuseDOM(t)}n.sync(e),n.dirty=0}if(t=i?i.nextSibling:r.firstChild,e&&!e.written&&e.node==r&&t!=n.dom&&(e.written=!0),n.dom.parentNode==r)for(;t&&t!=n.dom;)t=Lr(t);else r.insertBefore(n.dom,t);i=n.dom}for(t=i?i.nextSibling:r.firstChild,t&&e&&e.node==r&&(e.written=!0);t;)t=Lr(t)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=0==_r(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==i&&t.firstChild!=t.lastChild&&(i=e==t.firstChild?-1:1),e=t}r=i<0?e:e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!$r.get(r);)r=r.nextSibling;if(!r)return this.length;for(let e=0,t=0;;e++){let i=this.children[e];if(i.dom==r)return t;t+=i.length+i.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,n=-1,o=-1,s=-1;for(let a=0,l=r,c=r;a<this.children.length;a++){let r=this.children[a],h=l+r.length;if(l<e&&h>t)return r.domBoundsAround(e,t,l);if(h>=e&&-1==i&&(i=a,n=l),l>t&&r.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+r.breakAfter}return{from:n,to:s<0?r+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=Ar){this.markDirty();for(let r=e;r<t;r++){let e=this.children[r];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...r);for(let e=0;e<r.length;e++)r[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Er(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,r,i,n,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}function Lr(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}$r.prototype.breakAfter=0;class Er{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Mr(e,t,r,i,n,o,s,a,l){let{children:c}=e,h=c.length?c[t]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(t==i&&h&&!s&&!d&&o.length<2&&h.merge(r,n,o.length?u:null,0==r,a,l))){if(i<c.length){let e=c[i];e&&n<e.length?(t==i&&(e=e.split(n),n=0),!d&&u&&e.merge(0,n,u,!0,0,l)?o[o.length-1]=e:(n&&e.merge(0,n,null,!1,0,l),o.push(e))):(null==e?void 0:e.breakAfter)&&(u?u.breakAfter=1:s=1),i++}for(h&&(h.breakAfter=s,r>0&&(!s&&o.length&&h.merge(r,h.length,o[0],!1,a,0)?h.breakAfter=o.shift().breakAfter:(r<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(r,h.length,null,!1,a,0),t++));t<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&i<c.length&&!c[t-1].breakAfter&&c[i].merge(0,0,c[t-1],!1,a,l)&&t--,(t<i||o.length)&&e.replaceChildren(t,i,o)}}function Dr(e,t,r,i,n,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(r,1),{i:c,off:h}=s.findPos(t,-1),u=t-r;for(let e of i)u+=e.length;e.length+=u,Mr(e,c,h,a,l,i,0,n,o)}let Br="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Ir="undefined"!=typeof document?document:{documentElement:{style:{}}};const jr=/Edge\/(\d+)/.exec(Br.userAgent),zr=/MSIE \d/.test(Br.userAgent),Wr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Br.userAgent),qr=!!(zr||Wr||jr),Hr=!qr&&/gecko\/(\d+)/i.test(Br.userAgent),Nr=!qr&&/Chrome\/(\d+)/.exec(Br.userAgent),Xr="webkitFontSmoothing"in Ir.documentElement.style,Fr=!qr&&/Apple Computer/.test(Br.vendor),Zr=Fr&&(/Mobile\/\w+/.test(Br.userAgent)||Br.maxTouchPoints>2);var Ur={mac:Zr||/Mac/.test(Br.platform),windows:/Win/.test(Br.platform),linux:/Linux|X11/.test(Br.platform),ie:qr,ie_version:zr?Ir.documentMode||6:Wr?+Wr[1]:jr?+jr[1]:0,gecko:Hr,gecko_version:Hr?+(/Firefox\/(\d+)/.exec(Br.userAgent)||[0,0])[1]:0,chrome:!!Nr,chrome_version:Nr?+Nr[1]:0,ios:Zr,android:/Android\b/.test(Br.userAgent),webkit:Xr,safari:Fr,webkit_version:Xr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=Ir.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Vr extends $r{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,r){return(!r||r instanceof Vr&&!(this.length-(t-e)+r.length>256))&&(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Vr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Rr(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Yr(this.dom,e,t)}}class Gr extends $r{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let e of t)e.setParent(this)}setAttrs(e){if(Qr(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,r,i,n,o){return(!r||!(!(r instanceof Gr&&r.mark.eq(this.mark))||e&&n<=0||t<this.length&&o<=0))&&(Dr(this,e,t,r?r.children:[],n-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,n=0;for(let o of this.children){let s=r+o.length;s>e&&t.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=n),r=s,n++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Gr(this.mark,t,o)}domAtPos(e){return ii(this.dom,this.children,e)}coordsAt(e,t){return oi(this,e,t)}}function Yr(e,t,r){let i=e.nodeValue.length;t>i&&(t=i);let n=t,o=t,s=0;0==t&&r<0||t==i&&r>=0?Ur.chrome||Ur.gecko||(t?(n--,s=1):o<i&&(o++,s=-1)):r<0?n--:o<i&&o++;let a=Tr(e,n,o).getClientRects();if(!a.length)return br;let l=a[(s?s<0:r>=0)?0:a.length-1];return Ur.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),s?yr(l,s<0):l||null}class Kr extends $r{constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}static create(e,t,r){return new(e.customView||Kr)(e,t,r)}split(e){let t=Kr.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,i,n,o){return!(r&&(!(r instanceof Kr&&this.widget.compare(r.widget))||e>0&&n<=0||t<this.length&&o<=0))&&(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Kr&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return le.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):le.empty}domAtPos(e){return 0==e?Rr.before(this.dom):Rr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.dom.getClientRects(),i=null;if(!r.length)return br;for(let t=e>0?r.length-1:0;i=r[t],!(e>0?0==t:t==r.length-1||i.top<i.bottom);t+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?i:yr(i,0==e)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Jr extends Kr{domAtPos(e){let{topView:t,text:r}=this.widget;return t?ei(e,0,t,r,((e,t)=>e.domAtPos(t)),(e=>new Rr(r,Math.min(e,r.nodeValue.length)))):new Rr(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:r,text:i}=this.widget;return r?ti(e,t,r,i):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:r,text:i}=this.widget;return r?ei(e,t,r,i,((e,t,r)=>e.coordsAt(t,r)),((e,t)=>Yr(i,e,t))):Yr(i,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}}function ei(e,t,r,i,n,o){if(r instanceof Gr){for(let s of r.children){let r=fr(s.dom,i),a=r?i.nodeValue.length:s.length;if(e<a||e==a&&s.getSide()<=0)return r?ei(e,t,s,i,n,o):n(s,e,t);e-=a}return n(r,r.length,-1)}return r.dom==i?o(e,t):n(r,e,t)}function ti(e,t,r,i){if(r instanceof Gr)for(let n of r.children){let r=0,o=fr(n.dom,i);if(fr(n.dom,e))return r+(o?ti(e,t,n,i):n.localPosFromDOM(e,t));r+=o?i.nodeValue.length:n.length}else if(r.dom==i)return Math.min(t,i.nodeValue.length);return r.localPosFromDOM(e,t)}class ri extends $r{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ri&&e.side==this.side}split(){return new ri(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Rr.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),r=function(e,t){let r=e.parent,i=r?r.children.indexOf(e):-1;for(;r&&i>=0;)if(t<0?i>0:i<r.children.length){let e=r.children[i+t];if(e instanceof Vr){let r=e.coordsAt(t<0?e.length:0,t);if(r)return r}i+=t}else{if(!(r instanceof Gr&&r.parent)){let e=r.dom.lastChild;if(e&&"BR"==e.nodeName)return e.getClientRects()[0];break}i=r.parent.children.indexOf(r)+(t<0?0:1),r=r.parent}return}(this,this.side>0?-1:1);return r&&r.top<t.bottom&&r.bottom>t.top?{left:t.left,right:t.right,top:r.top,bottom:r.bottom}:t}get overrideDOMText(){return le.empty}}function ii(e,t,r){let i=0;for(let n=0;i<t.length;i++){let o=t[i],s=n+o.length;if(!(s==n&&o.getSide()<=0)){if(r>n&&r<s&&o.dom.parentNode==e)return o.domAtPos(r-n);if(r<=n)break;n=s}}for(;i>0;i--){let r=t[i-1].dom;if(r.parentNode==e)return Rr.after(r)}return new Rr(e,0)}function ni(e,t,r){let i,{children:n}=e;r>0&&t instanceof Gr&&n.length&&(i=n[n.length-1])instanceof Gr&&i.mark.eq(t.mark)?ni(i,t.children[0],r-1):(n.push(t),t.setParent(e)),e.length+=t.length}function oi(e,t,r){for(let i=0,n=0;n<e.children.length;n++){let o,s=e.children[n],a=i+s.length;if((r<=0||a==e.length||s.getSide()>0?a>=t:a>t)&&(t<a||n+1==e.children.length||(o=e.children[n+1]).length||o.getSide()>0)){let e=0;if(a==i){if(s.getSide()<=0)continue;e=r=-s.getSide()}let n=s.coordsAt(Math.max(0,t-i),r);return e&&n?yr(n,r<0):n}i=a}let i=e.dom.lastChild;if(!i)return e.dom.getBoundingClientRect();let n=gr(i);return n[n.length-1]||null}function si(e,t){for(let r in e)"class"==r&&t.class?t.class+=" "+e.class:"style"==r&&t.style?t.style+=";"+e.style:t[r]=e[r];return t}function ai(e,t){if(e==t)return!0;if(!e||!t)return!1;let r=Object.keys(e),i=Object.keys(t);if(r.length!=i.length)return!1;for(let n of r)if(-1==i.indexOf(n)||e[n]!==t[n])return!1;return!0}function li(e,t,r){let i=null;if(t)for(let n in t)r&&n in r||e.removeAttribute(i=n);if(r)for(let n in r)t&&t[n]==r[n]||e.setAttribute(i=n,r[n]);return!!i}Vr.prototype.children=Kr.prototype.children=ri.prototype.children=Ar;class ci{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var hi=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(hi||(hi={}));class ui extends $t{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new di(e)}static widget(e){let t=e.side||0,r=!!e.block;return t+=r?t>0?3e8:-4e8:t>0?1e8:-1e8,new pi(e,t,t,r,e.widget||null,!1)}static replace(e){let t,r,i=!!e.block;if(e.isBlockGap)t=-5e8,r=4e8;else{let{start:n,end:o}=gi(e,i);t=(n?i?-3e8:-1:5e8)-1,r=1+(o?i?2e8:1:-6e8)}return new pi(e,t,r,i,e.widget||null,!0)}static line(e){return new fi(e)}static set(e,t=!1){return Dt.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}ui.none=Dt.empty;class di extends ui{constructor(e){let{start:t,end:r}=gi(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof di&&this.tagName==e.tagName&&this.class==e.class&&ai(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}di.prototype.point=!1;class fi extends ui{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof fi&&ai(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}fi.prototype.mapMode=Qe.TrackBefore,fi.prototype.point=!0;class pi extends ui{constructor(e,t,r,i,n,o){super(t,r,n,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?Qe.TrackBefore:Qe.TrackAfter:Qe.TrackDel}get type(){return this.startSide<this.endSide?hi.WidgetRange:this.startSide<=0?hi.WidgetBefore:hi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof pi&&(t=this.widget,r=e.widget,t==r||!!(t&&r&&t.compare(r)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,r}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function gi(e,t=!1){let{inclusiveStart:r,inclusiveEnd:i}=e;return null==r&&(r=e.inclusive),null==i&&(i=e.inclusive),{start:null!=r?r:t,end:null!=i?i:t}}function mi(e,t,r,i=0){let n=r.length-1;n>=0&&r[n]+i>=e?r[n]=Math.max(r[n],t):r.push(e,t)}pi.prototype.point=!0;class vi extends $r{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,n,o){if(r){if(!(r instanceof vi))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),Dr(this,e,t,r?r.children:[],n,o),!0}split(e){let t=new vi;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let e=r;e<this.children.length;e++)t.append(this.children[e],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ai(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ni(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=si(t,this.attrs||{})),r&&(this.attrs=si({class:r},this.attrs||{}))}domAtPos(e){return ii(this.dom,this.children,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?4&this.dirty&&(Qr(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(li(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let r=this.dom.lastChild;for(;r&&$r.get(r)instanceof Gr;)r=r.lastChild;if(!(r&&this.length&&("BR"==r.nodeName||0!=(null===(t=$r.get(r))||void 0===t?void 0:t.isEditable)||Ur.ios&&this.children.some((e=>e instanceof Vr))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Vr))return null;let r=gr(t.dom);if(1!=r.length)return null;e+=r[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return oi(this,e,t)}become(e){return!1}get type(){return hi.Text}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let n=e.children[r],o=i+n.length;if(o>=t){if(n instanceof vi)return n;if(o>t)break}i=o+n.breakAfter}return null}}class Oi extends $r{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,n,o){return!(r&&(!(r instanceof Oi&&this.widget.compare(r.widget))||e>0&&n<=0||t<this.length&&o<=0))&&(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?Rr.before(this.dom):Rr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Oi(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return Ar}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):le.empty}domBoundsAround(){return null}become(e){return e instanceof Oi&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class _i{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Oi&&e.type==hi.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new vi),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(bi(new ri(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:r,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(r){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=t,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,r)),this.getLine().append(bi(new Vr(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,n,o){if(this.disallowBlockEffectsFor[o]&&r instanceof pi){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(r instanceof pi)if(r.block){let{type:e}=r;e!=hi.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Oi(r.widget||new yi("div"),s,e))}else{let o=Kr.create(r.widget||new yi("span"),s,r.startSide),a=this.atCursorPos&&!o.isEditable&&n<=i.length&&(e<t||r.startSide>0),l=!o.isEditable&&(e<t||r.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(i),a&&(c.append(bi(new ri(1),i),n),n=i.length+Math.max(0,n-i.length)),c.append(bi(o,i),n),this.atCursorPos=l,this.pendingBuffer=l?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=n)}static build(e,t,r,i,n){let o=new _i(e,t,r,n);return o.openEnd=Dt.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function bi(e,t){for(let r of t)e=new Gr(r,[e],e.length);return e}class yi extends ci{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const wi=qe.define(),Si=qe.define(),Ci=qe.define(),xi=qe.define(),ki=qe.define(),Ti=qe.define(),Pi=qe.define({combine:e=>e.some((e=>e))});class Qi{constructor(e,t="nearest",r="nearest",i=5,n=5){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=n}map(e){return e.empty?this:new Qi(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Ri=Ot.define({map:(e,t)=>e.map(t)});function Ai(e,t,r){let i=e.facet(xi);i.length?i[0](t):window.onerror?window.onerror(String(t),r,void 0,void 0,t):r?console.error(r+":",t):console.error(t)}const $i=qe.define({combine:e=>!e.length||e[0]});let Li=0;const Ei=qe.define();class Mi{constructor(e,t,r,i){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:r,provide:i,decorations:n}=t||{};return new Mi(Li++,e,r,(e=>{let t=[Ei.of(e)];return n&&t.push(ji.of((t=>{let r=t.plugin(e);return r?n(r):ui.none}))),i&&t.push(i(e)),t}))}static fromClass(e,t){return Mi.define((t=>new e(t)),t)}}class Di{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(Ai(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Ai(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){Ai(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Bi=qe.define(),Ii=qe.define(),ji=qe.define(),zi=qe.define(),Wi=qe.define(),qi=qe.define();class Hi{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new Hi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(0==t.length)return e;let r=[];for(let i=0,n=0,o=0,s=0;;i++){let a=i==e.length?null:e[i],l=o-s,c=a?a.fromB:1e9;for(;n<t.length&&t[n]<c;){let e=t[n],i=t[n+1],o=Math.max(s,e),a=Math.min(c,i);if(o<=a&&new Hi(o+l,a+l,o,a).addToSet(r),i>c)break;n+=2}if(!a)return r;new Hi(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),o=a.toA,s=a.toB}}}class Ni{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ae.empty(this.startState.doc.length);for(let e of r)this.changes=this.changes.compose(e.changes);let i=[];this.changes.iterChangedRanges(((e,t,r,n)=>i.push(new Hi(e,t,r,n)))),this.changedRanges=i;let n=e.hasFocus;n!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=n,this.flags|=1)}static create(e,t,r){return new Ni(e,t,r)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Xi=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Xi||(Xi={}));const Fi=Xi.LTR,Zi=Xi.RTL;function Ui(e){let t=[];for(let r=0;r<e.length;r++)t.push(1<<+e[r]);return t}const Vi=Ui("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Gi=Ui("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Yi=Object.create(null),Ki=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),r=e.charCodeAt(1);Yi[t]=r,Yi[r]=-t}const Ji=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class en{constructor(e,t,r){this.from=e,this.to=t,this.level=r}get dir(){return this.level%2?Zi:Fi}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,i){let n=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==r)return o;(n<0||(0!=i?i<0?s.from<t:s.to>t:e[n].level>s.level))&&(n=o)}}if(n<0)throw new RangeError("Index out of range");return n}}const tn=[];function rn(e){return[new en(0,e,0)]}let nn="";function on(e,t,r,i,n){var o;let s=i.head-e.from,a=-1;if(0==s){if(!n||!e.length)return null;t[0].level!=r&&(s=t[0].side(!1,r),a=0)}else if(s==e.length){if(n)return null;let e=t[t.length-1];e.level!=r&&(s=e.side(!0,r),a=t.length-1)}a<0&&(a=en.find(t,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc));let l=t[a];s==l.side(n,r)&&(l=t[a+=n?1:-1],s=l.side(!n,r));let c=n==(l.dir==r),h=be(e.text,s,c);if(nn=e.text.slice(Math.min(s,h),Math.max(s,h)),h!=l.side(n,r))return je.cursor(h+e.from,c?-1:1,l.level);let u=a==(n?t.length-1:0)?null:t[a+(n?1:-1)];return u||l.level==r?u&&u.level<l.level?je.cursor(u.side(!n,r)+e.from,n?1:-1,u.level):je.cursor(h+e.from,n?-1:1,l.level):je.cursor(n?e.to:e.from,n?-1:1,r)}const sn="￿";class an{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Rt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=sn}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i),this.readNode(i);let e=i.nextSibling;if(e==t)break;let n=$r.get(i),o=$r.get(e);(n&&o?n.breakAfter:(n?n.breakAfter:ln(i))||ln(e)&&("BR"!=i.nodeName||i.cmIgnore))&&this.lineBreak(),i=e}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let n,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(n=i.exec(t))&&(o=n.index,s=n[0].length),this.append(t.slice(r,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);r=o+s}}readNode(e){if(e.cmIgnore)return;let t=$r.get(e),r=t&&t.overrideDOMText;if(null!=r){this.findPointInside(e,r.length);for(let e=r.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(3==e.nodeType?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}}function ln(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class cn{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class hn extends $r{constructor(e){super(),this.view=e,this.compositionDeco=ui.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new vi],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Hi(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=ui.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let r=dn(e);if(!r)return ui.none;let{from:i,to:n,node:o,text:s}=r,a=t.mapPos(i,1),l=Math.max(a,t.mapPos(n,-1)),{state:c}=e,h=3==o.nodeType?o.nodeValue:new an([],c).readRange(o.firstChild,null).text;if(l-a<h.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+h.length),sn)==h)l=a+h.length;else{if(c.doc.sliceString(Math.max(0,l-h.length),l,sn)!=h)return ui.none;a=l-h.length}else if(c.doc.sliceString(a,l,sn)!=h)return ui.none;let u=$r.get(o);u instanceof Jr?u=u.widget.topView:u&&(u.parent=null);return ui.set(ui.replace({widget:new fn(o,s,u),inclusive:!0}).range(a,l))}(this.view,e.changes)),(Ur.ie||Ur.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=function(e,t,r){let i=new gn;return Dt.compare(e,t,r,i),i.changes}(this.decorations,this.updateDeco(),e.changes);return t=Hi.extendWithRanges(t,r),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:r}=this.view;r.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=Ur.chrome||Ur.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(e),this.dirty=0,e&&(e.written||r.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof Oi&&e.widget instanceof un&&i.push(e.dom);r.updateGaps(i)}updateChildren(e,t){let r=this.childCursor(t);for(let t=e.length-1;;t--){let i=t>=0?e[t]:null;if(!i)break;let{fromA:n,toA:o,fromB:s,toB:a}=i,{content:l,breakAtStart:c,openStart:h,openEnd:u}=_i.build(this.view.state.doc,s,a,this.decorations,this.dynamicDecorationMap),{i:d,off:f}=r.findPos(o,1),{i:p,off:g}=r.findPos(n,-1);Mr(this,p,g,d,f,l,c,h,u)}}updateSelection(e=!1,t=!1){if(!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection()||Ur.ios&&this.view.inputState.rapidCompositionStart)return;let r=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,n=this.domAtPos(i.anchor),o=i.empty?n:this.domAtPos(i.head);if(Ur.gecko&&i.empty&&(1==(s=n).node.nodeType&&s.node.firstChild&&(0==s.offset||"false"==s.node.childNodes[s.offset-1].contentEditable)&&(s.offset==s.node.childNodes.length||"false"==s.node.childNodes[s.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>n.node.insertBefore(e,n.node.childNodes[n.offset]||null))),n=o=new Rr(e,0),r=!0}var s;let a=this.view.observer.selectionRange;!r&&a.focusNode&&mr(n.node,n.offset,a.anchorNode,a.anchorOffset)&&mr(o.node,o.offset,a.focusNode,a.focusOffset)||(this.view.observer.ignore((()=>{Ur.android&&Ur.chrome&&this.dom.contains(a.focusNode)&&function(e,t){for(let r=e;r&&r!=t;r=r.assignedSlot||r.parentNode)if(1==r.nodeType&&"false"==r.contentEditable)return!0;return!1}(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=dr(this.root);if(e)if(i.empty){if(Ur.gecko){let e=(t=n.node,r=n.offset,1!=t.nodeType?0:(r&&"false"==t.childNodes[r-1].contentEditable?1:0)|(r<t.childNodes.length&&"false"==t.childNodes[r].contentEditable?2:0));if(e&&3!=e){let t=pn(n.node,n.offset,1==e?1:-1);t&&(n=new Rr(t,1==e?0:t.nodeValue.length))}}e.collapse(n.node,n.offset),null!=i.bidiLevel&&null!=a.cursorBidiLevel&&(a.cursorBidiLevel=i.bidiLevel)}else if(e.extend)e.collapse(n.node,n.offset),e.extend(o.node,o.offset);else{let t=document.createRange();i.anchor>i.head&&([n,o]=[o,n]),t.setEnd(o.node,o.offset),t.setStart(n.node,n.offset),e.removeAllRanges(),e.addRange(t)}else;var t,r})),this.view.observer.setSelectionRange(n,o)),this.impreciseAnchor=n.precise?null:new Rr(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new Rr(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=dr(this.root);if(!(t&&e.empty&&e.assoc&&t.modify))return;let r=vi.find(this,e.head);if(!r)return;let i=r.posAtStart;if(e.head==i||e.head==i+r.length)return;let n=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!n||!o||n.bottom>o.top)return;let s=this.domAtPos(e.head+e.assoc);t.collapse(s.node,s.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let e=this.root.activeElement;return e==this.dom||pr(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let e=$r.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(r<e.length||e instanceof vi)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,i=this.children.length-1;;i--){let n=this.children[i],o=r-n.breakAfter-n.length;if(e>o||e==o&&n.type!=hi.WidgetBefore&&n.type!=hi.WidgetAfter&&(!i||2==t||this.children[i-1].breakAfter||this.children[i-1].type==hi.WidgetBefore&&t>-2))return n.coordsAt(e-o,t);r=o}}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,n=this.view.contentDOM.clientWidth,o=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Xi.LTR;for(let e=0,l=0;l<this.children.length;l++){let c=this.children[l],h=e+c.length;if(h>i)break;if(e>=r){let r=c.dom.getBoundingClientRect();if(t.push(r.height),o){let t=c.dom.lastChild,i=t?gr(t):[];if(i.length){let t=i[i.length-1],o=a?t.right-r.left:r.right-t.left;o>s&&(s=o,this.minWidth=n,this.minWidthFrom=e,this.minWidthTo=h)}}}e=h+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Xi.RTL:Xi.LTR}measureTextSize(){for(let e of this.children)if(e instanceof vi){let t=e.measureTextSize();if(t)return t}let e,t,r=document.createElement("div");return r.className="cm-line",r.style.width="99999px",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(r);let i=gr(r.firstChild)[0];e=r.getBoundingClientRect().height,t=i?i.width/27:7,r.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Er(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let n=i==t.viewports.length?null:t.viewports[i],o=n?n.from-1:this.length;if(o>r){let i=t.lineBlockAt(o).bottom-t.lineBlockAt(r).top;e.push(ui.replace({widget:new un(i),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!n)break;r=n.to+1}return ui.set(e)}updateDeco(){let e=this.view.state.facet(ji).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:r}=e,i=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1);if(!i)return;!r.empty&&(t=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(i={left:Math.min(i.left,t.left),top:Math.min(i.top,t.top),right:Math.max(i.right,t.right),bottom:Math.max(i.bottom,t.bottom)});let n=0,o=0,s=0,a=0;for(let e of this.view.state.facet(Wi).map((e=>e(this.view))))if(e){let{left:t,right:r,top:i,bottom:l}=e;null!=t&&(n=Math.max(n,t)),null!=r&&(o=Math.max(o,r)),null!=i&&(s=Math.max(s,i)),null!=l&&(a=Math.max(a,l))}let l={left:i.left-n,top:i.top-s,right:i.right+o,bottom:i.bottom+a};!function(e,t,r,i,n,o,s,a){let l=e.ownerDocument,c=l.defaultView;for(let h=e;h;)if(1==h.nodeType){let e,u=h==l.body;if(u)e=wr(c);else{if(h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.parentNode;continue}let t=h.getBoundingClientRect();e={left:t.left,right:t.left+h.clientWidth,top:t.top,bottom:t.top+h.clientHeight}}let d=0,f=0;if("nearest"==n)t.top<e.top?(f=-(e.top-t.top+s),r>0&&t.bottom>e.bottom+f&&(f=t.bottom-e.bottom+f+s)):t.bottom>e.bottom&&(f=t.bottom-e.bottom+s,r<0&&t.top-f<e.top&&(f=-(e.top+f-t.top+s)));else{let i=t.bottom-t.top,o=e.bottom-e.top;f=("center"==n&&i<=o?t.top+i/2-o/2:"start"==n||"center"==n&&r<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==i?t.left<e.left?(d=-(e.left-t.left+o),r>0&&t.right>e.right+d&&(d=t.right-e.right+d+o)):t.right>e.right&&(d=t.right-e.right+o,r<0&&t.left<e.left+d&&(d=-(e.left+d-t.left+o))):d=("center"==i?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==i==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,d||f)if(u)c.scrollBy(d,f);else{if(f){let e=h.scrollTop;h.scrollTop+=f,f=h.scrollTop-e}if(d){let e=h.scrollLeft;h.scrollLeft+=d,d=h.scrollLeft-e}t={left:t.left-d,top:t.top-f,right:t.right-d,bottom:t.bottom-f}}if(u)break;h=h.assignedSlot||h.parentNode,i=n="nearest"}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,l,r.head<r.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Xi.LTR)}}class un extends ci{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function dn(e){let t=e.observer.selectionRange,r=t.focusNode&&pn(t.focusNode,t.focusOffset,0);if(!r)return null;let i=e.docView.nearest(r);if(!i)return null;if(i instanceof vi){let e=r;for(;e.parentNode!=i.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!$r.get(t);)t=t.previousSibling;let n=t?$r.get(t).posAtEnd:i.posAtStart;return{from:n,to:n,node:e,text:r}}{for(;;){let{parent:e}=i;if(!e)return null;if(e instanceof vi)break;i=e}let e=i.posAtStart;return{from:e,to:e+i.length,node:i.dom,text:r}}}class fn extends ci{constructor(e,t,r){super(),this.top=e,this.text=t,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Jr}}function pn(e,t,r){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&r<=0)t=_r(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&r>=0))return null;e=e.childNodes[t],t=0}}}class gn{constructor(){this.changes=[]}compareRange(e,t){mi(e,t,this.changes)}comparePoint(e,t){mi(e,t,this.changes)}}function mn(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function vn(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function On(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function _n(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function bn(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function yn(e,t,r){let i,n,o,s,a,l,c,h;for(let u=e.firstChild;u;u=u.nextSibling){let e=gr(u);for(let d=0;d<e.length;d++){let f=e[d];n&&On(n,f)&&(f=_n(bn(f,n.bottom),n.top));let p=mn(t,f),g=vn(r,f);if(0==p&&0==g)return 3==u.nodeType?wn(u,t,r):yn(u,t,r);(!i||s>g||s==g&&o>p)&&(i=u,n=f,o=p,s=g),0==p?r>f.bottom&&(!c||c.bottom<f.bottom)?(a=u,c=f):r<f.top&&(!h||h.top>f.top)&&(l=u,h=f):c&&On(c,f)?c=bn(c,f.bottom):h&&On(h,f)&&(h=_n(h,f.top))}}if(c&&c.bottom>=r?(i=a,n=c):h&&h.top<=r&&(i=l,n=h),!i)return{node:e,offset:0};let u=Math.max(n.left,Math.min(n.right,t));return 3==i.nodeType?wn(i,u,r):o||"true"!=i.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,i)+(t>=(n.left+n.right)/2?1:0)}:yn(i,u,r)}function wn(e,t,r){let i=e.nodeValue.length,n=-1,o=1e9,s=0;for(let a=0;a<i;a++){let i=Tr(e,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let h=(c.top>r?c.top-r:r-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&h<o){let r=t>=(c.left+c.right)/2,i=r;if(Ur.chrome||Ur.gecko){Tr(e,a).getBoundingClientRect().left==c.right&&(i=!r)}if(h<=0)return{node:e,offset:a+(i?1:0)};n=a+(i?1:0),o=h}}}return{node:e,offset:n>-1?n:s>0?e.nodeValue.length:0}}function Sn(e,{x:t,y:r},i,n=-1){var o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,h=r-l;if(h<0)return 0;if(h>c)return e.state.doc.length;for(let t=e.defaultLineHeight/2,r=!1;s=e.elementAtHeight(h),s.type!=hi.Text;)for(;h=n>0?s.bottom+t:s.top-t,!(h>=0&&h<=c);){if(r)return i?null:0;r=!0,n=-n}r=l+h;let u=s.from;if(u<e.viewport.from)return 0==e.viewport.from?0:i?null:Cn(e,a,s,t,r);if(u>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:i?null:Cn(e,a,s,t,r);let d=e.dom.ownerDocument,f=e.root.elementFromPoint?e.root:d,p=f.elementFromPoint(t,r);p&&!e.contentDOM.contains(p)&&(p=null),p||(t=Math.max(a.left+1,Math.min(a.right-1,t)),p=f.elementFromPoint(t,r),p&&!e.contentDOM.contains(p)&&(p=null));let g,m=-1;if(p&&0!=(null===(o=e.docView.nearest(p))||void 0===o?void 0:o.isEditable))if(d.caretPositionFromPoint){let e=d.caretPositionFromPoint(t,r);e&&({offsetNode:g,offset:m}=e)}else if(d.caretRangeFromPoint){let e=d.caretRangeFromPoint(t,r);e&&(({startContainer:g,startOffset:m}=e),(Ur.safari&&function(e,t,r){let i;if(3!=e.nodeType||t!=(i=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return Tr(e,i-1,i).getBoundingClientRect().left>r}(g,m,t)||Ur.chrome&&function(e,t,r){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}let i=1==e.nodeType?e.getBoundingClientRect():Tr(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return r-i.left>5}(g,m,t))&&(g=void 0))}if(!g||!e.docView.dom.contains(g)){let i=vi.find(e.docView,u);if(!i)return h>s.top+s.height/2?s.to:s.from;({node:g,offset:m}=yn(i.dom,t,r))}return e.docView.posFromDOM(g,m)}function Cn(e,t,r,i,n){let o=Math.round((i-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&r.height>1.5*e.defaultLineHeight){o+=Math.floor((n-r.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(r.from,r.to);return r.from+Vt(s,o,e.state.tabSize)}function xn(e,t,r,i){let n=e.state.doc.lineAt(t.head),o=e.bidiSpans(n),s=e.textDirectionAt(n.from);for(let a=t,l=null;;){let t=on(n,o,s,a,r),c=nn;if(!t){if(n.number==(r?e.state.doc.lines:1))return a;c="\n",n=e.state.doc.line(n.number+(r?1:-1)),o=e.bidiSpans(n),t=je.cursor(r?n.from:n.to)}if(l){if(!l(c))return a}else{if(!i)return t;l=i(c)}a=t}}function kn(e,t,r){let i=e.state.facet(zi).map((t=>t(e)));for(;;){let e=!1;for(let n of i)n.between(r.from-1,r.from+1,((i,n,o)=>{r.from>i&&r.from<n&&(r=t.from>r.from?je.cursor(i,1):je.cursor(n,-1),e=!0)}));if(!e)return r}}class Tn{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in $n){let r=$n[t];e.contentDOM.addEventListener(t,(i=>{An(e,i)&&!this.ignoreDuringComposition(i)&&("keydown"==t&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,i)?i.preventDefault():r(e,i)))})),this.registeredEvents.push(t)}Ur.chrome&&Ur.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,Ur.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var r;let i;this.customHandlers=[];for(let n of t)if(i=null===(r=n.update(e).spec)||void 0===r?void 0:r.domEventHandlers){this.customHandlers.push({plugin:n.value,handlers:i});for(let t in i)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(r=>{An(e,r)&&this.runCustomHandlers(t,e,r)&&r.preventDefault()})))}}runCustomHandlers(e,t,r){for(let i of this.customHandlers){let n=i.handlers[e];if(n)try{if(n.call(i.plugin,r,t)||r.defaultPrevented)return!0}catch(e){Ai(t.state,e)}}return!1}runScrollHandlers(e,t){for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(t){Ai(e.state,t)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(Ur.android&&Ur.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return!(!Ur.ios||!(r=Pn.find((e=>e.keyCode==t.keyCode)))||t.ctrlKey||t.altKey||t.metaKey||t.synthetic)&&(this.pendingIOSKey=r,setTimeout((()=>this.flushIOSKey(e)),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,Pr(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(Ur.safari&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!Ur.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Pn=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Qn=[16,17,18,20,91,92,224,225];class Rn{constructor(e,t,r,i){this.view=e,this.style=r,this.mustSelect=i,this.lastEvent=t;let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Rt.allowMultipleSelections)&&function(e,t){let r=e.state.facet(wi);return r.length?r[0](t):Ur.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let r=e.state.facet(Si);return r.length?r[0](t):Ur.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:r}=e.state.selection;if(r.empty)return!1;let i=dr(e.root);if(!i||0==i.rangeCount)return!0;let n=i.getRangeAt(0).getClientRects();for(let e=0;e<n.length;e++){let r=n[e];if(r.left<=t.clientX&&r.right>=t.clientX&&r.top<=t.clientY&&r.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Xn(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function An(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r,i=t.target;i!=e.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(r=$r.get(i))&&r.ignoreEvent(t))return!1;return!0}const $n=Object.create(null),Ln=Ur.ie&&Ur.ie_version<15||Ur.ios&&Ur.webkit_version<604;function En(e,t){let r,{state:i}=e,n=1,o=i.toText(t),s=o.lines==i.selection.ranges.length;if(null!=Zn&&i.selection.ranges.every((e=>e.empty))&&Zn==o.toString()){let e=-1;r=i.changeByRange((r=>{let a=i.doc.lineAt(r.from);if(a.from==e)return{range:r};e=a.from;let l=i.toText((s?o.line(n++).text:t)+i.lineBreak);return{changes:{from:a.from,insert:l},range:je.cursor(r.from+l.length)}}))}else r=s?i.changeByRange((e=>{let t=o.line(n++);return{changes:{from:e.from,to:e.to,insert:t.text},range:je.cursor(e.from+t.length)}})):i.replaceSelection(o);e.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}$n.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode?e.inputState.lastEscPress=Date.now():Qn.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)};let Mn=0;function Dn(e,t,r,i){if(1==i)return je.cursor(t,r);if(2==i)return function(e,t,r=1){let i=e.charCategorizer(t),n=e.doc.lineAt(t),o=t-n.from;if(0==n.length)return je.cursor(t);0==o?r=1:o==n.length&&(r=-1);let s=o,a=o;r<0?s=be(n.text,o,!1):a=be(n.text,o);let l=i(n.text.slice(s,a));for(;s>0;){let e=be(n.text,s,!1);if(i(n.text.slice(e,s))!=l)break;s=e}for(;a<n.length;){let e=be(n.text,a);if(i(n.text.slice(a,e))!=l)break;a=e}return je.range(s+n.from,a+n.from)}(e.state,t,r);{let r=vi.find(e.docView,t),i=e.state.doc.lineAt(r?r.posAtEnd:t),n=r?r.posAtStart:i.from,o=r?r.posAtEnd:i.to;return o<e.state.doc.length&&o==i.to&&o++,je.range(n,o)}}$n.touchstart=(e,t)=>{Mn=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},$n.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},$n.mousedown=(e,t)=>{if(e.observer.flush(),Mn>Date.now()-2e3&&1==Xn(t))return;let r=null;for(let i of e.state.facet(Ci))if(r=i(e,t),r)break;if(r||0!=t.button||(r=function(e,t){let r=zn(e,t),i=Xn(t),n=e.state.selection,o=r,s=t;return{update(e){e.docChanged&&(r&&(r.pos=e.changes.mapPos(r.pos)),n=n.map(e.changes),s=null)},get(t,a,l){let c;if(s&&t.clientX==s.clientX&&t.clientY==s.clientY?c=o:(c=o=zn(e,t),s=t),!c||!r)return n;let h=Dn(e,c.pos,c.bias,i);if(r.pos!=c.pos&&!a){let t=Dn(e,r.pos,r.bias,i),n=Math.min(t.from,h.from),o=Math.max(t.to,h.to);h=n<h.from?je.range(n,o):je.range(o,n)}return a?n.replaceRange(n.main.extend(h.from,h.to)):l&&n.ranges.length>1&&n.ranges.some((e=>e.eq(h)))?function(e,t){for(let r=0;;r++)if(e.ranges[r].eq(t))return je.create(e.ranges.slice(0,r).concat(e.ranges.slice(r+1)),e.mainIndex==r?0:e.mainIndex-(e.mainIndex>r?1:0))}(n,h):l?n.addRange(h):je.create([h])}}}(e,t)),r){let i=e.root.activeElement!=e.contentDOM;i&&e.observer.ignore((()=>kr(e.contentDOM))),e.inputState.startMouseSelection(new Rn(e,t,r,i))}};let Bn=(e,t)=>e>=t.top&&e<=t.bottom,In=(e,t,r)=>Bn(t,r)&&e>=r.left&&e<=r.right;function jn(e,t,r,i){let n=vi.find(e.docView,t);if(!n)return 1;let o=t-n.posAtStart;if(0==o)return 1;if(o==n.length)return-1;let s=n.coordsAt(o,-1);if(s&&In(r,i,s))return-1;let a=n.coordsAt(o,1);return a&&In(r,i,a)?1:s&&Bn(i,s)?-1:1}function zn(e,t){let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:r,bias:jn(e,r,t.clientX,t.clientY)}}const Wn=Ur.ie&&Ur.ie_version<=11;let qn=null,Hn=0,Nn=0;function Xn(e){if(!Wn)return e.detail;let t=qn,r=Nn;return qn=e,Nn=Date.now(),Hn=!t||r>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Hn+1)%3:1}function Fn(e,t,r,i){if(!r)return;let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=i&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:n,insert:r},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(n,-1),head:l.mapPos(n,1)},userEvent:s?"move.drop":"input.drop"})}$n.dragstart=(e,t)=>{let{selection:{main:r}}=e.state,{mouseSelection:i}=e.inputState;i&&(i.dragging=r),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(r.from,r.to)),t.dataTransfer.effectAllowed="copyMove")},$n.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let r=t.dataTransfer.files;if(r&&r.length){t.preventDefault();let i=Array(r.length),n=0,o=()=>{++n==r.length&&Fn(e,t,i.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<r.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(i[e]=t.result),o()},t.readAsText(r[e])}}else Fn(e,t,t.dataTransfer.getData("Text"),!0)},$n.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let r=Ln?null:t.clipboardData;r?(En(e,r.getData("text/plain")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((()=>{e.focus(),r.remove(),En(e,r.value)}),50)}(e)};let Zn=null;function Un(e){setTimeout((()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)}function Vn(e,t){if(e.docView.compositionDeco.size){e.inputState.rapidCompositionStart=t;try{e.update([])}finally{e.inputState.rapidCompositionStart=!1}}}$n.copy=$n.cut=(e,t)=>{let{text:r,ranges:i,linewise:n}=function(e){let t=[],r=[],i=!1;for(let i of e.selection.ranges)i.empty||(t.push(e.sliceDoc(i.from,i.to)),r.push(i));if(!t.length){let n=-1;for(let{from:i}of e.selection.ranges){let o=e.doc.lineAt(i);o.number>n&&(t.push(o.text),r.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),n=o.number}i=!0}return{text:t.join(e.lineBreak),ranges:r,linewise:i}}(e.state);if(!r&&!n)return;Zn=n?r:null;let o=Ln?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",r)):function(e,t){let r=e.dom.parentNode;if(!r)return;let i=r.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout((()=>{i.remove(),e.focus()}),50)}(e,r),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})},$n.focus=Un,$n.blur=e=>{e.observer.clearSelectionRange(),Un(e)},$n.compositionstart=$n.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0,e.docView.compositionDeco.size&&(e.observer.flush(),Vn(e,!0)))},$n.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,setTimeout((()=>{e.inputState.composing<0&&Vn(e,!1)}),50)},$n.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},$n.beforeinput=(e,t)=>{var r;let i;if(Ur.chrome&&Ur.android&&(i=Pn.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){let t=(null===(r=window.visualViewport)||void 0===r?void 0:r.height)||0;setTimeout((()=>{var r;((null===(r=window.visualViewport)||void 0===r?void 0:r.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const Gn=["pre-wrap","normal","pre-line","break-spaces"];class Yn{constructor(){this.doc=le.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength)),this.lineHeight*r}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Gn.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t}refresh(e,t,r,i,n){let o=Gn.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=r,this.lineLength=i,s){this.heightSamples={};for(let e=0;e<n.length;e++){let t=n[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return s}}class Kn{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Jn{constructor(e,t,r,i,n){this.from=e,this.length=t,this.top=r,this.height=i,this.type=n}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Jn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var eo=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(eo||(eo={}));const to=.001;class ro{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>to&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return ro.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let n=this;for(let o=i.length-1;o>=0;o--){let{fromA:s,toA:a,fromB:l,toB:c}=i[o],h=n.lineAt(s,eo.ByPosNoHeight,t,0,0),u=h.to>=a?h:n.lineAt(a,eo.ByPosNoHeight,t,0,0);for(c+=u.to-a,a=u.to;o>0&&h.from<=i[o-1].toA;)s=i[o-1].fromA,l=i[o-1].fromB,o--,s<h.from&&(h=n.lineAt(s,eo.ByPosNoHeight,t,0,0));l+=h.from-s,s=h.from;let d=lo.build(r,e,l,c);n=n.replace(s,a,d)}return n.updateHeight(r,0)}static empty(){return new no(0,0)}static of(e){if(1==e.length)return e[0];let t=0,r=e.length,i=0,n=0;for(;;)if(t==r)if(i>2*n){let n=e[t-1];n.break?e.splice(--t,1,n.left,null,n.right):e.splice(--t,1,n.left,n.right),r+=1+n.break,i-=n.size}else{if(!(n>2*i))break;{let t=e[r];t.break?e.splice(r,1,t.left,null,t.right):e.splice(r,1,t.left,t.right),r+=2+t.break,n-=t.size}}else if(i<n){let r=e[t++];r&&(i+=r.size)}else{let t=e[--r];t&&(n+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,r++),new so(ro.of(e.slice(0,t)),o,ro.of(e.slice(r)))}}ro.prototype.size=1;class io extends ro{constructor(e,t,r){super(e,t),this.type=r}blockAt(e,t,r,i){return new Jn(i,this.length,r,this.height,this.type)}lineAt(e,t,r,i,n){return this.blockAt(0,r,i,n)}forEachLine(e,t,r,i,n,o){e<=n+this.length&&t>=n&&o(this.blockAt(0,r,i,n))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class no extends io{constructor(e,t){super(e,t,hi.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,r){let i=r[0];return 1==r.length&&(i instanceof no||i instanceof oo&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof oo?i=new no(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):ro.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class oo extends ro{constructor(e){super(e,0)}lines(e,t){let r=e.lineAt(t).number,i=e.lineAt(t+this.length).number;return{firstLine:r,lastLine:i,lineHeight:this.height/(i-r+1)}}blockAt(e,t,r,i){let{firstLine:n,lastLine:o,lineHeight:s}=this.lines(t,i),a=Math.max(0,Math.min(o-n,Math.floor((e-r)/s))),{from:l,length:c}=t.line(n+a);return new Jn(l,c,r+s*a,s,hi.Text)}lineAt(e,t,r,i,n){if(t==eo.ByHeight)return this.blockAt(e,r,i,n);if(t==eo.ByPosNoHeight){let{from:t,to:i}=r.lineAt(e);return new Jn(t,i-t,0,0,hi.Text)}let{firstLine:o,lineHeight:s}=this.lines(r,n),{from:a,length:l,number:c}=r.lineAt(e);return new Jn(a,l,i+s*(c-o),s,hi.Text)}forEachLine(e,t,r,i,n,o){let{firstLine:s,lineHeight:a}=this.lines(r,n);for(let l=Math.max(e,n),c=Math.min(n+this.length,t);l<=c;){let t=r.lineAt(l);l==e&&(i+=a*(t.number-s)),o(new Jn(t.from,t.length,i,a,hi.Text)),i+=a,l=t.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let e=r[r.length-1];e instanceof oo?r[r.length-1]=new oo(e.length+i):r.push(null,new oo(i-1))}if(e>0){let t=r[0];t instanceof oo?r[0]=new oo(e+t.length):r.unshift(new oo(e-1),null)}return ro.of(r)}decomposeLeft(e,t){t.push(new oo(e-1),null)}decomposeRight(e,t){t.push(null,new oo(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let n=t+this.length;if(i&&i.from<=t+this.length&&i.more){let r=[],o=Math.max(t,i.from),s=-1,a=e.heightChanged;for(i.from>t&&r.push(new oo(i.from-t-1).updateHeight(e,t));o<=n&&i.more;){let t=e.doc.lineAt(o).length;r.length&&r.push(null);let n=i.heights[i.index++];-1==s?s=n:Math.abs(n-s)>=to&&(s=-2);let a=new no(t,n);a.outdated=!1,r.push(a),o+=t+1}o<=n&&r.push(null,new oo(n-o).updateHeight(e,o));let l=ro.of(r);return e.heightChanged=a||s<0||Math.abs(l.height-this.height)>=to||Math.abs(s-this.lines(e.doc,t).lineHeight)>=to,l}return(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class so extends ro{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return 1&this.flags}blockAt(e,t,r,i){let n=r+this.left.height;return e<n?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,n,i+this.left.length+this.break)}lineAt(e,t,r,i,n){let o=i+this.left.height,s=n+this.left.length+this.break,a=t==eo.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,r,i,n):this.right.lineAt(e,t,r,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==eo.ByPosNoHeight?eo.ByPosNoHeight:eo.ByPos;return a?l.join(this.right.lineAt(s,c,r,o,s)):this.left.lineAt(s,c,r,i,n).join(l)}forEachLine(e,t,r,i,n,o){let s=i+this.left.height,a=n+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,r,i,n,o),t>=a&&this.right.forEachLine(e,t,r,s,a,o);else{let l=this.lineAt(a,eo.ByPos,r,i,n);e<l.from&&this.left.forEachLine(e,l.from-1,r,i,n,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,r,s,a,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let n=[];e>0&&this.decomposeLeft(e,n);let o=n.length;for(let e of r)n.push(e);if(e>0&&ao(n,o-1),t<this.length){let e=n.length;this.decomposeRight(t,n),ao(n,e)}return ro.of(n)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ro.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:n,right:o}=this,s=t+n.length+this.break,a=null;return i&&i.from<=t+n.length&&i.more?a=n=n.updateHeight(e,t,r,i):n.updateHeight(e,t,r),i&&i.from<=s+o.length&&i.more?a=o=o.updateHeight(e,s,r,i):o.updateHeight(e,s,r),a?this.balanced(n,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ao(e,t){let r,i;null==e[t]&&(r=e[t-1])instanceof oo&&(i=e[t+1])instanceof oo&&e.splice(t-1,3,new oo(r.length+1+i.length))}class lo{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof no?r.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new no(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let n=t-e;r.block?this.addBlock(new io(n,i,r.type)):(n||i>=5)&&this.addLineDeco(i,n)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new no(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new oo(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof no)return e;let t=new no(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type!=hi.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=hi.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof no||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new no(0,-1));let r=e;for(let e of this.nodes)e instanceof no&&e.updateHeight(this.oracle,r),r+=e?e.length:1;return this.nodes}static build(e,t,r,i){let n=new lo(r,e);return Dt.spans(t,r,i,n,0),n.finish(r)}}class co{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&mi(e,t,this.changes,5)}}function ho(e,t){let r=e.getBoundingClientRect(),i=Math.max(0,r.left),n=Math.min(innerWidth,r.right),o=Math.max(0,r.top),s=Math.min(innerHeight,r.bottom),a=e.ownerDocument.body;for(let t=e.parentNode;t&&t!=a;)if(1==t.nodeType){let e=t,r=window.getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&"visible"!=r.overflow){let t=e.getBoundingClientRect();i=Math.max(i,t.left),n=Math.min(n,t.right),o=Math.max(o,t.top),s=Math.min(s,t.bottom)}t="absolute"==r.position||"fixed"==r.position?e.offsetParent:e.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:i-r.left,right:Math.max(i,n)-r.left,top:o-(r.top+t),bottom:Math.max(o,s)-(r.top+t)}}function uo(e,t){let r=e.getBoundingClientRect();return{left:0,right:r.right-r.left,top:t,bottom:r.bottom-(r.top+t)}}class fo{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],n=t[r];if(i.from!=n.from||i.to!=n.to||i.size!=n.size)return!1}return!0}draw(e){return ui.replace({widget:new po(this.size,e)}).range(this.from,this.to)}}class po extends ci{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class go{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new Yn,this.scaler=wo,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Xi.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(ji).filter((e=>"function"!=typeof e)),this.heightMap=ro.empty().applyChanges(this.stateDeco,le.empty,this.heightOracle.setDoc(e.doc),[new Hi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ui.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some((({from:e,to:t})=>i>=e&&i<=t))){let{from:t,to:r}=this.lineBlockAt(i);e.push(new mo(t,r))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?wo:new So(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:Co(e,this.scaler))}))}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(ji).filter((e=>"function"!=typeof e));let i=e.changedRanges,n=Hi.extendWithRanges(i,function(e,t,r){let i=new co;return Dt.compare(e,t,r,i,0),i.changes}(r,this.stateDeco,e?e.changes:Ae.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),n),this.heightMap.height!=o&&(e.flags|=2);let s=n.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<s.from||t.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,t));let a=!e.changes.empty||2&e.flags||s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,n=r.whiteSpace;this.defaultTextDirection="rtl"==r.direction?Xi.RTL:Xi.LTR;let o=this.heightOracle.mustRefreshForWrapping(n),s=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,l=0,c=parseInt(r.paddingTop)||0,h=parseInt(r.paddingBottom)||0;this.paddingTop==c&&this.paddingBottom==h||(this.paddingTop=c,this.paddingBottom=h,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(s=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let u=(this.printing?uo:ho)(t,this.paddingTop),d=u.top-this.pixelViewport.top,f=u.bottom-this.pixelViewport.bottom;this.pixelViewport=u;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(s=!0)),!this.inView)return 0;let g=t.clientWidth;if(this.contentDOMWidth==g&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=g,this.editorHeight=e.scrollDOM.clientHeight,a|=8),s){let t=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(t)&&(o=!0),o||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:r,charWidth:s}=e.docView.measureTextSize();o=i.refresh(n,r,s,g/s,t),o&&(e.docView.minWidth=0,a|=8)}d>0&&f>0?l=Math.max(d,f):d<0&&f<0&&(l=Math.min(d,f)),i.heightChanged=!1;for(let r of this.viewports){let n=r.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(r);this.heightMap=this.heightMap.updateHeight(i,0,o,new Kn(r.from,n))}i.heightChanged&&(a|=2)}let m=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return m&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&a||m)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,n=this.state.doc,{visibleTop:o,visibleBottom:s}=this,a=new mo(i.lineAt(o-1e3*r,eo.ByHeight,n,0,0).from,i.lineAt(s+1e3*(1-r),eo.ByHeight,n,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let r,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=i.lineAt(e,eo.ByPos,n,0,0);r="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new mo(i.lineAt(r-500,eo.ByHeight,n,0,0).from,i.lineAt(r+o+500,eo.ByHeight,n,0,0).to)}}return a}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new mo(this.heightMap.lineAt(r,eo.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(i,eo.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,eo.ByPos,this.state.doc,0,0),{bottom:n}=this.heightMap.lineAt(t,eo.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||n>=s+Math.max(10,Math.min(r,250)))&&i>o-2e3&&n<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new fo(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=Xi.LTR)return t;for(let r of this.viewportLines){if(r.length<4e3)continue;let i,n,o=vo(r.from,r.to,this.stateDeco);if(o.total<4e3)continue;if(this.heightOracle.lineWrapping){let e=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;i=Oo(o,(this.visibleTop-r.top-e)/r.height),n=Oo(o,(this.visibleBottom-r.top+e)/r.height)}else{let e=o.total*this.heightOracle.charWidth,t=2e3*this.heightOracle.charWidth;i=Oo(o,(this.pixelViewport.left-t)/e),n=Oo(o,(this.pixelViewport.right+t)/e)}let s=[];i>r.from&&s.push({from:r.from,to:i}),n<r.to&&s.push({from:n,to:r.to});let a=this.state.selection.main;a.from>=r.from&&a.from<=r.to&&bo(s,a.from-10,a.from+10),!a.empty&&a.to>=r.from&&a.to<=r.to&&bo(s,a.to-10,a.to+10);for(let{from:i,to:n}of s)n-i>1e3&&t.push(yo(e,(e=>e.from>=r.from&&e.to<=r.to&&Math.abs(e.from-i)<1e3&&Math.abs(e.to-n)<1e3))||new fo(i,n,this.gapSize(r,i,n,o)))}return t}gapSize(e,t,r,i){let n=_o(i,r)-_o(i,t);return this.heightOracle.lineWrapping?e.height*n:i.total*this.heightOracle.charWidth*n}updateLineGaps(e){fo.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ui.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Dt.spans(e,this.viewport.from,this.viewport.to,{span(e,r){t.push({from:e,to:r})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,r)=>e.from!=t[r].from||e.to!=t[r].to));return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||Co(this.heightMap.lineAt(e,eo.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Co(this.heightMap.lineAt(this.scaler.fromDOM(e),eo.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Co(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class mo{constructor(e,t){this.from=e,this.to=t}}function vo(e,t,r){let i=[],n=e,o=0;return Dt.spans(r,e,t,{span(){},point(e,t){e>n&&(i.push({from:n,to:e}),o+=e-n),n=t}},20),n<t&&(i.push({from:n,to:t}),o+=t-n),{total:o,ranges:i}}function Oo({total:e,ranges:t},r){if(r<=0)return t[0].from;if(r>=1)return t[t.length-1].to;let i=Math.floor(e*r);for(let e=0;;e++){let{from:r,to:n}=t[e],o=n-r;if(i<=o)return r+i;i-=o}}function _o(e,t){let r=0;for(let{from:i,to:n}of e.ranges){if(t<=n){r+=t-i;break}r+=n-i}return r/e.total}function bo(e,t,r){for(let i=0;i<e.length;i++){let n=e[i];if(n.from<r&&n.to>t){let o=[];n.from<t&&o.push({from:n.from,to:t}),n.to>r&&o.push({from:r,to:n.to}),e.splice(i,1,...o),i+=o.length-1}}}function yo(e,t){for(let r of e)if(t(r))return r}const wo={toDOM:e=>e,fromDOM:e=>e,scale:1};class So{constructor(e,t,r){let i=0,n=0,o=0;this.viewports=r.map((({from:r,to:n})=>{let o=t.lineAt(r,eo.ByPos,e,0,0).top,s=t.lineAt(n,eo.ByPos,e,0,0).bottom;return i+=s-o,{from:r,to:n,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(t.height-i);for(let e of this.viewports)e.domTop=o+(e.top-n)*this.scale,o=e.domBottom=e.domTop+(e.bottom-e.top),n=e.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.top)return i+(e-r)*this.scale;if(e<=n.bottom)return n.domTop+(e-n.top);r=n.bottom,i=n.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.domTop)return r+(e-i)/this.scale;if(e<=n.domBottom)return n.top+(e-n.domTop);r=n.bottom,i=n.domBottom}}}function Co(e,t){if(1==t.scale)return e;let r=t.toDOM(e.top),i=t.toDOM(e.bottom);return new Jn(e.from,e.length,r,i-r,Array.isArray(e.type)?e.type.map((e=>Co(e,t))):e.type)}const xo=qe.define({combine:e=>e.join(" ")}),ko=qe.define({combine:e=>e.indexOf(!0)>-1}),To=Jt.newName(),Po=Jt.newName(),Qo=Jt.newName(),Ro={"&light":"."+Po,"&dark":"."+Qo};function Ao(e,t,r){return new Jt(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!r||!r[t])throw new RangeError(`Unsupported selector: ${t}`);return r[t]})):e+" "+t})}const $o=Ao("."+To,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ro),Lo={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Eo=Ur.ie&&Ur.ie_version<=11;class Mo{constructor(e,t,r){this.view=e,this.onChange=t,this.onScrollChanged=r,this.active=!1,this.selectionRange=new Sr,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(Ur.ie&&Ur.ie_version<=11||Ur.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),Eo&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()})),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,r)=>t!=e[r])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,r=this.selectionRange;if(t.state.facet($i)?t.root.activeElement!=this.dom:!pr(t.dom,r))return;let i=r.anchorNode&&t.docView.nearest(r.anchorNode);i&&i.ignoreEvent(e)||((Ur.ie&&Ur.ie_version<=11||Ur.android&&Ur.chrome)&&!t.state.selection.main.empty&&r.focusNode&&mr(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=Ur.safari&&11==e.nodeType&&function(){let e=document.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}()==this.view.contentDOM&&function(e){let t=null;function r(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",r,!0),!t)return null;let i=t.startContainer,n=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);mr(a.node,a.offset,o,s)&&([i,n,o,s]=[o,s,i,n]);return{anchorNode:i,anchorOffset:n,focusNode:o,focusOffset:s}}(this.view)||dr(e);return!(!t||this.selectionRange.eq(t))&&(this.selectionRange.setRange(t),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(1==r.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Lo),Eo&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Eo&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame((()=>{let e=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||Pr(this.view.contentDOM,e.key,e.keyCode)})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((()=>{this.delayedFlush=-1,this.flush()}),20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let t of this.observer.takeRecords())e.push(t);e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let n of e){let e=this.readMutation(n);e&&(e.typeOver&&(i=!0),-1==t?({from:t,to:r}=e):(t=Math.min(e.from,t),r=Math.max(e.to,r)))}return{from:t,to:r,typeOver:i}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:r,typeOver:i}=this.processRecords(),n=this.selectionChanged&&pr(this.dom,this.selectionRange);if(t<0&&!n)return;this.selectionChanged=!1;let o=this.view.state,s=this.onChange(t,r,i);return this.view.state==o&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let r=Do(t,e.previousSibling||e.target.previousSibling,-1),i=Do(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,r;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(r=this.resize)||void 0===r||r.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function Do(e,t,r){for(;t;){let i=$r.get(t);if(i&&i.parent==e)return i;let n=t.parentNode;t=n!=e.dom?n:r>0?t.nextSibling:t.previousSibling}return null}function Bo(e,t,r,i){let n,o,s=e.state.selection.main;if(t>-1){let i=e.docView.domBoundsAround(t,r,0);if(!i||e.state.readOnly)return!1;let{from:a,to:l}=i,c=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:r,anchorOffset:i,focusNode:n,focusOffset:o}=e.observer.selectionRange;r&&(t.push(new cn(r,i)),n==r&&o==i||t.push(new cn(n,o)));return t}(e),h=new an(c,e.state);h.readRange(i.startDOM,i.endDOM);let u=s.from,d=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||Ur.android&&h.text.length<l-a)&&(u=s.to,d="end");let f=function(e,t,r,i){let n=Math.min(e.length,t.length),o=0;for(;o<n&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==n&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==i){r-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.length<t.length){o-=r<=o&&r>=s?o-r:0,a=o+(a-s),s=o}else if(a<o){o-=r<=o&&r>=a?o-r:0,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}(e.state.doc.sliceString(a,l,sn),h.text,u-a,d);f&&(Ur.chrome&&13==e.inputState.lastKeyCode&&f.toB==f.from+2&&"￿￿"==h.text.slice(f.from,f.toB)&&f.toB--,n={from:a+f.from,to:a+f.toA,insert:le.of(h.text.slice(f.from,f.toB).split(sn))}),o=function(e,t){if(0==e.length)return null;let r=e[0].pos,i=2==e.length?e[1].pos:r;return r>-1&&i>-1?je.single(r+t,i+t):null}(c,a)}else if(e.hasFocus||!e.state.facet($i)){let t=e.observer.selectionRange,{impreciseHead:r,impreciseAnchor:i}=e.docView,n=r&&r.node==t.focusNode&&r.offset==t.focusOffset||!fr(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),a=i&&i.node==t.anchorNode&&i.offset==t.anchorOffset||!fr(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);n==s.head&&a==s.anchor||(o=je.single(a,n))}if(!n&&!o)return!1;if(!n&&i&&!s.empty&&o&&o.main.empty?n={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,s.to))}:(Ur.mac||Ur.android)&&n&&n.from==n.to&&n.from==s.head-1&&"."==n.insert.toString()&&(n={from:s.from,to:s.to,insert:le.of([" "])}),n){let t=e.state;if(Ur.ios&&e.inputState.flushIOSKey(e))return!0;if(Ur.android&&(n.from==s.from&&n.to==s.to&&1==n.insert.length&&2==n.insert.lines&&Pr(e.contentDOM,"Enter",13)||n.from==s.from-1&&n.to==s.to&&0==n.insert.length&&Pr(e.contentDOM,"Backspace",8)||n.from==s.from&&n.to==s.to+1&&0==n.insert.length&&Pr(e.contentDOM,"Delete",46)))return!0;let r,i=n.insert.toString();if(e.state.facet(Ti).some((t=>t(e,n.from,n.to,i))))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,n.from>=s.from&&n.to<=s.to&&n.to-n.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==n.from+n.insert.length)&&e.inputState.composing<0){let i=s.from<n.from?t.sliceDoc(s.from,n.from):"",o=s.to>n.to?t.sliceDoc(n.to,s.to):"";r=t.replaceSelection(e.state.toText(i+n.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let i=t.changes(n),a=o&&!t.selection.main.eq(o.main)&&o.main.to<=i.newLength?o.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=s.to&&n.to>=s.to-10){let o=e.state.sliceDoc(n.from,n.to),l=dn(e)||e.state.doc.lineAt(s.head),c=s.to-n.to,h=s.to-s.from;r=t.changeByRange((r=>{if(r.from==s.from&&r.to==s.to)return{changes:i,range:a||r.map(i)};let u=r.to-c,d=u-o.length;if(r.to-r.from!=h||e.state.sliceDoc(d,u)!=o||l&&r.to>=l.from&&r.from<=l.to)return{range:r};let f=t.changes({from:d,to:u,insert:n.insert}),p=r.to-s.to;return{changes:f,range:a?je.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):r.map(f)}}))}else r={changes:i,selection:a&&t.selection.replaceRange(a)}}let a="input.type";return e.composing&&(a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(r,{scrollIntoView:!0,userEvent:a}),!0}if(o&&!o.main.eq(s)){let t=!1,r="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),r=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:t,userEvent:r}),!0}return!1}class Io{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this.root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new go(e.state||Rt.create(e)),this.plugins=this.state.facet(Ei).map((e=>new Di(e)));for(let e of this.plugins)e.update(this);this.observer=new Mo(this,((e,t,r)=>Bo(this,e,t,r)),(e=>{this.inputState.runScrollHandlers(this,e),this.observer.intersecting&&this.measure()})),this.inputState=new Tn(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new hn(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof _t?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,r=!1,i=!1,n=this.state;for(let t of e){if(t.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=t.state}if(this.destroyed)return void(this.viewState.state=n);if(this.observer.clear(),n.facet(Rt.phrases)!=this.state.facet(Rt.phrases))return this.setState(n);t=Ni.create(this,n,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(o&&(o=o.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;o=new Qi(e.empty?e:je.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Ri)&&(o=e.value)}this.viewState.update(t,o),this.bidiCache=Wo.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),r=this.docView.update(t),this.state.facet(qi)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(xo)!=t.state.facet(xo)&&(this.viewState.mustMeasureContent=!0),(r||i||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let e of this.state.facet(ki))e(t)}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new go(e),this.plugins=e.facet(Ei).map((e=>new Di(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new hn(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ei),r=e.state.facet(Ei);if(t!=r){let i=[];for(let n of r){let r=t.indexOf(n);if(r<0)i.push(new Di(n));else{let t=this.plugins[r];t.mustUpdate=e,i.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let e=0;;e++){this.updateState=1;let r=this.viewport,i=this.viewState.measure(this);if(!i&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let n=[];4&i||([this.measureRequests,n]=[n,this.measureRequests]);let o=n.map((e=>{try{return e.read(this)}catch(e){return Ai(this.state,e),zo}})),s=Ni.create(this,this.state,[]),a=!1,l=!1;s.flags|=i,t?t.flags|=i:t=s,this.updateState=2,s.empty||(this.updatePlugins(s),this.inputState.update(s),this.updateAttrs(),a=this.docView.update(s));for(let e=0;e<n.length;e++)if(o[e]!=zo)try{let t=n[e];t.write&&t.write(o[e],this)}catch(e){Ai(this.state,e)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=!0),a&&this.docView.updateSelection(!0),this.viewport.from==r.from&&this.viewport.to==r.to&&!l&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(ki))e(t)}get themeClasses(){return To+" "+(this.state.facet(ko)?Qo:Po)+" "+this.state.facet(xo)}updateAttrs(){let e=qo(this,Bi,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet($i)?"true":"false",class:"cm-content",style:`${Ur.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),qo(this,Ii,t);let r=this.observer.ignore((()=>{let r=li(this.contentDOM,this.contentAttrs,t),i=li(this.dom,this.editorAttrs,e);return r||i}));return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let e of r.effects)if(e.is(Io.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(qi),Jt.mount(this.root,this.styleModules.concat($o).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((()=>this.measure()))),e){if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return kn(this,e,xn(this,e,t,r))}moveByGroup(e,t){return kn(this,e,xn(this,e,t,(t=>function(e,t,r){let i=e.state.charCategorizer(t),n=i(r);return e=>{let t=i(e);return n==kt.Space&&(n=t),n==t}}(this,e.head,t))))}moveToLineBoundary(e,t,r=!0){return function(e,t,r,i){let n=e.state.doc.lineAt(t.head),o=i&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>n.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),i=e.textDirectionAt(n.from),s=e.posAtCoords({x:r==(i==Xi.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return je.cursor(s,r?-1:1)}let s=vi.find(e.docView,t.head),a=s?r?s.posAtEnd:s.posAtStart:r?n.to:n.from;return je.cursor(a,r?-1:1)}(this,e,t,r)}moveVertically(e,t,r){return kn(this,e,function(e,t,r,i){let n=t.head,o=r?1:-1;if(n==(r?e.state.doc.length:0))return je.cursor(n,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(n),h=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(n);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(n-t.from))),s=(o<0?t.top:t.bottom)+h}let u=l.left+a,d=null!=i?i:e.defaultLineHeight>>1;for(let r=0;;r+=10){let i=s+(d+r)*o,c=Sn(e,{x:u,y:i},!1,o);if(i<l.top||i>l.bottom||(o<0?c<n:c>n))return je.cursor(c,t.assoc,void 0,a)}}(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Sn(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),n=this.bidiSpans(i);return yr(r,n[en.find(n,e-i.from,-1,t)].dir==Xi.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Pi)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>jo)return rn(e.length);let t=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t)return r.order;let r=function(e,t){let r=e.length,i=t==Fi?1:2,n=t==Fi?2:1;if(!e||1==i&&!Ji.test(e))return rn(r);for(let t=0,n=i,s=i;t<r;t++){let r=(o=e.charCodeAt(t))<=247?Vi[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?Gi[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8203||8204==o?256:1;512==r?r=n:8==r&&4==s&&(r=16),tn[t]=4==r?2:r,7&r&&(s=r),n=r}var o;for(let e=0,t=i,n=i;e<r;e++){let i=tn[e];if(128==i)e<r-1&&t==tn[e+1]&&24&t?i=tn[e]=t:tn[e]=256;else if(64==i){let i=e+1;for(;i<r&&64==tn[i];)i++;let o=e&&8==t||i<r&&8==tn[i]?1==n?1:8:256;for(let t=e;t<i;t++)tn[t]=o;e=i-1}else 8==i&&1==n&&(tn[e]=1);t=i,7&i&&(n=i)}for(let t,o,s,a=0,l=0,c=0;a<r;a++)if(o=Yi[t=e.charCodeAt(a)])if(o<0){for(let e=l-3;e>=0;e-=3)if(Ki[e+1]==-o){let t=Ki[e+2],r=2&t?i:4&t?1&t?n:i:0;r&&(tn[a]=tn[Ki[e]]=r),l=e;break}}else{if(189==Ki.length)break;Ki[l++]=a,Ki[l++]=t,Ki[l++]=c}else if(2==(s=tn[a])||1==s){let e=s==i;c=e?0:1;for(let t=l-3;t>=0;t-=3){let r=Ki[t+2];if(2&r)break;if(e)Ki[t+2]|=2;else{if(4&r)break;Ki[t+2]|=4}}}for(let e=0;e<r;e++)if(256==tn[e]){let t=e+1;for(;t<r&&256==tn[t];)t++;let n=1==(e?tn[e-1]:i),o=n==(1==(t<r?tn[t]:i))?n?1:2:i;for(let r=e;r<t;r++)tn[r]=o;e=t-1}let s=[];if(1==i)for(let e=0;e<r;){let t=e,i=1!=tn[e++];for(;e<r&&i==(1!=tn[e]);)e++;if(i)for(let r=e;r>t;){let e=r,i=2!=tn[--r];for(;r>t&&i==(2!=tn[r-1]);)r--;s.push(new en(r,e,i?2:1))}else s.push(new en(t,e,0))}else for(let e=0;e<r;){let t=e,i=2==tn[e++];for(;e<r&&i==(2==tn[e]);)e++;s.push(new en(t,e,i?1:2))}return s}(e.text,t);return this.bidiCache.push(new Wo(e.from,e.to,t,r)),r}get hasFocus(){var e;return(document.hasFocus()||Ur.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{kr(this.contentDOM),this.docView.updateSelection()}))}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ri.of(new Qi("number"==typeof e?je.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Mi.define((()=>({})),{eventHandlers:e})}static theme(e,t){let r=Jt.newName(),i=[xo.of(r),qi.of(Ao(`.${r}`,e))];return t&&t.dark&&i.push(ko.of(!0)),i}static baseTheme(e){return tt.lowest(qi.of(Ao("."+To,e,Ro)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&$r.get(r)||$r.get(e);return(null===(t=null==i?void 0:i.rootView)||void 0===t?void 0:t.view)||null}}Io.styleModule=qi,Io.inputHandler=Ti,Io.perLineTextDirection=Pi,Io.exceptionSink=xi,Io.updateListener=ki,Io.editable=$i,Io.mouseSelectionStyle=Ci,Io.dragMovesSelection=Si,Io.clickAddsSelectionRange=wi,Io.decorations=ji,Io.atomicRanges=zi,Io.scrollMargins=Wi,Io.darkTheme=ko,Io.contentAttributes=Ii,Io.editorAttributes=Bi,Io.lineWrapping=Io.contentAttributes.of({class:"cm-lineWrapping"}),Io.announce=Ot.define();const jo=4096,zo={};class Wo{constructor(e,t,r,i){this.from=e,this.to=t,this.dir=r,this.order=i}static update(e,t){if(t.empty)return e;let r=[],i=e.length?e[e.length-1].dir:Xi.LTR;for(let n=Math.max(0,e.length-10);n<e.length;n++){let o=e[n];o.dir!=i||t.touchesRange(o.from,o.to)||r.push(new Wo(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return r}}function qo(e,t,r){for(let i=e.state.facet(t),n=i.length-1;n>=0;n--){let t=i[n],o="function"==typeof t?t(e):t;o&&si(o,r)}return r}const Ho=Ur.mac?"mac":Ur.windows?"win":Ur.linux?"linux":"key";function No(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==r&&t.shiftKey&&(e="Shift-"+e),e}const Xo=tt.default(Io.domEventHandlers({keydown:(e,t)=>Go(Uo(t.state),e,t,"editor")})),Fo=qe.define({enables:Xo}),Zo=new WeakMap;function Uo(e){let t=e.facet(Fo),r=Zo.get(t);return r||Zo.set(t,r=function(e,t=Ho){let r=Object.create(null),i=Object.create(null),n=(e,t)=>{let r=i[e];if(null==r)i[e]=t;else if(r!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,i,o,s)=>{let a=r[e]||(r[e]=Object.create(null)),l=i.split(/ (?!$)/).map((e=>function(e,t){const r=e.split(/-(?!$)/);let i,n,o,s,a=r[r.length-1];"Space"==a&&(a=" ");for(let e=0;e<r.length-1;++e){const a=r[e];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))i=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?s=!0:n=!0}}return i&&(a="Alt-"+a),n&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<l.length;t++){let r=l.slice(0,t).join(" ");n(r,!0),a[r]||(a[r]={preventDefault:!0,commands:[t=>{let i=Vo={view:t,prefix:r,scope:e};return setTimeout((()=>{Vo==i&&(Vo=null)}),4e3),!0}]})}let c=l.join(" ");n(c,!1);let h=a[c]||(a[c]={preventDefault:!1,commands:[]});h.commands.push(o),s&&(h.preventDefault=!0)};for(let r of e){let e=r[t]||r.key;if(e)for(let t of r.scope?r.scope.split(" "):["editor"])o(t,e,r.run,r.preventDefault),r.shift&&o(t,"Shift-"+e,r.shift,r.preventDefault)}return r}(t.reduce(((e,t)=>e.concat(t)),[]))),r}let Vo=null;function Go(e,t,r,i){let n=function(e){var t=!(cr&&(e.ctrlKey||e.altKey||e.metaKey)||(or||lr)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?ir:rr)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=xe(n,0),s=Te(o)==n.length&&" "!=n,a="",l=!1;Vo&&Vo.view==r&&Vo.scope==i&&(a=Vo.prefix+" ",(l=Qn.indexOf(t.keyCode)<0)&&(Vo=null));let c,h=e=>{if(e){for(let t of e.commands)if(t(r))return!0;e.preventDefault&&(l=!0)}return!1},u=e[i];if(u){if(h(u[a+No(n,t,!s)]))return!0;if(s&&(t.shiftKey||t.altKey||t.metaKey||o>127)&&(c=rr[t.keyCode])&&c!=n){if(h(u[a+No(c,t,!0)]))return!0;if(t.shiftKey&&ir[t.keyCode]!=c&&h(u[a+No(ir[t.keyCode],t,!1)]))return!0}else if(s&&t.shiftKey&&h(u[a+No(n,t,!0)]))return!0}return l}const Yo=!Ur.ios,Ko=qe.define({combine:e=>At(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function Jo(e={}){return[Ko.of(e),ts,is]}class es{constructor(e,t,r,i,n){this.left=e,this.top=t,this.width=r,this.height=i,this.className=n}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const ts=Mi.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Ko).cursorBlinkRate+"ms"}update(e){let t=e.startState.facet(Ko)!=e.state.facet(Ko);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some((e=>e.scrollIntoView))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(Ko),r=e.selection.ranges.map((e=>e.empty?[]:function(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let r=Math.max(t.from,e.viewport.from),i=Math.min(t.to,e.viewport.to),n=e.textDirection==Xi.LTR,o=e.contentDOM,s=o.getBoundingClientRect(),a=ns(e),l=window.getComputedStyle(o.firstChild),c=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),h=s.right-parseInt(l.paddingRight),u=ss(e,r),d=ss(e,i),f=u.type==hi.Text?u:null,p=d.type==hi.Text?d:null;e.lineWrapping&&(f&&(f=os(e,r,f)),p&&(p=os(e,i,p)));if(f&&p&&f.from==p.from)return m(v(t.from,t.to,f));{let r=f?v(t.from,null,f):O(u,!1),i=p?v(null,t.to,p):O(d,!0),n=[];return(f||u).to<(p||d).from-1?n.push(g(c,r.bottom,h,i.top)):r.bottom<i.top&&e.elementAtHeight((r.bottom+i.top)/2).type==hi.Text&&(r.bottom=i.top=(r.bottom+i.top)/2),m(r).concat(n).concat(m(i))}function g(e,t,r,i){return new es(e-a.left,t-a.top-.01,r-e,i-t+.01,"cm-selectionBackground")}function m({top:e,bottom:t,horizontal:r}){let i=[];for(let n=0;n<r.length;n+=2)i.push(g(r[n],e,r[n+1],t));return i}function v(t,r,i){let o=1e9,s=-1e9,a=[];function l(t,r,l,u,d){let f=e.coordsAtPos(t,t==i.to?-2:2),p=e.coordsAtPos(l,l==i.from?2:-2);o=Math.min(f.top,p.top,o),s=Math.max(f.bottom,p.bottom,s),d==Xi.LTR?a.push(n&&r?c:f.left,n&&u?h:p.right):a.push(!n&&u?c:p.left,!n&&r?h:f.right)}let u=null!=t?t:i.from,d=null!=r?r:i.to;for(let i of e.visibleRanges)if(i.to>u&&i.from<d)for(let n=Math.max(i.from,u),o=Math.min(i.to,d);;){let i=e.state.doc.lineAt(n);for(let s of e.bidiSpans(i)){let e=s.from+i.from,a=s.to+i.from;if(e>=o)break;a>n&&l(Math.max(e,n),null==t&&e<=u,Math.min(a,o),null==r&&a>=d,s.dir)}if(n=i.to+1,n>=o)break}return 0==a.length&&l(u,null==t,d,null==r,e.textDirection),{top:o,bottom:s,horizontal:a}}function O(e,t){let r=s.top+(t?e.top:e.bottom);return{top:r,bottom:r,horizontal:[]}}}(this.view,e))).reduce(((e,t)=>e.concat(t))),i=[];for(let r of e.selection.ranges){let n=r==e.selection.main;if(r.empty?!n||Yo:t.drawRangeCursor){let e=as(this.view,r,n);e&&i.push(e)}}return{rangePieces:r,cursors:i}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some(((e,t)=>!e.eq(this.rangePieces[t])))){this.selectionLayer.textContent="";for(let t of e)this.selectionLayer.appendChild(t.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some(((e,t)=>!e.eq(this.cursors[t])))){let e=this.cursorLayer.children;if(e.length!==t.length){this.cursorLayer.textContent="";for(const e of t)this.cursorLayer.appendChild(e.draw())}else t.forEach(((t,r)=>t.adjust(e[r])));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),rs={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Yo&&(rs[".cm-line"].caretColor="transparent !important");const is=tt.highest(Io.theme(rs));function ns(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Xi.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function os(e,t,r){let i=je.cursor(t);return{from:Math.max(r.from,e.moveToLineBoundary(i,!1,!0).from),to:Math.min(r.to,e.moveToLineBoundary(i,!0,!0).from),type:hi.Text}}function ss(e,t){let r=e.lineBlockAt(t);if(Array.isArray(r.type))for(let e of r.type)if(e.to>t||e.to==t&&(e.to==r.to||e.type==hi.Text))return e;return r}function as(e,t,r){let i=e.coordsAtPos(t.head,t.assoc||1);if(!i)return null;let n=ns(e);return new es(i.left-n.left,i.top-n.top,-1,i.bottom-i.top,r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const ls=Ot.define({map:(e,t)=>null==e?null:t.mapPos(e)}),cs=Ve.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(ls)?t.value:e),e))}),hs=Mi.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let r=e.state.field(cs);null==r?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(cs)!=r||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(cs),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let r=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+this.view.scrollDOM.scrollLeft,top:t.top-r.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(cs)!=e&&this.view.dispatch({effects:ls.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function us(e,t,r,i,n){t.lastIndex=0;for(let o,s=e.iterRange(r,i),a=r;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=t.exec(s.value);)n(a+o.index,a+o.index+o[0].length,o)}class ds{constructor(e){let{regexp:t,decoration:r,boundary:i,maxLength:n=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco="function"==typeof r?r:()=>r,this.boundary=i,this.maxLength=n}createDeco(e){let t=new Bt;for(let{from:r,to:i}of function(e,t){let r=e.visibleRanges;if(1==r.length&&r[0].from==e.viewport.from&&r[0].to==e.viewport.to)return r;let i=[];for(let{from:n,to:o}of r)n=Math.max(e.state.doc.lineAt(n).from,n-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),i.length&&i[i.length-1].to>=n?i[i.length-1].to=o:i.push({from:n,to:o});return i}(e,this.maxLength))us(e.state.doc,this.regexp,r,i,((r,i,n)=>t.add(r,i,this.getDeco(n,e,r))));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges(((t,n,o,s)=>{s>e.view.viewport.from&&o<e.view.viewport.to&&(r=Math.min(o,r),i=Math.max(s,i))})),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let n of e.visibleRanges){let o=Math.max(n.from,r),s=Math.min(n.to,i);if(s>o){let r=e.state.doc.lineAt(o),i=r.to<s?e.state.doc.lineAt(s):r,a=Math.max(n.from,r.from),l=Math.min(n.to,i.to);if(this.boundary){for(;o>r.from;o--)if(this.boundary.test(r.text[o-1-r.from])){a=o;break}for(;s<i.to;s++)if(this.boundary.test(i.text[s-i.from])){l=s;break}}let c,h=[];if(r==i)for(this.regexp.lastIndex=a-r.from;(c=this.regexp.exec(r.text))&&c.index<l-r.from;){let t=c.index+r.from;h.push(this.getDeco(c,e,t).range(t,t+c[0].length))}else us(e.state.doc,this.regexp,a,l,((t,r,i)=>h.push(this.getDeco(i,e,t).range(t,r))));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:h})}}return t}}const fs=null!=/x/.unicode?"gu":"g",ps=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮\ufeff￹-￼]",fs),gs={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ms=null;const vs=qe.define({combine(e){let t=At(e,{render:null,specialChars:ps,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==ms&&"undefined"!=typeof document&&document.body){let t=document.body.style;ms=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return ms||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,fs)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,fs)),t}});function Os(e={}){return[vs.of(e),_s||(_s=Mi.fromClass(class{constructor(e){this.view=e,this.decorations=ui.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(vs)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new ds({regexp:e.specialChars,decoration:(t,r,i)=>{let{doc:n}=r.state,o=xe(t[0],0);if(9==o){let e=n.lineAt(i),t=r.state.tabSize,o=Ut(e.text,t,i-e.from);return ui.replace({widget:new ys((t-o%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=ui.replace({widget:new bs(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(vs);e.startState.facet(vs)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let _s=null;class bs extends ci{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"•":10==e?"␤":String.fromCharCode(9216+e)}(this.code),r=e.state.phrase("Control character")+" "+(gs[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let n=document.createElement("span");return n.textContent=t,n.title=r,n.setAttribute("aria-label",r),n.className="cm-specialChar",n}ignoreEvent(){return!1}}class ys extends ci{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const ws=ui.line({class:"cm-activeLine"}),Ss=Mi.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,r=[];for(let i of e.state.selection.ranges){if(!i.empty)return ui.none;let n=e.lineBlockAt(i.head);n.from>t&&(r.push(ws.range(n.from)),t=n.from)}return ui.set(r)}},{decorations:e=>e.decorations}),Cs=2e3;function xs(e,t){let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1),i=e.state.doc.lineAt(r),n=r-i.from,o=n>Cs?-1:n==i.length?function(e,t){let r=e.coordsAtPos(e.viewport.from);return r?Math.round(Math.abs((r.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):Ut(i.text,e.state.tabSize,r-i.from);return{line:i.number,col:o,off:n}}function ks(e,t){let r=xs(e,t),i=e.state.selection;return r?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(r.line).from),n=e.state.doc.lineAt(t);r={line:n.number,col:r.col,off:Math.min(r.off,n.length)},i=i.map(e.changes)}},get(t,n,o){let s=xs(e,t);if(!s)return i;let a=function(e,t,r){let i=Math.min(t.line,r.line),n=Math.max(t.line,r.line),o=[];if(t.off>Cs||r.off>Cs||t.col<0||r.col<0){let s=Math.min(t.off,r.off),a=Math.max(t.off,r.off);for(let t=i;t<=n;t++){let r=e.doc.line(t);r.length<=a&&o.push(je.range(r.from+s,r.to+a))}}else{let s=Math.min(t.col,r.col),a=Math.max(t.col,r.col);for(let t=i;t<=n;t++){let r=e.doc.line(t),i=Vt(r.text,s,e.tabSize,!0);if(i>-1){let t=Vt(r.text,a,e.tabSize);o.push(je.range(r.from+i,r.from+t))}}}return o}(e.state,r,s);return a.length?o?je.create(a.concat(i.ranges)):je.create(a):i}}:null}function Ts(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return Io.mouseSelectionStyle.of(((e,r)=>t(r)?ks(e,r):null))}const Ps={Alt:[18,e=>e.altKey],Control:[17,e=>e.ctrlKey],Shift:[16,e=>e.shiftKey],Meta:[91,e=>e.metaKey]},Qs={style:"cursor: crosshair"};function Rs(e={}){let[t,r]=Ps[e.key||"Alt"],i=Mi.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventHandlers:{keydown(e){this.set(e.keyCode==t||r(e))},keyup(e){e.keyCode!=t&&r(e)||this.set(!1)}}});return[i,Io.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.isDown)?Qs:null}))]}const As="-10000px";class $s{constructor(e,t,r){this.facet=t,this.createTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(r)}update(e){let t=e.state.facet(this.facet),r=t.filter((e=>e));if(t===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let i=[];for(let t=0;t<r.length;t++){let n=r[t],o=-1;if(n){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==n.create&&(o=e)}if(o<0)i[t]=this.createTooltipView(n);else{let r=i[t]=this.tooltipViews[o];r.update&&r.update(e)}}}for(let e of this.tooltipViews)i.indexOf(e)<0&&e.dom.remove();return this.input=t,this.tooltips=r,this.tooltipViews=i,!0}}function Ls(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const Es=qe.define({combine:e=>{var t,r,i;return{position:Ur.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(r=e.find((e=>e.parent)))||void 0===r?void 0:r.parent)||null,tooltipSpace:(null===(i=e.find((e=>e.tooltipSpace)))||void 0===i?void 0:i.tooltipSpace)||Ls}}}),Ms=Mi.fromClass(class{constructor(e){var t;this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let r=e.state.facet(Es);this.position=r.position,this.parent=r.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new $s(e,Is,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),null===(t=e.dom.ownerDocument.defaultView)||void 0===t||t.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let r=t||e.geometryChanged,i=e.state.facet(Es);if(i.position!=this.position){this.position=i.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;r=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=As,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;null===(e=this.view.dom.ownerDocument.defaultView)||void 0===e||e.removeEventListener("resize",this.measureSoon);for(let{dom:e}of this.manager.tooltipViews)e.remove();null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(Es).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:r}=e,i=[];for(let n=0;n<this.manager.tooltips.length;n++){let o=this.manager.tooltips[n],s=this.manager.tooltipViews[n],{dom:a}=s,l=e.pos[n],c=e.size[n];if(!l||l.bottom<=Math.max(t.top,r.top)||l.top>=Math.min(t.bottom,r.bottom)||l.right<Math.max(t.left,r.left)-.1||l.left>Math.min(t.right,r.right)+.1){a.style.top=As;continue}let h=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,u=h?7:0,d=c.right-c.left,f=c.bottom-c.top,p=s.offset||Bs,g=this.view.textDirection==Xi.LTR,m=c.width>r.right-r.left?g?r.left:r.right-c.width:g?Math.min(l.left-(h?14:0)+p.x,r.right-d):Math.max(r.left,l.left-d+(h?14:0)-p.x),v=!!o.above;!o.strictSide&&(v?l.top-(c.bottom-c.top)-p.y<r.top:l.bottom+(c.bottom-c.top)+p.y>r.bottom)&&v==r.bottom-l.bottom>l.top-r.top&&(v=!v);let O=v?l.top-f-u-p.y:l.bottom+u+p.y,_=m+d;if(!0!==s.overlap)for(let e of i)e.left<_&&e.right>m&&e.top<O+f&&e.bottom>O&&(O=v?e.top-f-2-u:e.bottom+u+2);"absolute"==this.position?(a.style.top=O-e.parent.top+"px",a.style.left=m-e.parent.left+"px"):(a.style.top=O+"px",a.style.left=m+"px"),h&&(h.style.left=l.left+(g?p.x:-p.x)-(m+14-7)+"px"),!0!==s.overlap&&i.push({left:m,top:O,right:_,bottom:O+f}),a.classList.toggle("cm-tooltip-above",v),a.classList.toggle("cm-tooltip-below",!v),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=As}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Ds=Io.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Bs={x:0,y:0},Is=qe.define({enables:[Ms,Ds]}),js=qe.define();class zs{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new $s(e,js,(e=>this.createHostedView(e)))}static create(e){return new zs(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const Ws=Is.compute([js],(e=>{let t=e.facet(js).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:zs.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class qs{constructor(e,t,r,i,n){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=n,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let r=this.view.coordsAtPos(t);if(null==r||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find((e=>e.from<=t&&e.to>=t)),n=i&&i.dir==Xi.RTL?-1:1,o=this.source(this.view,t,e.x<r.left?-n:n);if(null==o?void 0:o.then){let e=this.pending={pos:t};o.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>Ai(this.view.state,e,"hover tooltip")))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!function(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,n=null!==(t=null==r?void 0:r.end)&&void 0!==t?t:i;(i==n?this.view.posAtCoords(this.lastMove)==i:function(e,t,r,i,n,o){let s=document.createRange(),a=e.domAtPos(t),l=e.domAtPos(r);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let c=s.getClientRects();s.detach();for(let e=0;e<c.length;e++){let t=c[e];if(Math.max(t.top-n,n-t.bottom,t.left-i,i-t.right)<=o)return!0}return!1}(this.view,i,n,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Hs(e,t={}){let r=Ot.define(),i=Ve.define({create:()=>null,update(e,i){if(e&&(t.hideOnChange&&(i.docChanged||i.selection)||t.hideOn&&t.hideOn(i,e)))return null;if(e&&i.docChanged){let t=i.changes.mapPos(e.pos,-1,Qe.TrackDel);if(null==t)return null;let r=Object.assign(Object.create(null),e);r.pos=t,null!=e.end&&(r.end=i.changes.mapPos(e.end)),e=r}for(let t of i.effects)t.is(r)&&(e=t.value),t.is(Ns)&&(e=null);return e},provide:e=>js.from(e)});return[i,Mi.define((n=>new qs(n,e,i,r,t.hoverTime||300))),Ws]}const Ns=Ot.define(),Xs=qe.define({combine(e){let t,r;for(let i of e)t=t||i.topContainer,r=r||i.bottomContainer;return{topContainer:t,bottomContainer:r}}});function Fs(e,t){let r=e.plugin(Zs),i=r?r.specs.indexOf(t):-1;return i>-1?r.panels[i]:null}const Zs=Mi.fromClass(class{constructor(e){this.input=e.state.facet(Gs),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(Xs);this.top=new Us(e,!0,t.topContainer),this.bottom=new Us(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(Xs);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Us(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Us(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=e.state.facet(Gs);if(r!=this.input){let t=r.filter((e=>e)),i=[],n=[],o=[],s=[];for(let r of t){let t,a=this.specs.indexOf(r);a<0?(t=r(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),i.push(t),(t.top?n:o).push(t)}this.specs=t,this.panels=i,this.top.sync(n),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>Io.scrollMargins.of((t=>{let r=t.plugin(e);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}}))});class Us{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Vs(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Vs(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Vs(e){let t=e.nextSibling;return e.remove(),t}const Gs=qe.define({enables:Zs});class Ys extends $t{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ys.prototype.elementClass="",Ys.prototype.toDOM=void 0,Ys.prototype.mapMode=Qe.TrackBefore,Ys.prototype.startSide=Ys.prototype.endSide=-1,Ys.prototype.point=!0;const Ks=qe.define(),Js={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Dt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ea=qe.define();function ta(e){return[ia(),ea.of(Object.assign(Object.assign({},Js),e))]}const ra=qe.define({combine:e=>e.some((e=>e))});function ia(e){let t=[na];return e&&!1===e.fixed&&t.push(ra.of(!0)),t}const na=Mi.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(ea).map((t=>new la(e,t)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(ra),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,r=e.view.viewport,i=Math.min(t.to,r.to)-Math.max(t.from,r.from);this.syncGutters(i<.8*(r.to-r.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(ra)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let r=Dt.iter(this.view.state.facet(Ks),this.view.viewport.from),i=[],n=this.gutters.map((e=>new aa(e,this.view.viewport,-this.view.documentPadding.top)));for(let e of this.view.viewportLineBlocks){let t;if(Array.isArray(e.type)){for(let r of e.type)if(r.type==hi.Text){t=r;break}}else t=e.type==hi.Text?e:void 0;if(t){i.length&&(i=[]),sa(r,i,e.from);for(let e of n)e.line(this.view,t,i)}}for(let e of n)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(ea),r=e.state.facet(ea),i=e.docChanged||e.heightChanged||e.viewportChanged||!Dt.eq(e.startState.facet(Ks),e.state.facet(Ks),e.view.viewport.from,e.view.viewport.to);if(t==r)for(let t of this.gutters)t.update(e)&&(i=!0);else{i=!0;let n=[];for(let i of r){let r=t.indexOf(i);r<0?n.push(new la(this.view,i)):(this.gutters[r].update(e),n.push(this.gutters[r]))}for(let e of this.gutters)e.dom.remove(),n.indexOf(e)<0&&e.destroy();for(let e of n)this.dom.appendChild(e.dom);this.gutters=n}return i}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>Io.scrollMargins.of((t=>{let r=t.plugin(e);return r&&0!=r.gutters.length&&r.fixed?t.textDirection==Xi.LTR?{left:r.dom.offsetWidth}:{right:r.dom.offsetWidth}:null}))});function oa(e){return Array.isArray(e)?e:[e]}function sa(e,t,r){for(;e.value&&e.from<=r;)e.from==r&&t.push(e.value),e.next()}class aa{constructor(e,t,r){this.gutter=e,this.height=r,this.localMarkers=[],this.i=0,this.cursor=Dt.iter(e.markers,t.from)}line(e,t,r){this.localMarkers.length&&(this.localMarkers=[]),sa(this.cursor,this.localMarkers,t.from);let i=r.length?this.localMarkers.concat(r):this.localMarkers,n=this.gutter.config.lineMarker(e,t,i);n&&i.unshift(n);let o=this.gutter;if(0==i.length&&!o.config.renderEmptyElements)return;let s=t.top-this.height;if(this.i==o.elements.length){let r=new ca(e,t.height,s,i);o.elements.push(r),o.dom.appendChild(r.dom)}else o.elements[this.i].update(e,t.height,s,i);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class la{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,(i=>{let n=e.lineBlockAtHeight(i.clientY-e.documentTop);t.domEventHandlers[r](e,n,i)&&i.preventDefault()}));this.markers=oa(t.markers(e)),t.initialSpacer&&(this.spacer=new ca(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=oa(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let r=e.view.viewport;return!Dt.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class ca{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].compare(t[r]))return!1;return!0}(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let n=0,o=0;;){let s=o,a=n<t.length?t[n++]:null,l=!1;if(a){let e=a.elementClass;e&&(r+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(a)){s=e,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(i);let t=i.nextSibling;i.remove(),i=t}}if(!a)break;a.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),l&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}const ha=qe.define(),ua=qe.define({combine:e=>At(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let e in t){let i=r[e],n=t[e];r[e]=i?(e,t,r)=>i(e,t,r)||n(e,t,r):n}return r}})});class da extends Ys{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function fa(e,t){return e.state.facet(ua).formatNumber(t,e.state)}const pa=ea.compute([ua],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(ha),lineMarker:(e,t,r)=>r.some((e=>e.toDOM))?null:new da(fa(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(ua)!=e.state.facet(ua),initialSpacer:e=>new da(fa(e,ga(e.state.doc.lines))),updateSpacer(e,t){let r=fa(t.view,ga(t.view.state.doc.lines));return r==e.number?e:new da(r)},domEventHandlers:e.facet(ua).domEventHandlers})));function ga(e){let t=9;for(;t<e;)t=10*t+9;return t}const ma=1024;let va=0;class Oa{constructor(e,t){this.from=e,this.to=t}}class _a{constructor(e={}){this.id=va++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=wa.match(e)),t=>{let r=e(t);return void 0===r?null:[this,r]}}}_a.closedBy=new _a({deserialize:e=>e.split(" ")}),_a.openedBy=new _a({deserialize:e=>e.split(" ")}),_a.group=new _a({deserialize:e=>e.split(" ")}),_a.contextHash=new _a({perNode:!0}),_a.lookAhead=new _a({perNode:!0}),_a.mounted=new _a({perNode:!0});class ba{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}}const ya=Object.create(null);class wa{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):ya,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new wa(e.name||"",t,e.id,r);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(_a.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return e=>{for(let r=e.prop(_a.group),i=-1;i<(r?r.length:0);i++){let n=t[i<0?e.name:r[i]];if(n)return n}}}}wa.none=new wa("",Object.create(null),0,8);class Sa{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let t of e){let e=t(r);e&&(i||(i=Object.assign({},r.props)),i[e[0].id]=e[1])}t.push(i?new wa(r.name,i,r.id,r.flags):r)}return new Sa(t)}}const Ca=new WeakMap,xa=new WeakMap;var ka;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(ka||(ka={}));class Ta{constructor(e,t,r,i,n){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,n&&n.length){this.props=Object.create(null);for(let[e,t]of n)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(_a.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let r=e.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Ia(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Ca.get(this)||this.topNode,n=new Ia(i);return n.moveTo(e,t),Ca.set(this,n._tree),n}get topNode(){return new La(this,0,0,null)}resolve(e,t=0){let r=$a(Ca.get(this)||this.topNode,e,t,!1);return Ca.set(this,r),r}resolveInner(e,t=0){let r=$a(xa.get(this)||this.topNode,e,t,!0);return xa.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:n=this.length}=e;for(let o=this.cursor((e.mode||0)|ka.IncludeAnonymous);;){let e=!1;if(o.from<=n&&o.to>=i&&(o.type.isAnonymous||!1!==t(o))){if(o.firstChild())continue;e=!0}for(;e&&r&&!o.type.isAnonymous&&r(o),!o.nextSibling();){if(!o.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:qa(wa.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,r)=>new Ta(this.type,e,t,r,this.propValues)),e.makeTree||((e,t,r)=>new Ta(wa.none,e,t,r)))}static build(e){return function(e){var t;let{buffer:r,nodeSet:i,maxBufferLength:n=ma,reused:o=[],minRepeatType:s=i.types.length}=e,a=Array.isArray(r)?new Pa(r,r.length):r,l=i.types,c=0,h=0;function u(e,t,r,v,O){let{id:_,start:b,end:y,size:w}=a,S=h;for(;w<0;){if(a.next(),-1==w){let t=o[_];return r.push(t),void v.push(b-e)}if(-3==w)return void(c=_);if(-4==w)return void(h=_);throw new RangeError(`Unrecognized record size: ${w}`)}let C,x,k=l[_],T=b-e;if(y-b<=n&&(x=g(a.pos-t,O))){let t=new Uint16Array(x.size-x.skip),r=a.pos-x.size,n=t.length;for(;a.pos>r;)n=m(x.start,t,n);C=new Qa(t,y-x.start,i),T=x.start-e}else{let e=a.pos-w;a.next();let t=[],r=[],i=_>=s?_:-1,o=0,l=y;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-n&&(f(t,r,b,o,a.end,l,i,S),o=t.length,l=a.end),a.next()):u(b,e,t,r,i);if(i>=0&&o>0&&o<t.length&&f(t,r,b,o,b,l,i,S),t.reverse(),r.reverse(),i>-1&&o>0){let e=d(k);C=qa(k,t,r,0,t.length,0,y-b,e,e)}else C=p(k,t,r,y-b,S-y)}r.push(C),v.push(T)}function d(e){return(t,r,i)=>{let n,o,s=0,a=t.length-1;if(a>=0&&(n=t[a])instanceof Ta){if(!a&&n.type==e&&n.length==i)return n;(o=n.prop(_a.lookAhead))&&(s=r[a]+n.length+o)}return p(e,t,r,i,s)}}function f(e,t,r,n,o,s,a,l){let c=[],h=[];for(;e.length>n;)c.push(e.pop()),h.push(t.pop()+r-o);e.push(p(i.types[a],c,h,s-o,l-s)),t.push(o-r)}function p(e,t,r,i,n=0,o){if(c){let e=[_a.contextHash,c];o=o?[e].concat(o):[e]}if(n>25){let e=[_a.lookAhead,n];o=o?[e].concat(o):[e]}return new Ta(e,t,r,i,o)}function g(e,t){let r=a.fork(),i=0,o=0,l=0,c=r.end-n,h={size:0,start:0,skip:0};e:for(let n=r.pos-e;r.pos>n;){let e=r.size;if(r.id==t&&e>=0){h.size=i,h.start=o,h.skip=l,l+=4,i+=4,r.next();continue}let a=r.pos-e;if(e<0||a<n||r.start<c)break;let u=r.id>=s?4:0,d=r.start;for(r.next();r.pos>a;){if(r.size<0){if(-3!=r.size)break e;u+=4}else r.id>=s&&(u+=4);r.next()}o=d,i+=e,l+=u}return(t<0||i==e)&&(h.size=i,h.start=o,h.skip=l),h.size>4?h:void 0}function m(e,t,r){let{id:i,start:n,end:o,size:l}=a;if(a.next(),l>=0&&i<s){let s=r;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)r=m(e,t,r)}t[--r]=s,t[--r]=o-e,t[--r]=n-e,t[--r]=i}else-3==l?c=i:-4==l&&(h=i);return r}let v=[],O=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,v,O,-1);let _=null!==(t=e.length)&&void 0!==t?t:v.length?O[0]+v[0].length:0;return new Ta(l[e.topID],v.reverse(),O.reverse(),_)}(e)}}Ta.empty=new Ta(wa.none,[],[],0);class Pa{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Pa(this.buffer,this.index)}}class Qa{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return wa.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],n=i.name;if(/\W/.test(n)&&!i.isError&&(n=JSON.stringify(n)),r==(e+=4))return n;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return n+"("+o.join(",")+")"}findChild(e,t,r,i,n){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(Ra(n,i,o[a+1],o[a+2])&&(s=a,r>0));a=o[a+3]);return s}slice(e,t,r,i){let n=this.buffer,o=new Uint16Array(t-e);for(let i=e,s=0;i<t;)o[s++]=n[i++],o[s++]=n[i++]-r,o[s++]=n[i++]-r,o[s++]=n[i++]-e;return new Qa(o,i-r,this.set)}}function Ra(e,t,r,i){switch(e){case-2:return r<t;case-1:return i>=t&&r<t;case 0:return r<t&&i>t;case 1:return r<=t&&i>t;case 2:return i>t;case 4:return!0}}function Aa(e,t){let r=e.childBefore(t);for(;r;){let t=r.lastChild;if(!t||t.to!=r.to)break;t.type.isError&&t.from==t.to?(e=r,r=t.prevSibling):r=t}return e}function $a(e,t,r,i){for(var n;e.from==e.to||(r<1?e.from>=t:e.from>t)||(r>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof La&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=i?0:ka.IgnoreOverlays;if(i)for(let i=e,s=i.parent;s;i=s,s=i.parent)i instanceof La&&i.index<0&&(null===(n=s.enter(t,r,o))||void 0===n?void 0:n.from)!=i.from&&(e=s);for(;;){let i=e.enter(t,r,o);if(!i)return e;e=i}}class La{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,n=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o.from;if(Ra(i,r,c,c+l.length))if(l instanceof Qa){if(n&ka.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,r-c,i);if(s>-1)return new Ba(new Da(o,l,e,c),null,s)}else if(n&ka.IncludeAnonymous||!l.type.isAnonymous||ja(l)){let s;if(!(n&ka.IgnoreMounts)&&l.props&&(s=l.prop(_a.mounted))&&!s.overlay)return new La(s.tree,c,e,o);let a=new La(l,c,e,o);return n&ka.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,r,i)}}if(n&ka.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&ka.IgnoreOverlays)&&(i=this._tree.prop(_a.mounted))&&i.overlay){let r=e-this.from;for(let{from:e,to:n}of i.overlay)if((t>0?e<=r:e<r)&&(t<0?n>=r:n>r))return new La(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Ia(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return $a(this,e,t,!1)}resolveInner(e,t=0){return $a(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Aa(this,e)}getChild(e,t=null,r=null){let i=Ea(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Ea(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Ma(this,e)}}function Ea(e,t,r,i){let n=e.cursor(),o=[];if(!n.firstChild())return o;if(null!=r)for(;!n.type.is(r);)if(!n.nextSibling())return o;for(;;){if(null!=i&&n.type.is(i))return o;if(n.type.is(t)&&o.push(n.node),!n.nextSibling())return null==i?o:[]}}function Ma(e,t,r=t.length-1){for(let i=e.parent;r>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[r]&&t[r]!=i.name)return!1;r--}}return!0}class Da{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Ba{constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,r){let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return n<0?null:new Ba(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&ka.ExcludeBuffers)return null;let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new Ba(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ba(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ba(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Ia(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,n=r.buffer[this.index+3];if(n>i){let o=r.buffer[this.index+1],s=r.buffer[this.index+2];e.push(r.slice(i,n,o,s)),t.push(0)}return new Ta(this.type,e,t,this.to-this.from)}resolve(e,t=0){return $a(this,e,t,!1)}resolveInner(e,t=0){return $a(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Aa(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=Ea(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Ea(this,e,t,r)}get node(){return this}matchContext(e){return Ma(this,e)}}class Ia{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof La)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof La?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return!(n<0)&&(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?!(r&ka.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ka.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ka.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let e=r<0?0:this.stack[r]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(e)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;({index:t,_parent:r}=r))if(t>-1)for(let i=t+e,n=e<0?-1:r._tree.children.length;i!=n;i+=e){let e=r._tree.children[i];if(this.mode&ka.IncludeAnonymous||e instanceof Qa||!e.type.isAnonymous||ja(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,n=this.stack.length;n>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=n+1;break e}i=this.stack[--n]}for(let e=r;e<this.stack.length;e++)t=new Ba(this.buffer,t,this.stack[e]);return this.bufferNode=new Ba(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ma(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,n=this.stack.length-1;i>=0;n--){if(n<0)return Ma(this.node,e,i);let o=r[t.buffer[this.stack[n]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function ja(e){return e.children.some((e=>e instanceof Qa||!e.type.isAnonymous||ja(e)))}const za=new WeakMap;function Wa(e,t){if(!e.isAnonymous||t instanceof Qa||t.type!=e)return 1;let r=za.get(t);if(null==r){r=1;for(let i of t.children){if(i.type!=e||!(i instanceof Ta)){r=1;break}r+=Wa(e,i)}za.set(t,r)}return r}function qa(e,t,r,i,n,o,s,a,l){let c=0;for(let r=i;r<n;r++)c+=Wa(e,t[r]);let h=Math.ceil(1.5*c/8),u=[],d=[];return function t(r,i,n,s,a){for(let c=n;c<s;){let n=c,f=i[c],p=Wa(e,r[c]);for(c++;c<s;c++){let t=Wa(e,r[c]);if(p+t>=h)break;p+=t}if(c==n+1){if(p>h){let e=r[n];t(e.children,e.positions,0,e.children.length,i[n]+a);continue}u.push(r[n])}else{let t=i[c-1]+r[c-1].length-f;u.push(qa(e,r,i,n,c,f,t,null,l))}d.push(f+a-o)}}(t,r,i,n,0),(a||l)(u,d,s)}class Ha{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof Ba?this.setBuffer(e.context.buffer,e.index,t):e instanceof La&&this.map.set(e.tree,t)}get(e){return e instanceof Ba?this.getBuffer(e.context.buffer,e.index):e instanceof La?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Na{constructor(e,t,r,i,n=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(n?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],r=!1){let i=[new Na(0,e.length,e,0,!1,r)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],n=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;o&&o.from<h;){let t=o;if(a>=t.from||h<=t.to||l){let e=Math.max(t.from,a)-l,r=Math.min(t.to,h)-l;t=e>=r?null:new Na(e,r,t.tree,t.offset+l,s>0,!!c)}if(t&&i.push(t),o.to>h)break;o=n<e.length?e[n++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return i}}class Xa{startParse(e,t,r){return"string"==typeof e&&(e=new Fa(e)),r=r?r.length?r.map((e=>new Oa(e.from,e.to))):[new Oa(0,0)]:[new Oa(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let e=i.advance();if(e)return e}}}class Fa{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function Za(e){return(t,r,i,n)=>new Ya(t,e,r,i,n)}class Ua{constructor(e,t,r,i,n){this.parser=e,this.parse=t,this.overlay=r,this.target=i,this.ranges=n}}class Va{constructor(e,t,r,i,n,o,s){this.parser=e,this.predicate=t,this.mounts=r,this.index=i,this.start=n,this.target=o,this.prev=s,this.depth=0,this.ranges=[]}}const Ga=new _a({perNode:!0});class Ya{constructor(e,t,r,i,n){this.nest=t,this.input=r,this.fragments=i,this.ranges=n,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let e=this.baseParse.advance();if(!e)return null;if(this.baseParse=null,this.baseTree=e,this.startInner(),null!=this.stoppedAt)for(let e of this.inner)e.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let e=this.baseTree;return null!=this.stoppedAt&&(e=new Ta(e.type,e.children,e.positions,e.length,e.propValues.concat([[Ga,this.stoppedAt]]))),e}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[_a.mounted.id]=new ba(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new rl(this.fragments),t=null,r=null,i=new Ia(new La(this.baseTree,this.ranges[0].from,0,null),ka.IncludeAnonymous|ka.IgnoreMounts);e:for(let n,o;null==this.stoppedAt||i.from<this.stoppedAt;){let s,a=!0;if(e.hasNode(i)){if(t){let e=t.mounts.find((e=>e.frag.from<=i.from&&e.frag.to>=i.to&&e.mount.overlay));if(e)for(let r of e.mount.overlay){let n=r.from+e.pos,o=r.to+e.pos;n>=i.from&&o<=i.to&&!t.ranges.some((e=>e.from<o&&e.to>n))&&t.ranges.push({from:n,to:o})}}a=!1}else if(r&&(o=Ka(r.ranges,i.from,i.to)))a=2!=o;else if(!i.type.isAnonymous&&i.from<i.to&&(n=this.nest(i,this.input))){i.tree||el(i);let o=e.findMounts(i.from,n.parser);if("function"==typeof n.overlay)t=new Va(n.parser,n.overlay,o,this.inner.length,i.from,i.tree,t);else{let e=il(this.ranges,n.overlay||[new Oa(i.from,i.to)]);e.length&&this.inner.push(new Ua(n.parser,n.parser.startParse(this.input,ol(o,e),e),n.overlay?n.overlay.map((e=>new Oa(e.from-i.from,e.to-i.from))):null,i.tree,e)),n.overlay?e.length&&(r={ranges:e,depth:0,prev:r}):a=!1}}else t&&(s=t.predicate(i))&&(!0===s&&(s=new Oa(i.from,i.to)),s.from<s.to&&t.ranges.push(s));if(a&&i.firstChild())t&&t.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let e=il(this.ranges,t.ranges);e.length&&this.inner.splice(t.index,0,new Ua(t.parser,t.parser.startParse(this.input,ol(t.mounts,e),e),t.ranges.map((e=>new Oa(e.from-t.start,e.to-t.start))),t.target,e)),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}}function Ka(e,t,r){for(let i of e){if(i.from>=r)break;if(i.to>t)return i.from<=t&&i.to>=r?2:1}return 0}function Ja(e,t,r,i,n,o){if(t<r){let s=e.buffer[t+1],a=e.buffer[r-2];i.push(e.slice(t,r,s,a)),n.push(s-o)}}function el(e){let{node:t}=e,r=0;do{e.parent(),r++}while(!e.tree);let i=0,n=e.tree,o=0;for(;o=n.positions[i]+e.from,!(o<=t.from&&o+n.children[i].length>=t.to);i++);let s=n.children[i],a=s.buffer;n.children[i]=function e(r,i,n,l,c){let h=r;for(;a[h+2]+o<=t.from;)h=a[h+3];let u=[],d=[];Ja(s,r,h,u,d,l);let f=a[h+1],p=a[h+2],g=f+o==t.from&&p+o==t.to&&a[h]==t.type.id;return u.push(g?t.toTree():e(h+4,a[h+3],s.set.types[a[h]],f,p-f)),d.push(f-l),Ja(s,a[h+3],i,u,d,l),new Ta(n,u,d,c)}(0,a.length,wa.none,0,s.length);for(let i=0;i<=r;i++)e.childAfter(t.from)}class tl{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(ka.IncludeAnonymous|ka.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,ka.IgnoreOverlays|ka.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(!(t.children.length&&0==t.positions[0]&&t.children[0]instanceof Ta))break;t=t.children[0]}return!1}}class rl{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=null!==(t=r.tree.prop(Ga))&&void 0!==t?t:r.to,this.inner=new tl(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(e=t.tree.prop(Ga))&&void 0!==e?e:t.to,this.inner=new tl(t.tree,-t.offset)}}findMounts(e,t){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let e=this.inner.cursor.node;e;e=e.parent){let n=null===(r=e.tree)||void 0===r?void 0:r.prop(_a.mounted);if(n&&n.parser==t)for(let t=this.fragI;t<this.fragments.length;t++){let r=this.fragments[t];if(r.from>=e.to)break;r.tree==this.curFrag.tree&&i.push({frag:r,pos:e.from-r.offset,mount:n})}}}return i}}function il(e,t){let r=null,i=t;for(let n=1,o=0;n<e.length;n++){let s=e[n-1].to,a=e[n].from;for(;o<i.length;o++){let e=i[o];if(e.from>=a)break;e.to<=s||(r||(i=r=t.slice()),e.from<s?(r[o]=new Oa(e.from,s),e.to>a&&r.splice(o+1,0,new Oa(a,e.to))):e.to>a?r[o--]=new Oa(a,e.to):r.splice(o--,1))}}return i}function nl(e,t,r,i){let n=0,o=0,s=!1,a=!1,l=-1e9,c=[];for(;;){let h=n==e.length?1e9:s?e[n].to:e[n].from,u=o==t.length?1e9:a?t[o].to:t[o].from;if(s!=a){let e=Math.max(l,r),t=Math.min(h,u,i);e<t&&c.push(new Oa(e,t))}if(l=Math.min(h,u),1e9==l)break;h==l&&(s?(s=!1,n++):s=!0),u==l&&(a?(a=!1,o++):a=!0)}return c}function ol(e,t){let r=[];for(let{pos:i,mount:n,frag:o}of e){let e=i+(n.overlay?n.overlay[0].from:0),s=e+n.tree.length,a=Math.max(o.from,e),l=Math.min(o.to,s);if(n.overlay){let s=nl(t,n.overlay.map((e=>new Oa(e.from+i,e.to+i))),a,l);for(let t=0,i=a;;t++){let a=t==s.length,c=a?l:s[t].from;if(c>i&&r.push(new Na(i,c,n.tree,-e,o.from>=i,o.to<=c)),a)break;i=s[t].to}}else r.push(new Na(a,l,n.tree,-e,o.from>=e,o.to<=s))}return r}let sl=0;class al{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=sl++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new al([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new cl;return t=>t.modified.indexOf(e)>-1?t:cl.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let ll=0;class cl{constructor(){this.instances=[],this.id=ll++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find((r=>{return r.base==e&&(i=t,n=r.modified,i.length==n.length&&i.every(((e,t)=>e==n[t])));var i,n}));if(r)return r;let i=[],n=new al(i,e,t);for(let e of t)e.instances.push(n);let o=hl(t);for(let t of e.set)for(let e of o)i.push(cl.get(t,e));return n}}function hl(e){let t=[e];for(let r=0;r<e.length;r++)for(let i of hl(e.slice(0,r).concat(e.slice(r+1))))t.push(i);return t}function ul(e){let t=Object.create(null);for(let r in e){let i=e[r];Array.isArray(i)||(i=[i]);for(let e of r.split(" "))if(e){let r=[],n=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){n=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!i)throw new RangeError("Invalid path: "+e);if(r.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){n=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=r.length-1,a=r[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new fl(i,n,s>0?r.slice(0,s):null);t[a]=l.sort(t[a])}}return dl.add(t)}const dl=new _a;class fl{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function pl(e,t){let r=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)r[e.id]=t.class;else r[t.tag.id]=t.class;let{scope:i,all:n=null}=t||{};return{style:e=>{let t=n;for(let i of e)for(let e of i.set){let i=r[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}function gl(e,t){let r=null;for(let i of e){let e=i.style(t);e&&(r=r?r+" "+e:e)}return r}function ml(e,t,r,i=0,n=e.length){let o=new vl(i,Array.isArray(t)?t:[t],r);o.highlightRange(e.cursor(),i,n,"",o.highlighters),o.flush(n)}class vl{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,n){let{type:o,from:s,to:a}=e;if(s>=r||a<=t)return;o.isTop&&(n=this.highlighters.filter((e=>!e.scope||e.scope(o))));let l=i,c=o.prop(dl),h=!1;for(;c;){if(!c.context||e.matchContext(c.context)){let e=gl(n,c.tags);e&&(l&&(l+=" "),l+=e,1==c.mode?i+=(i?" ":"")+e:0==c.mode&&(h=!0));break}c=c.next}if(this.startSpan(e.from,l),h)return;let u=e.tree&&e.tree.prop(_a.mounted);if(u&&u.overlay){let o=e.node.enter(u.overlay[0].from+s,1),c=this.highlighters.filter((e=>!e.scope||e.scope(u.tree.type))),h=e.firstChild();for(let d=0,f=s;;d++){let p=d<u.overlay.length?u.overlay[d]:null,g=p?p.from+s:a,m=Math.max(t,f),v=Math.min(r,g);if(m<v&&h)for(;e.from<v&&(this.highlightRange(e,m,v,i,n),this.startSpan(Math.min(r,e.to),l),!(e.to>=g)&&e.nextSibling()););if(!p||g>r)break;f=p.to+s,f>t&&(this.highlightRange(o.cursor(),Math.max(t,p.from+s),Math.min(r,f),i,c),this.startSpan(f,l))}h&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,n),this.startSpan(Math.min(r,e.to),l)}}while(e.nextSibling());e.parent()}}}const Ol=al.define,_l=Ol(),bl=Ol(),yl=Ol(bl),wl=Ol(bl),Sl=Ol(),Cl=Ol(Sl),xl=Ol(Sl),kl=Ol(),Tl=Ol(kl),Pl=Ol(),Ql=Ol(),Rl=Ol(),Al=Ol(Rl),$l=Ol(),Ll={comment:_l,lineComment:Ol(_l),blockComment:Ol(_l),docComment:Ol(_l),name:bl,variableName:Ol(bl),typeName:yl,tagName:Ol(yl),propertyName:wl,attributeName:Ol(wl),className:Ol(bl),labelName:Ol(bl),namespace:Ol(bl),macroName:Ol(bl),literal:Sl,string:Cl,docString:Ol(Cl),character:Ol(Cl),attributeValue:Ol(Cl),number:xl,integer:Ol(xl),float:Ol(xl),bool:Ol(Sl),regexp:Ol(Sl),escape:Ol(Sl),color:Ol(Sl),url:Ol(Sl),keyword:Pl,self:Ol(Pl),null:Ol(Pl),atom:Ol(Pl),unit:Ol(Pl),modifier:Ol(Pl),operatorKeyword:Ol(Pl),controlKeyword:Ol(Pl),definitionKeyword:Ol(Pl),moduleKeyword:Ol(Pl),operator:Ql,derefOperator:Ol(Ql),arithmeticOperator:Ol(Ql),logicOperator:Ol(Ql),bitwiseOperator:Ol(Ql),compareOperator:Ol(Ql),updateOperator:Ol(Ql),definitionOperator:Ol(Ql),typeOperator:Ol(Ql),controlOperator:Ol(Ql),punctuation:Rl,separator:Ol(Rl),bracket:Al,angleBracket:Ol(Al),squareBracket:Ol(Al),paren:Ol(Al),brace:Ol(Al),content:kl,heading:Tl,heading1:Ol(Tl),heading2:Ol(Tl),heading3:Ol(Tl),heading4:Ol(Tl),heading5:Ol(Tl),heading6:Ol(Tl),contentSeparator:Ol(kl),list:Ol(kl),quote:Ol(kl),emphasis:Ol(kl),strong:Ol(kl),link:Ol(kl),monospace:Ol(kl),strikethrough:Ol(kl),inserted:Ol(),deleted:Ol(),changed:Ol(),invalid:Ol(),meta:$l,documentMeta:Ol($l),annotation:Ol($l),processingInstruction:Ol($l),definition:al.defineModifier(),constant:al.defineModifier(),function:al.defineModifier(),standard:al.defineModifier(),local:al.defineModifier(),special:al.defineModifier()};var El;pl([{tag:Ll.link,class:"tok-link"},{tag:Ll.heading,class:"tok-heading"},{tag:Ll.emphasis,class:"tok-emphasis"},{tag:Ll.strong,class:"tok-strong"},{tag:Ll.keyword,class:"tok-keyword"},{tag:Ll.atom,class:"tok-atom"},{tag:Ll.bool,class:"tok-bool"},{tag:Ll.url,class:"tok-url"},{tag:Ll.labelName,class:"tok-labelName"},{tag:Ll.inserted,class:"tok-inserted"},{tag:Ll.deleted,class:"tok-deleted"},{tag:Ll.literal,class:"tok-literal"},{tag:Ll.string,class:"tok-string"},{tag:Ll.number,class:"tok-number"},{tag:[Ll.regexp,Ll.escape,Ll.special(Ll.string)],class:"tok-string2"},{tag:Ll.variableName,class:"tok-variableName"},{tag:Ll.local(Ll.variableName),class:"tok-variableName tok-local"},{tag:Ll.definition(Ll.variableName),class:"tok-variableName tok-definition"},{tag:Ll.special(Ll.variableName),class:"tok-variableName2"},{tag:Ll.definition(Ll.propertyName),class:"tok-propertyName tok-definition"},{tag:Ll.typeName,class:"tok-typeName"},{tag:Ll.namespace,class:"tok-namespace"},{tag:Ll.className,class:"tok-className"},{tag:Ll.macroName,class:"tok-macroName"},{tag:Ll.propertyName,class:"tok-propertyName"},{tag:Ll.operator,class:"tok-operator"},{tag:Ll.comment,class:"tok-comment"},{tag:Ll.meta,class:"tok-meta"},{tag:Ll.invalid,class:"tok-invalid"},{tag:Ll.punctuation,class:"tok-punctuation"}]);const Ml=new _a;function Dl(e){return qe.define({combine:e?t=>t.concat(e):void 0})}class Bl{constructor(e,t,r=[]){this.data=e,Rt.prototype.hasOwnProperty("tree")||Object.defineProperty(Rt.prototype,"tree",{get(){return zl(this)}}),this.parser=t,this.extension=[Vl.of(this),Rt.languageData.of(((e,t,r)=>e.facet(Il(e,t,r))))].concat(r)}isActiveAt(e,t,r=-1){return Il(e,t,r)==this.data}findRegions(e){let t=e.facet(Vl);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(e,t)=>{if(e.prop(Ml)==this.data)return void r.push({from:t,to:t+e.length});let n=e.prop(_a.mounted);if(n){if(n.tree.prop(Ml)==this.data){if(n.overlay)for(let e of n.overlay)r.push({from:e.from+t,to:e.to+t});else r.push({from:t,to:t+e.length});return}if(n.overlay){let e=r.length;if(i(n.tree,n.overlay[0].from+t),r.length>e)return}}for(let r=0;r<e.children.length;r++){let n=e.children[r];n instanceof Ta&&i(n,e.positions[r]+t)}};return i(zl(e),0),r}get allowsNesting(){return!0}}function Il(e,t,r){let i=e.facet(Vl);if(!i)return null;let n=i.data;if(i.allowsNesting)for(let i=zl(e).topNode;i;i=i.enter(t,r,ka.ExcludeBuffers))n=i.type.prop(Ml)||n;return n}Bl.setState=Ot.define();class jl extends Bl{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=Dl(e.languageData);return new jl(t,e.parser.configure({props:[Ml.add((e=>e.isTop?t:void 0))]}))}configure(e){return new jl(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function zl(e){let t=e.field(Bl.state,!1);return t?t.tree:Ta.empty}class Wl{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let ql=null;class Hl{constructor(e,t,r=[],i,n,o,s,a){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=n,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Hl(e,t,[],Ta.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Wl(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ta.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var r;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(Na.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(r=this.parse.stoppedAt)&&void 0!==r?r:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Na.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ql;ql=this;try{return e()}finally{ql=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Nl(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:n,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,r,i,n)=>t.push({fromA:e,toA:r,fromB:i,toB:n}))),r=Na.applyChanges(r,t),i=Ta.empty,n=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let r=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);r<i&&s.push({from:r,to:i})}}}return new Hl(this.parser,t,r,i,n,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:r,to:i}=this.skipped[t];r<e.to&&i>e.from&&(this.fragments=Nl(this.fragments,r,i),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Xa{createParse(t,r,i){let n=i[0].from,o=i[i.length-1].to;return{parsedPos:n,advance(){let t=ql;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new Ta(wa.none,[],[],o-n)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return ql}}function Nl(e,t,r){return Na.applyChanges(e,[{fromA:t,toA:r,fromB:t,toB:r}])}class Xl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Xl(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Hl.create(e.facet(Vl).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Xl(r)}}Bl.state=Ve.define({create:Xl.init,update(e,t){for(let e of t.effects)if(e.is(Bl.setState))return e.value;return t.startState.facet(Vl)!=t.state.facet(Vl)?Xl.init(t.state):e.apply(t)}});let Fl=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(Fl=e=>{let t=-1,r=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(r):cancelIdleCallback(t)});const Zl="undefined"!=typeof navigator&&(null===(El=navigator.scheduling)||void 0===El?void 0:El.isInputPending)?()=>navigator.scheduling.isInputPending():null,Ul=Mi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Bl.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Bl.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=Fl(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,n=r.field(Bl.state);if(n.tree==n.context.tree&&n.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Zl?Math.max(25,e.timeRemaining()-5):1e9),s=n.context.treeLen<i&&r.doc.length>i+1e3,a=n.context.work((()=>Zl&&Zl()||Date.now()>o),i+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:Bl.setState.of(new Xl(n.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Ai(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Vl=qe.define({combine:e=>e.length?e[0]:null,enables:[Bl.state,Ul]});class Gl{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class Yl{constructor(e,t,r,i,n,o){this.name=e,this.alias=t,this.extensions=r,this.filename=i,this.loadFunc=n,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then((e=>this.support=e),(e=>{throw this.loading=null,e})))}static of(e){let{load:t,support:r}=e;if(!t){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(r)}return new Yl(e.name,(e.alias||[]).concat(e.name).map((e=>e.toLowerCase())),e.extensions||[],e.filename,t,r)}static matchFilename(e,t){for(let r of e)if(r.filename&&r.filename.test(t))return r;let r=/\.([^.]+)$/.exec(t);if(r)for(let t of e)if(t.extensions.indexOf(r[1])>-1)return t;return null}static matchLanguageName(e,t,r=!0){t=t.toLowerCase();for(let r of e)if(r.alias.some((e=>e==t)))return r;if(r)for(let r of e)for(let e of r.alias){let i=t.indexOf(e);if(i>-1&&(e.length>2||!/\w/.test(t[i-1])&&!/\w/.test(t[i+e.length])))return r}return null}}const Kl=qe.define(),Jl=qe.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function ec(e){let t=e.facet(Jl);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function tc(e,t){let r="",i=e.tabSize;if(9==e.facet(Jl).charCodeAt(0))for(;t>=i;)r+="\t",t-=i;for(let e=0;e<t;e++)r+=" ";return r}function rc(e,t){e instanceof Rt&&(e=new ic(e));for(let r of e.state.facet(Kl)){let i=r(e,t);if(null!=i)return i}let r=zl(e.state);return r?function(e,t,r){return sc(t.resolveInner(r).enterUnfinishedNodesBefore(r),r,e)}(e,r,t):null}class ic{constructor(e,t={}){this.state=e,this.options=t,this.unit=ec(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:n}=this.options;return null!=i&&i>=r.from&&i<=r.to?n&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),n=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(n+=o-this.countColumn(r,r.search(/\S|$/))),n}countColumn(e,t=e.length){return Ut(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),n=this.options.overrideIndentation;if(n){let e=n(i);if(e>-1)return e}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const nc=new _a;function oc(e){let t=e.type.prop(nc);if(t)return t;let r,i=e.firstChild;if(i&&(r=i.type.prop(_a.closedBy))){let t=e.lastChild,i=t&&r.indexOf(t.name)>-1;return e=>uc(e,!0,1,void 0,i&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?ac:null}function sc(e,t,r){for(;e;e=e.parent){let i=oc(e);if(i)return i(lc.create(r,t,e))}return null}function ac(){return 0}class lc extends ic{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new lc(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(cc(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?sc(e,this.pos,this.base):0}}function cc(e,t){for(let r=t;r;r=r.parent)if(e==r)return!0;return!1}function hc({closing:e,align:t=!0,units:r=1}){return i=>uc(i,t,r,e)}function uc(e,t,r,i,n){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||n==e.pos+s,l=t?function(e){let t=e.node,r=t.childAfter(t.from),i=t.lastChild;if(!r)return null;let n=e.options.simulateBreak,o=e.state.doc.lineAt(r.from),s=null==n||n<=o.from?o.to:Math.min(o.to,n);for(let e=r.to;;){let n=t.childAfter(e);if(!n||n==i)return null;if(!n.type.isSkipped)return n.from<s?r:null;e=n.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*r)}function dc({except:e,units:t=1}={}){return r=>{let i=e&&e.test(r.textAfter);return r.baseIndent+(i?0:t*r.unit)}}const fc=qe.define(),pc=new _a;function gc(e){let t=e.firstChild,r=e.lastChild;return t&&t.to<r.from?{from:t.to,to:r.type.isError?e.to:r.from}:null}function mc(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function vc(e,t,r){for(let i of e.facet(fc)){let n=i(e,t,r);if(n)return n}return function(e,t,r){let i=zl(e);if(i.length<r)return null;let n=null;for(let o=i.resolveInner(r);o;o=o.parent){if(o.to<=r||o.from>r)continue;if(n&&o.from<t)break;let s=o.type.prop(pc);if(s&&(o.to<i.length-50||i.length==e.doc.length||!mc(o))){let i=s(o,e);i&&i.from<=r&&i.from>=t&&i.to>r&&(n=i)}}return n}(e,t,r)}function Oc(e,t){let r=t.mapPos(e.from,1),i=t.mapPos(e.to,-1);return r>=i?void 0:{from:r,to:i}}const _c=Ot.define({map:Oc}),bc=Ot.define({map:Oc});function yc(e){let t=[];for(let{head:r}of e.state.selection.ranges)t.some((e=>e.from<=r&&e.to>=r))||t.push(e.lineBlockAt(r));return t}const wc=Ve.define({create:()=>ui.none,update(e,t){e=e.map(t.changes);for(let r of t.effects)r.is(_c)&&!Cc(e,r.value.from,r.value.to)?e=e.update({add:[Ac.range(r.value.from,r.value.to)]}):r.is(bc)&&(e=e.update({filter:(e,t)=>r.value.from!=e||r.value.to!=t,filterFrom:r.value.from,filterTo:r.value.to}));if(t.selection){let r=!1,{head:i}=t.selection.main;e.between(i,i,((e,t)=>{e<i&&t>i&&(r=!0)})),r&&(e=e.update({filterFrom:i,filterTo:i,filter:(e,t)=>t<=i||e>=i}))}return e},provide:e=>Io.decorations.from(e),toJSON(e,t){let r=[];return e.between(0,t.doc.length,((e,t)=>{r.push(e,t)})),r},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let r=0;r<e.length;){let i=e[r++],n=e[r++];if("number"!=typeof i||"number"!=typeof n)throw new RangeError("Invalid JSON for fold state");t.push(Ac.range(i,n))}return ui.set(t,!0)}});function Sc(e,t,r){var i;let n=null;return null===(i=e.field(wc,!1))||void 0===i||i.between(t,r,((e,t)=>{(!n||n.from>e)&&(n={from:e,to:t})})),n}function Cc(e,t,r){let i=!1;return e.between(t,t,((e,n)=>{e==t&&n==r&&(i=!0)})),i}function xc(e,t){return e.field(wc,!1)?t:t.concat(Ot.appendConfig.of(Rc()))}function kc(e,t,r=!0){let i=e.state.doc.lineAt(t.from).number,n=e.state.doc.lineAt(t.to).number;return Io.announce.of(`${e.state.phrase(r?"Folded lines":"Unfolded lines")} ${i} ${e.state.phrase("to")} ${n}.`)}const Tc=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of yc(e)){let r=vc(e.state,t.from,t.to);if(r)return e.dispatch({effects:xc(e.state,[_c.of(r),kc(e,r)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(wc,!1))return!1;let t=[];for(let r of yc(e)){let i=Sc(e.state,r.from,r.to);i&&t.push(bc.of(i),kc(e,i,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,r=[];for(let i=0;i<t.doc.length;){let n=e.lineBlockAt(i),o=vc(t,n.from,n.to);o&&r.push(_c.of(o)),i=(o?e.lineBlockAt(o.to):n).to+1}return r.length&&e.dispatch({effects:xc(e.state,r)}),!!r.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(wc,!1);if(!t||!t.size)return!1;let r=[];return t.between(0,e.state.doc.length,((e,t)=>{r.push(bc.of({from:e,to:t}))})),e.dispatch({effects:r}),!0}}],Pc={placeholderDOM:null,placeholderText:"…"},Qc=qe.define({combine:e=>At(e,Pc)});function Rc(e){let t=[wc,Ec];return e&&t.push(Qc.of(e)),t}const Ac=ui.replace({widget:new class extends ci{toDOM(e){let{state:t}=e,r=t.facet(Qc),i=t=>{let r=e.lineBlockAt(e.posAtDOM(t.target)),i=Sc(e.state,r.from,r.to);i&&e.dispatch({effects:bc.of(i)}),t.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(e,i);let n=document.createElement("span");return n.textContent=r.placeholderText,n.setAttribute("aria-label",t.phrase("folded code")),n.title=t.phrase("unfold"),n.className="cm-foldPlaceholder",n.onclick=i,n}}}),$c={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Lc extends Ys{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}const Ec=Io.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Mc{constructor(e,t){let r;function i(e){let t=Jt.newName();return(r||(r=Object.create(null)))["."+t]=e,t}const n="string"==typeof t.all?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof Bl?e=>e.prop(Ml)==o.data:o?e=>e==o:void 0,this.style=pl(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:n}).style,this.module=r?new Jt(r):null,this.themeType=t.themeType}static define(e,t){return new Mc(e,t||{})}}const Dc=qe.define(),Bc=qe.define({combine:e=>e.length?[e[0]]:null});function Ic(e){let t=e.facet(Dc);return t.length?t:e.facet(Bc)}function jc(e,t){let r,i=[Wc];return e instanceof Mc&&(e.module&&i.push(Io.styleModule.of(e.module)),r=e.themeType),(null==t?void 0:t.fallback)?i.push(Bc.of(e)):r?i.push(Dc.computeN([Io.darkTheme],(t=>t.facet(Io.darkTheme)==("dark"==r)?[e]:[]))):i.push(Dc.of(e)),i}class zc{constructor(e){this.markCache=Object.create(null),this.tree=zl(e.state),this.decorations=this.buildDeco(e,Ic(e.state))}update(e){let t=zl(e.state),r=Ic(e.state),i=r!=Ic(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return ui.none;let r=new Bt;for(let{from:i,to:n}of e.visibleRanges)ml(this.tree,t,((e,t,i)=>{r.add(e,t,this.markCache[i]||(this.markCache[i]=ui.mark({class:i})))}),i,n);return r.finish()}}const Wc=tt.high(Mi.fromClass(zc,{decorations:e=>e.decorations})),qc=Mc.define([{tag:Ll.meta,color:"#7a757a"},{tag:Ll.link,textDecoration:"underline"},{tag:Ll.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ll.emphasis,fontStyle:"italic"},{tag:Ll.strong,fontWeight:"bold"},{tag:Ll.strikethrough,textDecoration:"line-through"},{tag:Ll.keyword,color:"#708"},{tag:[Ll.atom,Ll.bool,Ll.url,Ll.contentSeparator,Ll.labelName],color:"#219"},{tag:[Ll.literal,Ll.inserted],color:"#164"},{tag:[Ll.string,Ll.deleted],color:"#a11"},{tag:[Ll.regexp,Ll.escape,Ll.special(Ll.string)],color:"#e40"},{tag:Ll.definition(Ll.variableName),color:"#00f"},{tag:Ll.local(Ll.variableName),color:"#30a"},{tag:[Ll.typeName,Ll.namespace],color:"#085"},{tag:Ll.className,color:"#167"},{tag:[Ll.special(Ll.variableName),Ll.macroName],color:"#256"},{tag:Ll.definition(Ll.propertyName),color:"#00c"},{tag:Ll.comment,color:"#940"},{tag:Ll.invalid,color:"#f00"}]),Hc=Io.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Nc="()[]{}",Xc=qe.define({combine:e=>At(e,{afterCursor:!0,brackets:Nc,maxScanDistance:1e4,renderMatch:Uc})}),Fc=ui.mark({class:"cm-matchingBracket"}),Zc=ui.mark({class:"cm-nonmatchingBracket"});function Uc(e){let t=[],r=e.matched?Fc:Zc;return t.push(r.range(e.start.from,e.start.to)),e.end&&t.push(r.range(e.end.from,e.end.to)),t}const Vc=Ve.define({create:()=>ui.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let r=[],i=t.state.facet(Xc);for(let e of t.state.selection.ranges){if(!e.empty)continue;let n=Jc(t.state,e.head,-1,i)||e.head>0&&Jc(t.state,e.head-1,1,i)||i.afterCursor&&(Jc(t.state,e.head,1,i)||e.head<t.state.doc.length&&Jc(t.state,e.head+1,-1,i));n&&(r=r.concat(i.renderMatch(n,t.state)))}return ui.set(r,!0)},provide:e=>Io.decorations.from(e)}),Gc=[Vc,Hc];function Yc(e={}){return[Xc.of(e),Gc]}function Kc(e,t,r){let i=e.prop(t<0?_a.openedBy:_a.closedBy);if(i)return i;if(1==e.name.length){let i=r.indexOf(e.name);if(i>-1&&i%2==(t<0?1:0))return[r[i+t]]}return null}function Jc(e,t,r,i={}){let n=i.maxScanDistance||1e4,o=i.brackets||Nc,s=zl(e),a=s.resolveInner(t,r);for(let i=a;i;i=i.parent){let n=Kc(i.type,r,o);if(n&&i.from<i.to)return eh(e,t,r,i,n,o)}return function(e,t,r,i,n,o,s){let a=r<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=r>0)return null;let c={from:r<0?t-1:t,to:r>0?t+1:t},h=e.doc.iterRange(t,r>0?e.doc.length:0),u=0;for(let e=0;!h.next().done&&e<=o;){let o=h.value;r<0&&(e+=o.length);let a=t+e*r;for(let e=r>0?0:o.length-1,t=r>0?o.length:-1;e!=t;e+=r){let t=s.indexOf(o[e]);if(!(t<0||i.resolveInner(a+e,1).type!=n))if(t%2==0==r>0)u++;else{if(1==u)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};u--}}r>0&&(e+=o.length)}return h.done?{start:c,matched:!1}:null}(e,t,r,s,a.type,n,o)}function eh(e,t,r,i,n,o){let s=i.parent,a={from:i.from,to:i.to},l=0,c=null==s?void 0:s.cursor();if(c&&(r<0?c.childBefore(i.from):c.childAfter(i.to)))do{if(r<0?c.to<=i.from:c.from>=i.to){if(0==l&&n.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(Kc(c.type,r,o))l++;else if(Kc(c.type,-r,o)&&(l--,0==l))return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1}}}while(r<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}const th=Object.create(null),rh=[wa.none],ih=[],nh=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])nh[e]=sh(th,t);function oh(e,t){ih.indexOf(e)>-1||(ih.push(e),console.warn(t))}function sh(e,t){let r=null;for(let i of t.split(".")){let t=e[i]||Ll[i];t?"function"==typeof t?r?r=t(r):oh(i,`Modifier ${i} used at start of tag`):r?oh(i,`Tag ${i} used as modifier`):r=t:oh(i,`Unknown highlighting tag ${i}`)}if(!r)return 0;let i=t.replace(/ /g,"_"),n=wa.define({id:rh.length,name:i,props:[ul({[i]:r})]});return rh.push(n),n.id}function ah(e,t){return({state:r,dispatch:i})=>{if(r.readOnly)return!1;let n=e(t,r);return!!n&&(i(r.update(n)),!0)}}const lh=ah(fh,0),ch=ah(dh,0),hh=ah(((e,t)=>dh(e,t,function(e){let t=[];for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),n=r.to<=i.to?i:e.doc.lineAt(r.to),o=t.length-1;o>=0&&t[o].to>i.from?t[o].to=n.to:t.push({from:i.from,to:n.to})}return t}(t))),0);function uh(e,t=e.selection.main.head){let r=e.languageDataAt("commentTokens",t);return r.length?r[0]:{}}function dh(e,t,r=t.selection.ranges){let i=r.map((e=>uh(t,e.from).block));if(!i.every((e=>e)))return null;let n=r.map(((e,r)=>function(e,{open:t,close:r},i,n){let o,s,a=e.sliceDoc(i-50,i),l=e.sliceDoc(n,n+50),c=/\s*$/.exec(a)[0].length,h=/^\s*/.exec(l)[0].length,u=a.length-c;if(a.slice(u-t.length,u)==t&&l.slice(h,h+r.length)==r)return{open:{pos:i-c,margin:c&&1},close:{pos:n+h,margin:h&&1}};n-i<=100?o=s=e.sliceDoc(i,n):(o=e.sliceDoc(i,i+50),s=e.sliceDoc(n-50,n));let d=/^\s*/.exec(o)[0].length,f=/\s*$/.exec(s)[0].length,p=s.length-f-r.length;return o.slice(d,d+t.length)==t&&s.slice(p,p+r.length)==r?{open:{pos:i+d+t.length,margin:/\s/.test(o.charAt(d+t.length))?1:0},close:{pos:n-f-r.length,margin:/\s/.test(s.charAt(p-1))?1:0}}:null}(t,i[r],e.from,e.to)));if(2!=e&&!n.every((e=>e)))return{changes:t.changes(r.map(((e,t)=>n[t]?[]:[{from:e.from,insert:i[t].open+" "},{from:e.to,insert:" "+i[t].close}])))};if(1!=e&&n.some((e=>e))){let e=[];for(let t,r=0;r<n.length;r++)if(t=n[r]){let n=i[r],{open:o,close:s}=t;e.push({from:o.pos-n.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+n.close.length})}return{changes:e}}return null}function fh(e,t,r=t.selection.ranges){let i=[],n=-1;for(let{from:e,to:o}of r){let r=i.length,s=1e9;for(let r=e;r<=o;){let a=t.doc.lineAt(r);if(a.from>n&&(e==o||o>a.from)){n=a.from;let e=uh(t,r).line;if(!e)continue;let o=/^\s*/.exec(a.text)[0].length,l=o==a.length,c=a.text.slice(o,o+e.length)==e?o:-1;o<a.text.length&&o<s&&(s=o),i.push({line:a,comment:c,token:e,indent:o,empty:l,single:!1})}r=a.to+1}if(s<1e9)for(let e=r;e<i.length;e++)i[e].indent<i[e].line.text.length&&(i[e].indent=s);i.length==r+1&&(i[r].single=!0)}if(2!=e&&i.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:r,indent:n,empty:o,single:s}of i)!s&&o||e.push({from:t.from+n,insert:r+" "});let r=t.changes(e);return{changes:r,selection:t.selection.map(r,1)}}if(1!=e&&i.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:r,token:n}of i)if(r>=0){let i=t.from+r,o=i+n.length;" "==t.text[o-t.from]&&o++,e.push({from:i,to:o})}return{changes:e}}return null}const ph=gt.define(),gh=gt.define(),mh=qe.define(),vh=qe.define({combine:e=>At(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})});const Oh=Ve.define({create:()=>Eh.empty,update(e,t){let r=t.state.facet(vh),i=t.annotation(ph);if(i){let n=t.docChanged?je.single(function(e){let t=0;return e.iterChangedRanges(((e,r)=>t=r)),t}(t.changes)):void 0,o=xh.fromTransaction(t,n),s=i.side,a=0==s?e.undone:e.done;return a=o?kh(a,a.length,r.minDepth,o):Qh(a,t.startState.selection),new Eh(0==s?i.rest:a,0==s?a:i.rest)}let n=t.annotation(gh);if("full"!=n&&"before"!=n||(e=e.isolate()),!1===t.annotation(_t.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=xh.fromTransaction(t),s=t.annotation(_t.time),a=t.annotation(_t.userEvent);return o?e=e.addChanges(o,s,a,r.newGroupDelay,r.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,s,a,r.newGroupDelay)),"full"!=n&&"after"!=n||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new Eh(e.done.map(xh.fromJSON),e.undone.map(xh.fromJSON))});function _h(e={}){return[Oh,vh.of(e),Io.domEventHandlers({beforeinput(e,t){let r="historyUndo"==e.inputType?yh:"historyRedo"==e.inputType?wh:null;return!!r&&(e.preventDefault(),r(t))}})]}function bh(e,t){return function({state:r,dispatch:i}){if(!t&&r.readOnly)return!1;let n=r.field(Oh,!1);if(!n)return!1;let o=n.pop(e,r,t);return!!o&&(i(o),!0)}}const yh=bh(0,!1),wh=bh(1,!1),Sh=bh(0,!0),Ch=bh(1,!0);class xh{constructor(e,t,r,i,n){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=n}setSelAfter(e){return new xh(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(r=this.startSelection)||void 0===r?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new xh(e.changes&&Ae.fromJSON(e.changes),[],e.mapped&&Re.fromJSON(e.mapped),e.startSelection&&je.fromJSON(e.startSelection),e.selectionsAfter.map(je.fromJSON))}static fromTransaction(e,t){let r=Ph;for(let t of e.startState.facet(mh)){let i=t(e);i.length&&(r=r.concat(i))}return!r.length&&e.changes.empty?null:new xh(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,Ph)}static selection(e){return new xh(void 0,Ph,void 0,void 0,e)}}function kh(e,t,r,i){let n=t+1>r+20?t-r-1:0,o=e.slice(n,t);return o.push(i),o}function Th(e,t){return e.length?t.length?e.concat(t):e:t}const Ph=[];function Qh(e,t){if(e.length){let r=e[e.length-1],i=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-200));return i.length&&i[i.length-1].eq(t)?e:(i.push(t),kh(e,e.length-1,1e9,r.setSelAfter(i)))}return[xh.selection([t])]}function Rh(e){let t=e[e.length-1],r=e.slice();return r[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),r}function Ah(e,t){if(!e.length)return e;let r=e.length,i=Ph;for(;r;){let n=$h(e[r-1],t,i);if(n.changes&&!n.changes.empty||n.effects.length){let t=e.slice(0,r);return t[r-1]=n,t}t=n.mapped,r--,i=n.selectionsAfter}return i.length?[xh.selection(i)]:Ph}function $h(e,t,r){let i=Th(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):Ph,r);if(!e.changes)return xh.selection(i);let n=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new xh(n,Ot.mapEffects(e.effects,t),s,e.startSelection.map(o),i)}const Lh=/^(input\.type|delete)($|\.)/;class Eh{constructor(e,t,r=0,i){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Eh(this.done,this.undone):this}addChanges(e,t,r,i,n){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!r||Lh.test(r))&&(!s.selectionsAfter.length&&t-this.prevTime<i&&function(e,t){let r=[],i=!1;return e.iterChangedRanges(((e,t)=>r.push(e,t))),t.iterChangedRanges(((e,t,n,o)=>{for(let e=0;e<r.length;){let t=r[e++],s=r[e++];o>=t&&n<=s&&(i=!0)}})),i}(s.changes,e.changes)||"input.type.compose"==r)?kh(o,o.length-1,n,new xh(e.changes.compose(s.changes),Th(e.effects,s.effects),s.mapped,s.startSelection,Ph)):kh(o,o.length,n,e),new Eh(o,Ph,t,r)}addSelection(e,t,r,i){let n=this.done.length?this.done[this.done.length-1].selectionsAfter:Ph;return n.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&(o=n[n.length-1],s=e,o.ranges.length==s.ranges.length&&0===o.ranges.filter(((e,t)=>e.empty!=s.ranges[t].empty)).length)?this:new Eh(Qh(this.done,e),this.undone,t,r);var o,s}addMapping(e){return new Eh(Ah(this.done,e),Ah(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=0==e?this.done:this.undone;if(0==i.length)return null;let n=i[i.length-1];if(r&&n.selectionsAfter.length)return t.update({selection:n.selectionsAfter[n.selectionsAfter.length-1],annotations:ph.of({side:e,rest:Rh(i)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(n.changes){let r=1==i.length?Ph:i.slice(0,i.length-1);return n.mapped&&(r=Ah(r,n.mapped)),t.update({changes:n.changes,selection:n.startSelection,effects:n.effects,annotations:ph.of({side:e,rest:r}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}Eh.empty=new Eh(Ph,Ph);const Mh=[{key:"Mod-z",run:yh,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:wh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:wh,preventDefault:!0},{key:"Mod-u",run:Sh,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Ch,preventDefault:!0}];function Dh(e,t){return je.create(e.ranges.map(t),e.mainIndex)}function Bh(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Ih({state:e,dispatch:t},r){let i=Dh(e.selection,r);return!i.eq(e.selection)&&(t(Bh(e,i)),!0)}function jh(e,t){return je.cursor(t?e.to:e.from)}function zh(e,t){return Ih(e,(r=>r.empty?e.moveByChar(r,t):jh(r,t)))}function Wh(e){return e.textDirectionAt(e.state.selection.main.head)==Xi.LTR}const qh=e=>zh(e,!Wh(e)),Hh=e=>zh(e,Wh(e));function Nh(e,t){return Ih(e,(r=>r.empty?e.moveByGroup(r,t):jh(r,t)))}function Xh(e,t,r){if(t.type.prop(r))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function Fh(e,t,r){let i,n,o=zl(e).resolveInner(t.head),s=r?_a.closedBy:_a.openedBy;for(let i=t.head;;){let t=r?o.childAfter(i):o.childBefore(i);if(!t)break;Xh(e,t,s)?o=t:i=r?t.to:t.from}return n=o.type.prop(s)&&(i=r?Jc(e,o.from,1):Jc(e,o.to,-1))&&i.matched?r?i.end.to:i.end.from:r?o.to:o.from,je.cursor(n,r?-1:1)}function Zh(e,t){return Ih(e,(r=>{if(!r.empty)return jh(r,t);let i=e.moveVertically(r,t);return i.head!=r.head?i:e.moveToLineBoundary(r,t)}))}const Uh=e=>Zh(e,!1),Vh=e=>Zh(e,!0);function Gh(e){return Math.max(e.defaultLineHeight,Math.min(e.dom.clientHeight,innerHeight)-5)}function Yh(e,t){let{state:r}=e,i=Dh(r.selection,(r=>r.empty?e.moveVertically(r,t,Gh(e)):jh(r,t)));if(i.eq(r.selection))return!1;let n,o=e.coordsAtPos(r.selection.main.head),s=e.scrollDOM.getBoundingClientRect();return o&&o.top>s.top&&o.bottom<s.bottom&&o.top-s.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(n=Io.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-s.top})),e.dispatch(Bh(r,i),{effects:n}),!0}const Kh=e=>Yh(e,!1),Jh=e=>Yh(e,!0);function eu(e,t,r){let i=e.lineBlockAt(t.head),n=e.moveToLineBoundary(t,r);if(n.head==t.head&&n.head!=(r?i.to:i.from)&&(n=e.moveToLineBoundary(t,r,!1)),!r&&n.head==i.from&&i.length){let r=/^\s*/.exec(e.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&t.head!=i.from+r&&(n=je.cursor(i.from+r))}return n}const tu=e=>Ih(e,(t=>eu(e,t,!0))),ru=e=>Ih(e,(t=>eu(e,t,!1)));function iu(e,t){let r=Dh(e.state.selection,(e=>{let r=t(e);return je.range(e.anchor,r.head,r.goalColumn)}));return!r.eq(e.state.selection)&&(e.dispatch(Bh(e.state,r)),!0)}function nu(e,t){return iu(e,(r=>e.moveByChar(r,t)))}const ou=e=>nu(e,!Wh(e)),su=e=>nu(e,Wh(e));function au(e,t){return iu(e,(r=>e.moveByGroup(r,t)))}function lu(e,t){return iu(e,(r=>e.moveVertically(r,t)))}const cu=e=>lu(e,!1),hu=e=>lu(e,!0);function uu(e,t){return iu(e,(r=>e.moveVertically(r,t,Gh(e))))}const du=e=>uu(e,!1),fu=e=>uu(e,!0),pu=e=>iu(e,(t=>eu(e,t,!0))),gu=e=>iu(e,(t=>eu(e,t,!1))),mu=({state:e,dispatch:t})=>(t(Bh(e,{anchor:0})),!0),vu=({state:e,dispatch:t})=>(t(Bh(e,{anchor:e.doc.length})),!0),Ou=({state:e,dispatch:t})=>(t(Bh(e,{anchor:e.selection.main.anchor,head:0})),!0),_u=({state:e,dispatch:t})=>(t(Bh(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function bu({state:e,dispatch:t},r){if(e.readOnly)return!1;let i="delete.selection",n=e.changeByRange((e=>{let{from:t,to:n}=e;if(t==n){let e=r(t);e<t?i="delete.backward":e>t&&(i="delete.forward"),t=Math.min(t,e),n=Math.max(n,e)}return t==n?{range:e}:{changes:{from:t,to:n},range:je.cursor(t)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:i,effects:"delete.selection"==i?Io.announce.of(e.phrase("Selection deleted")):void 0})),!0)}function yu(e,t,r){if(e instanceof Io)for(let i of e.state.facet(Io.atomicRanges).map((t=>t(e))))i.between(t,t,((e,i)=>{e<t&&i>t&&(t=r?i:e)}));return t}const wu=(e,t)=>bu(e,(r=>{let i,n,{state:o}=e,s=o.doc.lineAt(r);if(!t&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(i=s.text.slice(0,r-s.from))){if("\t"==i[i.length-1])return r-1;let e=Ut(i,o.tabSize)%ec(o)||ec(o);for(let t=0;t<e&&" "==i[i.length-1-t];t++)r--;n=r}else n=be(s.text,r-s.from,t,t)+s.from,n==r&&s.number!=(t?o.doc.lines:1)&&(n+=t?1:-1);return yu(e,n,t)})),Su=e=>wu(e,!1),Cu=e=>wu(e,!0),xu=(e,t)=>bu(e,(r=>{let i=r,{state:n}=e,o=n.doc.lineAt(i),s=n.charCategorizer(i);for(let e=null;;){if(i==(t?o.to:o.from)){i==r&&o.number!=(t?n.doc.lines:1)&&(i+=t?1:-1);break}let a=be(o.text,i-o.from,t)+o.from,l=o.text.slice(Math.min(i,a)-o.from,Math.max(i,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&i==r||(e=c),i=a}return yu(e,i,t)})),ku=e=>xu(e,!1),Tu=e=>bu(e,(t=>{let r=e.lineBlockAt(t).to;return yu(e,t<r?r:Math.min(e.state.doc.length,t+1),!0)}));function Pu(e){let t=[],r=-1;for(let i of e.selection.ranges){let n=e.doc.lineAt(i.from),o=e.doc.lineAt(i.to);if(i.empty||i.to!=o.from||(o=e.doc.lineAt(i.to-1)),r>=n.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(i)}else t.push({from:n.from,to:o.to,ranges:[i]});r=o.number+1}return t}function Qu(e,t,r){if(e.readOnly)return!1;let i=[],n=[];for(let t of Pu(e)){if(r?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(r?t.to+1:t.from-1),s=o.length+1;if(r){i.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak});for(let r of t.ranges)n.push(je.range(Math.min(e.doc.length,r.anchor+s),Math.min(e.doc.length,r.head+s)))}else{i.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text});for(let e of t.ranges)n.push(je.range(e.anchor-s,e.head-s))}}return!!i.length&&(t(e.update({changes:i,scrollIntoView:!0,selection:je.create(n,e.selection.mainIndex),userEvent:"move.line"})),!0)}function Ru(e,t,r){if(e.readOnly)return!1;let i=[];for(let t of Pu(e))r?i.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):i.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Au=Lu(!1),$u=Lu(!0);function Lu(e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=t.changeByRange((r=>{let{from:i,to:n}=r,o=t.doc.lineAt(i),s=!e&&i==n&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let r,i=zl(e).resolveInner(t),n=i.childBefore(t),o=i.childAfter(t);return n&&o&&n.to<=t&&o.from>=t&&(r=n.type.prop(_a.closedBy))&&r.indexOf(o.name)>-1&&e.doc.lineAt(n.to).from==e.doc.lineAt(o.from).from?{from:n.to,to:o.from}:null}(t,i);e&&(i=n=(n<=o.to?o:t.doc.lineAt(n)).to);let a=new ic(t,{simulateBreak:i,simulateDoubleBreak:!!s}),l=rc(a,i);for(null==l&&(l=/^\s*/.exec(t.doc.lineAt(i).text)[0].length);n<o.to&&/\s/.test(o.text[n-o.from]);)n++;s?({from:i,to:n}=s):i>o.from&&i<o.from+100&&!/\S/.test(o.text.slice(0,i))&&(i=o.from);let c=["",tc(t,l)];return s&&c.push(tc(t,a.lineIndent(o.from,-1))),{changes:{from:i,to:n,insert:le.of(c)},range:je.cursor(i+1+c[1].length)}}));return r(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Eu(e,t){let r=-1;return e.changeByRange((i=>{let n=[];for(let o=i.from;o<=i.to;){let s=e.doc.lineAt(o);s.number>r&&(i.empty||i.to>s.from)&&(t(s,n,i),r=s.number),o=s.to+1}let o=e.changes(n);return{changes:n,range:je.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}}))}const Mu=[{key:"Ctrl-b",run:qh,shift:ou,preventDefault:!0},{key:"Ctrl-f",run:Hh,shift:su},{key:"Ctrl-p",run:Uh,shift:cu},{key:"Ctrl-n",run:Vh,shift:hu},{key:"Ctrl-a",run:e=>Ih(e,(t=>je.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>iu(e,(t=>je.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>Ih(e,(t=>je.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>iu(e,(t=>je.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:Cu},{key:"Ctrl-h",run:Su},{key:"Ctrl-k",run:Tu},{key:"Ctrl-Alt-h",run:ku},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:le.of(["",""])},range:je.cursor(e.from)})));return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let r=t.from,i=e.doc.lineAt(r),n=r==i.from?r-1:be(i.text,r-i.from,!1)+i.from,o=r==i.to?r+1:be(i.text,r-i.from,!0)+i.from;return{changes:{from:n,to:o,insert:e.doc.slice(r,o).append(e.doc.slice(n,r))},range:je.cursor(o)}}));return!r.changes.empty&&(t(e.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Jh}],Du=[{key:"ArrowLeft",run:qh,shift:ou,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>Nh(e,!Wh(e)),shift:e=>au(e,!Wh(e))},{mac:"Cmd-ArrowLeft",run:ru,shift:gu},{key:"ArrowRight",run:Hh,shift:su,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>Nh(e,Wh(e)),shift:e=>au(e,Wh(e))},{mac:"Cmd-ArrowRight",run:tu,shift:pu},{key:"ArrowUp",run:Uh,shift:cu,preventDefault:!0},{mac:"Cmd-ArrowUp",run:mu,shift:Ou},{mac:"Ctrl-ArrowUp",run:Kh,shift:du},{key:"ArrowDown",run:Vh,shift:hu,preventDefault:!0},{mac:"Cmd-ArrowDown",run:vu,shift:_u},{mac:"Ctrl-ArrowDown",run:Jh,shift:fu},{key:"PageUp",run:Kh,shift:du},{key:"PageDown",run:Jh,shift:fu},{key:"Home",run:ru,shift:gu,preventDefault:!0},{key:"Mod-Home",run:mu,shift:Ou},{key:"End",run:tu,shift:pu,preventDefault:!0},{key:"Mod-End",run:vu,shift:_u},{key:"Enter",run:Au},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Su,shift:Su},{key:"Delete",run:Cu},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ku},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>xu(e,!0)},{mac:"Mod-Backspace",run:e=>bu(e,(t=>{let r=e.lineBlockAt(t).from;return yu(e,t>r?r:Math.max(0,t-1),!1)}))},{mac:"Mod-Delete",run:Tu}].concat(Mu.map((e=>({mac:e.key,run:e.run,shift:e.shift})))),Bu=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>Ih(e,(t=>Fh(e.state,t,!Wh(e)))),shift:e=>iu(e,(t=>Fh(e.state,t,!Wh(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>Ih(e,(t=>Fh(e.state,t,Wh(e)))),shift:e=>iu(e,(t=>Fh(e.state,t,Wh(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>Qu(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>Ru(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>Qu(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>Ru(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let r=e.selection,i=null;return r.ranges.length>1?i=je.create([r.main]):r.main.empty||(i=je.create([je.cursor(r.main.head)])),!!i&&(t(Bh(e,i)),!0)}},{key:"Mod-Enter",run:$u},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let r=Pu(e).map((({from:t,to:r})=>je.range(t,Math.min(r+1,e.doc.length))));return t(e.update({selection:je.create(r),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let r=Dh(e.selection,(t=>{var r;let i=zl(e).resolveInner(t.head,1);for(;!(i.from<t.from&&i.to>=t.to||i.to>t.to&&i.from<=t.from)&&(null===(r=i.parent)||void 0===r?void 0:r.parent);)i=i.parent;return je.range(i.to,i.from)}));return t(Bh(e,r)),!0},preventDefault:!0},{key:"Mod-[",run:({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Eu(e,((t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let n=Ut(i,e.tabSize),o=0,s=tc(e,Math.max(0,n-ec(e)));for(;o<i.length&&o<s.length&&i.charCodeAt(o)==s.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Eu(e,((t,r)=>{r.push({from:t.from,insert:e.facet(Jl)})})),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=Object.create(null),i=new ic(e,{overrideIndentation:e=>{let t=r[e];return null==t?-1:t}}),n=Eu(e,((t,n,o)=>{let s=rc(i,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=tc(e,s);(a!=l||o.from<t.from+a.length)&&(r[t.from]=s,n.push({from:t.from,to:t.from+a.length,insert:l}))}));return n.changes.empty||t(e.update(n,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,r=t.changes(Pu(t).map((({from:e,to:r})=>(e>0?e--:r<t.doc.length&&r++,{from:e,to:r})))),i=Dh(t.selection,(t=>e.moveVertically(t,!0))).map(r);return e.dispatch({changes:r,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,r){let i=!1,n=Dh(e.selection,(t=>{let n=Jc(e,t.head,-1)||Jc(e,t.head,1)||t.head>0&&Jc(e,t.head-1,1)||t.head<e.doc.length&&Jc(e,t.head+1,-1);if(!n||!n.end)return t;i=!0;let o=n.start.from==t.head?n.end.to:n.end.from;return r?je.range(t.anchor,o):je.cursor(o)}));return!!i&&(t(Bh(e,n)),!0)}(e,t,!1)},{key:"Mod-/",run:e=>{let t=uh(e.state);return t.line?lh(e):!!t.block&&hh(e)}},{key:"Alt-A",run:ch}].concat(Du);function Iu(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,r=arguments[1];if(r&&"object"==typeof r&&null==r.nodeType&&!Array.isArray(r)){for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var n=r[i];"string"==typeof n?e.setAttribute(i,n):null!=n&&(e[i]=n)}t++}for(;t<arguments.length;t++)ju(e,arguments[t]);return e}function ju(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var r=0;r<t.length;r++)ju(e,t[r])}}const zu="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class Wu{constructor(e,t,r=0,i=e.length,n){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=n?e=>n(zu(e)):zu,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return xe(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=ke(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Te(e);let i=this.normalize(t);for(let e=0,n=r;;e++){let o=i.charCodeAt(e),s=this.match(o,n);if(s)return this.value=s,this;if(e==i.length-1)break;n==r&&e<t.length&&t.charCodeAt(e)==o&&n++}}}match(e,t){let r=null;for(let i=0;i<this.matches.length;i+=2){let n=this.matches[i],o=!1;this.query.charCodeAt(n)==e&&(n==this.query.length-1?r={from:this.matches[i+1],to:t+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:t+1}:this.matches.push(1,t)),r}}"undefined"!=typeof Symbol&&(Wu.prototype[Symbol.iterator]=function(){return this});const qu={from:-1,to:-1,match:/.*/.exec("")},Hu="gm"+(null==/x/.unicode?"":"u");class Nu{constructor(e,t,r,i=0,n=e.length){if(this.to=n,this.curLine="",this.done=!1,this.value=qu,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Zu(e,t,r,i,n);this.re=new RegExp(t,Hu+((null==r?void 0:r.ignoreCase)?"i":"")),this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=i,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=i+(r==i?1:0),r==this.curLine.length&&this.nextLine(),r<i||r>this.value.to)return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const Xu=new WeakMap;class Fu{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=Xu.get(e);if(!i||i.from>=r||i.to<=t){let i=new Fu(t,e.sliceString(t,r));return Xu.set(e,i),i}if(i.from==t&&i.to==r)return i;let{text:n,from:o}=i;return o>t&&(n=e.sliceString(t,o)+n,o=t),i.to<r&&(n+=e.sliceString(i.to,r)),Xu.set(e,new Fu(o,n)),new Fu(t,n.slice(t-o,r-o))}}class Zu{constructor(e,t,r,i,n){this.text=e,this.to=n,this.done=!1,this.value=qu,this.matchPos=i,this.re=new RegExp(t,Hu+((null==r?void 0:r.ignoreCase)?"i":"")),this.flat=Fu.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let e=this.flat.from+t.index,r=e+t[0].length;return this.value={from:e,to:r,match:t},this.matchPos=r+(e==r?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Fu.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function Uu(e){let t=Iu("input",{class:"cm-textfield",name:"line"});function r(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:i}=e,n=i.doc.lineAt(i.selection.main.head),[,o,s,a,l]=r,c=a?+a.slice(1):0,h=s?+s:n.number;if(s&&l){let e=h/100;o&&(e=e*("-"==o?-1:1)+n.number/i.doc.lines),h=Math.round(i.doc.lines*e)}else s&&o&&(h=h*("-"==o?-1:1)+n.number);let u=i.doc.line(Math.max(1,Math.min(i.doc.lines,h)));e.dispatch({effects:Vu.of(!1),selection:je.cursor(u.from+Math.max(0,Math.min(c,u.length))),scrollIntoView:!0}),e.focus()}return{dom:Iu("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:Vu.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),r())},onsubmit:e=>{e.preventDefault(),r()}},Iu("label",e.state.phrase("Go to line"),": ",t)," ",Iu("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(Nu.prototype[Symbol.iterator]=Zu.prototype[Symbol.iterator]=function(){return this});const Vu=Ot.define(),Gu=Ve.define({create:()=>!0,update(e,t){for(let r of t.effects)r.is(Vu)&&(e=r.value);return e},provide:e=>Gs.from(e,(e=>e?Uu:null))}),Yu=Io.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Ku={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Ju=qe.define({combine:e=>At(e,Ku,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function ed(e){let t=[od,nd];return e&&t.push(Ju.of(e)),t}const td=ui.mark({class:"cm-selectionMatch"}),rd=ui.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function id(e,t,r,i){return!(0!=r&&e(t.sliceDoc(r-1,r))==kt.Word||i!=t.doc.length&&e(t.sliceDoc(i,i+1))==kt.Word)}const nd=Mi.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(Ju),{state:r}=e,i=r.selection;if(i.ranges.length>1)return ui.none;let n,o=i.main,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return ui.none;let e=r.wordAt(o.head);if(!e)return ui.none;s=r.charCategorizer(o.head),n=r.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return ui.none;if(t.wholeWords){if(n=r.sliceDoc(o.from,o.to),s=r.charCategorizer(o.head),!id(s,r,o.from,o.to)||!function(e,t,r,i){return e(t.sliceDoc(r,r+1))==kt.Word&&e(t.sliceDoc(i-1,i))==kt.Word}(s,r,o.from,o.to))return ui.none}else if(n=r.sliceDoc(o.from,o.to).trim(),!n)return ui.none}let a=[];for(let i of e.visibleRanges){let e=new Wu(r.doc,n,i.from,i.to);for(;!e.next().done;){let{from:i,to:n}=e.value;if((!s||id(s,r,i,n))&&(o.empty&&i<=o.from&&n>=o.to?a.push(rd.range(i,n)):(i>=o.to||n<=o.from)&&a.push(td.range(i,n)),a.length>t.maxMatches))return ui.none}}return ui.set(a)}},{decorations:e=>e.decorations}),od=Io.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const sd=qe.define({combine(e){var t;return{top:e.reduce(((e,t)=>null!=e?e:t.top),void 0)||!1,caseSensitive:e.reduce(((e,t)=>null!=e?e:t.caseSensitive),void 0)||!1,createPanel:(null===(t=e.find((e=>e.createPanel)))||void 0===t?void 0:t.createPanel)||(e=>new Ad(e))}}});class ad{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,Hu),!0}catch(e){return!1}}(this.search)),this.unquoted=e.literal?this.search:this.search.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new dd(this):new hd(this)}getCursor(e,t=0,r=e.length){return this.regexp?ud(this,e,t,r):cd(this,e,t,r)}}class ld{constructor(e){this.spec=e}}function cd(e,t,r,i){return new Wu(t,e.unquoted,r,i,e.caseSensitive?void 0:e=>e.toLowerCase())}class hd extends ld{constructor(e){super(e)}nextMatch(e,t,r){let i=cd(this.spec,e,r,e.length).nextOverlapping();return i.done&&(i=cd(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let r=Math.max(t,i-1e4-this.spec.unquoted.length),n=cd(this.spec,e,r,i),o=null;for(;!n.nextOverlapping().done;)o=n.value;if(o)return o;if(r==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let r=cd(this.spec,e,0,e.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let n=cd(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.length));for(;!n.next().done;)i(n.value.from,n.value.to)}}function ud(e,t,r,i){return new Nu(t,e.search,e.caseSensitive?void 0:{ignoreCase:!0},r,i)}class dd extends ld{nextMatch(e,t,r){let i=ud(this.spec,e,r,e.length).next();return i.done&&(i=ud(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let n=Math.max(t,r-1e4*i),o=ud(this.spec,e,n,r),s=null;for(;!o.next().done;)s=o.value;if(s&&(n==t||s.from>n+10))return s;if(n==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,((t,r)=>"$"==r?"$":"&"==r?e.match[0]:"0"!=r&&+r<e.match.length?e.match[r]:t))}matchAll(e,t){let r=ud(this.spec,e,0,e.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let n=ud(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.length));for(;!n.next().done;)i(n.value.from,n.value.to)}}const fd=Ot.define(),pd=Ot.define(),gd=Ve.define({create:e=>new md(Td(e).create(),null),update(e,t){for(let r of t.effects)r.is(fd)?e=new md(r.value.create(),e.panel):r.is(pd)&&(e=new md(e.query,r.value?kd:null));return e},provide:e=>Gs.from(e,(e=>e.panel))});class md{constructor(e,t){this.query=e,this.panel=t}}const vd=ui.mark({class:"cm-searchMatch"}),Od=ui.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_d=Mi.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(gd))}update(e){let t=e.state.field(gd);(t!=e.startState.field(gd)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return ui.none;let{view:r}=this,i=new Bt;for(let t=0,n=r.visibleRanges,o=n.length;t<o;t++){let{from:s,to:a}=n[t];for(;t<o-1&&a>n[t+1].from-500;)a=n[++t].to;e.highlight(r.state.doc,s,a,((e,t)=>{let n=r.state.selection.ranges.some((r=>r.from==e&&r.to==t));i.add(e,t,n?Od:vd)}))}return i.finish()}},{decorations:e=>e.decorations});function bd(e){return t=>{let r=t.state.field(gd,!1);return r&&r.query.spec.valid?e(t,r):Pd(t)}}const yd=bd(((e,{query:t})=>{let{from:r,to:i}=e.state.selection.main,n=t.nextMatch(e.state.doc,r,i);return!(!n||n.from==r&&n.to==i)&&(e.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Ed(e,n),userEvent:"select.search"}),!0)})),wd=bd(((e,{query:t})=>{let{state:r}=e,{from:i,to:n}=r.selection.main,o=t.prevMatch(r.doc,i,n);return!!o&&(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:Ed(e,o),userEvent:"select.search"}),!0)})),Sd=bd(((e,{query:t})=>{let r=t.matchAll(e.state.doc,1e3);return!(!r||!r.length)&&(e.dispatch({selection:je.create(r.map((e=>je.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),Cd=bd(((e,{query:t})=>{let{state:r}=e,{from:i,to:n}=r.selection.main;if(r.readOnly)return!1;let o=t.nextMatch(r.doc,i,i);if(!o)return!1;let s,a,l=[],c=[];if(o.from==i&&o.to==n&&(a=r.toText(t.getReplacement(o)),l.push({from:o.from,to:o.to,insert:a}),o=t.nextMatch(r.doc,o.from,o.to),c.push(Io.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(i).number)+"."))),o){let t=0==l.length||l[0].from>=o.to?0:o.to-o.from-a.length;s={anchor:o.from-t,head:o.to-t},c.push(Ed(e,o))}return e.dispatch({changes:l,selection:s,scrollIntoView:!!s,effects:c,userEvent:"input.replace"}),!0})),xd=bd(((e,{query:t})=>{if(e.state.readOnly)return!1;let r=t.matchAll(e.state.doc,1e9).map((e=>{let{from:r,to:i}=e;return{from:r,to:i,insert:t.getReplacement(e)}}));if(!r.length)return!1;let i=e.state.phrase("replaced $ matches",r.length)+".";return e.dispatch({changes:r,effects:Io.announce.of(i),userEvent:"input.replace.all"}),!0}));function kd(e){return e.state.facet(sd).createPanel(e)}function Td(e,t){var r;let i=e.selection.main,n=i.empty||i.to>i.from+100?"":e.sliceDoc(i.from,i.to),o=null!==(r=null==t?void 0:t.caseSensitive)&&void 0!==r?r:e.facet(sd).caseSensitive;return t&&!n?t:new ad({search:n.replace(/\n/g,"\\n"),caseSensitive:o})}const Pd=e=>{let t=e.state.field(gd,!1);if(t&&t.panel){let r=Fs(e,kd);if(!r)return!1;let i=r.dom.querySelector("[main-field]");if(i&&i!=e.root.activeElement){let r=Td(e.state,t.query.spec);r.valid&&e.dispatch({effects:fd.of(r)}),i.focus(),i.select()}}else e.dispatch({effects:[pd.of(!0),t?fd.of(Td(e.state,t.query.spec)):Ot.appendConfig.of(Dd)]});return!0},Qd=e=>{let t=e.state.field(gd,!1);if(!t||!t.panel)return!1;let r=Fs(e,kd);return r&&r.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:pd.of(!1)}),!0},Rd=[{key:"Mod-f",run:Pd,scope:"editor search-panel"},{key:"F3",run:yd,shift:wd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:yd,shift:wd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Qd,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let r=e.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:i,to:n}=r.main,o=[],s=0;for(let t=new Wu(e.doc,e.sliceDoc(i,n));!t.next().done;){if(o.length>1e3)return!1;t.value.from==i&&(s=o.length),o.push(je.range(t.value.from,t.value.to))}return t(e.update({selection:je.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:e=>{let t=Fs(e,Uu);if(!t){let r=[Vu.of(!0)];null==e.state.field(Gu,!1)&&r.push(Ot.appendConfig.of([Gu,Yu])),e.dispatch({effects:r}),t=Fs(e,Uu)}return t&&t.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:r}=e.selection;if(r.some((e=>e.from===e.to)))return(({state:e,dispatch:t})=>{let{selection:r}=e,i=je.create(r.ranges.map((t=>e.wordAt(t.head)||je.cursor(t.head))),r.mainIndex);return!i.eq(r)&&(t(e.update({selection:i})),!0)})({state:e,dispatch:t});let i=e.sliceDoc(r[0].from,r[0].to);if(e.selection.ranges.some((t=>e.sliceDoc(t.from,t.to)!=i)))return!1;let n=function(e,t){let{main:r,ranges:i}=e.selection,n=e.wordAt(r.head),o=n&&n.from==r.from&&n.to==r.to;for(let r=!1,n=new Wu(e.doc,t,i[i.length-1].to);;){if(n.next(),!n.done){if(r&&i.some((e=>e.from==n.value.from)))continue;if(o){let t=e.wordAt(n.value.from);if(!t||t.from!=n.value.from||t.to!=n.value.to)continue}return n.value}if(r)return null;n=new Wu(e.doc,t,0,Math.max(0,i[i.length-1].from-1)),r=!0}}(e,i);return!!n&&(t(e.update({selection:e.selection.addRange(je.range(n.from,n.to),!1),effects:Io.scrollIntoView(n.to)})),!0)},preventDefault:!0}];class Ad{constructor(e){this.view=e;let t=this.query=e.state.field(gd).query.spec;function r(e,t,r){return Iu("button",{class:"cm-button",name:e,onclick:t,type:"button"},r)}this.commit=this.commit.bind(this),this.searchField=Iu("input",{value:t.search,placeholder:$d(e,"Find"),"aria-label":$d(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Iu("input",{value:t.replace,placeholder:$d(e,"Replace"),"aria-label":$d(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=Iu("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=Iu("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit}),this.dom=Iu("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,r("next",(()=>yd(e)),[$d(e,"next")]),r("prev",(()=>wd(e)),[$d(e,"previous")]),r("select",(()=>Sd(e)),[$d(e,"all")]),Iu("label",null,[this.caseField,$d(e,"match case")]),Iu("label",null,[this.reField,$d(e,"regexp")]),...e.state.readOnly?[]:[Iu("br"),this.replaceField,r("replace",(()=>Cd(e)),[$d(e,"replace")]),r("replaceAll",(()=>xd(e)),[$d(e,"replace all")]),Iu("button",{name:"close",onclick:()=>Qd(e),"aria-label":$d(e,"close"),type:"button"},["×"])]])}commit(){let e=new ad({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:fd.of(e)}))}keydown(e){!function(e,t,r){return Go(Uo(e.state),t,e,r)}(this.view,e,"search-panel")?13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?wd:yd)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),Cd(this.view)):e.preventDefault()}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(fd)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(sd).top}}function $d(e,t){return e.state.phrase(t)}const Ld=/[\s\.,:;?!]/;function Ed(e,{from:t,to:r}){let i=e.state.doc.lineAt(t),n=e.state.doc.lineAt(r).to,o=Math.max(i.from,t-30),s=Math.min(n,r+30),a=e.state.sliceDoc(o,s);if(o!=i.from)for(let e=0;e<30;e++)if(!Ld.test(a[e+1])&&Ld.test(a[e])){a=a.slice(e);break}if(s!=n)for(let e=a.length-1;e>a.length-30;e--)if(!Ld.test(a[e-1])&&Ld.test(a[e])){a=a.slice(0,e);break}return Io.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${i.number}.`)}const Md=Io.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Dd=[gd,tt.lowest(_d),Md];class Bd{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=zl(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),n=i.search(qd(e,!1));return n<0?null:{from:r+n,to:this.pos,text:i.slice(n)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function Id(e){let t=Object.keys(e).join(""),r=/\w/.test(t);return r&&(t=t.replace(/\w/g,"")),`[${r?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function jd(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[r,i]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),r=Object.create(null);for(let{label:i}of e){t[i[0]]=!0;for(let e=1;e<i.length;e++)r[i[e]]=!0}let i=Id(t)+Id(r)+"*$";return[new RegExp("^"+i),new RegExp(i)]}(t);return e=>{let n=e.matchBefore(i);return n||e.explicit?{from:n?n.from:e.pos,options:t,validFor:r}:null}}class zd{constructor(e,t,r){this.completion=e,this.source=t,this.match=r}}function Wd(e){return e.selection.main.head}function qd(e,t){var r;let{source:i}=e,n=t&&"^"!=i[0],o="$"!=i[i.length-1];return n||o?new RegExp(`${n?"^":""}(?:${i})${o?"$":""}`,null!==(r=e.flags)&&void 0!==r?r:e.ignoreCase?"i":""):e}function Hd(e,t){const r=t.completion.apply||t.completion.label;let i=t.source;"string"==typeof r?e.dispatch(function(e,t,r,i){return Object.assign(Object.assign({},e.changeByRange((n=>{if(n==e.selection.main)return{changes:{from:r,to:i,insert:t},range:je.cursor(r+t.length)};let o=i-r;return!n.empty||o&&e.sliceDoc(n.from-o,n.from)!=e.sliceDoc(r,i)?{range:n}:{changes:{from:n.from-o,to:n.from,insert:t},range:je.cursor(n.from-o+t.length)}}))),{userEvent:"input.complete"})}(e.state,r,i.from,i.to)):r(e,t.completion,i.from,i.to)}const Nd=new WeakMap;function Xd(e){if(!Array.isArray(e))return e;let t=Nd.get(e);return t||Nd.set(e,t=jd(e)),t}class Fd{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let r=xe(e,t),i=Te(r);this.chars.push(r);let n=e.slice(t,t+i),o=n.toUpperCase();this.folded.push(xe(o==n?n.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:n,byWord:o}=this;if(1==t.length){let i=xe(e,0);return i==t[0]?[0,0,Te(i)]:i==r[0]?[-200,0,Te(i)]:null}let s=e.indexOf(this.pattern);if(0==s)return[0,0,this.pattern.length];let a=t.length,l=0;if(s<0){for(let n=0,o=Math.min(e.length,200);n<o&&l<a;){let o=xe(e,n);o!=t[l]&&o!=r[l]||(i[l++]=n),n+=Te(o)}if(l<a)return null}let c=0,h=0,u=!1,d=0,f=-1,p=-1,g=/[a-z]/.test(e),m=!0;for(let i=0,l=Math.min(e.length,200),v=0;i<l&&h<a;){let l=xe(e,i);s<0&&(c<a&&l==t[c]&&(n[c++]=i),d<a&&(l==t[d]||l==r[d]?(0==d&&(f=i),p=i+1,d++):d=0));let O,_=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(O=ke(l))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!i||1==_&&g||0==v&&0!=_)&&(t[h]==l||r[h]==l&&(u=!0)?o[h++]=i:o.length&&(m=!1)),v=_,i+=Te(l)}return h==a&&0==o[0]&&m?this.result((u?-200:0)-100,o,e):d==a&&0==f?[-200-e.length,0,p]:s>-1?[-700-e.length,s,s+this.pattern.length]:d==a?[-900-e.length,f,p]:h==a?this.result((u?-200:0)-100-700+(m?0:-1100),o,e):2==t.length?null:this.result((i[0]?-700:0)-200-1100,i,e)}result(e,t,r){let i=[e-r.length],n=1;for(let e of t){let t=e+(this.astral?Te(xe(r,e)):1);n>1&&i[n-1]==e?i[n-1]=t:(i[n++]=e,i[n++]=t)}return i}}const Zd=qe.define({combine:e=>At(e,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>r=>function(e,t){return e?t?e+" "+t:e:t}(e(r),t(r)),addToOptions:(e,t)=>e.concat(t)})});function Ud(e,t,r){if(e<=r)return{from:0,to:e};if(t<=e>>1){let e=Math.floor(t/r);return{from:e*r,to:(e+1)*r}}let i=Math.floor((e-t)/r);return{from:e-(i+1)*r,to:e-i*r}}class Vd{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this};let r=e.state.field(t),{options:i,selected:n}=r.open,o=e.state.facet(Zd);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,r){let i=document.createElement("span");i.className="cm-completionLabel";let{label:n}=e,o=0;for(let e=1;e<r.length;){let t=r[e++],s=r[e++];t>o&&i.appendChild(document.createTextNode(n.slice(o,t)));let a=i.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(n.slice(t,s))),a.className="cm-completionMatchedText",o=s}return o<n.length&&i.appendChild(document.createTextNode(n.slice(o))),i},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(o),this.optionClass=o.optionClass,this.range=Ud(i.length,n,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(t=>{for(let r,n=t.target;n&&n!=this.dom;n=n.parentNode)if("LI"==n.nodeName&&(r=/-(\d+)$/.exec(n.id))&&+r[1]<i.length)return Hd(e,i[+r[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Ud(t.options.length,t.selected,this.view.state.facet(Zd).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let n="string"==typeof i?document.createTextNode(i):i(r);if(!n)return;"then"in n?n.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t)})).catch((e=>Ai(this.view.state,e,"completion info"))):this.addInfoPane(n)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&function(e,t){let r=e.getBoundingClientRect(),i=t.getBoundingClientRect();i.top<r.top?e.scrollTop-=r.top-i.top:i.bottom>r.bottom&&(e.scrollTop+=i.bottom-r.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect();if(i.top>Math.min(innerHeight,t.bottom)-10||i.bottom<Math.max(0,t.top)+10)return null;let n=Math.max(0,Math.min(i.top,innerHeight-r.height))-t.top,o=this.view.textDirection==Xi.RTL,s=t.left,a=innerWidth-t.right;return o&&s<Math.min(r.width,a)?o=!1:!o&&a<Math.min(r.width,s)&&(o=!0),{top:n,left:o}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let n=r.from;n<r.to;n++){let{completion:r,match:o}=e[n];const s=i.appendChild(document.createElement("li"));s.id=t+"-"+n,s.setAttribute("role","option");let a=this.optionClass(r);a&&(s.className=a);for(let e of this.optionContent){let t=e(r,this.view.state,o);t&&s.appendChild(t)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function Gd(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class Yd{constructor(e,t,r,i,n){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=n}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Yd(this.options,ef(t,e),this.tooltip,this.timestamp,e)}static build(e,t,r,i,n){let o=function(e,t){let r=[],i=0;for(let n of e)if(n.hasResult())if(!1===n.result.filter){let e=n.result.getMatch;for(let t of n.result.options){let o=[1e9-i++];if(e)for(let r of e(t))o.push(r);r.push(new zd(t,n,o))}}else{let e,i=new Fd(t.sliceDoc(n.from,n.to));for(let t of n.result.options)(e=i.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),r.push(new zd(t,n,e)))}let n=[],o=null;for(let e of r.sort(rf))!o||o.label!=e.completion.label||o.detail!=e.completion.detail||null!=o.type&&null!=e.completion.type&&o.type!=e.completion.type||o.apply!=e.completion.apply?n.push(e):Gd(e.completion)>Gd(o)&&(n[n.length-1]=e),o=e.completion;return n}(e,t);if(!o.length)return null;let s=0;if(i&&i.selected){let e=i.options[i.selected].completion;for(let t=0;t<o.length;t++)if(o[t].completion==e){s=t;break}}return new Yd(o,ef(r,s),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:(a=uf,e=>new Vd(e,a)),above:n.aboveCursor},i?i.timestamp:Date.now(),s);var a}map(e){return new Yd(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class Kd{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new Kd(tf,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,r=t.facet(Zd),i=(r.override||t.languageDataAt("autocomplete",Wd(t)).map(Xd)).map((t=>(this.active.find((e=>e.source==t))||new of(t,this.active.some((e=>0!=e.state))?1:0)).update(e,r)));i.length==this.active.length&&i.every(((e,t)=>e==this.active[t]))&&(i=this.active);let n=e.selection||i.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let r=0,i=0;;){for(;r<e.length&&!e[r].hasResult;)r++;for(;i<t.length&&!t[i].hasResult;)i++;let n=r==e.length,o=i==t.length;if(n||o)return n==o;if(e[r++].result!=t[i++].result)return!1}}(i,this.active)?Yd.build(i,t,this.id,this.open,r):this.open&&e.docChanged?this.open.map(e.changes):this.open;!n&&i.every((e=>1!=e.state))&&i.some((e=>e.hasResult()))&&(i=i.map((e=>e.hasResult()?new of(e.source,0):e)));for(let t of e.effects)t.is(hf)&&(n=n&&n.setSelected(t.value,this.id));return i==this.active&&n==this.open?this:new Kd(i,this.id,n)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Jd}}const Jd={"aria-autocomplete":"list"};function ef(e,t){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":e+"-"+t,"aria-controls":e}}const tf=[];function rf(e,t){let r=t.match[0]-e.match[0];return r||e.completion.label.localeCompare(t.completion.label)}function nf(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class of{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=nf(e),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&0!=i.state&&(i=new of(i.source,0));for(let t of e.effects)if(t.is(af))i=new of(i.source,1,t.value?Wd(e.state):-1);else if(t.is(lf))i=new of(i.source,0);else if(t.is(cf))for(let e of t.value)e.source==i.source&&(i=e);return i}handleUserEvent(e,t,r){return"delete"!=t&&r.activateOnTyping?new of(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(Wd(e.startState))?new of(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new of(this.source,this.state,e.mapPos(this.explicitPos))}}class sf extends of{constructor(e,t,r,i,n){super(e,2,t),this.result=r,this.from=i,this.to=n}hasResult(){return!0}handleUserEvent(e,t,r){var i;let n=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=Wd(e.state);if((this.explicitPos<0?s<=n:s<this.from)||s>o||"delete"==t&&Wd(e.startState)==this.from)return new of(this.source,"input"==t&&r.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,r,i){if(!e)return!1;let n=t.sliceDoc(r,i);return"function"==typeof e?e(n,r,i,t):qd(e,!0).test(n)}(this.result.validFor,e.state,n,o)?new sf(this.source,l,this.result,n,o):this.result.update&&(a=this.result.update(this.result,n,o,new Bd(e.state,s,l>=0)))?new sf(this.source,l,a,a.from,null!==(i=a.to)&&void 0!==i?i:Wd(e.state)):new of(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new of(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new sf(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const af=Ot.define(),lf=Ot.define(),cf=Ot.define({map:(e,t)=>e.map((e=>e.map(t)))}),hf=Ot.define(),uf=Ve.define({create:()=>Kd.start(),update:(e,t)=>e.update(t),provide:e=>[Is.from(e,(e=>e.tooltip)),Io.contentAttributes.from(e,(e=>e.attrs))]});function df(e,t="option"){return r=>{let i=r.state.field(uf,!1);if(!i||!i.open||Date.now()-i.open.timestamp<75)return!1;let n,o=1;"page"==t&&(n=function(e,t){let r=e.plugin(Ms);if(!r)return null;let i=r.manager.tooltips.indexOf(t);return i<0?null:r.manager.tooltipViews[i]}(r,i.open.tooltip))&&(o=Math.max(2,Math.floor(n.dom.offsetHeight/n.dom.querySelector("li").offsetHeight)-1));let s=i.open.selected+o*(e?1:-1),{length:a}=i.open.options;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),r.dispatch({effects:hf.of(s)}),!0}}class ff{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const pf=Mi.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(uf).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(uf);if(!e.selectionSet&&!e.docChanged&&e.startState.field(uf)==t)return;let r=e.transactions.some((e=>(e.selection||e.docChanged)&&!nf(e)));for(let t=0;t<this.running.length;t++){let i=this.running[t];if(r||i.updates.length+e.transactions.length>50&&Date.now()-i.time>1e3){for(let e of i.context.abortListeners)try{e()}catch(e){Ai(this.view.state,e)}i.context.abortListeners=null,this.running.splice(t--,1)}else i.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let t of e.transactions)"input"==nf(t)?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(uf);for(let e of t.active)1!=e.state||this.running.some((t=>t.active.source==e.source))||this.startQuery(e)}startQuery(e){let{state:t}=this.view,r=Wd(t),i=new Bd(t,r,e.explicitPos==r),n=new ff(e,i);this.running.push(n),Promise.resolve(e.source(i)).then((e=>{n.context.aborted||(n.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:lf.of(null)}),Ai(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],r=this.view.state.facet(Zd);for(let i=0;i<this.running.length;i++){let n=this.running[i];if(void 0===n.done)continue;if(this.running.splice(i--,1),n.done){let i=new sf(n.active.source,n.active.explicitPos,n.done,n.done.from,null!==(e=n.done.to)&&void 0!==e?e:Wd(n.updates.length?n.updates[0].startState:this.view.state));for(let e of n.updates)i=i.update(e,r);if(i.hasResult()){t.push(i);continue}}let o=this.view.state.field(uf).active.find((e=>e.source==n.active.source));if(o&&1==o.state)if(null==n.done){let e=new of(n.active.source,0);for(let t of n.updates)e=e.update(t,r);1!=e.state&&t.push(e)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:cf.of(t)})}},{eventHandlers:{blur(){let e=this.view.state.field(uf,!1);e&&e.tooltip&&this.view.state.facet(Zd).closeOnBlur&&this.view.dispatch({effects:lf.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:af.of(!1)})),20),this.composing=0}}}),gf=Io.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class mf{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}}class vf{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,Qe.TrackDel),r=e.mapPos(this.to,1,Qe.TrackDel);return null==t||null==r?null:new vf(this.field,t,r)}}class Of{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],n=e.doc.lineAt(t),o=/^\s*/.exec(n.text)[0];for(let n of this.lines){if(r.length){let r=o,s=/^\t*/.exec(n)[0].length;for(let t=0;t<s;t++)r+=e.facet(Jl);i.push(t+r.length-s),n=r+n.slice(s)}r.push(n),t+=n.length+1}let s=this.fieldPositions.map((e=>new vf(e.field,i[e.line]+e.from,i[e.line]+e.to)));return{text:r,ranges:s}}static parse(e){let t,r=[],i=[],n=[];for(let o of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let e=t[1]?+t[1]:null,s=t[2]||t[3]||"",a=-1;for(let t=0;t<r.length;t++)(null!=e?r[t].seq==e:s&&r[t].name==s)&&(a=t);if(a<0){let t=0;for(;t<r.length&&(null==e||null!=r[t].seq&&r[t].seq<e);)t++;r.splice(t,0,{seq:e,name:s}),a=t;for(let e of n)e.field>=a&&e.field++}n.push(new mf(a,i.length,t.index,t.index+s.length)),o=o.slice(0,t.index)+s+o.slice(t.index+t[0].length)}for(let e;e=/([$#])\\{/.exec(o);){o=o.slice(0,e.index)+e[1]+"{"+o.slice(e.index+e[0].length);for(let t of n)t.line==i.length&&t.from>e.index&&(t.from--,t.to--)}i.push(o)}return new Of(i,n)}}let _f=ui.widget({widget:new class extends ci{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),bf=ui.mark({class:"cm-snippetField"});class yf{constructor(e,t){this.ranges=e,this.active=t,this.deco=ui.set(e.map((e=>(e.from==e.to?_f:bf).range(e.from,e.to))))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new yf(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const wf=Ot.define({map:(e,t)=>e&&e.map(t)}),Sf=Ot.define(),Cf=Ve.define({create:()=>null,update(e,t){for(let r of t.effects){if(r.is(wf))return r.value;if(r.is(Sf)&&e)return new yf(e.ranges,r.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>Io.decorations.from(e,(e=>e?e.deco:ui.none))});function xf(e,t){return je.create(e.filter((e=>e.field==t)).map((e=>je.range(e.from,e.to))))}function kf(e){let t=Of.parse(e);return(e,r,i,n)=>{let{text:o,ranges:s}=t.instantiate(e.state,i),a={changes:{from:i,to:n,insert:le.of(o)},scrollIntoView:!0};if(s.length&&(a.selection=xf(s,0)),s.length>1){let t=new yf(s,0),r=a.effects=[wf.of(t)];void 0===e.state.field(Cf,!1)&&r.push(Ot.appendConfig.of([Cf,Rf,$f,gf]))}e.dispatch(e.state.update(a))}}function Tf(e){return({state:t,dispatch:r})=>{let i=t.field(Cf,!1);if(!i||e<0&&0==i.active)return!1;let n=i.active+e,o=e>0&&!i.ranges.some((t=>t.field==n+e));return r(t.update({selection:xf(i.ranges,n),effects:wf.of(o?null:new yf(i.ranges,n))})),!0}}const Pf=[{key:"Tab",run:Tf(1),shift:Tf(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(Cf,!1)&&(t(e.update({effects:wf.of(null)})),!0)}],Qf=qe.define({combine:e=>e.length?e[0]:Pf}),Rf=tt.highest(Fo.compute([Qf],(e=>e.facet(Qf))));function Af(e,t){return Object.assign(Object.assign({},t),{apply:kf(e)})}const $f=Io.domEventHandlers({mousedown(e,t){let r,i=t.state.field(Cf,!1);if(!i||null==(r=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let n=i.ranges.find((e=>e.from<=r&&e.to>=r));return!(!n||n.field==i.active)&&(t.dispatch({selection:xf(i.ranges,n.field),effects:wf.of(i.ranges.some((e=>e.field>n.field))?new yf(i.ranges,n.field):null)}),!0)}}),Lf={brackets:["(","[","{","'",'"'],before:")]}:;>"},Ef=Ot.define({map(e,t){let r=t.mapPos(e,-1,Qe.TrackAfter);return null==r?void 0:r}}),Mf=Ot.define({map:(e,t)=>t.mapPos(e)}),Df=new class extends $t{};Df.startSide=1,Df.endSide=-1;const Bf=Ve.define({create:()=>Dt.empty,update(e,t){if(t.selection){let r=t.state.doc.lineAt(t.selection.main.head).from,i=t.startState.doc.lineAt(t.startState.selection.main.head).from;r!=t.changes.mapPos(i,-1)&&(e=Dt.empty)}e=e.map(t.changes);for(let r of t.effects)r.is(Ef)?e=e.update({add:[Df.range(r.value,r.value+1)]}):r.is(Mf)&&(e=e.update({filter:e=>e!=r.value}));return e}});const If="()[]{}<>";function jf(e){for(let t=0;t<If.length;t+=2)if(If.charCodeAt(t)==e)return If.charAt(t+1);return ke(e<128?e:e+1)}function zf(e,t){return e.languageDataAt("closeBrackets",t)[0]||Lf}const Wf="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),qf=Io.inputHandler.of(((e,t,r,i)=>{if((Wf?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let n=e.state.selection.main;if(i.length>2||2==i.length&&1==Te(xe(i,0))||t!=n.from||r!=n.to)return!1;let o=function(e,t){let r=zf(e,e.selection.main.head),i=r.brackets||Lf.brackets;for(let n of i){let o=jf(xe(n,0));if(t==n)return o==n?Uf(e,n,i.indexOf(n+n+n)>-1):Ff(e,n,o,r.before||Lf.before);if(t==o&&Nf(e,e.selection.main.from))return Zf(e,n,o)}return null}(e.state,i);return!!o&&(e.dispatch(o),!0)})),Hf=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=zf(e,e.selection.main.head).brackets||Lf.brackets,i=null,n=e.changeByRange((t=>{if(t.empty){let i=function(e,t){let r=e.sliceString(t-2,t);return Te(xe(r,0))==r.length?r:r.slice(1)}(e.doc,t.head);for(let n of r)if(n==i&&Xf(e.doc,t.head)==jf(xe(n,0)))return{changes:{from:t.head-n.length,to:t.head+n.length},range:je.cursor(t.head-n.length),userEvent:"delete.backward"}}return{range:i=t}}));return i||t(e.update(n,{scrollIntoView:!0})),!i}}];function Nf(e,t){let r=!1;return e.field(Bf).between(0,e.doc.length,(e=>{e==t&&(r=!0)})),r}function Xf(e,t){let r=e.sliceString(t,t+2);return r.slice(0,Te(xe(r,0)))}function Ff(e,t,r,i){let n=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:r,from:o.to}],effects:Ef.of(o.to+t.length),range:je.range(o.anchor+t.length,o.head+t.length)};let s=Xf(e.doc,o.head);return!s||/\s/.test(s)||i.indexOf(s)>-1?{changes:{insert:t+r,from:o.head},effects:Ef.of(o.head+t.length),range:je.cursor(o.head+t.length)}:{range:n=o}}));return n?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Zf(e,t,r){let i=null,n=e.selection.ranges.map((t=>t.empty&&Xf(e.doc,t.head)==r?je.cursor(t.head+r.length):i=t));return i?null:e.update({selection:je.create(n,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((({from:e})=>Mf.of(e)))})}function Uf(e,t,r){let i=null,n=e.changeByRange((n=>{if(!n.empty)return{changes:[{insert:t,from:n.from},{insert:t,from:n.to}],effects:Ef.of(n.to+t.length),range:je.range(n.anchor+t.length,n.head+t.length)};let o=n.head,s=Xf(e.doc,o);if(s==t){if(Vf(e,o))return{changes:{insert:t+t,from:o},effects:Ef.of(o+t.length),range:je.cursor(o+t.length)};if(Nf(e,o)){let i=r&&e.sliceDoc(o,o+3*t.length)==t+t+t;return{range:je.cursor(o+t.length*(i?3:1)),effects:Mf.of(o)}}}else{if(r&&e.sliceDoc(o-2*t.length,o)==t+t&&Vf(e,o-2*t.length))return{changes:{insert:t+t+t+t,from:o},effects:Ef.of(o+t.length),range:je.cursor(o+t.length)};if(e.charCategorizer(o)(s)!=kt.Word){let r=e.sliceDoc(o-1,o);if(r!=t&&e.charCategorizer(o)(r)!=kt.Word&&!function(e,t,r){let i=zl(e).resolveInner(t,-1);for(let n=0;n<5;n++){if(e.sliceDoc(i.from,i.from+r.length)==r){let t=i.firstChild;for(;t&&t.from==i.from&&t.to-t.from>r.length;){if(e.sliceDoc(t.to-r.length,t.to)==r)return!1;t=t.firstChild}return!0}let n=i.to==t&&i.parent;if(!n)break;i=n}return!1}(e,o,t))return{changes:{insert:t+t,from:o},effects:Ef.of(o+t.length),range:je.cursor(o+t.length)}}}return{range:i=n}}));return i?null:e.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function Vf(e,t){let r=zl(e).resolveInner(t+1);return r.parent&&r.from==t}function Gf(e={}){return[uf,Zd.of(e),pf,Kf,gf]}const Yf=[{key:"Ctrl-Space",run:e=>!!e.state.field(uf,!1)&&(e.dispatch({effects:af.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(uf,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:lf.of(null)}),!0)}},{key:"ArrowDown",run:df(!0)},{key:"ArrowUp",run:df(!1)},{key:"PageDown",run:df(!0,"page")},{key:"PageUp",run:df(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(uf,!1);return!(e.state.readOnly||!t||!t.open||Date.now()-t.open.timestamp<75)&&(Hd(e,t.open.options[t.open.selected]),!0)}}],Kf=tt.highest(Fo.computeN([Zd],(e=>e.facet(Zd).defaultKeymap?[Yf]:[])));class Jf{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class ep{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,n=r.facet(pp).markerFilter;n&&(i=n(i));let o=ui.set(i.map((e=>e.from==e.to||e.from==e.to-1&&r.doc.lineAt(e.from).to==e.from?ui.widget({widget:new vp(e),diagnostic:e}).range(e.from):ui.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to))),!0);return new ep(o,t,tp(o))}}function tp(e,t=null,r=0){let i=null;return e.between(r,1e9,((e,r,{spec:n})=>{if(!t||n.diagnostic==t)return i=new Jf(e,r,n.diagnostic),!1})),i}function rp(e,t){return!(!e.effects.some((e=>e.is(np)))&&!e.changes.touchesRange(t.pos))}function ip(e,t){return e.field(ap,!1)?t:t.concat(Ot.appendConfig.of([ap,Io.decorations.compute([ap],(e=>{let{selected:t,panel:r}=e.field(ap);return t&&r&&t.from!=t.to?ui.set([lp.range(t.from,t.to)]):ui.none})),Hs(cp,{hideOn:rp}),yp]))}const np=Ot.define(),op=Ot.define(),sp=Ot.define(),ap=Ve.define({create:()=>new ep(ui.none,null,null),update(e,t){if(t.docChanged){let r=e.diagnostics.map(t.changes),i=null;if(e.selected){let n=t.changes.mapPos(e.selected.from,1);i=tp(r,e.selected.diagnostic,n)||tp(r,null,n)}e=new ep(r,e.panel,i)}for(let r of t.effects)r.is(np)?e=ep.init(r.value,e.panel,t.state):r.is(op)?e=new ep(e.diagnostics,r.value?_p.open:null,e.selected):r.is(sp)&&(e=new ep(e.diagnostics,e.panel,r.value));return e},provide:e=>[Gs.from(e,(e=>e.panel)),Io.decorations.from(e,(e=>e.diagnostics))]}),lp=ui.mark({class:"cm-lintRange cm-lintRange-active"});function cp(e,t,r){let{diagnostics:i}=e.state.field(ap),n=[],o=2e8,s=0;i.between(t-(r<0?1:0),t+(r>0?1:0),((e,i,{spec:a})=>{t>=e&&t<=i&&(e==i||(t>e||r>0)&&(t<i||r<0))&&(n.push(a.diagnostic),o=Math.min(e,o),s=Math.max(i,s))}));let a=e.state.facet(pp).tooltipFilter;return a&&(n=a(n)),n.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:hp(e,n)})}:null}function hp(e,t){return Iu("ul",{class:"cm-tooltip-lint"},t.map((t=>mp(e,t,!1))))}const up=e=>{let t=e.state.field(ap,!1);return!(!t||!t.panel)&&(e.dispatch({effects:op.of(!1)}),!0)},dp=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(ap,!1);t&&t.panel||e.dispatch({effects:ip(e.state,[op.of(!0)])});let r=Fs(e,_p.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:e=>{let t=e.state.field(ap,!1);if(!t)return!1;let r=e.state.selection.main,i=t.diagnostics.iter(r.to+1);return!(!i.value&&(i=t.diagnostics.iter(0),!i.value||i.from==r.from&&i.to==r.to))&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)}}],fp=Mi.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(pp);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(pp);Promise.all(t.map((e=>Promise.resolve(e(this.view))))).then((t=>{let r=t.reduce(((e,t)=>e.concat(t)));this.view.state.doc==e.doc&&this.view.dispatch(function(e,t){return{effects:ip(e,[np.of(t)])}}(this.view.state,r))}),(e=>{Ai(this.view.state,e)}))}}update(e){let t=e.state.facet(pp);(e.docChanged||t!=e.startState.facet(pp))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),pp=qe.define({combine:e=>Object.assign({sources:e.map((e=>e.source))},At(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null})),enables:fp});function gp(e){let t=[];if(e)e:for(let{name:r}of e){for(let e=0;e<r.length;e++){let i=r[e];if(/[a-zA-Z]/.test(i)&&!t.some((e=>e.toLowerCase()==i.toLowerCase()))){t.push(i);continue e}}t.push("")}return t}function mp(e,t,r){var i;let n=r?gp(t.actions):[];return Iu("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Iu("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(i=t.actions)||void 0===i?void 0:i.map(((r,i)=>{let o=i=>{i.preventDefault();let n=tp(e.state.field(ap).diagnostics,t);n&&r.apply(e,n.from,n.to)},{name:s}=r,a=n[i]?s.indexOf(n[i]):-1,l=a<0?s:[s.slice(0,a),Iu("u",s.slice(a,a+1)),s.slice(a+1)];return Iu("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":` Action: ${s}${a<0?"":` (access key "${n[i]})"`}.`},l)})),t.source&&Iu("div",{class:"cm-diagnosticSource"},t.source))}class vp extends ci{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Iu("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Op{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=mp(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class _p{constructor(e){this.view=e,this.items=[];this.list=Iu("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)up(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:r}=this.items[this.selectedIndex],i=gp(r.actions);for(let n=0;n<i.length;n++)if(i[n].toUpperCase().charCodeAt(0)==t.keyCode){let t=tp(this.view.state.field(ap).diagnostics,r);t&&r.actions[n].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=Iu("div",{class:"cm-panel-lint"},this.list,Iu("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>up(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(ap).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(ap),r=0,i=!1,n=null;for(e.between(0,this.view.state.doc.length,((e,o,{spec:s})=>{let a,l=-1;for(let e=r;e<this.items.length;e++)if(this.items[e].diagnostic==s.diagnostic){l=e;break}l<0?(a=new Op(this.view,s.diagnostic),this.items.splice(r,0,a),i=!0):(a=this.items[l],l>r&&(this.items.splice(r,l-r),i=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),n=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),r++}));r<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new Op(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),n?(this.list.setAttribute("aria-activedescendant",n.id),this.view.requestMeasure({key:this,read:()=>({sel:n.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{e.top<t.top?this.list.scrollTop-=t.top-e.top:e.bottom>t.bottom&&(this.list.scrollTop+=e.bottom-t.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=tp(this.view.state.field(ap).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:sp.of(t)})}static open(e){return new _p(e)}}function bp(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const yp=Io.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:bp("#d11")},".cm-lintRange-warning":{backgroundImage:bp("orange")},".cm-lintRange-info":{backgroundImage:bp("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class wp{constructor(e,t,r,i,n,o,s){this.type=e,this.value=t,this.from=r,this.hash=i,this.end=n,this.children=o,this.positions=s,this.hashProp=[[_a.contextHash,i]]}static create(e,t,r,i,n){return new wp(e,t,r,i+(i<<8)+e+(t<<4)|0,n,[],[])}addChild(e,t){e.prop(_a.contextHash)!=this.hash&&(e=new Ta(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let r=this.children.length-1;r>=0&&(t=Math.max(t,this.positions[r]+this.children[r].length+this.from));let i=new Ta(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(e,t,r)=>new Ta(wa.none,e,t,r,this.hashProp)});return i}}var Sp;!function(e){e[e.Document=1]="Document",e[e.CodeBlock=2]="CodeBlock",e[e.FencedCode=3]="FencedCode",e[e.Blockquote=4]="Blockquote",e[e.HorizontalRule=5]="HorizontalRule",e[e.BulletList=6]="BulletList",e[e.OrderedList=7]="OrderedList",e[e.ListItem=8]="ListItem",e[e.ATXHeading1=9]="ATXHeading1",e[e.ATXHeading2=10]="ATXHeading2",e[e.ATXHeading3=11]="ATXHeading3",e[e.ATXHeading4=12]="ATXHeading4",e[e.ATXHeading5=13]="ATXHeading5",e[e.ATXHeading6=14]="ATXHeading6",e[e.SetextHeading1=15]="SetextHeading1",e[e.SetextHeading2=16]="SetextHeading2",e[e.HTMLBlock=17]="HTMLBlock",e[e.LinkReference=18]="LinkReference",e[e.Paragraph=19]="Paragraph",e[e.CommentBlock=20]="CommentBlock",e[e.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",e[e.Escape=22]="Escape",e[e.Entity=23]="Entity",e[e.HardBreak=24]="HardBreak",e[e.Emphasis=25]="Emphasis",e[e.StrongEmphasis=26]="StrongEmphasis",e[e.Link=27]="Link",e[e.Image=28]="Image",e[e.InlineCode=29]="InlineCode",e[e.HTMLTag=30]="HTMLTag",e[e.Comment=31]="Comment",e[e.ProcessingInstruction=32]="ProcessingInstruction",e[e.URL=33]="URL",e[e.HeaderMark=34]="HeaderMark",e[e.QuoteMark=35]="QuoteMark",e[e.ListMark=36]="ListMark",e[e.LinkMark=37]="LinkMark",e[e.EmphasisMark=38]="EmphasisMark",e[e.CodeMark=39]="CodeMark",e[e.CodeText=40]="CodeText",e[e.CodeInfo=41]="CodeInfo",e[e.LinkTitle=42]="LinkTitle",e[e.LinkLabel=43]="LinkLabel"}(Sp||(Sp={}));class Cp{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class xp{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return Qp(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,r=0){for(let i=t;i<e;i++)r+=9==this.text.charCodeAt(i)?4-r%4:1;return r}findColumn(e){let t=0;for(let r=0;t<this.text.length&&r<e;t++)r+=9==this.text.charCodeAt(t)?4-r%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function kp(e,t,r){if(r.pos==r.text.length||e!=t.block&&r.indent>=t.stack[r.depth+1].value+r.baseIndent)return!0;if(r.indent>=r.baseIndent+4)return!1;let i=(e.type==Sp.OrderedList?Dp:Mp)(r,t,!1);return i>0&&(e.type!=Sp.BulletList||Lp(r,t,!1)<0)&&r.text.charCodeAt(r.pos+i-1)==e.value}const Tp={[Sp.Blockquote]:(e,t,r)=>62==r.next&&(r.markers.push(hg(Sp.QuoteMark,t.lineStart+r.pos,t.lineStart+r.pos+1)),r.moveBase(r.pos+(Pp(r.text.charCodeAt(r.pos+1))?2:1)),e.end=t.lineStart+r.text.length,!0),[Sp.ListItem]:(e,t,r)=>!(r.indent<r.baseIndent+e.value&&r.next>-1)&&(r.moveBaseColumn(r.baseIndent+e.value),!0),[Sp.OrderedList]:kp,[Sp.BulletList]:kp,[Sp.Document]:()=>!0};function Pp(e){return 32==e||9==e||10==e||13==e}function Qp(e,t=0){for(;t<e.length&&Pp(e.charCodeAt(t));)t++;return t}function Rp(e,t,r){for(;t>r&&Pp(e.charCodeAt(t-1));)t--;return t}function Ap(e){if(96!=e.next&&126!=e.next)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;if(t<e.pos+3)return-1;if(96==e.next)for(let r=t;r<e.text.length;r++)if(96==e.text.charCodeAt(r))return-1;return t}function $p(e){return 62!=e.next?-1:32==e.text.charCodeAt(e.pos+1)?2:1}function Lp(e,t,r){if(42!=e.next&&45!=e.next&&95!=e.next)return-1;let i=1;for(let t=e.pos+1;t<e.text.length;t++){let r=e.text.charCodeAt(t);if(r==e.next)i++;else if(!Pp(r))return-1}return r&&45==e.next&&Ip(e)>-1&&e.depth==t.stack.length||i<3?-1:1}function Ep(e,t){for(let r=e.stack.length-1;r>=0;r--)if(e.stack[r].type==t)return!0;return!1}function Mp(e,t,r){return 45!=e.next&&43!=e.next&&42!=e.next||e.pos!=e.text.length-1&&!Pp(e.text.charCodeAt(e.pos+1))||!(!r||Ep(t,Sp.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?-1:1}function Dp(e,t,r){let i=e.pos,n=e.next;for(;n>=48&&n<=57;){if(i++,i==e.text.length)return-1;n=e.text.charCodeAt(i)}return i==e.pos||i>e.pos+9||46!=n&&41!=n||i<e.text.length-1&&!Pp(e.text.charCodeAt(i+1))||r&&!Ep(t,Sp.OrderedList)&&(e.skipSpace(i+1)==e.text.length||i>e.pos+1||49!=e.next)?-1:i+1-e.pos}function Bp(e){if(35!=e.next)return-1;let t=e.pos+1;for(;t<e.text.length&&35==e.text.charCodeAt(t);)t++;if(t<e.text.length&&32!=e.text.charCodeAt(t))return-1;let r=t-e.pos;return r>6?-1:r}function Ip(e){if(45!=e.next&&61!=e.next||e.indent>=e.baseIndent+4)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;let r=t;for(;t<e.text.length&&Pp(e.text.charCodeAt(t));)t++;return t==e.text.length?r:-1}const jp=/^[ \t]*$/,zp=/-->/,Wp=/\?>/,qp=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,zp],[/^\s*<\?/,Wp],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,jp],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,jp]];function Hp(e,t,r){if(60!=e.next)return-1;let i=e.text.slice(e.pos);for(let e=0,t=qp.length-(r?1:0);e<t;e++)if(qp[e][0].test(i))return e;return-1}function Np(e,t){let r=e.countIndent(t,e.pos,e.indent),i=e.countIndent(e.skipSpace(t),t,r);return i>=r+5?r+1:i}function Xp(e,t,r){let i=e.length-1;i>=0&&e[i].to==t&&e[i].type==Sp.CodeText?e[i].to=r:e.push(hg(Sp.CodeText,t,r))}const Fp={LinkReference:void 0,IndentedCode(e,t){let r=t.baseIndent+4;if(t.indent<r)return!1;let i=t.findColumn(r),n=e.lineStart+i,o=e.lineStart+t.text.length,s=[],a=[];for(Xp(s,n,o);e.nextLine()&&t.depth>=e.stack.length;)if(t.pos==t.text.length){Xp(a,e.lineStart-1,e.lineStart);for(let e of t.markers)a.push(e)}else{if(t.indent<r)break;{if(a.length){for(let e of a)e.type==Sp.CodeText?Xp(s,e.from,e.to):s.push(e);a=[]}Xp(s,e.lineStart-1,e.lineStart);for(let e of t.markers)s.push(e);o=e.lineStart+t.text.length;let r=e.lineStart+t.findColumn(t.baseIndent+4);r<o&&Xp(s,r,o)}}return a.length&&(a=a.filter((e=>e.type!=Sp.CodeText)),a.length&&(t.markers=a.concat(t.markers))),e.addNode(e.buffer.writeElements(s,-n).finish(Sp.CodeBlock,o-n),n),!0},FencedCode(e,t){let r=Ap(t);if(r<0)return!1;let i=e.lineStart+t.pos,n=t.next,o=r-t.pos,s=t.skipSpace(r),a=Rp(t.text,t.text.length,s),l=[hg(Sp.CodeMark,i,i+o)];s<a&&l.push(hg(Sp.CodeInfo,e.lineStart+s,e.lineStart+a));for(let r=!0;e.nextLine()&&t.depth>=e.stack.length;r=!1){let i=t.pos;if(t.indent-t.baseIndent<4)for(;i<t.text.length&&t.text.charCodeAt(i)==n;)i++;if(i-t.pos>=o&&t.skipSpace(i)==t.text.length){for(let e of t.markers)l.push(e);l.push(hg(Sp.CodeMark,e.lineStart+t.pos,e.lineStart+i)),e.nextLine();break}{r||Xp(l,e.lineStart-1,e.lineStart);for(let e of t.markers)l.push(e);let i=e.lineStart+t.basePos,n=e.lineStart+t.text.length;i<n&&Xp(l,i,n)}}return e.addNode(e.buffer.writeElements(l,-i).finish(Sp.FencedCode,e.prevLineEnd()-i),i),!0},Blockquote(e,t){let r=$p(t);return!(r<0)&&(e.startContext(Sp.Blockquote,t.pos),e.addNode(Sp.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1),t.moveBase(t.pos+r),null)},HorizontalRule(e,t){if(Lp(t,e,!1)<0)return!1;let r=e.lineStart+t.pos;return e.nextLine(),e.addNode(Sp.HorizontalRule,r),!0},BulletList(e,t){let r=Mp(t,e,!1);if(r<0)return!1;e.block.type!=Sp.BulletList&&e.startContext(Sp.BulletList,t.basePos,t.next);let i=Np(t,t.pos+1);return e.startContext(Sp.ListItem,t.basePos,i-t.baseIndent),e.addNode(Sp.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+r),t.moveBaseColumn(i),null},OrderedList(e,t){let r=Dp(t,e,!1);if(r<0)return!1;e.block.type!=Sp.OrderedList&&e.startContext(Sp.OrderedList,t.basePos,t.text.charCodeAt(t.pos+r-1));let i=Np(t,t.pos+r);return e.startContext(Sp.ListItem,t.basePos,i-t.baseIndent),e.addNode(Sp.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+r),t.moveBaseColumn(i),null},ATXHeading(e,t){let r=Bp(t);if(r<0)return!1;let i=t.pos,n=e.lineStart+i,o=Rp(t.text,t.text.length,i),s=o;for(;s>i&&t.text.charCodeAt(s-1)==t.next;)s--;s!=o&&s!=i&&Pp(t.text.charCodeAt(s-1))||(s=t.text.length);let a=e.buffer.write(Sp.HeaderMark,0,r).writeElements(e.parser.parseInline(t.text.slice(i+r+1,s),n+r+1),-n);s<t.text.length&&a.write(Sp.HeaderMark,s-i,o-i);let l=a.finish(Sp.ATXHeading1-1+r,t.text.length-i);return e.nextLine(),e.addNode(l,n),!0},HTMLBlock(e,t){let r=Hp(t,0,!1);if(r<0)return!1;let i=e.lineStart+t.pos,n=qp[r][1],o=[],s=n!=jp;for(;!n.test(t.text)&&e.nextLine();){if(t.depth<e.stack.length){s=!1;break}for(let e of t.markers)o.push(e)}s&&e.nextLine();let a=n==zp?Sp.CommentBlock:n==Wp?Sp.ProcessingInstructionBlock:Sp.HTMLBlock,l=e.prevLineEnd();return e.addNode(e.buffer.writeElements(o,-i).finish(a,l-i),i),!0},SetextHeading:void 0};class Zp{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,r){if(-1==this.stage)return!1;let i=r.content+"\n"+t.scrub(),n=this.advance(i);return n>-1&&n<i.length&&this.complete(e,r,n)}finish(e,t){return(2==this.stage||3==this.stage)&&Qp(t.content,this.pos)==t.content.length&&this.complete(e,t,t.content.length)}complete(e,t,r){return e.addLeafElement(t,hg(Sp.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(!1===e&&(this.stage=-1),!1)}advance(e){for(;;){if(-1==this.stage)return-1;if(0==this.stage){if(!this.nextStage(wg(e,this.pos,this.start,!0)))return-1;if(58!=e.charCodeAt(this.pos))return this.stage=-1;this.elts.push(hg(Sp.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else{if(1!=this.stage){if(2==this.stage){let t=Qp(e,this.pos),r=0;if(t>this.pos){let i=yg(e,t,this.start);if(i){let t=Up(e,i.to-this.start);t>0&&(this.nextStage(i),r=t)}}return r||(r=Up(e,this.pos)),r>0&&r<e.length?r:-1}return Up(e,this.pos)}if(!this.nextStage(bg(e,Qp(e,this.pos),this.start)))return-1}}}}function Up(e,t){for(;t<e.length;t++){let r=e.charCodeAt(t);if(10==r)break;if(!Pp(r))return-1}return t}class Vp{nextLine(e,t,r){let i=t.depth<e.stack.length?-1:Ip(t),n=t.next;if(i<0)return!1;let o=hg(Sp.HeaderMark,e.lineStart+t.pos,e.lineStart+i);return e.nextLine(),e.addLeafElement(r,hg(61==n?Sp.SetextHeading1:Sp.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),o])),!0}finish(){return!1}}const Gp={LinkReference:(e,t)=>91==t.content.charCodeAt(0)?new Zp(t):null,SetextHeading:()=>new Vp},Yp=[(e,t)=>Bp(t)>=0,(e,t)=>Ap(t)>=0,(e,t)=>$p(t)>=0,(e,t)=>Mp(t,e,!0)>=0,(e,t)=>Dp(t,e,!0)>=0,(e,t)=>Lp(t,e,!0)>=0,(e,t)=>Hp(t,0,!0)>=0],Kp={text:"",end:0};class Jp{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.line=new xp,this.atEnd=!1,this.dontInject=new Set,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=wp.create(Sp.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new kg(r,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(null!=this.stoppedAt&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(;e.depth<this.stack.length;)this.finishContext();for(let t of e.markers)this.addNode(t.type,t.from,t.to);if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let t of this.parser.blockParsers)if(t){let r=t(this,e);if(0!=r){if(1==r)return null;e.forward();continue e}}break}let t=new Cp(this.lineStart+e.pos,e.text.slice(e.pos));for(let e of this.parser.leafBlockParsers)if(e){let r=e(this,t);r&&t.parsers.push(r)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4)for(let r of this.parser.endLeafBlock)if(r(this,e,t))break e;for(let r of t.parsers)if(r.nextLine(this,e,t))return null;t.content+="\n"+e.scrub();for(let r of e.markers)t.marks.push(r)}return this.finishLeaf(t),null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);if(!t)return!1;let r=t,i=this.absoluteLineStart+t;for(let e=1;e<this.ranges.length;e++){let t=this.ranges[e-1].to,n=this.ranges[e].from;t>=this.lineStart&&n<i&&(r-=n-t)}return this.lineStart+=r,this.absoluteLineStart+=t,this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=Kp;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let e=this.absoluteLineStart,r=this.rangeI;for(;this.ranges[r].to<t.end;){r++;let i=this.ranges[r].from,n=this.lineChunkAt(i);t.end=i+n.length,t.text=t.text.slice(0,this.ranges[r-1].to-e)+n,e=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(t);e.depth<this.stack.length;e.depth++){let t=this.stack[e.depth],r=this.parser.skipContextMarkup[t.type];if(!r)throw new Error("Unhandled block context "+Sp[t.type]);if(!r(t,this,e))break;e.forward()}}lineChunkAt(e){let t,r=this.input.chunk(e);if(this.input.lineChunks)t="\n"==r?"":r;else{let e=r.indexOf("\n");t=e<0?r:r.slice(0,e)}return e+t.length>this.to?t.slice(0,this.to-e):t}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,r=0){this.block=wp.create(e,r,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,r=0){this.startContext(this.parser.getNodeType(e),t,r)}addNode(e,t,r){"number"==typeof e&&(e=new Ta(this.parser.nodeSet.types[e],sg,sg,(null!=r?r:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(Cg(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?eg(this.ranges,0,e.topNode,this.ranges[0].from,this.dontInject):e}finishLeaf(e){for(let t of e.parsers)if(t.finish(this,e))return;let t=Cg(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(Sp.Paragraph,e.content.length),e.start)}elt(e,t,r,i){return"string"==typeof e?hg(this.parser.getNodeType(e),t,r,i):new cg(e,t)}get buffer(){return new ag(this.parser.nodeSet)}}function eg(e,t,r,i,n){if(n.has(r.tree))return r.tree;let o=e[t].to,s=[],a=[],l=r.from+i;function c(r,n){for(;n?r>=o:r>o;){let n=e[t+1].from-o;i+=n,r+=n,t++,o=e[t].to}}for(let h=r.firstChild;h;h=h.nextSibling){c(h.from+i,!0);let r,u=h.from+i;h.to+i>o?(r=eg(e,t,h,i,n),c(h.to+i,!1)):r=h.toTree(),s.push(r),a.push(u-l)}return c(r.to+i,!1),new Ta(r.type,s,a,r.to+i-l,r.tree?r.tree.propValues:void 0)}class tg extends Xa{constructor(e,t,r,i,n,o,s,a,l){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=n,this.skipContextMarkup=o,this.inlineParsers=s,this.inlineNames=a,this.wrappers=l,this.nodeTypes=Object.create(null);for(let t of e.types)this.nodeTypes[t.name]=t.id}createParse(e,t,r){let i=new Jp(this,e,t,r);for(let n of this.wrappers)i=n(i,e,t,r);return i}configure(e){let t=ig(e);if(!t)return this;let{nodeSet:r,skipContextMarkup:i}=this,n=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),s=this.blockNames.slice(),a=this.inlineParsers.slice(),l=this.inlineNames.slice(),c=this.endLeafBlock.slice(),h=this.wrappers;if(rg(t.defineNodes)){i=Object.assign({},i);let e,n=r.types.slice();for(let r of t.defineNodes){let{name:t,block:o,composite:s,style:a}="string"==typeof r?{name:r}:r;if(n.some((e=>e.name==t)))continue;s&&(i[n.length]=(e,t,r)=>s(t,r,e.value));let l=n.length,c=s?["Block","BlockContext"]:o?l>=Sp.ATXHeading1&&l<=Sp.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;n.push(wa.define({id:l,name:t,props:c&&[[_a.group,c]]})),a&&(e||(e={}),Array.isArray(a)||a instanceof al?e[t]=a:Object.assign(e,a))}r=new Sa(n),e&&(r=r.extend(ul(e)))}if(rg(t.props)&&(r=r.extend(...t.props)),rg(t.remove))for(let e of t.remove){let t=this.blockNames.indexOf(e),r=this.inlineNames.indexOf(e);t>-1&&(n[t]=o[t]=void 0),r>-1&&(a[r]=void 0)}if(rg(t.parseBlock))for(let e of t.parseBlock){let t=s.indexOf(e.name);if(t>-1)n[t]=e.parse,o[t]=e.leaf;else{let t=e.before?ng(s,e.before):e.after?ng(s,e.after)+1:s.length-1;n.splice(t,0,e.parse),o.splice(t,0,e.leaf),s.splice(t,0,e.name)}e.endLeaf&&c.push(e.endLeaf)}if(rg(t.parseInline))for(let e of t.parseInline){let t=l.indexOf(e.name);if(t>-1)a[t]=e.parse;else{let t=e.before?ng(l,e.before):e.after?ng(l,e.after)+1:l.length-1;a.splice(t,0,e.parse),l.splice(t,0,e.name)}}return t.wrap&&(h=h.concat(t.wrap)),new tg(r,n,o,s,c,i,a,l,h)}getNodeType(e){let t=this.nodeTypes[e];if(null==t)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let r=new Sg(this,e,t);e:for(let e=t;e<r.end;){let t=r.char(e);for(let i of this.inlineParsers)if(i){let n=i(r,t,e);if(n>=0){e=n;continue e}}e++}return r.resolveMarkers(0)}}function rg(e){return null!=e&&e.length>0}function ig(e){if(!Array.isArray(e))return e;if(0==e.length)return null;let t=ig(e[0]);if(1==e.length)return t;let r=ig(e.slice(1));if(!r||!t)return t||r;let i=(e,t)=>(e||sg).concat(t||sg),n=t.wrap,o=r.wrap;return{props:i(t.props,r.props),defineNodes:i(t.defineNodes,r.defineNodes),parseBlock:i(t.parseBlock,r.parseBlock),parseInline:i(t.parseInline,r.parseInline),remove:i(t.remove,r.remove),wrap:n?o?(e,t,r,i)=>n(o(e,t,r,i),t,r,i):n:o}}function ng(e,t){let r=e.indexOf(t);if(r<0)throw new RangeError(`Position specified relative to unknown parser ${t}`);return r}let og=[wa.none];for(let e,t=1;e=Sp[t];t++)og[t]=wa.define({id:t,name:e,props:t>=Sp.Escape?[]:[[_a.group,t in Tp?["Block","BlockContext"]:["Block","LeafBlock"]]]});const sg=[];class ag{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,r,i=0){return this.content.push(e,t,r,4+4*i),this}writeElements(e,t=0){for(let r of e)r.writeTo(this,t);return this}finish(e,t){return Ta.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class lg{constructor(e,t,r,i=sg){this.type=e,this.from=t,this.to=r,this.children=i}writeTo(e,t){let r=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-r)}toTree(e){return new ag(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class cg{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return sg}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function hg(e,t,r,i){return new lg(e,t,r,i)}const ug={resolve:"Emphasis",mark:"EmphasisMark"},dg={resolve:"Emphasis",mark:"EmphasisMark"},fg={},pg={};class gg{constructor(e,t,r,i){this.type=e,this.from=t,this.to=r,this.side=i}}const mg="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let vg=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{vg=new RegExp("[\\p{Pc}|\\p{Pd}|\\p{Pe}|\\p{Pf}|\\p{Pi}|\\p{Po}|\\p{Ps}]","u")}catch(e){}const Og={Escape(e,t,r){if(92!=t||r==e.end-1)return-1;let i=e.char(r+1);for(let t=0;t<mg.length;t++)if(mg.charCodeAt(t)==i)return e.append(hg(Sp.Escape,r,r+2));return-1},Entity(e,t,r){if(38!=t)return-1;let i=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(r+1,r+31));return i?e.append(hg(Sp.Entity,r,r+1+i[0].length)):-1},InlineCode(e,t,r){if(96!=t||r&&96==e.char(r-1))return-1;let i=r+1;for(;i<e.end&&96==e.char(i);)i++;let n=i-r,o=0;for(;i<e.end;i++)if(96==e.char(i)){if(o++,o==n&&96!=e.char(i+1))return e.append(hg(Sp.InlineCode,r,i+1,[hg(Sp.CodeMark,r,r+n),hg(Sp.CodeMark,i+1-n,i+1)]))}else o=0;return-1},HTMLTag(e,t,r){if(60!=t||r==e.end-1)return-1;let i=e.slice(r+1,e.end),n=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(i);if(n)return e.append(hg(Sp.URL,r,r+1+n[0].length));let o=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(i);if(o)return e.append(hg(Sp.Comment,r,r+1+o[0].length));let s=/^\?[^]*?\?>/.exec(i);if(s)return e.append(hg(Sp.ProcessingInstruction,r,r+1+s[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(i);return a?e.append(hg(Sp.HTMLTag,r,r+1+a[0].length)):-1},Emphasis(e,t,r){if(95!=t&&42!=t)return-1;let i=r+1;for(;e.char(i)==t;)i++;let n=e.slice(r-1,r),o=e.slice(i,i+1),s=vg.test(n),a=vg.test(o),l=/\s|^$/.test(n),c=/\s|^$/.test(o),h=!c&&(!a||l||s),u=!l&&(!s||c||a),d=h&&(42==t||!u||s),f=u&&(42==t||!h||a);return e.append(new gg(95==t?ug:dg,r,i,(d?1:0)|(f?2:0)))},HardBreak(e,t,r){if(92==t&&10==e.char(r+1))return e.append(hg(Sp.HardBreak,r,r+2));if(32==t){let t=r+1;for(;32==e.char(t);)t++;if(10==e.char(t)&&t>=r+2)return e.append(hg(Sp.HardBreak,r,t+1))}return-1},Link:(e,t,r)=>91==t?e.append(new gg(fg,r,r+1,1)):-1,Image:(e,t,r)=>33==t&&91==e.char(r+1)?e.append(new gg(pg,r,r+2,1)):-1,LinkEnd(e,t,r){if(93!=t)return-1;for(let t=e.parts.length-1;t>=0;t--){let i=e.parts[t];if(i instanceof gg&&(i.type==fg||i.type==pg)){if(!i.side||e.skipSpace(i.to)==r&&!/[(\[]/.test(e.slice(r+1,r+2)))return e.parts[t]=null,-1;let n=e.takeContent(t),o=e.parts[t]=_g(e,n,i.type==fg?Sp.Link:Sp.Image,i.from,r+1);if(i.type==fg)for(let r=0;r<t;r++){let t=e.parts[r];t instanceof gg&&t.type==fg&&(t.side=0)}return o.to}}return-1}};function _g(e,t,r,i,n){let{text:o}=e,s=e.char(n),a=n;if(t.unshift(hg(Sp.LinkMark,i,i+(r==Sp.Image?2:1))),t.push(hg(Sp.LinkMark,n-1,n)),40==s){let r,i=e.skipSpace(n+1),s=bg(o,i-e.offset,e.offset);s&&(i=e.skipSpace(s.to),r=yg(o,i-e.offset,e.offset),r&&(i=e.skipSpace(r.to))),41==e.char(i)&&(t.push(hg(Sp.LinkMark,n,n+1)),a=i+1,s&&t.push(s),r&&t.push(r),t.push(hg(Sp.LinkMark,i,a)))}else if(91==s){let r=wg(o,n-e.offset,e.offset,!1);r&&(t.push(r),a=r.to)}return hg(r,i,a,t)}function bg(e,t,r){if(60==e.charCodeAt(t)){for(let i=t+1;i<e.length;i++){let n=e.charCodeAt(i);if(62==n)return hg(Sp.URL,t+r,i+1+r);if(60==n||10==n)return!1}return null}{let i=0,n=t;for(let t=!1;n<e.length;n++){let r=e.charCodeAt(n);if(Pp(r))break;if(t)t=!1;else if(40==r)i++;else if(41==r){if(!i)break;i--}else 92==r&&(t=!0)}return n>t?hg(Sp.URL,t+r,n+r):n==e.length&&null}}function yg(e,t,r){let i=e.charCodeAt(t);if(39!=i&&34!=i&&40!=i)return!1;let n=40==i?41:i;for(let i=t+1,o=!1;i<e.length;i++){let s=e.charCodeAt(i);if(o)o=!1;else{if(s==n)return hg(Sp.LinkTitle,t+r,i+1+r);92==s&&(o=!0)}}return null}function wg(e,t,r,i){for(let n=!1,o=t+1,s=Math.min(e.length,o+999);o<s;o++){let s=e.charCodeAt(o);if(n)n=!1;else{if(93==s)return!i&&hg(Sp.LinkLabel,t+r,o+1+r);if(i&&!Pp(s)&&(i=!1),91==s)return!1;92==s&&(n=!0)}}return null}class Sg{constructor(e,t,r){this.parser=e,this.text=t,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,r,i,n){return this.append(new gg(e,t,r,(i?1:0)|(n?2:0)))}addElement(e){return this.append(e)}resolveMarkers(e){for(let t=e;t<this.parts.length;t++){let r=this.parts[t];if(!(r instanceof gg&&r.type.resolve&&2&r.side))continue;let i,n=r.type==ug||r.type==dg,o=r.to-r.from,s=t-1;for(;s>=e;s--){let e=this.parts[s];if(e instanceof gg&&1&e.side&&e.type==r.type&&!(n&&(1&r.side||2&e.side)&&(e.to-e.from+o)%3==0&&((e.to-e.from)%3||o%3))){i=e;break}}if(!i)continue;let a=r.type.resolve,l=[],c=i.from,h=r.to;if(n){let e=Math.min(2,i.to-i.from,o);c=i.to-e,h=r.from+e,a=1==e?"Emphasis":"StrongEmphasis"}i.type.mark&&l.push(this.elt(i.type.mark,c,i.to));for(let e=s+1;e<t;e++)this.parts[e]instanceof lg&&l.push(this.parts[e]),this.parts[e]=null;r.type.mark&&l.push(this.elt(r.type.mark,r.from,h));let u=this.elt(a,c,h,l);this.parts[s]=n&&i.from!=c?new gg(i.type,i.from,c,i.side):null,(this.parts[t]=n&&r.to!=h?new gg(r.type,h,r.to,r.side):null)?this.parts.splice(t,0,u):this.parts[t]=u}let t=[];for(let r=e;r<this.parts.length;r++){let e=this.parts[r];e instanceof lg&&t.push(e)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let r=this.parts[t];if(r instanceof gg&&r.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return Qp(this.text,e-this.offset)+this.offset}elt(e,t,r,i){return"string"==typeof e?hg(this.parser.getNodeType(e),t,r,i):new cg(e,t)}}function Cg(e,t){if(!t.length)return e;if(!e.length)return t;let r=e.slice(),i=0;for(let e of t){for(;i<r.length&&r[i].to<e.to;)i++;if(i<r.length&&r[i].from<e.from){let t=r[i];t instanceof lg&&(r[i]=new lg(t.type,t.from,t.to,Cg(t.children,[e])))}else r.splice(i++,0,e)}return r}const xg=[Sp.CodeBlock,Sp.ListItem,Sp.OrderedList,Sp.BulletList];class kg{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let e=this.fragment.to;for(;e>0&&"\n"!=this.input.read(e-1,e);)e--;this.fragmentEnd=e?e-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let i=e+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=t;if(!r.childAfter(i))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(_a.contextHash)==e}takeNodes(e){let t=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-(this.fragment.openEnd?1:0),n=e.absoluteLineStart,o=n,s=e.block.children.length,a=o,l=s;for(;;){if(t.to-r>i){if(t.type.isAnonymous&&t.firstChild())continue;break}if(e.dontInject.add(t.tree),e.addNode(t.tree,t.from-r),t.type.is("Block")&&(xg.indexOf(t.type.id)<0?(o=t.to-r,s=e.block.children.length):(o=a,s=l,a=t.to-r,l=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>s;)e.block.children.pop(),e.block.positions.pop();return o-n}}const Tg=ul({"Blockquote/...":Ll.quote,HorizontalRule:Ll.contentSeparator,"ATXHeading1/... SetextHeading1/...":Ll.heading1,"ATXHeading2/... SetextHeading2/...":Ll.heading2,"ATXHeading3/...":Ll.heading3,"ATXHeading4/...":Ll.heading4,"ATXHeading5/...":Ll.heading5,"ATXHeading6/...":Ll.heading6,"Comment CommentBlock":Ll.comment,Escape:Ll.escape,Entity:Ll.character,"Emphasis/...":Ll.emphasis,"StrongEmphasis/...":Ll.strong,"Link/... Image/...":Ll.link,"OrderedList/... BulletList/...":Ll.list,"BlockQuote/...":Ll.quote,"InlineCode CodeText":Ll.monospace,URL:Ll.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":Ll.processingInstruction,"CodeInfo LinkLabel":Ll.labelName,LinkTitle:Ll.string,Paragraph:Ll.content}),Pg=new tg(new Sa(og).extend(Tg),Object.keys(Fp).map((e=>Fp[e])),Object.keys(Fp).map((e=>Gp[e])),Object.keys(Fp),Yp,Tp,Object.keys(Og).map((e=>Og[e])),Object.keys(Og),[]);function Qg(e,t,r){let i=[];for(let n=e.firstChild,o=t;;n=n.nextSibling){let e=n?n.from:r;if(e>o&&i.push({from:o,to:e}),!n)break;o=n.to}return i}const Rg={resolve:"Strikethrough",mark:"StrikethroughMark"},Ag={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":Ll.strikethrough}},{name:"StrikethroughMark",style:Ll.processingInstruction}],parseInline:[{name:"Strikethrough",parse:(e,t,r)=>126!=t||126!=e.char(r+1)?-1:e.addDelimiter(Rg,r,r+2,!0,!0),after:"Emphasis"}]};function $g(e,t,r=0,i,n=0){let o=0,s=!0,a=-1,l=-1,c=!1,h=()=>{i.push(e.elt("TableCell",n+a,n+l,e.parser.parseInline(t.slice(a,l),n+a)))};for(let u=r;u<t.length;u++){let r=t.charCodeAt(u);124!=r||c?(c||32!=r&&9!=r)&&(a<0&&(a=u),l=u+1):((!s||a>-1)&&o++,s=!1,i&&(a>-1&&h(),i.push(e.elt("TableDelimiter",u+n,u+n+1))),a=l=-1),c=!c&&92==r}return a>-1&&(o++,i&&h()),o}function Lg(e,t){for(let r=t;r<e.length;r++){let t=e.charCodeAt(r);if(124==t)return!0;92==t&&r++}return!1}const Eg=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class Mg{constructor(){this.rows=null}nextLine(e,t,r){if(null==this.rows){let i;if(this.rows=!1,(45==t.next||58==t.next||124==t.next)&&Eg.test(i=t.text.slice(t.pos))){let n=[];$g(e,r.content,0,n,r.start)==$g(e,i,t.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,n),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let r=[];$g(e,t.text,t.pos,r,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,r))}return!1}finish(e,t){return!!this.rows&&(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0)}}const Dg={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":Ll.heading}},"TableRow",{name:"TableCell",style:Ll.content},{name:"TableDelimiter",style:Ll.processingInstruction}],parseBlock:[{name:"Table",leaf:(e,t)=>Lg(t.content,0)?new Mg:null,endLeaf(e,t,r){if(r.parsers.some((e=>e instanceof Mg))||!Lg(t.text,t.basePos))return!1;let i=e.scanLine(e.absoluteLineEnd+1).text;return Eg.test(i)&&$g(e,t.text,t.basePos)==$g(e,i,t.basePos)},before:"SetextHeading"}]};class Bg{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}const Ig=[Dg,{defineNodes:[{name:"Task",block:!0,style:Ll.list},{name:"TaskMarker",style:Ll.atom}],parseBlock:[{name:"TaskList",leaf:(e,t)=>/^\[[ xX]\]/.test(t.content)&&"ListItem"==e.parentType().name?new Bg:null,after:"SetextHeading"}]},Ag];function jg(e,t,r){return(i,n,o)=>{if(n!=e||i.char(o+1)==e)return-1;let s=[i.elt(r,o,o+1)];for(let n=o+1;n<i.end;n++){let a=i.char(n);if(a==e)return i.addElement(i.elt(t,o,n+1,s.concat(i.elt(r,n,n+1))));if(92==a&&s.push(i.elt("Escape",n,2+n++)),Pp(a))break}return-1}}const zg={defineNodes:[{name:"Superscript",style:Ll.special(Ll.content)},{name:"SuperscriptMark",style:Ll.processingInstruction}],parseInline:[{name:"Superscript",parse:jg(94,"Superscript","SuperscriptMark")}]},Wg={defineNodes:[{name:"Subscript",style:Ll.special(Ll.content)},{name:"SubscriptMark",style:Ll.processingInstruction}],parseInline:[{name:"Subscript",parse:jg(126,"Subscript","SubscriptMark")}]},qg={defineNodes:[{name:"Emoji",style:Ll.character}],parseInline:[{name:"Emoji",parse(e,t,r){let i;return 58==t&&(i=/^[a-zA-Z_0-9]+:/.exec(e.slice(r+1,e.end)))?e.addElement(e.elt("Emoji",r,r+1+i[0].length)):-1}}]};class Hg{constructor(e,t,r,i,n,o,s,a,l,c=0,h){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=n,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=h}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new Hg(e,[],t,r,r,0,[],0,i?new Ng(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,r=65535&e,{parser:i}=this.p,n=i.dynamicPrecedence(r);if(n&&(this.score+=n),0==t)return this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),void this.reduceContext(r,this.reducePos);let o=this.stack.length-3*(t-1)-(262144&e?6:0),s=this.stack[o-2],a=this.stack[o-1],l=this.bufferBase+this.buffer.length-a;if(r<i.minRepeatTerm||131072&e){let e=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,s,e,l+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=i.getGoto(e,r,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(r,s)}storeNode(e,t,r,i=4,n=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,i=this.buffer.length;if(0==i&&e.parent&&(i=e.bufferBase-e.parent.bufferBase,e=e.parent),i>0&&0==e.buffer[i-4]&&e.buffer[i-1]>-1){if(t==r)return;if(e.buffer[i-2]>=t)return void(e.buffer[i-2]=r)}}if(n&&this.pos!=r){let n=this.buffer.length;if(n>0&&0!=this.buffer[n-4])for(;n>0&&this.buffer[n-2]>r;)this.buffer[n]=this.buffer[n-4],this.buffer[n+1]=this.buffer[n-3],this.buffer[n+2]=this.buffer[n-2],this.buffer[n+3]=this.buffer[n-1],n-=4,i>4&&(i-=4);this.buffer[n]=e,this.buffer[n+1]=t,this.buffer[n+2]=r,this.buffer[n+3]=i}else this.buffer.push(e,t,r,i)}shift(e,t,r){let i=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let n=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(n,1)||(this.reducePos=r)),this.pushState(n,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,r){65536&e?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new Hg(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Fg(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==(65536&r))return!0;if(0==r)return!1;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let i,n=0;n<t.length;n+=2)(i=t[n+1])!=this.state&&this.p.parser.hasAction(i,e)&&r.push(t[n],i);if(this.stack.length<120)for(let e=0;r.length<8&&e<t.length;e+=2){let i=t[e+1];r.some(((e,t)=>1&t&&e==i))||r.push(t[e],i)}t=r}let r=[];for(let e=0;e<t.length&&r.length<4;e+=2){let i=t[e+1];if(i==this.state)continue;let n=this.split();n.pushState(i,this.pos),n.storeNode(0,n.pos,n.pos,4,!0),n.shiftContext(t[e],this.pos),n.score-=200,r.push(n)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let r=e>>19,i=65535&e,n=this.stack.length-3*r;if(n<0||t.getGoto(this.stack[n],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Ng(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Ng{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var Xg;!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(Xg||(Xg={}));class Fg{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,r=e>>19;0==r?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(r-1);let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class Zg{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Zg(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new Zg(this.stack,this.pos,this.index)}}class Ug{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Vg=new Ug;class Gg{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Vg,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,n=this.pos+e;for(;n<r.from;){if(!i)return null;let e=this.ranges[--i];n-=r.from-e.to,r=e}for(;t<0?n>r.to:n>=r.to;){if(i==this.ranges.length-1)return null;let e=this.ranges[++i];n+=e.from-r.to,r=e}return n}peek(e){let t,r,i=this.chunkOff+e;if(i>=0&&i<this.chunk.length)t=this.pos+e,r=this.chunk.charCodeAt(i);else{let i=this.resolveOffset(e,1);if(null==i)return-1;if(t=i,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,i=this.range;for(;i.to<=t;)i=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>i.to&&(this.chunk2=this.chunk2.slice(0,i.to-t)),r=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),r}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(null==r||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Vg,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class Yg{constructor(e,t){this.data=e,this.id=t}token(e,t){!function(e,t,r,i){let n=0,o=1<<i,{parser:s}=r.p,{dialect:a}=s;e:for(;0!=(o&e[n]);){let r=e[n+1];for(let i=n+3;i<r;i+=2)if((e[i+1]&o)>0){let r=e[i];if(a.allows(r)&&(-1==t.token.value||t.token.value==r||s.overrides(r,t.token.value))){t.acceptToken(r);break}}let i=t.next,l=0,c=e[n+2];if(!(t.next<0&&c>l&&65535==e[r+3*c-3])){for(;l<c;){let o=l+c>>1,s=r+o+(o<<1),a=e[s],h=e[s+1];if(i<a)c=o;else{if(!(i>=h)){n=e[s+2],t.advance();continue e}l=o+1}}break}n=e[r+3*c-1]}}(this.data,e,t,this.id)}}Yg.prototype.contextual=Yg.prototype.fallback=Yg.prototype.extend=!1;class Kg{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Jg(e,t=Uint16Array){if("string"!=typeof e)return e;let r=null;for(let i=0,n=0;i<e.length;){let o=0;for(;;){let t=e.charCodeAt(i++),r=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let n=t-32;if(n>=46&&(n-=46,r=!0),o+=n,r)break;o*=46}r?r[n++]=o:r=new t(o)}return r}const em="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let tm=null;var rm,im;function nm(e,t,r){let i=e.cursor(ka.IncludeAnonymous);for(i.moveTo(t);;)if(!(r<0?i.childBefore(t):i.childAfter(t)))for(;;){if((r<0?i.to<t:i.from>t)&&!i.type.isError)return r<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(e.length,Math.max(i.from+1,t+25));if(r<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return r<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(rm||(rm={}));class om{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?nm(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?nm(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=r.children[i],o=this.start[t]+r.positions[i];if(o>e)return this.nextStart=o,null;if(n instanceof Ta){if(o==e){if(o<this.safeFrom)return null;let e=o+n.length;if(e<=this.safeTo){let t=n.prop(_a.lookAhead);if(!t||e+t<this.fragment.to)return n}}this.index[t]++,o+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+n.length}}}class sm{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new Ug))}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:n}=i,o=i.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let i=0;i<n.length;i++){if(0==(1<<i&o))continue;let l=n[i],c=this.tokens[i];if((!r||l.fallback)&&((l.contextual||c.start!=e.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,l,e),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let i=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!l.extend&&(r=c,t>i))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),r||e.pos!=this.stream.end||(r=new Ug,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Ug,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){if(t.token(this.stream.reset(r.pos,e),r),e.value>-1){let{parser:t}=r.p;for(let i=0;i<t.specialized.length;i++)if(t.specialized[i]==e.value){let n=t.specializers[i](this.stream.read(e.start,e.end),r);if(n>=0&&r.p.parser.dialect.allows(n>>1)){0==(1&n)?e.value=n>>1:e.extended=n>>1;break}}}else e.value=0,e.end=Math.min(r.p.stream.end,r.pos+1)}putAction(e,t,r,i){for(let t=0;t<i;t+=3)if(this.actions[t]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:n}=e,{parser:o}=e.p,{data:s}=o;for(let e=0;e<2;e++)for(let a=o.stateSlot(n,e?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==i&&2==s[a+1]&&(i=this.putAction(fm(s,a+2),t,r,i));break}a=fm(s,a+2)}s[a]==t&&(i=this.putAction(fm(s,a+1),t,r,i))}return i}}!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"}(im||(im={}));class am{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new Gg(t,i),this.tokens=new sm(e,this.stream),this.topTerm=e.top[1];let{from:n}=i[0];this.stacks=[Hg.start(this,e.top[0],n)],this.fragments=r.length&&this.stream.end-n>4*e.bufferLength?new om(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,r=this.stacks,i=this.minStackPos,n=this.stacks=[];for(let o=0;o<r.length;o++){let s=r[o];for(;;){if(this.tokens.mainToken=null,s.pos>i)n.push(s);else{if(this.advanceStack(s,n,r))continue;{e||(e=[],t=[]),e.push(s);let r=this.tokens.getMainToken(s);t.push(r.value,r.end)}}break}}if(!n.length){let t=e&&function(e){let t=null;for(let r of e){let e=r.p.stoppedAt;(r.pos==r.p.stream.end||null!=e&&r.pos>e)&&r.p.parser.stateFlag(r.state,2)&&(!t||t.score<r.score)&&(t=r)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw em&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&e){let r=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,n);if(r)return this.stackToTree(r.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(n.length>e)for(n.sort(((e,t)=>t.score-e.score));n.length>e;)n.pop();n.some((e=>e.reducePos>i))&&this.recovering--}else if(n.length>1)e:for(let e=0;e<n.length-1;e++){let t=n[e];for(let r=e+1;r<n.length;r++){let i=n[r];if(t.sameState(i)||t.buffer.length>500&&i.buffer.length>500){if(!((t.score-i.score||t.buffer.length-i.buffer.length)>0)){n.splice(e--,1);continue e}n.splice(r--,1)}}}this.minStackPos=n[0].pos;for(let e=1;e<n.length;e++)n[e].pos<this.minStackPos&&(this.minStackPos=n[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:n}=this,o=em?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,r=t?e.curContext.hash:0;for(let s=this.fragments.nodeAt(i);s;){let i=this.parser.nodeSet.types[s.type.id]==s.type?n.getGoto(e.state,s.type.id):-1;if(i>-1&&s.length&&(!t||(s.prop(_a.contextHash)||0)==r))return e.useNode(s,i),em&&console.log(o+this.stackID(e)+` (via reuse of ${n.getName(s.type.id)})`),!0;if(!(s instanceof Ta)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof Ta&&0==s.positions[0]))break;s=a}}let s=n.stateSlot(e.state,4);if(s>0)return e.reduce(s),em&&console.log(o+this.stackID(e)+` (via always-reduce ${n.getName(65535&s)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],h=a[s++],u=s==a.length||!r,d=u?e:e.split();if(d.apply(l,c,h),em&&console.log(o+this.stackID(d)+` (via ${0==(65536&l)?"shift":`reduce of ${n.getName(65535&l)}`} for ${n.getName(c)} @ ${i}${d==e?"":", split"})`),u)return!0;d.pos>i?t.push(d):r.push(d)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return lm(e,t),!0}}runRecovery(e,t,r){let i=null,n=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[1+(o<<1)],c=em?this.stackID(s)+" -> ":"";if(s.deadEnd){if(n)continue;if(n=!0,s.restart(),em&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,r))continue}let h=s.split(),u=c;for(let e=0;h.forceReduce()&&e<10;e++){if(em&&console.log(u+this.stackID(h)+" (via force-reduce)"),this.advanceFully(h,r))break;em&&(u=this.stackID(h)+" -> ")}for(let e of s.recoverByInsert(a))em&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,r);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),em&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),lm(s,r)):(!i||i.score<s.score)&&(i=s)}return i}stackToTree(e){return e.close(),Ta.build({buffer:Zg.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(tm||(tm=new WeakMap)).get(e);return t||tm.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function lm(e,t){for(let r=0;r<t.length;r++){let i=t[r];if(i.pos==e.pos&&i.sameState(e))return void(t[r].score<e.score&&(t[r]=e))}t.push(e)}class cm{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||0==this.disabled[e]}}const hm=e=>e;class um{constructor(e){this.start=e.start,this.shift=e.shift||hm,this.reduce=e.reduce||hm,this.reuse=e.reuse||hm,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}class dm extends Xa{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let r=0;r<e.repeatNodeCount;r++)t.push("");let r=Object.keys(e.topRules).map((t=>e.topRules[t][1])),i=[];for(let e=0;e<t.length;e++)i.push([]);function n(e,t,r){i[e].push([t,t.deserialize(String(r))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=_a[e]);for(let r=1;r<t.length;){let i=t[r++];if(i>=0)n(i,e,t[r++]);else{let o=t[r+-i];for(let s=-i;s>0;s--)n(t[r++],e,o);r++}}}this.nodeSet=new Sa(t.map(((t,n)=>wa.define({name:n>=this.minRepeatTerm?void 0:t,id:n,props:i[n],top:r.indexOf(n)>-1,error:0==n,skipped:e.skippedNodes&&e.skippedNodes.indexOf(n)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=ma;let o=Jg(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let t=0;t<e.specialized.length;t++)this.specialized[t]=e.specialized[t].term,this.specializers[t]=e.specialized[t].get;this.states=Jg(e.states,Uint32Array),this.data=Jg(e.stateData),this.goto=Jg(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new Yg(o,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new am(this,e,t,r);for(let n of this.wrappers)i=n(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let n=i[t+1];;){let t=i[n++],o=1&t,s=i[n++];if(o&&r)return s;for(let r=n+(t>>1);n<r;n++)if(i[n]==e)return s;if(o)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let n,o=this.stateSlot(e,i?2:1);;o+=3){if(65535==(n=r[o])){if(1!=r[o+1]){if(2==r[o+1])return fm(r,o+2);break}n=r[o=fm(r,o+2)]}if(n==t||0==n)return fm(r,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])return!1;r=fm(this.data,r+2)}if(t==fm(this.data,r+1))return!0}}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=fm(this.data,r+2)}if(0==(1&this.data[r+2])){let e=this.data[r+1];t.some(((t,r)=>1&r&&t==e))||t.push(this.data[r],e)}}return t}overrides(e,t){let r=pm(this.data,this.tokenPrecTable,t);return r<0||pm(this.data,this.tokenPrecTable,e)<r}configure(e){let t=Object.assign(Object.create(dm.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let r=e.tokenizers.find((e=>e.from==t));return r?r.to:t}))),e.specializers&&(t.specializers=this.specializers.map((t=>{let r=e.specializers.find((e=>e.from==t));return r?r.to:t}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map((()=>!1));if(e)for(let i of e.split(" ")){let e=t.indexOf(i);e>=0&&(r[e]=!0)}let i=null;for(let e=0;e<t.length;e++)if(!r[e])for(let r,n=this.dialects[t[e]];65535!=(r=this.data[n++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[r]=1;return new cm(e,r,i)}static deserialize(e){return new dm(e)}}function fm(e,t){return e[t]|e[t+1]<<16}function pm(e,t,r){for(let i,n=t;65535!=(i=e[n]);n++)if(i==r)return n-t;return-1}const gm={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},mm={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},vm={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function Om(e){return 9==e||10==e||13==e||32==e}let _m=null,bm=null,ym=0;function wm(e,t){let r=e.pos+t;if(ym==r&&bm==e)return _m;let i=e.peek(t);for(;Om(i);)i=e.peek(++t);let n="";for(;45==(o=i)||46==o||58==o||o>=65&&o<=90||95==o||o>=97&&o<=122||o>=161;)n+=String.fromCharCode(i),i=e.peek(++t);var o;return bm=e,ym=r,_m=n?n.toLowerCase():i==Sm||i==Cm?void 0:null}const Sm=63,Cm=33;function xm(e,t){this.name=e,this.parent=t,this.hash=t?t.hash:0;for(let t=0;t<e.length;t++)this.hash+=(this.hash<<4)+e.charCodeAt(t)+(e.charCodeAt(t)<<8)}const km=[4,8,5,6,7],Tm=new um({start:null,shift:(e,t,r,i)=>km.indexOf(t)>-1?new xm(wm(i,1)||"",e):e,reduce:(e,t)=>18==t&&e?e.parent:e,reuse(e,t,r,i){let n=t.type.id;return 4==n||35==n?new xm(wm(i,1)||"",e):e},hash:e=>e?e.hash:0,strict:!1}),Pm=new Kg(((e,t)=>{if(60!=e.next)return void(e.next<0&&t.context&&e.acceptToken(56));e.advance();let r=47==e.next;r&&e.advance();let i=wm(e,0);if(void 0===i)return;if(!i)return e.acceptToken(r?12:4);let n=t.context?t.context.name:null;if(r){if(i==n)return e.acceptToken(9);if(n&&mm[n])return e.acceptToken(56,-2);if(t.dialectEnabled(0))return e.acceptToken(10);for(let e=t.context;e;e=e.parent)if(e.name==i)return;e.acceptToken(11)}else{if("script"==i)return e.acceptToken(5);if("style"==i)return e.acceptToken(6);if("textarea"==i)return e.acceptToken(7);if(gm.hasOwnProperty(i))return e.acceptToken(8);n&&vm[n]&&vm[n][i]?e.acceptToken(56,-1):e.acceptToken(4)}}),{contextual:!0}),Qm=new Kg((e=>{for(let t=0,r=0;;r++){if(e.next<0){r&&e.acceptToken(57);break}if(45==e.next)t++;else{if(62==e.next&&t>=2){r>3&&e.acceptToken(57,-2);break}t=0}e.advance()}}));function Rm(e,t,r){let i=2+e.length;return new Kg((n=>{for(let o=0,s=0,a=0;;a++){if(n.next<0){a&&n.acceptToken(t);break}if(0==o&&60==n.next||1==o&&47==n.next||o>=2&&o<i&&n.next==e.charCodeAt(o-2))o++,s++;else if(2!=o&&o!=i||!Om(n.next)){if(o==i&&62==n.next){a>s?n.acceptToken(t,-s):n.acceptToken(r,-(s-2));break}if((10==n.next||13==n.next)&&a){n.acceptToken(t,1);break}o=s=0}else s++;n.advance()}}))}const Am=Rm("script",53,1),$m=Rm("style",54,2),Lm=Rm("textarea",55,3),Em=ul({"Text RawText":Ll.content,"StartTag StartCloseTag SelfCloserEndTag EndTag SelfCloseEndTag":Ll.angleBracket,TagName:Ll.tagName,"MismatchedCloseTag/TagName":[Ll.tagName,Ll.invalid],AttributeName:Ll.attributeName,"AttributeValue UnquotedAttributeValue":Ll.attributeValue,Is:Ll.definitionOperator,"EntityReference CharacterReference":Ll.character,Comment:Ll.blockComment,ProcessingInst:Ll.processingInstruction,DoctypeDecl:Ll.documentMeta}),Mm=dm.deserialize({version:14,states:",xOVOxOOO!WQ!bO'#CoO!]Q!bO'#CyO!bQ!bO'#C|O!gQ!bO'#DPO!lQ!bO'#DRO!qOXO'#CnO!|OYO'#CnO#XO[O'#CnO$eOxO'#CnOOOW'#Cn'#CnO$lO!rO'#DSO$tQ!bO'#DUO$yQ!bO'#DVOOOW'#Dj'#DjOOOW'#DX'#DXQVOxOOO%OQ#tO,59ZO%WQ#tO,59eO%`Q#tO,59hO%hQ#tO,59kO%pQ#tO,59mOOOX'#D]'#D]O%xOXO'#CwO&TOXO,59YOOOY'#D^'#D^O&]OYO'#CzO&hOYO,59YOOO['#D_'#D_O&pO[O'#C}O&{O[O,59YOOOW'#D`'#D`O'TOxO,59YO'[Q!bO'#DQOOOW,59Y,59YOOO`'#Da'#DaO'aO!rO,59nOOOW,59n,59nO'iQ!bO,59pO'nQ!bO,59qOOOW-E7V-E7VO'sQ#tO'#CqOOQO'#DY'#DYO(OQ#tO1G.uOOOX1G.u1G.uO(WQ#tO1G/POOOY1G/P1G/PO(`Q#tO1G/SOOO[1G/S1G/SO(hQ#tO1G/VOOOW1G/V1G/VO(pQ#tO1G/XOOOW1G/X1G/XOOOX-E7Z-E7ZO(xQ!bO'#CxOOOW1G.t1G.tOOOY-E7[-E7[O(}Q!bO'#C{OOO[-E7]-E7]O)SQ!bO'#DOOOOW-E7^-E7^O)XQ!bO,59lOOO`-E7_-E7_OOOW1G/Y1G/YOOOW1G/[1G/[OOOW1G/]1G/]O)^Q&jO,59]OOQO-E7W-E7WOOOX7+$a7+$aOOOY7+$k7+$kOOO[7+$n7+$nOOOW7+$q7+$qOOOW7+$s7+$sO)iQ!bO,59dO)nQ!bO,59gO)sQ!bO,59jOOOW1G/W1G/WO)xO,UO'#CtO*WO7[O'#CtOOQO1G.w1G.wOOOW1G/O1G/OOOOW1G/R1G/ROOOW1G/U1G/UOOOO'#DZ'#DZO*fO,UO,59`OOQO,59`,59`OOOO'#D['#D[O*tO7[O,59`OOOO-E7X-E7XOOQO1G.z1G.zOOOO-E7Y-E7Y",stateData:"+[~O!]OS~OSSOTPOUQOVROWTOY]OZ[O[^O^^O_^O`^Oa^Ow^Oz_O!cZO~OdaO~OdbO~OdcO~OddO~OdeO~O!VfOPkP!YkP~O!WiOQnP!YnP~O!XlORqP!YqP~OSSOTPOUQOVROWTOXqOY]OZ[O[^O^^O_^O`^Oa^Ow^O!cZO~O!YrO~P#dO!ZsO!duO~OdvO~OdwO~OfyOj|O~OfyOj!OO~OfyOj!QO~OfyOj!SO~OfyOj!UO~O!VfOPkX!YkX~OP!WO!Y!XO~O!WiOQnX!YnX~OQ!ZO!Y!XO~O!XlORqX!YqX~OR!]O!Y!XO~O!Y!XO~P#dOd!_O~O!ZsO!d!aO~Oj!bO~Oj!cO~Og!dOfeXjeX~OfyOj!fO~OfyOj!gO~OfyOj!hO~OfyOj!iO~OfyOj!jO~Od!kO~Od!lO~Od!mO~Oj!nO~Oi!qO!_!oO!a!pO~Oj!rO~Oj!sO~Oj!tO~O_!uO`!uO!_!wO!`!uO~O_!xO`!xO!a!wO!b!xO~O_!uO`!uO!_!{O!`!uO~O_!xO`!xO!a!{O!b!xO~O`_a!cwz!c~",goto:"%o!_PPPPPPPPPPPPPPPPPP!`!fP!lPP!xPP!{#O#R#X#[#_#e#h#k#q#w!`P!`!`P#}$T$k$q$w$}%T%Z%aPPPPPPPP%gX^OX`pXUOX`pezabcde{}!P!R!TR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!TeZ!e{}!P!R!TQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"⚠ StartCloseTag StartCloseTag StartCloseTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue EndTag ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:66,context:Tm,nodeProps:[["closedBy",-11,1,2,3,4,5,6,7,8,9,10,11,"EndTag",-4,19,29,32,35,"CloseTag"],["group",-9,12,15,16,17,18,38,39,40,41,"Entity",14,"Entity TextContent",-3,27,30,33,"TextContent Entity"],["openedBy",26,"StartTag StartCloseTag",-4,28,31,34,36,"OpenTag"]],propSources:[Em],skippedNodes:[0],repeatNodeCount:9,tokenData:"!#b!aR!WOX$kXY)sYZ)sZ]$k]^)s^p$kpq)sqr$krs*zsv$kvw+dwx2yx}$k}!O3f!O!P$k!P!Q7_!Q![$k![!]8u!]!^$k!^!_>b!_!`!!p!`!a8T!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U$k4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!Z$vc^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!R&[V^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&Rq&xT^P!bpOv&qwx'Xx!^&q!^!_'g!_~&qP'^R^POv'Xw!^'X!_~'Xp'lQ!bpOv'gx~'ga'yU^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r`(bR!``Or(]sv(]w~(]!Q(rT!``!bpOr(krs'gsv(kwx(]x~(kW)WXiWOX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!a*O^^P!``!bp!]^OX&RXY)sYZ)sZ]&R]^)s^p&Rpq)sqr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!Z+TT!_h^P!bpOv&qwx'Xx!^&q!^!_'g!_~&q!Z+kbiWaPOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst/]tw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^)R!^!a.Q!a$f,s$f$g.Q$g~,s!Z,xbiWOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst)Rtw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^.i!^!a.Q!a$f,s$f$g.Q$g~,s!R.TTOp.Qqs.Qt!].Q!]!^.d!^~.Q!R.iO_!R!Z.pXiW_!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z/baiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^)R!^!a1q!a$f0g$f$g1q$g~0g!Z0laiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^2V!^!a1q!a$f0g$f$g1q$g~0g!R1tSOp1qq!]1q!]!^2Q!^~1q!R2VO`!R!Z2^XiW`!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z3SU!ax^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r!]3qe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O5S!O!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!]5_d^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!`&R!`!a6m!a$f$k$f$g&R$g~$k!T6xV^P!``!bp!dQOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!X7hX^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_!`&R!`!a8T!a~&R!X8`VjU^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!a9U!YfSdQ^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O8u!O!P8u!P!Q&R!Q![8u![!]8u!]!^$k!^!_(k!_!a&R!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g$}$k$}%O8u%O%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U8u4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Je$k$Je$Jg8u$Jg$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!a=Pe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g;=`$k;=`<%l8u<%l~$k!R>iW!``!bpOq(kqr?Rrs'gsv(kwx(]x!a(k!a!bKj!b~(k!R?YZ!``!bpOr(krs'gsv(kwx(]x}(k}!O?{!O!f(k!f!gAR!g#W(k#W#XGz#X~(k!R@SV!``!bpOr(krs'gsv(kwx(]x}(k}!O@i!O~(k!R@rT!``!bp!cPOr(krs'gsv(kwx(]x~(k!RAYV!``!bpOr(krs'gsv(kwx(]x!q(k!q!rAo!r~(k!RAvV!``!bpOr(krs'gsv(kwx(]x!e(k!e!fB]!f~(k!RBdV!``!bpOr(krs'gsv(kwx(]x!v(k!v!wBy!w~(k!RCQV!``!bpOr(krs'gsv(kwx(]x!{(k!{!|Cg!|~(k!RCnV!``!bpOr(krs'gsv(kwx(]x!r(k!r!sDT!s~(k!RD[V!``!bpOr(krs'gsv(kwx(]x!g(k!g!hDq!h~(k!RDxW!``!bpOrDqrsEbsvDqvwEvwxFfx!`Dq!`!aGb!a~DqqEgT!bpOvEbvxEvx!`Eb!`!aFX!a~EbPEyRO!`Ev!`!aFS!a~EvPFXOzPqF`Q!bpzPOv'gx~'gaFkV!``OrFfrsEvsvFfvwEvw!`Ff!`!aGQ!a~FfaGXR!``zPOr(]sv(]w~(]!RGkT!``!bpzPOr(krs'gsv(kwx(]x~(k!RHRV!``!bpOr(krs'gsv(kwx(]x#c(k#c#dHh#d~(k!RHoV!``!bpOr(krs'gsv(kwx(]x#V(k#V#WIU#W~(k!RI]V!``!bpOr(krs'gsv(kwx(]x#h(k#h#iIr#i~(k!RIyV!``!bpOr(krs'gsv(kwx(]x#m(k#m#nJ`#n~(k!RJgV!``!bpOr(krs'gsv(kwx(]x#d(k#d#eJ|#e~(k!RKTV!``!bpOr(krs'gsv(kwx(]x#X(k#X#YDq#Y~(k!RKqW!``!bpOrKjrsLZsvKjvwLowxNPx!aKj!a!b! g!b~KjqL`T!bpOvLZvxLox!aLZ!a!bM^!b~LZPLrRO!aLo!a!bL{!b~LoPMORO!`Lo!`!aMX!a~LoPM^OwPqMcT!bpOvLZvxLox!`LZ!`!aMr!a~LZqMyQ!bpwPOv'gx~'gaNUV!``OrNPrsLosvNPvwLow!aNP!a!bNk!b~NPaNpV!``OrNPrsLosvNPvwLow!`NP!`!a! V!a~NPa! ^R!``wPOr(]sv(]w~(]!R! nW!``!bpOrKjrsLZsvKjvwLowxNPx!`Kj!`!a!!W!a~Kj!R!!aT!``!bpwPOr(krs'gsv(kwx(]x~(k!V!!{VgS^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R",tokenizers:[Am,$m,Lm,Pm,Qm,0,1,2,3,4,5],topRules:{Document:[0,13]},dialects:{noMatch:0},tokenPrec:464});function Dm(e,t){let r=Object.create(null);for(let i of e.firstChild.getChildren("Attribute")){let e=i.getChild("AttributeName"),n=i.getChild("AttributeValue")||i.getChild("UnquotedAttributeValue");e&&(r[t.read(e.from,e.to)]=n?"AttributeValue"==n.name?t.read(n.from+1,n.to-1):t.read(n.from,n.to):"")}return r}function Bm(e,t,r){let i;for(let n of r)if(!n.attrs||n.attrs(i||(i=Dm(e.node.parent,t))))return{parser:n.parser};return null}function Im(e){let t=[],r=[],i=[];for(let n of e){let e="script"==n.tag?t:"style"==n.tag?r:"textarea"==n.tag?i:null;if(!e)throw new RangeError("Only script, style, and textarea tags can host nested parsers");e.push(n)}return Za(((e,n)=>{let o=e.type.id;return 27==o?Bm(e,n,t):30==o?Bm(e,n,r):33==o?Bm(e,n,i):null}))}const jm=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288];function zm(e){return e>=65&&e<=90||e>=97&&e<=122||e>=161}const Wm=new Kg(((e,t)=>{for(let i=!1,n=0,o=0;;o++){let{next:s}=e;if(!(zm(s)||45==s||95==s||i&&(r=s,r>=48&&r<=57))){i&&e.acceptToken(40==s?94:2==n&&t.canShift(2)?2:95);break}!i&&(45!=s||o>0)&&(i=!0),n===o&&45==s&&n++,e.advance()}var r})),qm=new Kg((e=>{if(jm.includes(e.peek(-1))){let{next:t}=e;(zm(t)||95==t||35==t||46==t||91==t||58==t||45==t)&&e.acceptToken(93)}})),Hm=new Kg((e=>{if(!jm.includes(e.peek(-1))){let{next:t}=e;if(37==t&&(e.advance(),e.acceptToken(1)),zm(t)){do{e.advance()}while(zm(e.next));e.acceptToken(1)}}})),Nm=ul({"import charset namespace keyframes":Ll.definitionKeyword,"media supports":Ll.controlKeyword,"from to selector":Ll.keyword,NamespaceName:Ll.namespace,KeyframeName:Ll.labelName,TagName:Ll.tagName,ClassName:Ll.className,PseudoClassName:Ll.constant(Ll.className),IdName:Ll.labelName,"FeatureName PropertyName":Ll.propertyName,AttributeName:Ll.attributeName,NumberLiteral:Ll.number,KeywordQuery:Ll.keyword,UnaryQueryOp:Ll.operatorKeyword,"CallTag ValueName":Ll.atom,VariableName:Ll.variableName,Callee:Ll.operatorKeyword,Unit:Ll.unit,"UniversalSelector NestingSelector":Ll.definitionOperator,AtKeyword:Ll.keyword,MatchOp:Ll.compareOperator,"ChildOp SiblingOp, LogicOp":Ll.logicOperator,BinOp:Ll.arithmeticOperator,Important:Ll.modifier,Comment:Ll.blockComment,ParenthesizedContent:Ll.special(Ll.name),ColorLiteral:Ll.color,StringLiteral:Ll.string,":":Ll.punctuation,"PseudoOp #":Ll.derefOperator,"; ,":Ll.separator,"( )":Ll.paren,"[ ]":Ll.squareBracket,"{ }":Ll.brace}),Xm={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,dir:32,url:60,"url-prefix":60,domain:60,regexp:60,selector:134},Fm={__proto__:null,"@import":114,"@media":138,"@charset":142,"@namespace":146,"@keyframes":152,"@supports":164},Zm={__proto__:null,not:128,only:128,from:158,to:160},Um=dm.deserialize({version:14,states:"7WOYQ[OOOOQP'#Cd'#CdOOQP'#Cc'#CcO!ZQ[O'#CfO!}QXO'#CaO#UQ[O'#ChO#aQ[O'#DPO#fQ[O'#DTOOQP'#Ec'#EcO#kQdO'#DeO$VQ[O'#DrO#kQdO'#DtO$hQ[O'#DvO$sQ[O'#DyO$xQ[O'#EPO%WQ[O'#EROOQS'#Eb'#EbOOQS'#ES'#ESQYQ[OOOOQP'#Cg'#CgOOQP,59Q,59QO!ZQ[O,59QO%_Q[O'#EVO%yQWO,58{O&RQ[O,59SO#aQ[O,59kO#fQ[O,59oO%_Q[O,59sO%_Q[O,59uO%_Q[O,59vO'bQ[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO'iQWO,59SO'nQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO'sQ`O,59oOOQS'#Cp'#CpO#kQdO'#CqO'{QvO'#CsO)VQtO,5:POOQO'#Cx'#CxO'iQWO'#CwO)kQWO'#CyOOQS'#Ef'#EfOOQO'#Dh'#DhO)pQ[O'#DoO*OQWO'#EiO$xQ[O'#DmO*^QWO'#DpOOQO'#Ej'#EjO%|QWO,5:^O*cQpO,5:`OOQS'#Dx'#DxO*kQWO,5:bO*pQ[O,5:bOOQO'#D{'#D{O*xQWO,5:eO*}QWO,5:kO+VQWO,5:mOOQS-E8Q-E8QOOQP1G.l1G.lO+yQXO,5:qOOQO-E8T-E8TOOQS1G.g1G.gOOQP1G.n1G.nO'iQWO1G.nO'nQWO1G.nOOQP1G/V1G/VO,WQ`O1G/ZO,qQXO1G/_O-XQXO1G/aO-oQXO1G/bO.VQXO'#CdO.zQWO'#DaOOQS,59z,59zO/PQWO,59zO/XQ[O,59zO/`QdO'#CoO/gQ[O'#DOOOQP1G/Z1G/ZO#kQdO1G/ZO/nQpO,59]OOQS,59_,59_O#kQdO,59aO/vQWO1G/kOOQS,59c,59cO/{Q!bO,59eO0TQWO'#DhO0`QWO,5:TO0eQWO,5:ZO$xQ[O,5:VO$xQ[O'#EYO0mQWO,5;TO0xQWO,5:XO%_Q[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O1ZQWO1G/|O1`QdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XOOQP7+$Y7+$YOOQP7+$u7+$uO#kQdO7+$uO#kQdO,59{O1nQ[O'#EXO1xQWO1G/fOOQS1G/f1G/fO1xQWO1G/fO2QQtO'#ETO2uQdO'#EeO3PQWO,59ZO3UQXO'#EhO3]QWO,59jO3bQpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO3jQWO1G/PO#kQdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO3oQWO,5:tOOQO-E8W-E8WO3}QXO1G/vOOQS7+%h7+%hO4UQYO'#CsO%|QWO'#EZO4^QdO,5:hOOQS,5:h,5:hO4lQpO<<HaO4tQtO1G/gOOQO,5:s,5:sO5XQ[O,5:sOOQO-E8V-E8VOOQS7+%Q7+%QO5cQWO7+%QOOQS-E8R-E8RO#kQdO'#EUO5kQWO,5;POOQT1G.u1G.uO5sQWO,5;SOOQP1G/U1G/UOOQP<<Ha<<HaOOQS7+$k7+$kO5{QdO7+%ZOOQO7+%b7+%bOOQS,5:u,5:uOOQS-E8X-E8XOOQS1G0S1G0SOOQPAN={AN={O6SQtO'#EWO#kQdO'#EWO6}QdO7+%ROOQO7+%R7+%ROOQO1G0_1G0_OOQS<<Hl<<HlO7_QdO,5:pOOQO-E8S-E8SOOQO<<Hu<<HuO7iQtO,5:rOOQS-E8U-E8UOOQO<<Hm<<Hm",stateData:"8j~O#TOSROS~OUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#RPO#WRO~O#RcO~O]hO^hOpfOtiOxjO|kO!PmO#PlO#WeO~O!RnO~P!`O`sO#QqO#RpO~O#RuO~O#RwO~OQ!QObzOf!QOh!QOn!PO#Q}O#RyO#Z{O~Ob!SO!b!UO!e!VO#R!RO!R#]P~Oh![On!PO#R!ZO~O#R!^O~Ob!SO!b!UO!e!VO#R!RO~O!W#]P~P$VOUWOXWO]TO^TOtUOxVO#RPO#WRO~OpfO!RnO~O`!hO#QqO#RpO~OQ!pOUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#R!oO#WRO~O!Q!qO~P&^Ob!tO~Ob!uO~Ov!vOz!wO~OP!yObgXjgX!WgX!bgX!egX#RgXagXQgXfgXhgXngXpgX#QgX#ZgXvgX!QgX!VgX~Ob!SOj!zO!b!UO!e!VO#R!RO!W#]P~Ob!}O~Ob!SO!b!UO!e!VO#R#OO~Op#SO!`#RO!R#]X!W#]X~Ob#VO~Oj!zO!W#XO~O!W#YO~Oh#ZOn!PO~O!R#[O~O!RnO!`#RO~O!RnO!W#_O~O]hO^hOtiOxjO|kO!PmO#PlO#WeO~Op!ya!R!yaa!ya~P+_Ov#aOz#bO~O]hO^hOtiOxjO#WeO~Op{i|{i!P{i!R{i#P{ia{i~P,`Op}i|}i!P}i!R}i#P}ia}i~P,`Op!Oi|!Oi!P!Oi!R!Oi#P!Oia!Oi~P,`O]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#PWX#WWX~O]#cO~O!Q#fO!W#dO~O!Q#fO~P&^Oa#XP~P#kOa#[P~P%_Oa#nOj!zO~O!W#pO~Oh#qOo#qO~O]!^Xa![X!`![X~O]#rO~Oa#sO!`#RO~Op#SO!R#]a!W#]a~O!`#ROp!aa!R!aa!W!aaa!aa~O!W#xO~O!Q#|O!q#zO!r#zO#Z#yO~O!Q!{X!W!{X~P&^O!Q$SO!W#dO~Oj!zOQ!wXa!wXb!wXf!wXh!wXn!wXp!wX#Q!wX#R!wX#Z!wX~Op$VOa#XX~P#kOa$XO~Oa#[X~P!`Oa$ZO~Oj!zOv$[O~Oa$]O~O!`#ROp!|a!R!|a!W!|a~Oa$_O~P+_OP!yO!RgX~O!Q$bO!q#zO!r#zO#Z#yO~Oj!zOv$cO~Oj!zOp$eO!V$gO!Q!Ti!W!Ti~P#kO!Q!{a!W!{a~P&^O!Q$iO!W#dO~Op$VOa#Xa~OpfOa#[a~Oa$lO~P#kOj!zOQ!zXb!zXf!zXh!zXn!zXp!zX!Q!zX!V!zX!W!zX#Q!zX#R!zX#Z!zX~Op$eO!V$oO!Q!Tq!W!Tq~P#kOa!xap!xa~P#kOj!zOQ!zab!zaf!zah!zan!zap!za!Q!za!V!za!W!za#Q!za#R!za#Z!za~Oo#Zj!Pj~",goto:",O#_PPPPP#`P#h#vP#h$U#hPP$[PPP$b$k$kP$}P$kP$k%e%wPPP&a&g#hP&mP#hP&sP#hP#h#hPPP&y']'iPP#`PP'o'o'y'oP'oP'o'oP#`P#`P#`P'|#`P(P(SPP#`P#`(V(e(s(y)T)Z)e)kPPPPPP)q)yP*e*hP+^+a+j]`Obn!s#d$QiWObfklmn!s!u#V#d$QiQObfklmn!s!u#V#d$QQdRR!ceQrTR!ghQ!gsQ!|!OR#`!hq!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jT#z#[#{q!OXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jQ![[R#Z!]QtTR!ihQ!gtR#`!iQvUR!jiQxVR!kjQoSQ!fgQ#W!XQ#^!`Q#_!aR$`#zQ!rnQ#g!sQ$P#dR$h$QX!pn!s#d$Qa!WY^_|!S!U#R#SR#P!SR!][R!_]R#]!_QbOU!bb!s$QQ!snR$Q#dQ#i!tU$U#i$^$jQ$^#rR$j$VQ$W#iR$k$WQgSS!eg$YR$Y#kQ$f$OR$n$fQ#e!rS$R#e$TR$T#gQ#T!TR#v#TQ#{#[R$a#{]aObn!s#d$Q[SObn!s#d$QQ!dfQ!lkQ!mlQ!nmQ#k!uR#w#VR#j!tQ|XQ!YZQ!xz[#h!t#i#r$V$^$jQ#m!wQ#o!zQ#}#bQ$O#cS$d$O$fR$m$eR#l!uQ!XYQ!a_R!{|U!TY_|Q!`^Q#Q!SQ#U!UQ#t#RR#u#S",nodeNames:"⚠ Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList from to SupportsStatement supports AtRule",maxTerm:106,nodeProps:[["openedBy",17,"(",48,"{"],["closedBy",18,")",49,"}"]],propSources:[Nm],skippedNodes:[0,3],repeatNodeCount:8,tokenData:"Ay~R![OX$wX^%]^p$wpq%]qr(crs+}st,otu2Uuv$wvw2rwx2}xy3jyz3uz{3z{|4_|}8U}!O8a!O!P8x!P!Q9Z!Q![;e![!]<Y!]!^<x!^!_$w!_!`=T!`!a=`!a!b$w!b!c>O!c!}$w!}#O?[#O#P$w#P#Q?g#Q#R2U#R#T$w#T#U?r#U#c$w#c#d@q#d#o$w#o#pAQ#p#q2U#q#rA]#r#sAh#s#y$w#y#z%]#z$f$w$f$g%]$g#BY$w#BY#BZ%]#BZ$IS$w$IS$I_%]$I_$I|$w$I|$JO%]$JO$JT$w$JT$JU%]$JU$KV$w$KV$KW%]$KW&FU$w&FU&FV%]&FV~$wW$zQOy%Qz~%QW%VQoWOy%Qz~%Q~%bf#T~OX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q~&}f#T~oWOX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q^(fSOy%Qz#]%Q#]#^(r#^~%Q^(wSoWOy%Qz#a%Q#a#b)T#b~%Q^)YSoWOy%Qz#d%Q#d#e)f#e~%Q^)kSoWOy%Qz#c%Q#c#d)w#d~%Q^)|SoWOy%Qz#f%Q#f#g*Y#g~%Q^*_SoWOy%Qz#h%Q#h#i*k#i~%Q^*pSoWOy%Qz#T%Q#T#U*|#U~%Q^+RSoWOy%Qz#b%Q#b#c+_#c~%Q^+dSoWOy%Qz#h%Q#h#i+p#i~%Q^+wQ!VUoWOy%Qz~%Q~,QUOY+}Zr+}rs,ds#O+}#O#P,i#P~+}~,iOh~~,lPO~+}_,tWtPOy%Qz!Q%Q!Q![-^![!c%Q!c!i-^!i#T%Q#T#Z-^#Z~%Q^-cWoWOy%Qz!Q%Q!Q![-{![!c%Q!c!i-{!i#T%Q#T#Z-{#Z~%Q^.QWoWOy%Qz!Q%Q!Q![.j![!c%Q!c!i.j!i#T%Q#T#Z.j#Z~%Q^.qWfUoWOy%Qz!Q%Q!Q![/Z![!c%Q!c!i/Z!i#T%Q#T#Z/Z#Z~%Q^/bWfUoWOy%Qz!Q%Q!Q![/z![!c%Q!c!i/z!i#T%Q#T#Z/z#Z~%Q^0PWoWOy%Qz!Q%Q!Q![0i![!c%Q!c!i0i!i#T%Q#T#Z0i#Z~%Q^0pWfUoWOy%Qz!Q%Q!Q![1Y![!c%Q!c!i1Y!i#T%Q#T#Z1Y#Z~%Q^1_WoWOy%Qz!Q%Q!Q![1w![!c%Q!c!i1w!i#T%Q#T#Z1w#Z~%Q^2OQfUoWOy%Qz~%QY2XSOy%Qz!_%Q!_!`2e!`~%QY2lQzQoWOy%Qz~%QX2wQXPOy%Qz~%Q~3QUOY2}Zw2}wx,dx#O2}#O#P3d#P~2}~3gPO~2}_3oQbVOy%Qz~%Q~3zOa~_4RSUPjSOy%Qz!_%Q!_!`2e!`~%Q_4fUjS!PPOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q^4}SoWOy%Qz!Q%Q!Q![5Z![~%Q^5bWoW#ZUOy%Qz!Q%Q!Q![5Z![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q^6PWoWOy%Qz{%Q{|6i|}%Q}!O6i!O!Q%Q!Q![6z![~%Q^6nSoWOy%Qz!Q%Q!Q![6z![~%Q^7RSoW#ZUOy%Qz!Q%Q!Q![6z![~%Q^7fYoW#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q_8ZQpVOy%Qz~%Q^8fUjSOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q_8}S#WPOy%Qz!Q%Q!Q![5Z![~%Q~9`RjSOy%Qz{9i{~%Q~9nSoWOy9iyz9zz{:o{~9i~9}ROz9zz{:W{~9z~:ZTOz9zz{:W{!P9z!P!Q:j!Q~9z~:oOR~~:tUoWOy9iyz9zz{:o{!P9i!P!Q;W!Q~9i~;_QoWR~Oy%Qz~%Q^;jY#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%QX<_S]POy%Qz![%Q![!]<k!]~%QX<rQ^PoWOy%Qz~%Q_<}Q!WVOy%Qz~%QY=YQzQOy%Qz~%QX=eS|POy%Qz!`%Q!`!a=q!a~%QX=xQ|PoWOy%Qz~%QX>RUOy%Qz!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX>lY!YPoWOy%Qz}%Q}!O>e!O!Q%Q!Q![>e![!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX?aQxPOy%Qz~%Q^?lQvUOy%Qz~%QX?uSOy%Qz#b%Q#b#c@R#c~%QX@WSoWOy%Qz#W%Q#W#X@d#X~%QX@kQ!`PoWOy%Qz~%QX@tSOy%Qz#f%Q#f#g@d#g~%QXAVQ!RPOy%Qz~%Q_AbQ!QVOy%Qz~%QZAmS!PPOy%Qz!_%Q!_!`2e!`~%Q",tokenizers:[qm,Hm,Wm,0,1,2,3],topRules:{StyleSheet:[0,4]},specialized:[{term:94,get:e=>Xm[e]||-1},{term:56,get:e=>Fm[e]||-1},{term:95,get:e=>Zm[e]||-1}],tokenPrec:1078});let Vm=null;function Gm(){if(!Vm&&"object"==typeof document&&document.body){let e=[];for(let t in document.body.style)/[A-Z]|^-|^(item|length)$/.test(t)||e.push(t);Vm=e.sort().map((e=>({type:"property",label:e})))}return Vm||[]}const Ym=["active","after","before","checked","default","disabled","empty","enabled","first-child","first-letter","first-line","first-of-type","focus","hover","in-range","indeterminate","invalid","lang","last-child","last-of-type","link","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-of-type","only-child","optional","out-of-range","placeholder","read-only","read-write","required","root","selection","target","valid","visited"].map((e=>({type:"class",label:e}))),Km=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map((e=>({type:"keyword",label:e}))).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map((e=>({type:"constant",label:e})))),Jm=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map((e=>({type:"type",label:e}))),ev=/^[\w-]*/,tv=e=>{let{state:t,pos:r}=e,i=zl(t).resolveInner(r,-1);if("PropertyName"==i.name)return{from:i.from,options:Gm(),validFor:ev};if("ValueName"==i.name)return{from:i.from,options:Km,validFor:ev};if("PseudoClassName"==i.name)return{from:i.from,options:Ym,validFor:ev};if("TagName"==i.name){for(let{parent:e}=i;e;e=e.parent)if("Block"==e.name)return{from:i.from,options:Gm(),validFor:ev};return{from:i.from,options:Jm,validFor:ev}}if(!e.explicit)return null;let n=i.resolve(r),o=n.childBefore(r);return o&&":"==o.name&&"PseudoClassSelector"==n.name?{from:r,options:Ym,validFor:ev}:o&&":"==o.name&&"Declaration"==n.name||"ArgList"==n.name?{from:r,options:Km,validFor:ev}:"Block"==n.name?{from:r,options:Gm(),validFor:ev}:null},rv=jl.define({parser:Um.configure({props:[nc.add({Declaration:dc()}),pc.add({Block:gc})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});const iv=282,nv=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],ov=new um({start:!1,shift:(e,t)=>5==t||6==t||286==t?e:287==t,strict:!1}),sv=new Kg(((e,t)=>{let{next:r}=e;(125==r||-1==r||t.context)&&t.canShift(284)&&e.acceptToken(284)}),{contextual:!0,fallback:!0}),av=new Kg(((e,t)=>{let r,{next:i}=e;nv.indexOf(i)>-1||(47!=i||47!=(r=e.peek(1))&&42!=r)&&125!=i&&59!=i&&-1!=i&&!t.context&&t.canShift(281)&&e.acceptToken(281)}),{contextual:!0}),lv=new Kg(((e,t)=>{let{next:r}=e;if((43==r||45==r)&&(e.advance(),r==e.next)){e.advance();let r=!t.context&&t.canShift(2);e.acceptToken(r?2:3)}}),{contextual:!0}),cv=new Kg((e=>{for(let t=!1,r=0;;r++){let{next:i}=e;if(i<0){r&&e.acceptToken(iv);break}if(96==i){r?e.acceptToken(iv):e.acceptToken(283,1);break}if(123==i&&t){1==r?e.acceptToken(4,1):e.acceptToken(iv,-1);break}if(10==i&&r){e.advance(),e.acceptToken(iv);break}92==i&&e.advance(),t=36==i,e.advance()}})),hv=new Kg(((e,t)=>{if(101==e.next&&t.dialectEnabled(1)){e.advance();for(let t=0;t<6;t++){if(e.next!="xtends".charCodeAt(t))return;e.advance()}e.next>=57&&e.next<=65||e.next>=48&&e.next<=90||95==e.next||e.next>=97&&e.next<=122||e.next>160||e.acceptToken(1)}})),uv=ul({"get set async static":Ll.modifier,"for while do if else switch try catch finally return throw break continue default case":Ll.controlKeyword,"in of await yield void typeof delete instanceof":Ll.operatorKeyword,"let var const function class extends":Ll.definitionKeyword,"import export from":Ll.moduleKeyword,"with debugger as new":Ll.keyword,TemplateString:Ll.special(Ll.string),Super:Ll.atom,BooleanLiteral:Ll.bool,this:Ll.self,null:Ll.null,Star:Ll.modifier,VariableName:Ll.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Ll.function(Ll.variableName),VariableDefinition:Ll.definition(Ll.variableName),Label:Ll.labelName,PropertyName:Ll.propertyName,PrivatePropertyName:Ll.special(Ll.propertyName),"CallExpression/MemberExpression/PropertyName":Ll.function(Ll.propertyName),"FunctionDeclaration/VariableDefinition":Ll.function(Ll.definition(Ll.variableName)),"ClassDeclaration/VariableDefinition":Ll.definition(Ll.className),PropertyDefinition:Ll.definition(Ll.propertyName),PrivatePropertyDefinition:Ll.definition(Ll.special(Ll.propertyName)),UpdateOp:Ll.updateOperator,LineComment:Ll.lineComment,BlockComment:Ll.blockComment,Number:Ll.number,String:Ll.string,ArithOp:Ll.arithmeticOperator,LogicOp:Ll.logicOperator,BitOp:Ll.bitwiseOperator,CompareOp:Ll.compareOperator,RegExp:Ll.regexp,Equals:Ll.definitionOperator,"Arrow : Spread":Ll.punctuation,"( )":Ll.paren,"[ ]":Ll.squareBracket,"{ }":Ll.brace,"InterpolationStart InterpolationEnd":Ll.special(Ll.brace),".":Ll.derefOperator,", ;":Ll.separator,TypeName:Ll.typeName,TypeDefinition:Ll.definition(Ll.typeName),"type enum interface implements namespace module declare":Ll.definitionKeyword,"abstract global Privacy readonly override":Ll.modifier,"is keyof unique infer":Ll.operatorKeyword,JSXAttributeValue:Ll.attributeValue,JSXText:Ll.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Ll.angleBracket,"JSXIdentifier JSXNameSpacedName":Ll.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Ll.attributeName}),dv={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},fv={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},pv={__proto__:null,"<":129},gv=dm.deserialize({version:14,states:"$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",stateData:"&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",nodeNames:"⚠ extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:ov,nodeProps:[["closedBy",4,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[uv],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[hv,av,lv,cv,0,1,2,3,4,5,6,7,8,9,sv],topRules:{Script:[0,7]},dialects:{jsx:12107,ts:12109},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:e=>dv[e]||-1},{term:299,get:e=>fv[e]||-1},{term:63,get:e=>pv[e]||-1}],tokenPrec:12130}),mv=[Af("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),Af("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),Af("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Af("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Af("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),Af("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),Af("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),Af("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),Af("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),Af('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Af('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],vv=new Ha,Ov=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function _v(e){return(t,r)=>{let i=t.node.getChild("VariableDefinition");return i&&r(i,e),!0}}const bv=["FunctionDeclaration"],yv={FunctionDeclaration:_v("function"),ClassDeclaration:_v("class"),ClassExpression:()=>!0,EnumDeclaration:_v("constant"),TypeAliasDeclaration:_v("type"),NamespaceDeclaration:_v("namespace"),VariableDefinition(e,t){e.matchContext(bv)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function wv(e,t){let r=vv.get(t);if(r)return r;let i=[],n=!0;function o(t,r){let n=e.sliceString(t.from,t.to);i.push({label:n,type:r})}return t.cursor(ka.IncludeAnonymous).iterate((t=>{if(n)n=!1;else if(t.name){let e=yv[t.name];if(e&&e(t,o)||Ov.has(t.name))return!1}else if(t.to-t.from>8192){for(let r of wv(e,t.node))i.push(r);return!1}})),vv.set(t,i),i}const Sv=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Cv=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function xv(e){let t=zl(e.state).resolveInner(e.pos,-1);if(Cv.indexOf(t.name)>-1)return null;let r=t.to-t.from<20&&Sv.test(e.state.sliceDoc(t.from,t.to));if(!r&&!e.explicit)return null;let i=[];for(let r=t;r;r=r.parent)Ov.has(r.name)&&(i=i.concat(wv(e.state.doc,r)));return{options:i,from:r?t.from:e.pos,validFor:Sv}}const kv=jl.define({parser:gv.configure({props:[nc.add({IfStatement:dc({except:/^\s*({|else\b)/}),TryStatement:dc({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:e=>e.baseIndent,SwitchBody:e=>{let t=e.textAfter,r=/^\s*\}/.test(t),i=/^\s*(case|default)\b/.test(t);return e.baseIndent+(r?0:i?1:2)*e.unit},Block:hc({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>-1,"Statement Property":dc({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),pc.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":gc,BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Tv=kv.configure({dialect:"ts"}),Pv=kv.configure({dialect:"jsx"}),Qv=kv.configure({dialect:"jsx ts"}),Rv="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map((e=>({label:e,type:"keyword"})));function Av(e={}){let t=e.jsx?e.typescript?Qv:Pv:e.typescript?Tv:kv;return new Gl(t,[kv.data.of({autocomplete:(r=Cv,i=jd(mv.concat(Rv)),e=>{for(let t=zl(e.state).resolveInner(e.pos,-1);t;t=t.parent)if(r.indexOf(t.name)>-1)return null;return i(e)})}),kv.data.of({autocomplete:xv}),e.jsx?Ev:[]]);var r,i}function $v(e,t,r=e.length){if(!t)return"";let i=t.getChild("JSXIdentifier");return i?e.sliceString(i.from,Math.min(i.to,r)):""}const Lv="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Ev=Io.inputHandler.of(((e,t,r,i)=>{if((Lv?e.composing:e.compositionStarted)||e.state.readOnly||t!=r||">"!=i&&"/"!=i||!kv.isActiveAt(e.state,t,-1))return!1;let{state:n}=e,o=n.changeByRange((e=>{var t,r,o;let s,{head:a}=e,l=zl(n).resolveInner(a,-1);if("JSXStartTag"==l.name&&(l=l.parent),">"==i&&"JSXFragmentTag"==l.name)return{range:je.cursor(a+1),changes:{from:a,insert:"><>"}};if(">"==i&&"JSXIdentifier"==l.name){if("JSXEndTag"!=(null===(r=null===(t=l.parent)||void 0===t?void 0:t.lastChild)||void 0===r?void 0:r.name)&&(s=$v(n.doc,l.parent,a)))return{range:je.cursor(a+1),changes:{from:a,insert:`></${s}>`}}}else if("/"==i&&"JSXFragmentTag"==l.name){let e=l.parent,t=null==e?void 0:e.parent;if(e.from==a-1&&"JSXEndTag"!=(null===(o=t.lastChild)||void 0===o?void 0:o.name)&&(s=$v(n.doc,null==t?void 0:t.firstChild,a))){let e=`/${s}>`;return{range:je.cursor(a+e.length),changes:{from:a,insert:e}}}}return{range:e}}));return!o.changes.empty&&(e.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)})),Mv=["_blank","_self","_top","_parent"],Dv=["ascii","utf-8","utf-16","latin1","latin1"],Bv=["get","post","put","delete"],Iv=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],jv=["true","false"],zv={},Wv={a:{attrs:{href:null,ping:null,type:null,media:null,target:Mv,hreflang:null}},abbr:zv,acronym:zv,address:zv,applet:zv,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:zv,aside:zv,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:zv,base:{attrs:{href:null,target:Mv}},basefont:zv,bdi:zv,bdo:zv,big:zv,blockquote:{attrs:{cite:null}},body:zv,br:zv,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Iv,formmethod:Bv,formnovalidate:["novalidate"],formtarget:Mv,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:zv,center:zv,cite:zv,code:zv,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:zv,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:zv,dir:zv,div:zv,dl:zv,dt:zv,em:zv,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:zv,figure:zv,font:zv,footer:zv,form:{attrs:{action:null,name:null,"accept-charset":Dv,autocomplete:["on","off"],enctype:Iv,method:Bv,novalidate:["novalidate"],target:Mv}},frame:zv,frameset:zv,h1:zv,h2:zv,h3:zv,h4:zv,h5:zv,h6:zv,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:zv,hgroup:zv,hr:zv,html:{attrs:{manifest:null}},i:zv,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Iv,formmethod:Bv,formnovalidate:["novalidate"],formtarget:Mv,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:zv,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:zv,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:zv,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Dv,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:zv,noframes:zv,noscript:zv,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:zv,param:{attrs:{name:null,value:null}},pre:zv,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:zv,rt:zv,ruby:zv,s:zv,samp:zv,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Dv}},section:zv,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:zv,source:{attrs:{src:null,type:null,media:null}},span:zv,strike:zv,strong:zv,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:zv,summary:zv,sup:zv,table:zv,tbody:zv,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:zv,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:zv,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:zv,time:{attrs:{datetime:null}},title:zv,tr:zv,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},tt:zv,u:zv,ul:{children:["li","script","template","ul","ol"]},var:zv,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:zv},qv={accesskey:null,class:null,contenteditable:jv,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:jv,autocorrect:jv,autocapitalize:jv,style:null,tabindex:null,title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":jv,"aria-autocomplete":["inline","list","both","none"],"aria-busy":jv,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":jv,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":jv,"aria-hidden":jv,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":jv,"aria-multiselectable":jv,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":jv,"aria-relevant":null,"aria-required":jv,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null};class Hv{constructor(e,t){this.tags=Object.assign(Object.assign({},Wv),e),this.globalAttrs=Object.assign(Object.assign({},qv),t),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}function Nv(e,t,r=e.length){if(!t)return"";let i=t.firstChild,n=i&&i.getChild("TagName");return n?e.sliceString(n.from,Math.min(n.to,r)):""}function Xv(e,t=!1){for(let r=e.parent;r;r=r.parent)if("Element"==r.name){if(!t)return r;t=!1}return null}function Fv(e,t,r){let i=r.tags[Nv(e,Xv(t,!0))];return(null==i?void 0:i.children)||r.allTags}function Zv(e,t){let r=[];for(let i=t;i=Xv(i);){let n=Nv(e,i);if(n&&"CloseTag"==i.lastChild.name)break;n&&r.indexOf(n)<0&&("EndTag"==t.name||t.from>=i.firstChild.to)&&r.push(n)}return r}Hv.default=new Hv;const Uv=/^[:\-\.\w\u00b7-\uffff]*$/;function Vv(e,t,r,i,n){let o=/\s*>/.test(e.sliceDoc(n,n+5))?"":">";return{from:i,to:n,options:Fv(e.doc,r,t).map((e=>({label:e,type:"type"}))).concat(Zv(e.doc,r).map(((e,t)=>({label:"/"+e,apply:"/"+e+o,type:"type",boost:99-t})))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function Gv(e,t,r,i){let n=/\s*>/.test(e.sliceDoc(i,i+5))?"":">";return{from:r,to:i,options:Zv(e.doc,t).map(((e,t)=>({label:e,apply:e+n,type:"type",boost:99-t}))),validFor:Uv}}function Yv(e,t){let{state:r,pos:i}=t,n=zl(r).resolveInner(i),o=n.resolve(i,-1);for(let e,t=i;n==o&&(e=o.childBefore(t));){let r=e.lastChild;if(!r||!r.type.isError||r.from<r.to)break;n=o=e,t=r.from}return"TagName"==o.name?o.parent&&/CloseTag$/.test(o.parent.name)?Gv(r,o,o.from,i):Vv(r,e,o,o.from,i):"StartTag"==o.name?Vv(r,e,o,i,i):"StartCloseTag"==o.name||"IncompleteCloseTag"==o.name?Gv(r,o,i,i):t.explicit&&("OpenTag"==o.name||"SelfClosingTag"==o.name)||"AttributeName"==o.name?function(e,t,r,i,n){let o=Xv(r),s=o?t.tags[Nv(e.doc,o)]:null;return{from:i,to:n,options:(s&&s.attrs?Object.keys(s.attrs).concat(t.globalAttrNames):t.globalAttrNames).map((e=>({label:e,type:"property"}))),validFor:Uv}}(r,e,o,"AttributeName"==o.name?o.from:i,i):"Is"==o.name||"AttributeValue"==o.name||"UnquotedAttributeValue"==o.name?function(e,t,r,i,n){var o;let s,a=null===(o=r.parent)||void 0===o?void 0:o.getChild("AttributeName"),l=[];if(a){let o=e.sliceDoc(a.from,a.to),c=t.globalAttrs[o];if(!c){let i=Xv(r),n=i?t.tags[Nv(e.doc,i)]:null;c=(null==n?void 0:n.attrs)&&n.attrs[o]}if(c){let t=e.sliceDoc(i,n).toLowerCase(),r='"',o='"';/^['"]/.test(t)?(s='"'==t[0]?/^[^"]*$/:/^[^']*$/,r="",o=e.sliceDoc(n,n+1)==t[0]?"":t[0],t=t.slice(1),i++):s=/^[^\s<>='"]*$/;for(let e of c)l.push({label:e,apply:r+e+o,type:"constant"})}}return{from:i,to:n,options:l,validFor:s}}(r,e,o,"Is"==o.name?i:o.from,i):!t.explicit||"Element"!=n.name&&"Text"!=n.name&&"Document"!=n.name?null:function(e,t,r,i){let n=[],o=0;for(let i of Fv(e.doc,r,t))n.push({label:"<"+i,type:"type"});for(let t of Zv(e.doc,r))n.push({label:"</"+t+">",type:"type",boost:99-o++});return{from:i,to:i,options:n,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}(r,e,o,i)}function Kv(e){let{extraTags:t,extraGlobalAttributes:r}=e,i=r||t?new Hv(t,r):Hv.default;return e=>Yv(i,e)}const Jv=jl.define({parser:Mm.configure({props:[nc.add({Element(e){let t=/^(\s*)(<\/)?/.exec(e.textAfter);return e.node.to<=e.pos+t[0].length?e.continue():e.lineIndent(e.node.from)+(t[2]?0:e.unit)},"OpenTag CloseTag SelfClosingTag":e=>e.column(e.node.from)+e.unit,Document(e){if(e.pos+/\s*/.exec(e.textAfter)[0].length<e.node.to)return e.continue();let t,r=null;for(let t=e.node;;){let e=t.lastChild;if(!e||"Element"!=e.name||e.to!=t.to)break;r=t=e}return r&&(!(t=r.lastChild)||"CloseTag"!=t.name&&"SelfClosingTag"!=t.name)?e.lineIndent(r.from)+e.unit:null}}),pc.add({Element(e){let t=e.firstChild,r=e.lastChild;return t&&"OpenTag"==t.name?{from:t.to,to:"CloseTag"==r.name?r.from:e.to}:null}})],wrap:Im([{tag:"script",attrs:e=>!e.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(e.type),parser:kv.parser},{tag:"style",attrs:e=>(!e.lang||"css"==e.lang)&&(!e.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(e.type)),parser:rv.parser}])}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}});function eO(e={}){let t=Jv;return!1===e.matchClosingTags&&(t=t.configure({dialect:"noMatch"})),new Gl(t,[Jv.data.of({autocomplete:Kv(e)}),!1!==e.autoCloseTags?tO:[],Av().support,new Gl(rv,rv.data.of({autocomplete:tv})).support])}const tO=Io.inputHandler.of(((e,t,r,i)=>{if(e.composing||e.state.readOnly||t!=r||">"!=i&&"/"!=i||!Jv.isActiveAt(e.state,t,-1))return!1;let{state:n}=e,o=n.changeByRange((e=>{var t,r,o;let s,{head:a}=e,l=zl(n).resolveInner(a,-1);if("TagName"!=l.name&&"StartTag"!=l.name||(l=l.parent),">"==i&&"OpenTag"==l.name){if("CloseTag"!=(null===(r=null===(t=l.parent)||void 0===t?void 0:t.lastChild)||void 0===r?void 0:r.name)&&(s=Nv(n.doc,l.parent,a)))return{range:je.cursor(a+1),changes:{from:a,insert:`></${s}>`}}}else if("/"==i&&"OpenTag"==l.name){let e=l.parent,t=null==e?void 0:e.parent;if(e.from==a-1&&"CloseTag"!=(null===(o=t.lastChild)||void 0===o?void 0:o.name)&&(s=Nv(n.doc,t,a))){let e=`/${s}>`;return{range:je.cursor(a+e.length),changes:{from:a,insert:e}}}}return{range:e}}));return!o.changes.empty&&(e.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)})),rO=Dl({block:{open:"\x3c!--",close:"--\x3e"}}),iO=Pg.configure({props:[pc.add((e=>{if(e.is("Block")&&!e.is("Document"))return(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})})),nc.add({Document:()=>null}),Ml.add({Document:rO})]});function nO(e){return new Bl(rO,e)}const oO=nO(iO),sO=nO(iO.configure([Ig,Wg,zg,qg]));function aO(e,t){return t.sliceString(e.from,e.from+50)}class lO{constructor(e,t,r,i,n,o,s){this.node=e,this.from=t,this.to=r,this.spaceBefore=i,this.spaceAfter=n,this.type=o,this.item=s}blank(e=!0){let t=this.spaceBefore;if("Blockquote"==this.node.name)t+=">";else for(let e=this.to-this.from-t.length-this.spaceAfter.length;e>0;e--)t+=" ";return t+(e?this.spaceAfter:"")}marker(e,t){let r="OrderedList"==this.node.name?String(+hO(this.item,e)[2]+t):"";return this.spaceBefore+r+this.type+this.spaceAfter}}function cO(e,t,r){let i=[];for(let t=e;t&&"Document"!=t.name;t=t.parent)"ListItem"!=t.name&&"Blockquote"!=t.name||i.push(t);let n=[],o=0;for(let e=i.length-1;e>=0;e--){let s,a=i[e],l=o;if("Blockquote"==a.name&&(s=/^[ \t]*>( ?)/.exec(t.slice(o))))o+=s[0].length,n.push(new lO(a,l,o,"",s[1],">",null));else if("ListItem"==a.name&&"OrderedList"==a.parent.name&&(s=/^([ \t]*)\d+([.)])([ \t]*)/.exec(aO(a,r)))){let e=s[3],t=s[0].length;e.length>=4&&(e=e.slice(0,e.length-4),t-=4),o+=t,n.push(new lO(a.parent,l,o,s[1],e,s[2],a))}else if("ListItem"==a.name&&"BulletList"==a.parent.name&&(s=/^([ \t]*)([-+*])([ \t]{1,4}\[[ xX]\])?([ \t]+)/.exec(aO(a,r)))){let e=s[4],t=s[0].length;e.length>4&&(e=e.slice(0,e.length-4),t-=4);let r=s[2];s[3]&&(r+=s[3].replace(/[xX]/," ")),o+=t,n.push(new lO(a.parent,l,o,s[1],e,r,a))}}return n}function hO(e,t){return/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(e.from,e.from+10))}function uO(e,t,r,i=0){for(let n=-1,o=e;;){if("ListItem"==o.name){let e=hO(o,t),s=+e[2];if(n>=0){if(s!=n+1)return;r.push({from:o.from+e[1].length,to:o.from+e[0].length,insert:String(n+2+i)})}n=s}let e=o.nextSibling;if(!e)break;o=e}}function dO(e){return"QuoteMark"==e.name||"ListMark"==e.name}const fO=[{key:"Enter",run:({state:e,dispatch:t})=>{let r=zl(e),{doc:i}=e,n=null,o=e.changeByRange((t=>{if(!t.empty||!sO.isActiveAt(e,t.from))return n={range:t};let o=t.from,s=i.lineAt(o),a=cO(r.resolveInner(o,-1),s.text,i);for(;a.length&&a[a.length-1].from>o-s.from;)a.pop();if(!a.length)return n={range:t};let l=a[a.length-1];if(l.to-l.spaceAfter.length>o-s.from)return n={range:t};let c=o>=l.to-l.spaceAfter.length&&!/\S/.test(s.text.slice(l.to));if(l.item&&c){if(l.node.firstChild.to>=o||s.from>0&&!/[^\s>]/.test(i.lineAt(s.from-1).text)){let e,t=a.length>1?a[a.length-2]:null,r="";t&&t.item?(e=s.from+t.from,r=t.marker(i,1)):e=s.from+(t?t.to:0);let n=[{from:e,to:o,insert:r}];return"OrderedList"==l.node.name&&uO(l.item,i,n,-2),t&&"OrderedList"==t.node.name&&uO(t.item,i,n),{range:je.cursor(e+r.length),changes:n}}{let t="";for(let e=0,r=a.length-2;e<=r;e++)t+=a[e].blank(e<r);return t+=e.lineBreak,{range:je.cursor(o+t.length),changes:{from:s.from,insert:t}}}}if("Blockquote"==l.node.name&&c&&s.from){let r=i.lineAt(s.from-1),n=/>\s*$/.exec(r.text);if(n&&n.index==l.from){let i=e.changes([{from:r.from+n.index,to:r.to},{from:s.from+l.from,to:s.to}]);return{range:t.map(i),changes:i}}}let h=[];"OrderedList"==l.node.name&&uO(l.item,i,h);let u=e.lineBreak,d=l.item&&l.item.from<s.from;if(!d||/^[\s\d.)\-+*>]*/.exec(s.text)[0].length>=l.to)for(let e=0,t=a.length-1;e<=t;e++)u+=e!=t||d?a[e].blank():a[e].marker(i,1);let f=o;for(;f>s.from&&/\s/.test(s.text.charAt(f-s.from-1));)f--;return h.push({from:f,to:o,insert:u}),{range:je.cursor(f+u.length),changes:h}}));return!n&&(t(e.update(o,{scrollIntoView:!0,userEvent:"input"})),!0)}},{key:"Backspace",run:({state:e,dispatch:t})=>{let r=zl(e),i=null,n=e.changeByRange((t=>{let n=t.from,{doc:o}=e;if(t.empty&&sO.isActiveAt(e,t.from)){let e=o.lineAt(n),i=cO(function(e,t){let r,i=e.resolveInner(t,-1),n=t;for(dO(i)&&(n=i.from,i=i.parent);r=i.childBefore(n);)if(dO(r))n=r.from;else{if("OrderedList"!=r.name&&"BulletList"!=r.name)break;i=r.lastChild,n=i.to}return i}(r,n),e.text,o);if(i.length){let r=i[i.length-1],o=r.to-r.spaceAfter.length+(r.spaceAfter?1:0);if(n-e.from>o&&!/\S/.test(e.text.slice(o,n-e.from)))return{range:je.cursor(e.from+o),changes:{from:e.from+o,to:n}};if(n-e.from==o){let i=e.from+r.from;if(r.item&&r.node.from<r.item.from&&/\S/.test(e.text.slice(r.from,r.to)))return{range:t,changes:{from:i,to:e.from+r.to,insert:r.blank()}};if(i<n)return{range:je.cursor(i),changes:{from:i,to:n}}}}}return i={range:t}}));return!i&&(t(e.update(n,{scrollIntoView:!0,userEvent:"delete"})),!0)}}],pO=eO({matchClosingTags:!1});function gO(e={}){let{codeLanguages:t,defaultCodeLanguage:r,addKeymap:i=!0,base:{parser:n}=oO}=e;if(!(n instanceof tg))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let o,s=e.extensions?[e.extensions]:[],a=[pO.support];r instanceof Gl?(a.push(r.support),o=r.language):r&&(o=r);let l=t||o?(c=t,h=o,e=>{if(e&&c){let t=null;if(t="function"==typeof c?c(e):Yl.matchLanguageName(c,e,!0),t instanceof Yl)return t.support?t.support.language.parser:Hl.getSkippingParser(t.load());if(t)return t.parser}return h?h.parser:null}):void 0;var c,h;return s.push(function(e){let{codeParser:t,htmlParser:r}=e,i=Za(((e,i)=>{let n=e.type.id;if(!t||n!=Sp.CodeBlock&&n!=Sp.FencedCode){if(r&&(n==Sp.HTMLBlock||n==Sp.HTMLTag))return{parser:r,overlay:Qg(e.node,e.from,e.to)}}else{let r="";if(n==Sp.FencedCode){let t=e.node.getChild(Sp.CodeInfo);t&&(r=i.read(t.from,t.to))}let o=t(r);if(o)return{parser:o,overlay:e=>e.type.id==Sp.CodeText}}return null}));return{wrap:i}}({codeParser:l,htmlParser:pO.language.parser})),i&&a.push(tt.high(Fo.of(fO))),new Gl(nO(n.configure(s)),a)}const mO=[];function vO(t,r=e){let i;const n=new Set;function s(e){if(o(t,e)&&(t=e,i)){const e=!mO.length;for(const e of n)e[1](),mO.push(e,t);if(e){for(let e=0;e<mO.length;e+=2)mO[e][0](mO[e+1]);mO.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(o,a=e){const l=[o,a];return n.add(l),1===n.size&&(i=r(s)||e),o(t),()=>{n.delete(l),0===n.size&&(i(),i=null)}}}}const OO=vO({name:"Default",font:"Fira Code, Menlo",fontSize:"16pt",textAreaColor:"#454158",backgroundColor:"#22212C",textColor:"#80ffea",borderColor:"#1B1A23",Cyan:"#80FFEA",Green:"#8AFF80",Orange:"#FFCA80",Pink:"#FF80BF",Purple:"#9580FF",Red:"#FF9580",Yellow:"#FFFF80",functionColor:"#9580FF",stringColor:"#8AFF80",constantColor:"#FFCA80",keywordColor:"#FFFF80",highlightBackgroundColor:"#4f4f5f",selectionColor:"#22212C",buttons:[{color:"#80FFEA",id:0},{color:"#8AFF80",id:1},{color:"#FFCA80",id:2},{color:"#FF80BF",id:3},{color:"#9580FF",id:4},{color:"#FF9580",id:5},{color:"blue",id:6},{color:"green",id:7},{color:"red",id:8},{color:"purple",id:9}]});function _O(t){let r,i;return{c(){r=v("div"),w(r,"name","editor"),w(r,"id","CMeditor"),w(r,"style",i="height: "+t[0]+"; width: "+t[1]+"; "+t[2]),w(r,"class","svelte-1p9zuvj")},m(e,i){p(e,r,i),t[6](r)},p(e,[t]){7&t&&i!==(i="height: "+e[0]+"; width: "+e[1]+"; "+e[2])&&w(r,"style",i)},i:e,o:e,d(e){e&&g(r),t[6](null)}}}function bO(e,t,r){let i;s(e,OO,(e=>r(11,i=e)));const n=M();let{height:o=0}=t,{width:a=0}=t,{styling:l=""}=t,{config:c={}}=t,{initFinished:h=!1}=t,u=null,d=null,f=null,p=null,g=null;const m=Io.theme({"&":{color:i.textColor,backgroundColor:i.textAreaColor,height:o,minHeight:o},".cm-content":{caretColor:i.Cyan,minHeight:o},"&.cm-focused .cm-cursor":{borderLeftColor:i.Cyan},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, ::selection":{backgroundColor:i.selectionColor},".cm-panels":{backgroundColor:i.backgroundColor,color:i.textColor},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:i.highlightBackgroundColor},".cm-selectionMatch":{backgroundColor:"#aafe661a"},".cm-matchingBracket, .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutter":{minHeight:o},".cm-gutters":{backgroundColor:i.backgroundColor,color:i.green,border:"none"},".cm-activeLineGutter":{backgroundColor:i.highlightBackgroundColor},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid #181a1f",backgroundColor:i.backgroundColor},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:i.highlightBackgroundColor,color:i.textColor}}},{dark:!0});function v(e,t){n(e,{data:t})}function O(e){h&&_(e)}function _(e){null!==f&&(f.destroy(),r(3,u.innerHTML="",u));const t=[Os(),_h(),Jo(),[cs,hs],Rt.allowMultipleSelections.of(!0),Rt.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let r=e.newDoc,{head:i}=e.newSelection.main,n=r.lineAt(i);if(i>n.from+200)return e;let o=r.sliceString(n.from,i);if(!t.some((e=>e.test(o))))return e;let{state:s}=e,a=-1,l=[];for(let{head:e}of s.selection.ranges){let t=s.doc.lineAt(e);if(t.from==a)continue;a=t.from;let r=rc(s,t.from);if(null==r)continue;let i=/^\s*/.exec(t.text)[0],n=tc(s,r);i!=n&&l.push({from:t.from,to:t.from+i.length,insert:n})}return l.length?[e,{changes:l,sequential:!0}]:e})),jc(qc,{fallback:!0}),Yc(),[qf,Bf],Gf(),Ts(),Rs(),ed(),Fo.of([...Hf,...Bu,...Rd,...Mh,...Tc,...Yf,...dp]),m,Io.updateListener.of((e=>{e.docChanged&&v("textChange",{value:P(),cursor:T()})}))];switch(c.lineNumbers&&(t.push(function(e={}){let t=Object.assign(Object.assign({},$c),e),r=new Lc(t,!0),i=new Lc(t,!1),n=Mi.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(Vl)!=e.state.facet(Vl)||e.startState.field(wc,!1)!=e.state.field(wc,!1)||zl(e.startState)!=zl(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new Bt;for(let n of e.viewportLineBlocks){let o=Sc(e.state,n.from,n.to)?i:vc(e.state,n.from,n.to)?r:null;o&&t.add(n.from,n.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[n,ta({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(n))||void 0===t?void 0:t.markers)||Dt.empty},initialSpacer:()=>new Lc(t,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(e,t,r)=>{if(o.click&&o.click(e,t,r))return!0;let i=Sc(e.state,t.from,t.to);if(i)return e.dispatch({effects:bc.of(i)}),!0;let n=vc(e.state,t.from,t.to);return!!n&&(e.dispatch({effects:_c.of(n)}),!0)}})}),Rc()]}()),t.push(function(e={}){return[ua.of(e),ia(),pa]}())),c.language){case"markdown":default:t.push(gO());break;case"javascript":t.push(Av())}c.lineWrapping&&t.push(Io.lineWrapping),c.lineHighlight&&t.push(Ss),d=Rt.create({doc:e,extensions:t}),f=new Io({state:d,parent:u})}function b(e){if(void 0!==f){let t=T(),r=f.state.update({changes:[{from:t,insert:e}]});f.dispatch(r)}}function y(){return void 0!==f&&f.hasFocus}function w(e){return void 0!==f?f.docView.domAtPos(e).node.textContent:""}function S(){if(void 0!==f)return f.state.sliceDoc(f.state.selection.main.from,f.state.selection.main.to)}function C(e){if(void 0!==f){let t=f.state.selection.main.from,r=f.state.update({changes:[{from:f.state.selection.main.from,to:f.state.selection.main.to},{from:t,insert:e}]});f.dispatch(r)}}function x(){if(void 0!==f)return f.state.selection.ranges.some((e=>!e.empty))}function k(e){void 0!==f&&(g=e,f.dispatch({selection:{anchor:g}}))}function T(){return void 0!==f?(g=f.state.selection.main.head,g):0}function P(){if(void 0!==f)return f.state.doc.toString()}function Q(){void 0!==f&&f.focus()}function R(){return f}function A(){return d}return L((()=>(_(""),p={getSelection:S,getValue:P,replaceSelection:C,somethingSelected:x,setCursor:k,getCursor:T,setValue:O,getLine:w,focus:Q,getEdView:R,getEdState:A,isFocused:y,insertAtCursor:b},v("editorChange",p),Q(),()=>{d=null,f=null,p=null}))),e.$$set=e=>{"height"in e&&r(0,o=e.height),"width"in e&&r(1,a=e.width),"styling"in e&&r(2,l=e.styling),"config"in e&&r(4,c=e.config),"initFinished"in e&&r(5,h=e.initFinished)},[o,a,l,u,c,h,function(e){B[e?"unshift":"push"]((()=>{u=e,r(3,u)}))}]}class yO extends ae{constructor(e){super(),se(this,e,bO,_O,o,{height:0,width:1,styling:2,config:4,initFinished:5})}}function wO(e,t,r){const i=e.slice();return i[17]=t[r],i}function SO(e){let t,r,n,o,s,a,l,c,h,u,d,m,b,C=e[17].name+"",x=e[17].email+"";function k(){return e[11](e[17])}function T(){return e[12](e[17])}return{c(){t=v("tr"),r=v("td"),n=O(C),o=_(),s=v("td"),a=O(x),l=_(),c=v("td"),c.textContent="🖋",h=_(),u=v("td"),u.textContent="❌",d=_(),w(c,"class","iconClick svelte-1c11hkb"),w(u,"class","iconClick svelte-1c11hkb")},m(e,i){p(e,t,i),f(t,r),f(r,n),f(t,o),f(t,s),f(s,a),f(t,l),f(t,c),f(t,h),f(t,u),f(t,d),m||(b=[y(c,"click",k),y(u,"click",T)],m=!0)},p(t,r){e=t,1&r&&C!==(C=e[17].name+"")&&S(n,C),1&r&&x!==(x=e[17].email+"")&&S(a,x)},d(e){e&&g(t),m=!1,i(b)}}}function CO(e){let t,r,n,o,s,a,l,c,h,u,d,m,b,S,k,T,P,Q,R;return{c(){t=v("div"),r=v("div"),n=v("label"),n.textContent="Name:",o=_(),s=v("input"),a=_(),l=v("div"),c=v("label"),c.textContent="Email:",h=_(),u=v("input"),d=_(),m=v("div"),b=v("button"),S=O("Save"),k=_(),T=v("button"),P=O("Close"),w(n,"for","aename"),w(s,"type","text"),w(s,"id","aename"),x(s,"background-color",e[4].textAreaColor),x(s,"color",e[4].textColor),x(s,"border-color",e[4].borderColor),w(s,"class","svelte-1c11hkb"),w(r,"id","addeditrow"),w(r,"class","svelte-1c11hkb"),w(c,"for","aeemail"),w(u,"type","text"),w(u,"id","aeemail"),x(u,"background-color",e[4].textAreaColor),x(u,"color",e[4].textColor),x(u,"border-color",e[4].borderColor),w(u,"class","svelte-1c11hkb"),w(l,"id","addeditrow"),w(l,"class","svelte-1c11hkb"),x(b,"background-color",e[4].textAreaColor),x(b,"color",e[4].textColor),x(b,"border-color",e[4].borderColor),w(b,"class","svelte-1c11hkb"),x(T,"background-color",e[4].textAreaColor),x(T,"color",e[4].textColor),x(T,"border-color",e[4].borderColor),w(T,"class","svelte-1c11hkb"),w(m,"id","buttonrow"),w(m,"class","svelte-1c11hkb"),w(t,"id","addeditdiv"),x(t,"background-color",e[4].backgroundColor),x(t,"font-family",e[4].font),x(t,"color",e[4].textColor),x(t,"font-size",e[4].fontSize),x(t,"border-color",e[4].textAreaColor),w(t,"class","svelte-1c11hkb")},m(i,g){p(i,t,g),f(t,r),f(r,n),f(r,o),f(r,s),C(s,e[2]),f(t,a),f(t,l),f(l,c),f(l,h),f(l,u),C(u,e[3]),f(t,d),f(t,m),f(m,b),f(b,S),f(m,k),f(m,T),f(T,P),Q||(R=[y(s,"input",e[13]),y(u,"input",e[14]),y(b,"click",e[7]),y(T,"click",e[15])],Q=!0)},p(e,r){16&r&&x(s,"background-color",e[4].textAreaColor),16&r&&x(s,"color",e[4].textColor),16&r&&x(s,"border-color",e[4].borderColor),4&r&&s.value!==e[2]&&C(s,e[2]),16&r&&x(u,"background-color",e[4].textAreaColor),16&r&&x(u,"color",e[4].textColor),16&r&&x(u,"border-color",e[4].borderColor),8&r&&u.value!==e[3]&&C(u,e[3]),16&r&&x(b,"background-color",e[4].textAreaColor),16&r&&x(b,"color",e[4].textColor),16&r&&x(b,"border-color",e[4].borderColor),16&r&&x(T,"background-color",e[4].textAreaColor),16&r&&x(T,"color",e[4].textColor),16&r&&x(T,"border-color",e[4].borderColor),16&r&&x(t,"background-color",e[4].backgroundColor),16&r&&x(t,"font-family",e[4].font),16&r&&x(t,"color",e[4].textColor),16&r&&x(t,"font-size",e[4].fontSize),16&r&&x(t,"border-color",e[4].textAreaColor)},d(e){e&&g(t),Q=!1,i(R)}}}function xO(t){let r,n,o,s,a,l,c,h,u,d,S,C,k,T,P,Q,R,A=t[0],$=[];for(let e=0;e<A.length;e+=1)$[e]=SO(wO(t,A,e));let L=t[1]&&CO(t);return{c(){r=v("div"),n=v("div"),o=v("table"),s=v("thead"),s.innerHTML="<th>Name</th>  <th>Address</th>  <th></th>  <th></th>",a=_(),l=v("tbody");for(let e=0;e<$.length;e+=1)$[e].c();c=_(),h=v("div"),u=v("button"),d=O("New"),S=_(),C=v("button"),k=O("Close"),T=_(),L&&L.c(),P=b(),w(n,"id","tablediv"),w(n,"class","svelte-1c11hkb"),x(u,"background-color",t[4].textAreaColor),x(u,"color",t[4].textColor),x(u,"border-color",t[4].borderColor),w(u,"class","svelte-1c11hkb"),x(C,"background-color",t[4].textAreaColor),x(C,"color",t[4].textColor),x(C,"border-color",t[4].borderColor),w(C,"class","svelte-1c11hkb"),w(h,"id","buttonrow"),w(h,"class","svelte-1c11hkb"),w(r,"id","addressBook"),x(r,"background-color",t[4].backgroundColor),x(r,"font-family",t[4].font),x(r,"color",t[4].textColor),x(r,"font-size",t[4].fontSize),x(r,"border-color",t[4].borderColor),w(r,"class","svelte-1c11hkb")},m(e,i){p(e,r,i),f(r,n),f(n,o),f(o,s),f(o,a),f(o,l);for(let e=0;e<$.length;e+=1)$[e].m(l,null);f(r,c),f(r,h),f(h,u),f(u,d),f(h,S),f(h,C),f(C,k),p(e,T,i),L&&L.m(e,i),p(e,P,i),Q||(R=[y(u,"click",t[5]),y(C,"click",t[6])],Q=!0)},p(e,[t]){if(769&t){let r;for(A=e[0],r=0;r<A.length;r+=1){const i=wO(e,A,r);$[r]?$[r].p(i,t):($[r]=SO(i),$[r].c(),$[r].m(l,null))}for(;r<$.length;r+=1)$[r].d(1);$.length=A.length}16&t&&x(u,"background-color",e[4].textAreaColor),16&t&&x(u,"color",e[4].textColor),16&t&&x(u,"border-color",e[4].borderColor),16&t&&x(C,"background-color",e[4].textAreaColor),16&t&&x(C,"color",e[4].textColor),16&t&&x(C,"border-color",e[4].borderColor),16&t&&x(r,"background-color",e[4].backgroundColor),16&t&&x(r,"font-family",e[4].font),16&t&&x(r,"color",e[4].textColor),16&t&&x(r,"font-size",e[4].fontSize),16&t&&x(r,"border-color",e[4].borderColor),e[1]?L?L.p(e,t):(L=CO(e),L.c(),L.m(P.parentNode,P)):L&&(L.d(1),L=null)},i:e,o:e,d(e){e&&g(r),m($,e),e&&g(T),L&&L.d(e),e&&g(P),Q=!1,i(R)}}}function kO(e,t,r){let i;s(e,OO,(e=>r(4,i=e)));let{show:n}=t,o=[],a=!1,l="",c="";function h(e){console.log(e),r(2,l=e.name),r(3,c=e.email)}function u(e){e.email=e.email.trim(),r(0,o=o.filter((t=>t.email!==e.email))),fetch("http://localhost:9978/api/emailit/addEmail",{method:"DELETE",headers:{"Content-type":"application/json"},body:{name:"",email:e.email}})}L((()=>{!function(e){fetch("http://localhost:9978/api/emailit/emails",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((t=>{r(0,o=t.emails),void 0!==e&&e()}))}()}));return e.$$set=e=>{"show"in e&&r(10,n=e.show)},[o,a,l,c,i,function(){r(1,a=!0),r(2,l=""),r(3,c="")},function(){r(10,n=!1)},function(){r(3,c=c.trim()),r(2,l=l.trim()),r(0,o=o.filter((e=>e.email!==c))),o.push({name:l,email:c}),r(0,o),fetch("http://localhost:9978/api/emailit/addEmail",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({name:l,email:c})}),r(1,a=!1)},h,u,n,e=>{h(e)},e=>{u(e)},function(){l=this.value,r(2,l)},function(){c=this.value,r(3,c)},()=>{r(1,a=!1)}]}class TO extends ae{constructor(e){super(),se(this,e,kO,xO,o,{show:10})}}var PO,QO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},RO={exports:{}};PO=RO,function(){function e(e){var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i].defaultValue);return r}var t={},r={},i={},n=e(!0),o="vanilla",s={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:function(){var t=e(!0),r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=!0);return r}()};function a(e,r){var i=r?"Error in "+r+" extension->":"Error in unnamed extension",n={valid:!0,error:""};t.helper.isArray(e)||(e=[e]);for(var o=0;o<e.length;++o){var s=i+" sub-extension "+o+": ",a=e[o];if("object"!=typeof a)return n.valid=!1,n.error=s+"must be an object, but "+typeof a+" given",n;if(!t.helper.isString(a.type))return n.valid=!1,n.error=s+'property "type" must be a string, but '+typeof a.type+" given",n;var l=a.type=a.type.toLowerCase();if("language"===l&&(l=a.type="lang"),"html"===l&&(l=a.type="output"),"lang"!==l&&"output"!==l&&"listener"!==l)return n.valid=!1,n.error=s+"type "+l+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',n;if("listener"===l){if(t.helper.isUndefined(a.listeners))return n.valid=!1,n.error=s+'. Extensions of type "listener" must have a property called "listeners"',n}else if(t.helper.isUndefined(a.filter)&&t.helper.isUndefined(a.regex))return n.valid=!1,n.error=s+l+' extensions must define either a "regex" property or a "filter" method',n;if(a.listeners){if("object"!=typeof a.listeners)return n.valid=!1,n.error=s+'"listeners" property must be an object but '+typeof a.listeners+" given",n;for(var c in a.listeners)if(a.listeners.hasOwnProperty(c)&&"function"!=typeof a.listeners[c])return n.valid=!1,n.error=s+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+typeof a.listeners[c]+" given",n}if(a.filter){if("function"!=typeof a.filter)return n.valid=!1,n.error=s+'"filter" must be a function, but '+typeof a.filter+" given",n}else if(a.regex){if(t.helper.isString(a.regex)&&(a.regex=new RegExp(a.regex,"g")),!(a.regex instanceof RegExp))return n.valid=!1,n.error=s+'"regex" property must either be a string or a RegExp object, but '+typeof a.regex+" given",n;if(t.helper.isUndefined(a.replace))return n.valid=!1,n.error=s+'"regex" extensions must implement a replace string or function',n}}return n}function l(e,t){return"¨E"+t.charCodeAt(0)+"E"}t.helper={},t.extensions={},t.setOption=function(e,t){return n[e]=t,this},t.getOption=function(e){return n[e]},t.getOptions=function(){return n},t.resetOptions=function(){n=e(!0)},t.setFlavor=function(e){if(!s.hasOwnProperty(e))throw Error(e+" flavor was not found");t.resetOptions();var r=s[e];for(var i in o=e,r)r.hasOwnProperty(i)&&(n[i]=r[i])},t.getFlavor=function(){return o},t.getFlavorOptions=function(e){if(s.hasOwnProperty(e))return s[e]},t.getDefaultOptions=function(t){return e(t)},t.subParser=function(e,i){if(t.helper.isString(e)){if(void 0===i){if(r.hasOwnProperty(e))return r[e];throw Error("SubParser named "+e+" not registered!")}r[e]=i}},t.extension=function(e,r){if(!t.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=t.helper.stdExtName(e),t.helper.isUndefined(r)){if(!i.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return i[e]}"function"==typeof r&&(r=r()),t.helper.isArray(r)||(r=[r]);var n=a(r,e);if(!n.valid)throw Error(n.error);i[e]=r},t.getAllExtensions=function(){return i},t.removeExtension=function(e){delete i[e]},t.resetExtensions=function(){i={}},t.validateExtension=function(e){var t=a(e,null);return!!t.valid||(console.warn(t.error),!1)},t.hasOwnProperty("helper")||(t.helper={}),t.helper.isString=function(e){return"string"==typeof e||e instanceof String},t.helper.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},t.helper.isArray=function(e){return Array.isArray(e)},t.helper.isUndefined=function(e){return void 0===e},t.helper.forEach=function(e,r){if(t.helper.isUndefined(e))throw new Error("obj param is required");if(t.helper.isUndefined(r))throw new Error("callback param is required");if(!t.helper.isFunction(r))throw new Error("callback param must be a function/closure");if("function"==typeof e.forEach)e.forEach(r);else if(t.helper.isArray(e))for(var i=0;i<e.length;i++)r(e[i],i,e);else{if("object"!=typeof e)throw new Error("obj does not seem to be an array or an iterable object");for(var n in e)e.hasOwnProperty(n)&&r(e[n],n,e)}},t.helper.stdExtName=function(e){return e.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},t.helper.escapeCharactersCallback=l,t.helper.escapeCharacters=function(e,t,r){var i="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";r&&(i="\\\\"+i);var n=new RegExp(i,"g");return e=e.replace(n,l)},t.helper.unescapeHTMLEntities=function(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var c=function(e,t,r,i){var n,o,s,a,l,c=i||"",h=c.indexOf("g")>-1,u=new RegExp(t+"|"+r,"g"+c.replace(/g/g,"")),d=new RegExp(t,c.replace(/g/g,"")),f=[];do{for(n=0;s=u.exec(e);)if(d.test(s[0]))n++||(a=(o=u.lastIndex)-s[0].length);else if(n&&!--n){l=s.index+s[0].length;var p={left:{start:a,end:o},match:{start:o,end:s.index},right:{start:s.index,end:l},wholeMatch:{start:a,end:l}};if(f.push(p),!h)return f}}while(n&&(u.lastIndex=o));return f};t.helper.matchRecursiveRegExp=function(e,t,r,i){for(var n=c(e,t,r,i),o=[],s=0;s<n.length;++s)o.push([e.slice(n[s].wholeMatch.start,n[s].wholeMatch.end),e.slice(n[s].match.start,n[s].match.end),e.slice(n[s].left.start,n[s].left.end),e.slice(n[s].right.start,n[s].right.end)]);return o},t.helper.replaceRecursiveRegExp=function(e,r,i,n,o){if(!t.helper.isFunction(r)){var s=r;r=function(){return s}}var a=c(e,i,n,o),l=e,h=a.length;if(h>0){var u=[];0!==a[0].wholeMatch.start&&u.push(e.slice(0,a[0].wholeMatch.start));for(var d=0;d<h;++d)u.push(r(e.slice(a[d].wholeMatch.start,a[d].wholeMatch.end),e.slice(a[d].match.start,a[d].match.end),e.slice(a[d].left.start,a[d].left.end),e.slice(a[d].right.start,a[d].right.end))),d<h-1&&u.push(e.slice(a[d].wholeMatch.end,a[d+1].wholeMatch.start));a[h-1].wholeMatch.end<e.length&&u.push(e.slice(a[h-1].wholeMatch.end)),l=u.join("")}return l},t.helper.regexIndexOf=function(e,r,i){if(!t.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(r instanceof RegExp==0)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var n=e.substring(i||0).search(r);return n>=0?n+(i||0):n},t.helper.splitAtIndex=function(e,r){if(!t.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[e.substring(0,r),e.substring(r)]},t.helper.encodeEmailAddress=function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=e.replace(/./g,(function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else{var r=Math.random();e=r>.9?t[2](e):r>.45?t[1](e):t[0](e)}return e}))},t.helper.padEnd=function(e,t,r){return t>>=0,r=String(r||" "),e.length>t?String(e):((t-=e.length)>r.length&&(r+=r.repeat(t/r.length)),String(e)+r.slice(0,t))},"undefined"==typeof console&&(console={warn:function(e){alert(e)},log:function(e){alert(e)},error:function(e){throw e}}),t.helper.regexes={asteriskDashAndColon:/([*_:~])/g},t.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},t.Converter=function(e){var r={},l=[],c=[],h={},u=o,d={parsed:{},raw:"",format:""};function f(e,r){if(r=r||null,t.helper.isString(e)){if(r=e=t.helper.stdExtName(e),t.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,r){"function"==typeof e&&(e=e(new t.Converter)),t.helper.isArray(e)||(e=[e]);var i=a(e,r);if(!i.valid)throw Error(i.error);for(var n=0;n<e.length;++n)switch(e[n].type){case"lang":l.push(e[n]);break;case"output":c.push(e[n]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(t.extensions[e],e);if(t.helper.isUndefined(i[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=i[e]}"function"==typeof e&&(e=e()),t.helper.isArray(e)||(e=[e]);var n=a(e,r);if(!n.valid)throw Error(n.error);for(var o=0;o<e.length;++o){switch(e[o].type){case"lang":l.push(e[o]);break;case"output":c.push(e[o])}if(e[o].hasOwnProperty("listeners"))for(var s in e[o].listeners)e[o].listeners.hasOwnProperty(s)&&p(s,e[o].listeners[s])}}function p(e,r){if(!t.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof e+" given");if("function"!=typeof r)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof r+" given");h.hasOwnProperty(e)||(h[e]=[]),h[e].push(r)}!function(){for(var i in e=e||{},n)n.hasOwnProperty(i)&&(r[i]=n[i]);if("object"!=typeof e)throw Error("Converter expects the passed parameter to be an object, but "+typeof e+" was passed instead.");for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);r.extensions&&t.helper.forEach(r.extensions,f)}(),this._dispatch=function(e,t,r,i){if(h.hasOwnProperty(e))for(var n=0;n<h[e].length;++n){var o=h[e][n](e,t,this,r,i);o&&void 0!==o&&(t=o)}return t},this.listen=function(e,t){return p(e,t),this},this.makeHtml=function(e){if(!e)return e;var i={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:l,outputModifiers:c,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return e=(e=(e=(e=(e=e.replace(/¨/g,"¨T")).replace(/\$/g,"¨D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),r.smartIndentationFix&&(e=function(e){var t=e.match(/^\s*/)[0].length,r=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(r,"")}(e)),e="\n\n"+e+"\n\n",e=(e=t.subParser("detab")(e,r,i)).replace(/^[ \t]+$/gm,""),t.helper.forEach(l,(function(n){e=t.subParser("runExtension")(n,e,r,i)})),e=t.subParser("metadata")(e,r,i),e=t.subParser("hashPreCodeTags")(e,r,i),e=t.subParser("githubCodeBlocks")(e,r,i),e=t.subParser("hashHTMLBlocks")(e,r,i),e=t.subParser("hashCodeTags")(e,r,i),e=t.subParser("stripLinkDefinitions")(e,r,i),e=t.subParser("blockGamut")(e,r,i),e=t.subParser("unhashHTMLSpans")(e,r,i),e=(e=(e=t.subParser("unescapeSpecialChars")(e,r,i)).replace(/¨D/g,"$$")).replace(/¨T/g,"¨"),e=t.subParser("completeHTMLDocument")(e,r,i),t.helper.forEach(c,(function(n){e=t.subParser("runExtension")(n,e,r,i)})),d=i.metadata,e},this.makeMarkdown=this.makeMd=function(e,r){if(e=(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">¨NBSP;<"),!r){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");r=window.document}var i=r.createElement("div");i.innerHTML=e;var n={preList:function(e){for(var r=e.querySelectorAll("pre"),i=[],n=0;n<r.length;++n)if(1===r[n].childElementCount&&"code"===r[n].firstChild.tagName.toLowerCase()){var o=r[n].firstChild.innerHTML.trim(),s=r[n].firstChild.getAttribute("data-language")||"";if(""===s)for(var a=r[n].firstChild.className.split(" "),l=0;l<a.length;++l){var c=a[l].match(/^language-(.+)$/);if(null!==c){s=c[1];break}}o=t.helper.unescapeHTMLEntities(o),i.push(o),r[n].outerHTML='<precode language="'+s+'" precodenum="'+n.toString()+'"></precode>'}else i.push(r[n].innerHTML),r[n].innerHTML="",r[n].setAttribute("prenum",n.toString());return i}(i)};!function e(t){for(var r=0;r<t.childNodes.length;++r){var i=t.childNodes[r];3===i.nodeType?/\S/.test(i.nodeValue)||/^[ ]+$/.test(i.nodeValue)?(i.nodeValue=i.nodeValue.split("\n").join(" "),i.nodeValue=i.nodeValue.replace(/(\s)+/g,"$1")):(t.removeChild(i),--r):1===i.nodeType&&e(i)}}(i);for(var o=i.childNodes,s="",a=0;a<o.length;a++)s+=t.subParser("makeMarkdown.node")(o[a],n);return s},this.setOption=function(e,t){r[e]=t},this.getOption=function(e){return r[e]},this.getOptions=function(){return r},this.addExtension=function(e,t){f(e,t=t||null)},this.useExtension=function(e){f(e)},this.setFlavor=function(e){if(!s.hasOwnProperty(e))throw Error(e+" flavor was not found");var t=s[e];for(var i in u=e,t)t.hasOwnProperty(i)&&(r[i]=t[i])},this.getFlavor=function(){return u},this.removeExtension=function(e){t.helper.isArray(e)||(e=[e]);for(var r=0;r<e.length;++r){for(var i=e[r],n=0;n<l.length;++n)l[n]===i&&l.splice(n,1);for(var o=0;o<c.length;++o)c[o]===i&&c.splice(o,1)}},this.getAllExtensions=function(){return{language:l,output:c}},this.getMetadata=function(e){return e?d.raw:d.parsed},this.getMetadataFormat=function(){return d.format},this._setMetadataPair=function(e,t){d.parsed[e]=t},this._setMetadataFormat=function(e){d.format=e},this._setMetadataRaw=function(e){d.raw=e}},t.subParser("anchors",(function(e,r,i){var n=function(e,n,o,s,a,l,c){if(t.helper.isUndefined(c)&&(c=""),o=o.toLowerCase(),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)s="";else if(!s){if(o||(o=n.toLowerCase().replace(/ ?\n/g," ")),s="#"+o,t.helper.isUndefined(i.gUrls[o]))return e;s=i.gUrls[o],t.helper.isUndefined(i.gTitles[o])||(c=i.gTitles[o])}var h='<a href="'+(s=s.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'"';return""!==c&&null!==c&&(h+=' title="'+(c=(c=c.replace(/"/g,"&quot;")).replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'"'),r.openLinksInNewWindow&&!/^#/.test(s)&&(h+=' rel="noopener noreferrer" target="¨E95Eblank"'),h+=">"+n+"</a>"};return e=(e=(e=(e=(e=i.converter._dispatch("anchors.before",e,r,i)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[([^\[\]]+)]()()()()()/g,n),r.ghMentions&&(e=e.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,(function(e,i,n,o,s){if("\\"===n)return i+o;if(!t.helper.isString(r.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var a=r.ghMentionsLink.replace(/\{u}/g,s),l="";return r.openLinksInNewWindow&&(l=' rel="noopener noreferrer" target="¨E95Eblank"'),i+'<a href="'+a+'"'+l+">"+o+"</a>"}))),e=i.converter._dispatch("anchors.after",e,r,i)}));var h=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,u=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,d=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,f=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,p=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,g=function(e){return function(r,i,n,o,s,a,l){var c=n=n.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback),h="",u="",d=i||"",f=l||"";return/^www\./i.test(n)&&(n=n.replace(/^www\./i,"http://www.")),e.excludeTrailingPunctuationFromURLs&&a&&(h=a),e.openLinksInNewWindow&&(u=' rel="noopener noreferrer" target="¨E95Eblank"'),d+'<a href="'+n+'"'+u+">"+c+"</a>"+h+f}},m=function(e,r){return function(i,n,o){var s="mailto:";return n=n||"",o=t.subParser("unescapeSpecialChars")(o,e,r),e.encodeEmails?(s=t.helper.encodeEmailAddress(s+o),o=t.helper.encodeEmailAddress(o)):s+=o,n+'<a href="'+s+'">'+o+"</a>"}};t.subParser("autoLinks",(function(e,t,r){return e=(e=(e=r.converter._dispatch("autoLinks.before",e,t,r)).replace(d,g(t))).replace(p,m(t,r)),e=r.converter._dispatch("autoLinks.after",e,t,r)})),t.subParser("simplifiedAutoLinks",(function(e,t,r){return t.simplifiedAutoLink?(e=r.converter._dispatch("simplifiedAutoLinks.before",e,t,r),e=(e=t.excludeTrailingPunctuationFromURLs?e.replace(u,g(t)):e.replace(h,g(t))).replace(f,m(t,r)),e=r.converter._dispatch("simplifiedAutoLinks.after",e,t,r)):e})),t.subParser("blockGamut",(function(e,r,i){return e=i.converter._dispatch("blockGamut.before",e,r,i),e=t.subParser("blockQuotes")(e,r,i),e=t.subParser("headers")(e,r,i),e=t.subParser("horizontalRule")(e,r,i),e=t.subParser("lists")(e,r,i),e=t.subParser("codeBlocks")(e,r,i),e=t.subParser("tables")(e,r,i),e=t.subParser("hashHTMLBlocks")(e,r,i),e=t.subParser("paragraphs")(e,r,i),e=i.converter._dispatch("blockGamut.after",e,r,i)})),t.subParser("blockQuotes",(function(e,r,i){e=i.converter._dispatch("blockQuotes.before",e,r,i),e+="\n\n";var n=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return r.splitAdjacentBlockquotes&&(n=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),e=e.replace(n,(function(e){return e=(e=(e=e.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/¨0/g,"")).replace(/^[ \t]+$/gm,""),e=t.subParser("githubCodeBlocks")(e,r,i),e=(e=(e=t.subParser("blockGamut")(e,r,i)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var r=t;return r=(r=r.replace(/^  /gm,"¨0")).replace(/¨0/g,"")})),t.subParser("hashBlock")("<blockquote>\n"+e+"\n</blockquote>",r,i)})),e=i.converter._dispatch("blockQuotes.after",e,r,i)})),t.subParser("codeBlocks",(function(e,r,i){return e=i.converter._dispatch("codeBlocks.before",e,r,i),e=(e+="¨0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g,(function(e,n,o){var s=n,a=o,l="\n";return s=t.subParser("outdent")(s,r,i),s=t.subParser("encodeCode")(s,r,i),s=(s=(s=t.subParser("detab")(s,r,i)).replace(/^\n+/g,"")).replace(/\n+$/g,""),r.omitExtraWLInCodeBlocks&&(l=""),s="<pre><code>"+s+l+"</code></pre>",t.subParser("hashBlock")(s,r,i)+a})),e=e.replace(/¨0/,""),e=i.converter._dispatch("codeBlocks.after",e,r,i)})),t.subParser("codeSpans",(function(e,r,i){return void 0===(e=i.converter._dispatch("codeSpans.before",e,r,i))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(e,n,o,s){var a=s;return a=(a=a.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),a=n+"<code>"+(a=t.subParser("encodeCode")(a,r,i))+"</code>",a=t.subParser("hashHTMLSpans")(a,r,i)})),e=i.converter._dispatch("codeSpans.after",e,r,i)})),t.subParser("completeHTMLDocument",(function(e,t,r){if(!t.completeHTMLDocument)return e;e=r.converter._dispatch("completeHTMLDocument.before",e,t,r);var i="html",n="<!DOCTYPE HTML>\n",o="",s='<meta charset="utf-8">\n',a="",l="";for(var c in void 0!==r.metadata.parsed.doctype&&(n="<!DOCTYPE "+r.metadata.parsed.doctype+">\n","html"!==(i=r.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==i||(s='<meta charset="utf-8">')),r.metadata.parsed)if(r.metadata.parsed.hasOwnProperty(c))switch(c.toLowerCase()){case"doctype":break;case"title":o="<title>"+r.metadata.parsed.title+"</title>\n";break;case"charset":s="html"===i||"html5"===i?'<meta charset="'+r.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+r.metadata.parsed.charset+'">\n';break;case"language":case"lang":a=' lang="'+r.metadata.parsed[c]+'"',l+='<meta name="'+c+'" content="'+r.metadata.parsed[c]+'">\n';break;default:l+='<meta name="'+c+'" content="'+r.metadata.parsed[c]+'">\n'}return e=n+"<html"+a+">\n<head>\n"+o+s+l+"</head>\n<body>\n"+e.trim()+"\n</body>\n</html>",e=r.converter._dispatch("completeHTMLDocument.after",e,t,r)})),t.subParser("detab",(function(e,t,r){return e=(e=(e=(e=r.converter._dispatch("detab.before",e,t,r)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"¨A¨B")).replace(/¨B(.+?)¨A/g,(function(e,t){for(var r=t,i=4-r.length%4,n=0;n<i;n++)r+=" ";return r})),e=(e=e.replace(/¨A/g,"    ")).replace(/¨B/g,""),e=r.converter._dispatch("detab.after",e,t,r)})),t.subParser("ellipsis",(function(e,t,r){return t.ellipsis?(e=(e=r.converter._dispatch("ellipsis.before",e,t,r)).replace(/\.\.\./g,"…"),e=r.converter._dispatch("ellipsis.after",e,t,r)):e})),t.subParser("emoji",(function(e,r,i){return r.emoji?(e=(e=i.converter._dispatch("emoji.before",e,r,i)).replace(/:([\S]+?):/g,(function(e,r){return t.helper.emojis.hasOwnProperty(r)?t.helper.emojis[r]:e})),e=i.converter._dispatch("emoji.after",e,r,i)):e})),t.subParser("encodeAmpsAndAngles",(function(e,t,r){return e=(e=(e=(e=(e=r.converter._dispatch("encodeAmpsAndAngles.before",e,t,r)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e=r.converter._dispatch("encodeAmpsAndAngles.after",e,t,r)})),t.subParser("encodeBackslashEscapes",(function(e,r,i){return e=(e=(e=i.converter._dispatch("encodeBackslashEscapes.before",e,r,i)).replace(/\\(\\)/g,t.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,t.helper.escapeCharactersCallback),e=i.converter._dispatch("encodeBackslashEscapes.after",e,r,i)})),t.subParser("encodeCode",(function(e,r,i){return e=(e=i.converter._dispatch("encodeCode.before",e,r,i)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,t.helper.escapeCharactersCallback),e=i.converter._dispatch("encodeCode.after",e,r,i)})),t.subParser("escapeSpecialCharsWithinTagAttributes",(function(e,r,i){return e=(e=(e=i.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",e,r,i)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,(function(e){return e.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,t.helper.escapeCharactersCallback)}))).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,(function(e){return e.replace(/([\\`*_~=|])/g,t.helper.escapeCharactersCallback)})),e=i.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",e,r,i)})),t.subParser("githubCodeBlocks",(function(e,r,i){return r.ghCodeBlocks?(e=i.converter._dispatch("githubCodeBlocks.before",e,r,i),e=(e+="¨0").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,(function(e,n,o,s){var a=r.omitExtraWLInCodeBlocks?"":"\n";return s=t.subParser("encodeCode")(s,r,i),s="<pre><code"+(o?' class="'+o+" language-"+o+'"':"")+">"+(s=(s=(s=t.subParser("detab")(s,r,i)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+a+"</code></pre>",s=t.subParser("hashBlock")(s,r,i),"\n\n¨G"+(i.ghCodeBlocks.push({text:e,codeblock:s})-1)+"G\n\n"})),e=e.replace(/¨0/,""),i.converter._dispatch("githubCodeBlocks.after",e,r,i)):e})),t.subParser("hashBlock",(function(e,t,r){return e=(e=r.converter._dispatch("hashBlock.before",e,t,r)).replace(/(^\n+|\n+$)/g,""),e="\n\n¨K"+(r.gHtmlBlocks.push(e)-1)+"K\n\n",e=r.converter._dispatch("hashBlock.after",e,t,r)})),t.subParser("hashCodeTags",(function(e,r,i){return e=i.converter._dispatch("hashCodeTags.before",e,r,i),e=t.helper.replaceRecursiveRegExp(e,(function(e,n,o,s){var a=o+t.subParser("encodeCode")(n,r,i)+s;return"¨C"+(i.gHtmlSpans.push(a)-1)+"C"}),"<code\\b[^>]*>","</code>","gim"),e=i.converter._dispatch("hashCodeTags.after",e,r,i)})),t.subParser("hashElement",(function(e,t,r){return function(e,t){var i=t;return i=(i=(i=i.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),i="\n\n¨K"+(r.gHtmlBlocks.push(i)-1)+"K\n\n"}})),t.subParser("hashHTMLBlocks",(function(e,r,i){e=i.converter._dispatch("hashHTMLBlocks.before",e,r,i);var n=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],o=function(e,t,r,n){var o=e;return-1!==r.search(/\bmarkdown\b/)&&(o=r+i.converter.makeHtml(t)+n),"\n\n¨K"+(i.gHtmlBlocks.push(o)-1)+"K\n\n"};r.backslashEscapesHTMLTags&&(e=e.replace(/\\<(\/?[^>]+?)>/g,(function(e,t){return"&lt;"+t+"&gt;"})));for(var s=0;s<n.length;++s)for(var a,l=new RegExp("^ {0,3}(<"+n[s]+"\\b[^>]*>)","im"),c="<"+n[s]+"\\b[^>]*>",h="</"+n[s]+">";-1!==(a=t.helper.regexIndexOf(e,l));){var u=t.helper.splitAtIndex(e,a),d=t.helper.replaceRecursiveRegExp(u[1],o,c,h,"im");if(d===u[1])break;e=u[0].concat(d)}return e=e.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,t.subParser("hashElement")(e,r,i)),e=(e=t.helper.replaceRecursiveRegExp(e,(function(e){return"\n\n¨K"+(i.gHtmlBlocks.push(e)-1)+"K\n\n"}),"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,t.subParser("hashElement")(e,r,i)),e=i.converter._dispatch("hashHTMLBlocks.after",e,r,i)})),t.subParser("hashHTMLSpans",(function(e,t,r){function i(e){return"¨C"+(r.gHtmlSpans.push(e)-1)+"C"}return e=(e=(e=(e=(e=r.converter._dispatch("hashHTMLSpans.before",e,t,r)).replace(/<[^>]+?\/>/gi,(function(e){return i(e)}))).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,(function(e){return i(e)}))).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,(function(e){return i(e)}))).replace(/<[^>]+?>/gi,(function(e){return i(e)})),e=r.converter._dispatch("hashHTMLSpans.after",e,t,r)})),t.subParser("unhashHTMLSpans",(function(e,t,r){e=r.converter._dispatch("unhashHTMLSpans.before",e,t,r);for(var i=0;i<r.gHtmlSpans.length;++i){for(var n=r.gHtmlSpans[i],o=0;/¨C(\d+)C/.test(n);){var s=RegExp.$1;if(n=n.replace("¨C"+s+"C",r.gHtmlSpans[s]),10===o){console.error("maximum nesting of 10 spans reached!!!");break}++o}e=e.replace("¨C"+i+"C",n)}return e=r.converter._dispatch("unhashHTMLSpans.after",e,t,r)})),t.subParser("hashPreCodeTags",(function(e,r,i){return e=i.converter._dispatch("hashPreCodeTags.before",e,r,i),e=t.helper.replaceRecursiveRegExp(e,(function(e,n,o,s){var a=o+t.subParser("encodeCode")(n,r,i)+s;return"\n\n¨G"+(i.ghCodeBlocks.push({text:e,codeblock:a})-1)+"G\n\n"}),"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),e=i.converter._dispatch("hashPreCodeTags.after",e,r,i)})),t.subParser("headers",(function(e,r,i){e=i.converter._dispatch("headers.before",e,r,i);var n=isNaN(parseInt(r.headerLevelStart))?1:parseInt(r.headerLevelStart),o=r.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,s=r.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;e=(e=e.replace(o,(function(e,o){var s=t.subParser("spanGamut")(o,r,i),a=r.noHeaderId?"":' id="'+l(o)+'"',c="<h"+n+a+">"+s+"</h"+n+">";return t.subParser("hashBlock")(c,r,i)}))).replace(s,(function(e,o){var s=t.subParser("spanGamut")(o,r,i),a=r.noHeaderId?"":' id="'+l(o)+'"',c=n+1,h="<h"+c+a+">"+s+"</h"+c+">";return t.subParser("hashBlock")(h,r,i)}));var a=r.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;function l(e){var n,o;if(r.customizedHeaderId){var s=e.match(/\{([^{]+?)}\s*$/);s&&s[1]&&(e=s[1])}return n=e,o=t.helper.isString(r.prefixHeaderId)?r.prefixHeaderId:!0===r.prefixHeaderId?"section-":"",r.rawPrefixHeaderId||(n=o+n),n=r.ghCompatibleHeaderId?n.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():r.rawHeaderId?n.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():n.replace(/[^\w]/g,"").toLowerCase(),r.rawPrefixHeaderId&&(n=o+n),i.hashLinkCounts[n]?n=n+"-"+i.hashLinkCounts[n]++:i.hashLinkCounts[n]=1,n}return e=e.replace(a,(function(e,o,s){var a=s;r.customizedHeaderId&&(a=s.replace(/\s?\{([^{]+?)}\s*$/,""));var c=t.subParser("spanGamut")(a,r,i),h=r.noHeaderId?"":' id="'+l(s)+'"',u=n-1+o.length,d="<h"+u+h+">"+c+"</h"+u+">";return t.subParser("hashBlock")(d,r,i)})),e=i.converter._dispatch("headers.after",e,r,i)})),t.subParser("horizontalRule",(function(e,r,i){e=i.converter._dispatch("horizontalRule.before",e,r,i);var n=t.subParser("hashBlock")("<hr />",r,i);return e=(e=(e=e.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,n),e=i.converter._dispatch("horizontalRule.after",e,r,i)})),t.subParser("images",(function(e,r,i){function n(e,r,n,o,s,a,l,c){var h=i.gUrls,u=i.gTitles,d=i.gDimensions;if(n=n.toLowerCase(),c||(c=""),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)o="";else if(""===o||null===o){if(""!==n&&null!==n||(n=r.toLowerCase().replace(/ ?\n/g," ")),o="#"+n,t.helper.isUndefined(h[n]))return e;o=h[n],t.helper.isUndefined(u[n])||(c=u[n]),t.helper.isUndefined(d[n])||(s=d[n].width,a=d[n].height)}r=r.replace(/"/g,"&quot;").replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback);var f='<img src="'+(o=o.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'" alt="'+r+'"';return c&&t.helper.isString(c)&&(f+=' title="'+(c=c.replace(/"/g,"&quot;").replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'"'),s&&a&&(f+=' width="'+(s="*"===s?"auto":s)+'"',f+=' height="'+(a="*"===a?"auto":a)+'"'),f+=" />"}return e=(e=(e=(e=(e=(e=i.converter._dispatch("images.before",e,r,i)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,(function(e,t,r,i,o,s,a,l){return n(e,t,r,i=i.replace(/\s/g,""),o,s,0,l)}))).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,n)).replace(/!\[([^\[\]]+)]()()()()()/g,n),e=i.converter._dispatch("images.after",e,r,i)})),t.subParser("italicsAndBold",(function(e,t,r){function i(e,t,r){return t+e+r}return e=r.converter._dispatch("italicsAndBold.before",e,t,r),e=t.literalMidWordUnderscores?(e=(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return i(t,"<strong><em>","</em></strong>")}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return i(t,"<strong>","</strong>")}))).replace(/\b_(\S[\s\S]*?)_\b/g,(function(e,t){return i(t,"<em>","</em>")})):(e=(e=e.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?i(t,"<strong><em>","</em></strong>"):e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?i(t,"<strong>","</strong>"):e}))).replace(/_([^\s_][\s\S]*?)_/g,(function(e,t){return/\S$/.test(t)?i(t,"<em>","</em>"):e})),e=t.literalMidWordAsterisks?(e=(e=e.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,(function(e,t,r){return i(r,t+"<strong><em>","</em></strong>")}))).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,(function(e,t,r){return i(r,t+"<strong>","</strong>")}))).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,(function(e,t,r){return i(r,t+"<em>","</em>")})):(e=(e=e.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,(function(e,t){return/\S$/.test(t)?i(t,"<strong><em>","</em></strong>"):e}))).replace(/\*\*(\S[\s\S]*?)\*\*/g,(function(e,t){return/\S$/.test(t)?i(t,"<strong>","</strong>"):e}))).replace(/\*([^\s*][\s\S]*?)\*/g,(function(e,t){return/\S$/.test(t)?i(t,"<em>","</em>"):e})),e=r.converter._dispatch("italicsAndBold.after",e,t,r)})),t.subParser("lists",(function(e,r,i){function n(e,n){i.gListLevel++,e=e.replace(/\n{2,}$/,"\n");var o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,s=/\n[ \t]*\n(?!¨0)/.test(e+="¨0");return r.disableForced4SpacesIndentedSublists&&(o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),e=(e=e.replace(o,(function(e,n,o,a,l,c,h){h=h&&""!==h.trim();var u=t.subParser("outdent")(l,r,i),d="";return c&&r.tasklists&&(d=' class="task-list-item" style="list-style-type: none;"',u=u.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return h&&(e+=" checked"),e+=">"}))),u=u.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,(function(e){return"¨A"+e})),n||u.search(/\n{2,}/)>-1?(u=t.subParser("githubCodeBlocks")(u,r,i),u=t.subParser("blockGamut")(u,r,i)):(u=(u=t.subParser("lists")(u,r,i)).replace(/\n$/,""),u=(u=t.subParser("hashHTMLBlocks")(u,r,i)).replace(/\n\n+/g,"\n\n"),u=s?t.subParser("paragraphs")(u,r,i):t.subParser("spanGamut")(u,r,i)),u="<li"+d+">"+(u=u.replace("¨A",""))+"</li>\n"}))).replace(/¨0/g,""),i.gListLevel--,n&&(e=e.replace(/\s+$/,"")),e}function o(e,t){if("ol"===t){var r=e.match(/^ *(\d+)\./);if(r&&"1"!==r[1])return' start="'+r[1]+'"'}return""}function s(e,t,i){var s=r.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,a=r.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,l="ul"===t?s:a,c="";if(-1!==e.search(l))!function r(h){var u=h.search(l),d=o(e,t);-1!==u?(c+="\n\n<"+t+d+">\n"+n(h.slice(0,u),!!i)+"</"+t+">\n",l="ul"==(t="ul"===t?"ol":"ul")?s:a,r(h.slice(u))):c+="\n\n<"+t+d+">\n"+n(h,!!i)+"</"+t+">\n"}(e);else{var h=o(e,t);c="\n\n<"+t+h+">\n"+n(e,!!i)+"</"+t+">\n"}return c}return e=i.converter._dispatch("lists.before",e,r,i),e+="¨0",e=(e=i.gListLevel?e.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,r){return s(t,r.search(/[*+-]/g)>-1?"ul":"ol",!0)})):e.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,r,i){return s(r,i.search(/[*+-]/g)>-1?"ul":"ol",!1)}))).replace(/¨0/,""),e=i.converter._dispatch("lists.after",e,r,i)})),t.subParser("metadata",(function(e,t,r){if(!t.metadata)return e;function i(e){r.metadata.raw=e,(e=(e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,(function(e,t,i){return r.metadata.parsed[t]=i,""}))}return e=(e=r.converter._dispatch("metadata.before",e,t,r)).replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,(function(e,t,r){return i(r),"¨M"})),e=e.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,(function(e,t,n){return t&&(r.metadata.format=t),i(n),"¨M"})),e=e.replace(/¨M/g,""),e=r.converter._dispatch("metadata.after",e,t,r)})),t.subParser("outdent",(function(e,t,r){return e=(e=(e=r.converter._dispatch("outdent.before",e,t,r)).replace(/^(\t|[ ]{1,4})/gm,"¨0")).replace(/¨0/g,""),e=r.converter._dispatch("outdent.after",e,t,r)})),t.subParser("paragraphs",(function(e,r,i){for(var n=(e=(e=(e=i.converter._dispatch("paragraphs.before",e,r,i)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),o=[],s=n.length,a=0;a<s;a++){var l=n[a];l.search(/¨(K|G)(\d+)\1/g)>=0?o.push(l):l.search(/\S/)>=0&&(l=(l=t.subParser("spanGamut")(l,r,i)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",o.push(l))}for(s=o.length,a=0;a<s;a++){for(var c="",h=o[a],u=!1;/¨(K|G)(\d+)\1/.test(h);){var d=RegExp.$1,f=RegExp.$2;c=(c="K"===d?i.gHtmlBlocks[f]:u?t.subParser("encodeCode")(i.ghCodeBlocks[f].text,r,i):i.ghCodeBlocks[f].codeblock).replace(/\$/g,"$$$$"),h=h.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(h)&&(u=!0)}o[a]=h}return e=(e=(e=o.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),i.converter._dispatch("paragraphs.after",e,r,i)})),t.subParser("runExtension",(function(e,t,r,i){if(e.filter)t=e.filter(t,i.converter,r);else if(e.regex){var n=e.regex;n instanceof RegExp||(n=new RegExp(n,"g")),t=t.replace(n,e.replace)}return t})),t.subParser("spanGamut",(function(e,r,i){return e=i.converter._dispatch("spanGamut.before",e,r,i),e=t.subParser("codeSpans")(e,r,i),e=t.subParser("escapeSpecialCharsWithinTagAttributes")(e,r,i),e=t.subParser("encodeBackslashEscapes")(e,r,i),e=t.subParser("images")(e,r,i),e=t.subParser("anchors")(e,r,i),e=t.subParser("autoLinks")(e,r,i),e=t.subParser("simplifiedAutoLinks")(e,r,i),e=t.subParser("emoji")(e,r,i),e=t.subParser("underline")(e,r,i),e=t.subParser("italicsAndBold")(e,r,i),e=t.subParser("strikethrough")(e,r,i),e=t.subParser("ellipsis")(e,r,i),e=t.subParser("hashHTMLSpans")(e,r,i),e=t.subParser("encodeAmpsAndAngles")(e,r,i),r.simpleLineBreaks?/\n\n¨K/.test(e)||(e=e.replace(/\n+/g,"<br />\n")):e=e.replace(/  +\n/g,"<br />\n"),e=i.converter._dispatch("spanGamut.after",e,r,i)})),t.subParser("strikethrough",(function(e,r,i){return r.strikethrough&&(e=(e=i.converter._dispatch("strikethrough.before",e,r,i)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,(function(e,n){return function(e){return r.simplifiedAutoLink&&(e=t.subParser("simplifiedAutoLinks")(e,r,i)),"<del>"+e+"</del>"}(n)})),e=i.converter._dispatch("strikethrough.after",e,r,i)),e})),t.subParser("stripLinkDefinitions",(function(e,r,i){var n=function(n,o,s,a,l,c,h){return o=o.toLowerCase(),e.toLowerCase().split(o).length-1<2?n:(s.match(/^data:.+?\/.+?;base64,/)?i.gUrls[o]=s.replace(/\s/g,""):i.gUrls[o]=t.subParser("encodeAmpsAndAngles")(s,r,i),c?c+h:(h&&(i.gTitles[o]=h.replace(/"|'/g,"&quot;")),r.parseImgDimensions&&a&&l&&(i.gDimensions[o]={width:a,height:l}),""))};return e=(e=(e=(e+="¨0").replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm,n)).replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,n)).replace(/¨0/,"")})),t.subParser("tables",(function(e,r,i){if(!r.tables)return e;function n(e,n){var o="";return e=e.trim(),(r.tablesHeaderId||r.tableHeaderId)&&(o=' id="'+e.replace(/ /g,"_").toLowerCase()+'"'),"<th"+o+n+">"+(e=t.subParser("spanGamut")(e,r,i))+"</th>\n"}function o(e){var o,s=e.split("\n");for(o=0;o<s.length;++o)/^ {0,3}\|/.test(s[o])&&(s[o]=s[o].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(s[o])&&(s[o]=s[o].replace(/\|[ \t]*$/,"")),s[o]=t.subParser("codeSpans")(s[o],r,i);var a,l,c=s[0].split("|").map((function(e){return e.trim()})),h=s[1].split("|").map((function(e){return e.trim()})),u=[],d=[],f=[],p=[];for(s.shift(),s.shift(),o=0;o<s.length;++o)""!==s[o].trim()&&u.push(s[o].split("|").map((function(e){return e.trim()})));if(c.length<h.length)return e;for(o=0;o<h.length;++o)f.push((a=h[o],/^:[ \t]*--*$/.test(a)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(a)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(a)?' style="text-align:center;"':""));for(o=0;o<c.length;++o)t.helper.isUndefined(f[o])&&(f[o]=""),d.push(n(c[o],f[o]));for(o=0;o<u.length;++o){for(var g=[],m=0;m<d.length;++m)t.helper.isUndefined(u[o][m]),g.push((l=u[o][m],"<td"+f[m]+">"+t.subParser("spanGamut")(l,r,i)+"</td>\n"));p.push(g)}return function(e,t){for(var r="<table>\n<thead>\n<tr>\n",i=e.length,n=0;n<i;++n)r+=e[n];for(r+="</tr>\n</thead>\n<tbody>\n",n=0;n<t.length;++n){r+="<tr>\n";for(var o=0;o<i;++o)r+=t[n][o];r+="</tr>\n"}return r+"</tbody>\n</table>\n"}(d,p)}return e=(e=(e=(e=i.converter._dispatch("tables.before",e,r,i)).replace(/\\(\|)/g,t.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,o)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm,o),e=i.converter._dispatch("tables.after",e,r,i)})),t.subParser("underline",(function(e,r,i){return r.underline?(e=i.converter._dispatch("underline.before",e,r,i),e=(e=r.literalMidWordUnderscores?(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return"<u>"+t+"</u>"}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return"<u>"+t+"</u>"})):(e=e.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/(_)/g,t.helper.escapeCharactersCallback),e=i.converter._dispatch("underline.after",e,r,i)):e})),t.subParser("unescapeSpecialChars",(function(e,t,r){return e=(e=r.converter._dispatch("unescapeSpecialChars.before",e,t,r)).replace(/¨E(\d+)E/g,(function(e,t){var r=parseInt(t);return String.fromCharCode(r)})),e=r.converter._dispatch("unescapeSpecialChars.after",e,t,r)})),t.subParser("makeMarkdown.blockquote",(function(e,r){var i="";if(e.hasChildNodes())for(var n=e.childNodes,o=n.length,s=0;s<o;++s){var a=t.subParser("makeMarkdown.node")(n[s],r);""!==a&&(i+=a)}return i="> "+(i=i.trim()).split("\n").join("\n> ")})),t.subParser("makeMarkdown.codeBlock",(function(e,t){var r=e.getAttribute("language"),i=e.getAttribute("precodenum");return"```"+r+"\n"+t.preList[i]+"\n```"})),t.subParser("makeMarkdown.codeSpan",(function(e){return"`"+e.innerHTML+"`"})),t.subParser("makeMarkdown.emphasis",(function(e,r){var i="";if(e.hasChildNodes()){i+="*";for(var n=e.childNodes,o=n.length,s=0;s<o;++s)i+=t.subParser("makeMarkdown.node")(n[s],r);i+="*"}return i})),t.subParser("makeMarkdown.header",(function(e,r,i){var n=new Array(i+1).join("#"),o="";if(e.hasChildNodes()){o=n+" ";for(var s=e.childNodes,a=s.length,l=0;l<a;++l)o+=t.subParser("makeMarkdown.node")(s[l],r)}return o})),t.subParser("makeMarkdown.hr",(function(){return"---"})),t.subParser("makeMarkdown.image",(function(e){var t="";return e.hasAttribute("src")&&(t+="!["+e.getAttribute("alt")+"](",t+="<"+e.getAttribute("src")+">",e.hasAttribute("width")&&e.hasAttribute("height")&&(t+=" ="+e.getAttribute("width")+"x"+e.getAttribute("height")),e.hasAttribute("title")&&(t+=' "'+e.getAttribute("title")+'"'),t+=")"),t})),t.subParser("makeMarkdown.links",(function(e,r){var i="";if(e.hasChildNodes()&&e.hasAttribute("href")){var n=e.childNodes,o=n.length;i="[";for(var s=0;s<o;++s)i+=t.subParser("makeMarkdown.node")(n[s],r);i+="](",i+="<"+e.getAttribute("href")+">",e.hasAttribute("title")&&(i+=' "'+e.getAttribute("title")+'"'),i+=")"}return i})),t.subParser("makeMarkdown.list",(function(e,r,i){var n="";if(!e.hasChildNodes())return"";for(var o=e.childNodes,s=o.length,a=e.getAttribute("start")||1,l=0;l<s;++l)void 0!==o[l].tagName&&"li"===o[l].tagName.toLowerCase()&&(n+=("ol"===i?a.toString()+". ":"- ")+t.subParser("makeMarkdown.listItem")(o[l],r),++a);return(n+="\n\x3c!-- --\x3e\n").trim()})),t.subParser("makeMarkdown.listItem",(function(e,r){for(var i="",n=e.childNodes,o=n.length,s=0;s<o;++s)i+=t.subParser("makeMarkdown.node")(n[s],r);return/\n$/.test(i)?i=i.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):i+="\n",i})),t.subParser("makeMarkdown.node",(function(e,r,i){i=i||!1;var n="";if(3===e.nodeType)return t.subParser("makeMarkdown.txt")(e,r);if(8===e.nodeType)return"\x3c!--"+e.data+"--\x3e\n\n";if(1!==e.nodeType)return"";switch(e.tagName.toLowerCase()){case"h1":i||(n=t.subParser("makeMarkdown.header")(e,r,1)+"\n\n");break;case"h2":i||(n=t.subParser("makeMarkdown.header")(e,r,2)+"\n\n");break;case"h3":i||(n=t.subParser("makeMarkdown.header")(e,r,3)+"\n\n");break;case"h4":i||(n=t.subParser("makeMarkdown.header")(e,r,4)+"\n\n");break;case"h5":i||(n=t.subParser("makeMarkdown.header")(e,r,5)+"\n\n");break;case"h6":i||(n=t.subParser("makeMarkdown.header")(e,r,6)+"\n\n");break;case"p":i||(n=t.subParser("makeMarkdown.paragraph")(e,r)+"\n\n");break;case"blockquote":i||(n=t.subParser("makeMarkdown.blockquote")(e,r)+"\n\n");break;case"hr":i||(n=t.subParser("makeMarkdown.hr")(e,r)+"\n\n");break;case"ol":i||(n=t.subParser("makeMarkdown.list")(e,r,"ol")+"\n\n");break;case"ul":i||(n=t.subParser("makeMarkdown.list")(e,r,"ul")+"\n\n");break;case"precode":i||(n=t.subParser("makeMarkdown.codeBlock")(e,r)+"\n\n");break;case"pre":i||(n=t.subParser("makeMarkdown.pre")(e,r)+"\n\n");break;case"table":i||(n=t.subParser("makeMarkdown.table")(e,r)+"\n\n");break;case"code":n=t.subParser("makeMarkdown.codeSpan")(e,r);break;case"em":case"i":n=t.subParser("makeMarkdown.emphasis")(e,r);break;case"strong":case"b":n=t.subParser("makeMarkdown.strong")(e,r);break;case"del":n=t.subParser("makeMarkdown.strikethrough")(e,r);break;case"a":n=t.subParser("makeMarkdown.links")(e,r);break;case"img":n=t.subParser("makeMarkdown.image")(e,r);break;default:n=e.outerHTML+"\n\n"}return n})),t.subParser("makeMarkdown.paragraph",(function(e,r){var i="";if(e.hasChildNodes())for(var n=e.childNodes,o=n.length,s=0;s<o;++s)i+=t.subParser("makeMarkdown.node")(n[s],r);return i=i.trim()})),t.subParser("makeMarkdown.pre",(function(e,t){var r=e.getAttribute("prenum");return"<pre>"+t.preList[r]+"</pre>"})),t.subParser("makeMarkdown.strikethrough",(function(e,r){var i="";if(e.hasChildNodes()){i+="~~";for(var n=e.childNodes,o=n.length,s=0;s<o;++s)i+=t.subParser("makeMarkdown.node")(n[s],r);i+="~~"}return i})),t.subParser("makeMarkdown.strong",(function(e,r){var i="";if(e.hasChildNodes()){i+="**";for(var n=e.childNodes,o=n.length,s=0;s<o;++s)i+=t.subParser("makeMarkdown.node")(n[s],r);i+="**"}return i})),t.subParser("makeMarkdown.table",(function(e,r){var i,n,o="",s=[[],[]],a=e.querySelectorAll("thead>tr>th"),l=e.querySelectorAll("tbody>tr");for(i=0;i<a.length;++i){var c=t.subParser("makeMarkdown.tableCell")(a[i],r),h="---";if(a[i].hasAttribute("style"))switch(a[i].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":h=":---";break;case"text-align:right;":h="---:";break;case"text-align:center;":h=":---:"}s[0][i]=c.trim(),s[1][i]=h}for(i=0;i<l.length;++i){var u=s.push([])-1,d=l[i].getElementsByTagName("td");for(n=0;n<a.length;++n){var f=" ";void 0!==d[n]&&(f=t.subParser("makeMarkdown.tableCell")(d[n],r)),s[u].push(f)}}var p=3;for(i=0;i<s.length;++i)for(n=0;n<s[i].length;++n){var g=s[i][n].length;g>p&&(p=g)}for(i=0;i<s.length;++i){for(n=0;n<s[i].length;++n)1===i?":"===s[i][n].slice(-1)?s[i][n]=t.helper.padEnd(s[i][n].slice(-1),p-1,"-")+":":s[i][n]=t.helper.padEnd(s[i][n],p,"-"):s[i][n]=t.helper.padEnd(s[i][n],p);o+="| "+s[i].join(" | ")+" |\n"}return o.trim()})),t.subParser("makeMarkdown.tableCell",(function(e,r){var i="";if(!e.hasChildNodes())return"";for(var n=e.childNodes,o=n.length,s=0;s<o;++s)i+=t.subParser("makeMarkdown.node")(n[s],r,!0);return i.trim()})),t.subParser("makeMarkdown.txt",(function(e){var r=e.nodeValue;return r=(r=r.replace(/ +/g," ")).replace(/¨NBSP;/g," "),r=(r=(r=(r=(r=(r=(r=(r=(r=t.helper.unescapeHTMLEntities(r)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")})),PO.exports?PO.exports=t:this.showdown=t}.call(QO);var AO=RO.exports;const $O=vO("emailit"),LO=vO(void 0),EO=vO({to:"",subject:"",body:""}),MO=vO(void 0),DO=vO(void 0),BO=vO(!1),IO=vO(!1);function jO(e,t,r){const i=e.slice();return i[96]=t[r],i}function zO(e,t,r){const i=e.slice();return i[96]=t[r],i}function WO(e,t,r){const i=e.slice();return i[101]=t[r],i}function qO(e){let t,r,n,o,s,a,l,c,h,u,d,m,b,S,k,T,P,Q,R,A,$,L,E,M,D,B,I,j,z,W,q,H,N,X,F,Z,U,V,G,Y,K,J,ee,te,re,ie,ne,oe,se;return{c(){t=v("div"),r=v("label"),r.textContent="Default:",n=_(),o=v("input"),s=_(),a=v("label"),a.textContent="Name of Account:",l=_(),c=v("input"),h=_(),u=v("label"),u.textContent="From Email:",d=_(),m=v("input"),b=_(),S=v("label"),S.textContent="Address of SMPT Server:",k=_(),T=v("input"),P=_(),Q=v("label"),Q.textContent="SMPT Server Port:",R=_(),A=v("input"),$=_(),L=v("label"),L.textContent="User Name:",E=_(),M=v("input"),D=_(),B=v("label"),B.textContent="Password:",I=_(),j=v("input"),z=_(),W=v("label"),W.textContent="Signiture:",q=_(),H=v("textarea"),N=_(),X=v("label"),X.textContent="Header HTML:",F=_(),Z=v("textarea"),U=_(),V=v("label"),V.textContent="Footer HTML:",G=_(),Y=v("textarea"),K=_(),J=v("div"),ee=v("button"),te=O("Save"),re=_(),ie=v("button"),ne=O("Cancel"),w(r,"for","accountDefaultInput"),w(r,"class","newAccountLabel svelte-1fv5snm"),w(o,"id","accountDefaultInput"),w(o,"type","checkbox"),w(o,"class","svelte-1fv5snm"),w(a,"for","accountNameInput"),w(a,"class","newAccountLabel svelte-1fv5snm"),w(c,"id","accountNameInput"),x(c,"background-color",e[28].textAreaColor),x(c,"color",e[28].textColor),x(c,"border-color",e[28].borderColor),w(c,"class","svelte-1fv5snm"),w(u,"for","accountFromInput"),w(u,"class","newAccountLabel svelte-1fv5snm"),w(m,"id","accountFromInput"),x(m,"background-color",e[28].textAreaColor),x(m,"color",e[28].textColor),x(m,"border-color",e[28].borderColor),w(m,"class","svelte-1fv5snm"),w(S,"for","accountSmptServerInput"),w(S,"class","newAccountLabel svelte-1fv5snm"),w(T,"id","accountSmptServerInput"),x(T,"background-color",e[28].textAreaColor),x(T,"color",e[28].textColor),x(T,"border-color",e[28].borderColor),w(T,"class","svelte-1fv5snm"),w(Q,"for","accountPortInput"),w(Q,"class","newAccountLabel svelte-1fv5snm"),w(A,"id","accountPortInput"),x(A,"background-color",e[28].textAreaColor),x(A,"color",e[28].textColor),x(A,"border-color",e[28].borderColor),w(A,"class","svelte-1fv5snm"),w(L,"for","accountUsernameInput"),w(L,"class","newAccountLabel svelte-1fv5snm"),w(M,"id","accountUsernameInput"),x(M,"background-color",e[28].textAreaColor),x(M,"color",e[28].textColor),x(M,"border-color",e[28].borderColor),w(M,"class","svelte-1fv5snm"),w(B,"for","accountPasswordInput"),w(B,"class","newAccountLabel svelte-1fv5snm"),w(j,"id","accountPasswordInput"),x(j,"background-color",e[28].textAreaColor),x(j,"color",e[28].textColor),x(j,"border-color",e[28].borderColor),w(j,"class","svelte-1fv5snm"),w(W,"for","accountSigInput"),w(W,"class","newAccountLabel svelte-1fv5snm"),w(H,"id","accountSigInput"),x(H,"background-color",e[28].textAreaColor),x(H,"color",e[28].textColor),x(H,"border-color",e[28].borderColor),w(H,"class","svelte-1fv5snm"),w(X,"for","accountHeaderHTMLInput"),w(X,"class","newAccountLabel svelte-1fv5snm"),w(Z,"id","accountHeaderHTMLInput"),x(Z,"background-color",e[28].textAreaColor),x(Z,"color",e[28].textColor),x(Z,"border-color",e[28].borderColor),w(Z,"class","svelte-1fv5snm"),w(V,"for","accountFooterHTMLInput"),w(V,"class","newAccountLabel svelte-1fv5snm"),w(Y,"id","accountFooterHTMLInput"),x(Y,"background-color",e[28].textAreaColor),x(Y,"color",e[28].textColor),x(Y,"border-color",e[28].borderColor),w(Y,"class","svelte-1fv5snm"),w(ee,"id","save"),x(ee,"background-color",e[28].textAreaColor),x(ee,"color",e[28].textColor),x(ee,"border-color",e[28].borderColor),w(ee,"class","svelte-1fv5snm"),w(ie,"id","cancel"),x(ie,"background-color",e[28].textAreaColor),x(ie,"color",e[28].textColor),x(ie,"border-color",e[28].borderColor),w(ie,"class","svelte-1fv5snm"),w(J,"id","buttonrow"),x(J,"grid-column","1 / span 2"),w(J,"class","svelte-1fv5snm"),w(t,"id","newAccountDialog"),x(t,"background-color",e[28].backgroundColor),x(t,"color",e[28].textColor),x(t,"border-color",e[28].borderColor),w(t,"class","svelte-1fv5snm")},m(i,g){p(i,t,g),f(t,r),f(t,n),f(t,o),o.checked=e[16],f(t,s),f(t,a),f(t,l),f(t,c),C(c,e[8]),f(t,h),f(t,u),f(t,d),f(t,m),C(m,e[7]),f(t,b),f(t,S),f(t,k),f(t,T),C(T,e[10]),f(t,P),f(t,Q),f(t,R),f(t,A),C(A,e[12]),f(t,$),f(t,L),f(t,E),f(t,M),C(M,e[9]),f(t,D),f(t,B),f(t,I),f(t,j),C(j,e[11]),f(t,z),f(t,W),f(t,q),f(t,H),C(H,e[13]),f(t,N),f(t,X),f(t,F),f(t,Z),C(Z,e[14]),f(t,U),f(t,V),f(t,G),f(t,Y),C(Y,e[15]),f(t,K),f(t,J),f(J,ee),f(ee,te),f(J,re),f(J,ie),f(ie,ne),oe||(se=[y(o,"change",e[53]),y(c,"input",e[54]),y(m,"input",e[55]),y(T,"input",e[56]),y(A,"input",e[57]),y(M,"input",e[58]),y(j,"input",e[59]),y(H,"input",e[60]),y(Z,"input",e[61]),y(Y,"input",e[62]),y(ee,"click",e[43]),y(ie,"click",e[45])],oe=!0)},p(e,r){65536&r[0]&&(o.checked=e[16]),268435456&r[0]&&x(c,"background-color",e[28].textAreaColor),268435456&r[0]&&x(c,"color",e[28].textColor),268435456&r[0]&&x(c,"border-color",e[28].borderColor),256&r[0]&&c.value!==e[8]&&C(c,e[8]),268435456&r[0]&&x(m,"background-color",e[28].textAreaColor),268435456&r[0]&&x(m,"color",e[28].textColor),268435456&r[0]&&x(m,"border-color",e[28].borderColor),128&r[0]&&m.value!==e[7]&&C(m,e[7]),268435456&r[0]&&x(T,"background-color",e[28].textAreaColor),268435456&r[0]&&x(T,"color",e[28].textColor),268435456&r[0]&&x(T,"border-color",e[28].borderColor),1024&r[0]&&T.value!==e[10]&&C(T,e[10]),268435456&r[0]&&x(A,"background-color",e[28].textAreaColor),268435456&r[0]&&x(A,"color",e[28].textColor),268435456&r[0]&&x(A,"border-color",e[28].borderColor),4096&r[0]&&A.value!==e[12]&&C(A,e[12]),268435456&r[0]&&x(M,"background-color",e[28].textAreaColor),268435456&r[0]&&x(M,"color",e[28].textColor),268435456&r[0]&&x(M,"border-color",e[28].borderColor),512&r[0]&&M.value!==e[9]&&C(M,e[9]),268435456&r[0]&&x(j,"background-color",e[28].textAreaColor),268435456&r[0]&&x(j,"color",e[28].textColor),268435456&r[0]&&x(j,"border-color",e[28].borderColor),2048&r[0]&&j.value!==e[11]&&C(j,e[11]),268435456&r[0]&&x(H,"background-color",e[28].textAreaColor),268435456&r[0]&&x(H,"color",e[28].textColor),268435456&r[0]&&x(H,"border-color",e[28].borderColor),8192&r[0]&&C(H,e[13]),268435456&r[0]&&x(Z,"background-color",e[28].textAreaColor),268435456&r[0]&&x(Z,"color",e[28].textColor),268435456&r[0]&&x(Z,"border-color",e[28].borderColor),16384&r[0]&&C(Z,e[14]),268435456&r[0]&&x(Y,"background-color",e[28].textAreaColor),268435456&r[0]&&x(Y,"color",e[28].textColor),268435456&r[0]&&x(Y,"border-color",e[28].borderColor),32768&r[0]&&C(Y,e[15]),268435456&r[0]&&x(ee,"background-color",e[28].textAreaColor),268435456&r[0]&&x(ee,"color",e[28].textColor),268435456&r[0]&&x(ee,"border-color",e[28].borderColor),268435456&r[0]&&x(ie,"background-color",e[28].textAreaColor),268435456&r[0]&&x(ie,"color",e[28].textColor),268435456&r[0]&&x(ie,"border-color",e[28].borderColor),268435456&r[0]&&x(t,"background-color",e[28].backgroundColor),268435456&r[0]&&x(t,"color",e[28].textColor),268435456&r[0]&&x(t,"border-color",e[28].borderColor)},d(e){e&&g(t),oe=!1,i(se)}}}function HO(e){let t,r,n,o,s,a,l,c,h,u,d,b,S,C,k,T,P,Q,R,A,$,L,E;function M(e,t){return void 0!==e[27]?XO:NO}let D=M(e),B=D(e),I=e[3],j=[];for(let t=0;t<I.length;t+=1)j[t]=FO(WO(e,I,t));return{c(){t=v("div"),r=v("h1"),r.textContent="Email It - Change Account",n=_(),B.c(),o=_(),s=v("div");for(let e=0;e<j.length;e+=1)j[e].c();a=_(),l=v("div"),c=v("button"),h=O("Save"),u=_(),d=v("button"),b=O("New"),S=_(),C=v("button"),k=O("Edit"),T=_(),P=v("button"),Q=O("Cancel"),R=_(),A=v("button"),$=O("Delete"),w(r,"class","svelte-1fv5snm"),w(s,"id","AccountsList"),w(s,"class","svelte-1fv5snm"),w(c,"id","save"),x(c,"background-color",e[28].textAreaColor),x(c,"color",e[28].textColor),x(c,"border-color",e[28].borderColor),w(c,"class","svelte-1fv5snm"),w(d,"id","new"),x(d,"background-color",e[28].textAreaColor),x(d,"color",e[28].textColor),x(d,"border-color",e[28].borderColor),w(d,"class","svelte-1fv5snm"),w(C,"id","edit"),x(C,"background-color",e[28].textAreaColor),x(C,"color",e[28].textColor),x(C,"border-color",e[28].borderColor),w(C,"class","svelte-1fv5snm"),w(P,"id","cancel"),x(P,"background-color",e[28].textAreaColor),x(P,"color",e[28].textColor),x(P,"border-color",e[28].borderColor),w(P,"class","svelte-1fv5snm"),w(A,"id","delete"),x(A,"background-color",e[28].textAreaColor),x(A,"color",e[28].textColor),x(A,"border-color",e[28].borderColor),w(A,"class","svelte-1fv5snm"),w(l,"id","buttonrow"),w(l,"class","svelte-1fv5snm"),w(t,"id","accountsDiv"),x(t,"background-color",e[28].backgroundColor),x(t,"color",e[28].textColor),x(t,"border-color",e[28].borderColor),w(t,"class","svelte-1fv5snm")},m(i,g){p(i,t,g),f(t,r),f(t,n),B.m(t,null),f(t,o),f(t,s);for(let e=0;e<j.length;e+=1)j[e].m(s,null);f(t,a),f(t,l),f(l,c),f(c,h),f(l,u),f(l,d),f(d,b),f(l,S),f(l,C),f(C,k),f(l,T),f(l,P),f(P,Q),f(l,R),f(l,A),f(A,$),L||(E=[y(c,"click",e[35]),y(d,"click",e[36]),y(C,"click",e[46]),y(P,"click",e[37]),y(A,"click",e[44])],L=!0)},p(e,r){if(D===(D=M(e))&&B?B.p(e,r):(B.d(1),B=D(e),B&&(B.c(),B.m(t,o))),268435464&r[0]|128&r[1]){let t;for(I=e[3],t=0;t<I.length;t+=1){const i=WO(e,I,t);j[t]?j[t].p(i,r):(j[t]=FO(i),j[t].c(),j[t].m(s,null))}for(;t<j.length;t+=1)j[t].d(1);j.length=I.length}268435456&r[0]&&x(c,"background-color",e[28].textAreaColor),268435456&r[0]&&x(c,"color",e[28].textColor),268435456&r[0]&&x(c,"border-color",e[28].borderColor),268435456&r[0]&&x(d,"background-color",e[28].textAreaColor),268435456&r[0]&&x(d,"color",e[28].textColor),268435456&r[0]&&x(d,"border-color",e[28].borderColor),268435456&r[0]&&x(C,"background-color",e[28].textAreaColor),268435456&r[0]&&x(C,"color",e[28].textColor),268435456&r[0]&&x(C,"border-color",e[28].borderColor),268435456&r[0]&&x(P,"background-color",e[28].textAreaColor),268435456&r[0]&&x(P,"color",e[28].textColor),268435456&r[0]&&x(P,"border-color",e[28].borderColor),268435456&r[0]&&x(A,"background-color",e[28].textAreaColor),268435456&r[0]&&x(A,"color",e[28].textColor),268435456&r[0]&&x(A,"border-color",e[28].borderColor),268435456&r[0]&&x(t,"background-color",e[28].backgroundColor),268435456&r[0]&&x(t,"color",e[28].textColor),268435456&r[0]&&x(t,"border-color",e[28].borderColor)},d(e){e&&g(t),B.d(),m(j,e),L=!1,i(E)}}}function NO(t){let r;return{c(){r=v("h2"),r.textContent="Current Account: Please Create an Account",w(r,"class","svelte-1fv5snm")},m(e,t){p(e,r,t)},p:e,d(e){e&&g(r)}}}function XO(e){let t,r,i,n=e[27].name+"";return{c(){t=v("h2"),r=O("Current Account: "),i=O(n),w(t,"class","svelte-1fv5snm")},m(e,n){p(e,t,n),f(t,r),f(t,i)},p(e,t){134217728&t[0]&&n!==(n=e[27].name+"")&&S(i,n)},d(e){e&&g(t)}}}function FO(e){let t,r,i,n,o,s=e[101].name+"";function a(){return e[63](e[101])}return{c(){t=v("button"),r=O(s),i=_(),x(t,"background-color",e[28].textAreaColor),x(t,"color",e[28].textColor),x(t,"border-color",e[28].borderColor),w(t,"class","svelte-1fv5snm")},m(e,s){p(e,t,s),f(t,r),f(t,i),n||(o=y(t,"click",a),n=!0)},p(i,n){e=i,8&n[0]&&s!==(s=e[101].name+"")&&S(r,s),268435456&n[0]&&x(t,"background-color",e[28].textAreaColor),268435456&n[0]&&x(t,"color",e[28].textColor),268435456&n[0]&&x(t,"border-color",e[28].borderColor)},d(e){e&&g(t),n=!1,o()}}}function ZO(e){let t,r,i=e[20],n=[];for(let t=0;t<i.length;t+=1)n[t]=UO(zO(e,i,t));return{c(){t=v("div"),r=v("ul");for(let e=0;e<n.length;e+=1)n[e].c();w(r,"class","svelte-1fv5snm"),w(t,"id","elist"),x(t,"width",e[26].offsetWidth+"px"),x(t,"left",s_(e[26]).left+"px"),x(t,"top",s_(e[26]).top+40+"px"),x(t,"background-color",e[28].textAreaColor),x(t,"color",e[28].textColor),x(t,"border-color",e[28].borderColor),w(t,"class","svelte-1fv5snm")},m(e,i){p(e,t,i),f(t,r);for(let e=0;e<n.length;e+=1)n[e].m(r,null)},p(e,o){if(68157440&o[0]|1&o[1]){let t;for(i=e[20],t=0;t<i.length;t+=1){const s=zO(e,i,t);n[t]?n[t].p(s,o):(n[t]=UO(s),n[t].c(),n[t].m(r,null))}for(;t<n.length;t+=1)n[t].d(1);n.length=i.length}67108864&o[0]&&x(t,"width",e[26].offsetWidth+"px"),67108864&o[0]&&x(t,"left",s_(e[26]).left+"px"),67108864&o[0]&&x(t,"top",s_(e[26]).top+40+"px"),268435456&o[0]&&x(t,"background-color",e[28].textAreaColor),268435456&o[0]&&x(t,"color",e[28].textColor),268435456&o[0]&&x(t,"border-color",e[28].borderColor)},d(e){e&&g(t),m(n,e)}}}function UO(e){let t,r,i,n,o,s=e[96]+"";function a(){return e[71](e[96])}return{c(){t=v("li"),r=O(s),i=_(),w(t,"class","svelte-1fv5snm")},m(e,s){p(e,t,s),f(t,r),f(t,i),n||(o=y(t,"click",a),n=!0)},p(t,i){e=t,1048576&i[0]&&s!==(s=e[96]+"")&&S(r,s)},d(e){e&&g(t),n=!1,o()}}}function VO(e){let t,r;return t=new yO({props:{height:"330px",width:"983px",config:e[29],initFinished:e[18],styling:"position: relative; margin-bottom: 20px; border: solid 1px transparent; border-radius: 20px; overflow: hidden;"}}),t.$on("textChange",e[73]),t.$on("editorChange",e[74]),{c(){ie(t.$$.fragment)},m(e,i){ne(t,e,i),r=!0},p(e,r){const i={};262144&r[0]&&(i.initFinished=e[18]),t.$set(i)},i(e){r||(ee(t.$$.fragment,e),r=!0)},o(e){te(t.$$.fragment,e),r=!1},d(e){oe(t,e)}}}function GO(t){let r;return{c(){r=v("div"),w(r,"id","preview"),x(r,"border-color",t[28].textColor),w(r,"class","svelte-1fv5snm")},m(e,i){p(e,r,i),r.innerHTML=t[17]},p(e,t){131072&t[0]&&(r.innerHTML=e[17]),268435456&t[0]&&x(r,"border-color",e[28].textColor)},i:e,o:e,d(e){e&&g(r)}}}function YO(e){let t,r,n,o,s,a,l;return{c(){t=v("button"),r=O("Edit"),n=_(),o=v("button"),s=O("Send"),w(t,"id","edit"),x(t,"background-color",e[28].textAreaColor),x(t,"color",e[28].textColor),x(t,"border-color",e[28].borderColor),w(t,"class","svelte-1fv5snm"),w(o,"id","send"),x(o,"background-color",e[28].textAreaColor),x(o,"color",e[28].textColor),x(o,"border-color",e[28].borderColor),w(o,"class","svelte-1fv5snm")},m(i,c){p(i,t,c),f(t,r),p(i,n,c),p(i,o,c),f(o,s),a||(l=[y(t,"click",e[40]),y(o,"click",e[41])],a=!0)},p(e,r){268435456&r[0]&&x(t,"background-color",e[28].textAreaColor),268435456&r[0]&&x(t,"color",e[28].textColor),268435456&r[0]&&x(t,"border-color",e[28].borderColor),268435456&r[0]&&x(o,"background-color",e[28].textAreaColor),268435456&r[0]&&x(o,"color",e[28].textColor),268435456&r[0]&&x(o,"border-color",e[28].borderColor)},d(e){e&&g(t),e&&g(n),e&&g(o),a=!1,i(l)}}}function KO(e){let t,r,i,n;return{c(){t=v("button"),r=O("Preview"),w(t,"id","showPreview"),x(t,"background-color",e[28].textAreaColor),x(t,"color",e[28].textColor),x(t,"border-color",e[28].borderColor),w(t,"class","svelte-1fv5snm")},m(o,s){p(o,t,s),f(t,r),i||(n=y(t,"click",e[39]),i=!0)},p(e,r){268435456&r[0]&&x(t,"background-color",e[28].textAreaColor),268435456&r[0]&&x(t,"color",e[28].textColor),268435456&r[0]&&x(t,"border-color",e[28].borderColor)},d(e){e&&g(t),i=!1,n()}}}function JO(e){let t,r,i,n,o=e[27].name+"";return{c(){t=v("button"),r=O(o),w(t,"id","account"),x(t,"background-color",e[28].textAreaColor),x(t,"color",e[28].textColor),x(t,"border-color",e[28].borderColor),w(t,"class","svelte-1fv5snm")},m(o,s){p(o,t,s),f(t,r),i||(n=y(t,"click",e[34]),i=!0)},p(e,i){134217728&i[0]&&o!==(o=e[27].name+"")&&S(r,o),268435456&i[0]&&x(t,"background-color",e[28].textAreaColor),268435456&i[0]&&x(t,"color",e[28].textColor),268435456&i[0]&&x(t,"border-color",e[28].borderColor)},d(e){e&&g(t),i=!1,n()}}}function e_(e){let t,r,i,n;return{c(){t=v("button"),r=O("Create a New Account"),w(t,"id","account"),x(t,"background-color",e[28].textAreaColor),x(t,"color",e[28].textColor),x(t,"border-color",e[28].borderColor),w(t,"class","svelte-1fv5snm")},m(o,s){p(o,t,s),f(t,r),i||(n=y(t,"click",e[36]),i=!0)},p(e,r){268435456&r[0]&&x(t,"background-color",e[28].textAreaColor),268435456&r[0]&&x(t,"color",e[28].textColor),268435456&r[0]&&x(t,"border-color",e[28].borderColor)},d(e){e&&g(t),i=!1,n()}}}function t_(e){let t,r,i,n,o,s,a,l,c,h,u,d,m=e[19].length>0&&r_(e);return{c(){t=v("div"),r=v("h1"),i=O(e[21]),n=_(),o=v("p"),s=O(e[22]),a=_(),m&&m.c(),l=_(),c=v("button"),h=O("Close"),w(r,"class","svelte-1fv5snm"),w(c,"class","alertbutton svelte-1fv5snm"),x(c,"background-color",e[28].textAreaColor),x(c,"color",e[28].textColor),x(c,"border-color",e[28].borderColor),x(c,"border-color",e[28].backgroundColor),w(t,"id","alert"),x(t,"background-color",e[28].textAreaColor),x(t,"color",e[28].textColor),x(t,"border-color",e[28].borderColor),w(t,"class","svelte-1fv5snm")},m(g,v){p(g,t,v),f(t,r),f(r,i),f(t,n),f(t,o),f(o,s),f(t,a),m&&m.m(t,null),f(t,l),f(t,c),f(c,h),u||(d=y(c,"click",e[75]),u=!0)},p(e,r){2097152&r[0]&&S(i,e[21]),4194304&r[0]&&S(s,e[22]),e[19].length>0?m?m.p(e,r):(m=r_(e),m.c(),m.m(t,l)):m&&(m.d(1),m=null),268435456&r[0]&&x(c,"background-color",e[28].textAreaColor),268435456&r[0]&&x(c,"color",e[28].textColor),268435456&r[0]&&x(c,"border-color",e[28].borderColor),268435456&r[0]&&x(c,"border-color",e[28].backgroundColor),268435456&r[0]&&x(t,"background-color",e[28].textAreaColor),268435456&r[0]&&x(t,"color",e[28].textColor),268435456&r[0]&&x(t,"border-color",e[28].borderColor)},d(e){e&&g(t),m&&m.d(),u=!1,d()}}}function r_(e){let t,r=e[19],i=[];for(let t=0;t<r.length;t+=1)i[t]=i_(jO(e,r,t));return{c(){t=v("ul");for(let e=0;e<i.length;e+=1)i[e].c();w(t,"class","svelte-1fv5snm")},m(e,r){p(e,t,r);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,n){if(524288&n[0]){let o;for(r=e[19],o=0;o<r.length;o+=1){const s=jO(e,r,o);i[o]?i[o].p(s,n):(i[o]=i_(s),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d(e){e&&g(t),m(i,e)}}}function i_(e){let t,r,i=e[96]+"";return{c(){t=v("li"),r=O(i),w(t,"class","svelte-1fv5snm")},m(e,i){p(e,t,i),f(t,r)},p(e,t){524288&t[0]&&i!==(i=e[96]+"")&&S(r,i)},d(e){e&&g(t)}}}function n_(e){let t,r,i;function n(t){e[76](t)}let o={};return void 0!==e[25]&&(o.show=e[25]),t=new TO({props:o}),B.push((()=>re(t,"show",n))),{c(){ie(t.$$.fragment)},m(e,r){ne(t,e,r),i=!0},p(e,i){const n={};!r&&33554432&i[0]&&(r=!0,n.show=e[25],X((()=>r=!1))),t.$set(n)},i(e){i||(ee(t.$$.fragment,e),i=!0)},o(e){te(t.$$.fragment,e),i=!1},d(e){oe(t,e)}}}function o_(e){let t,r,n,o,s,a,l,c,h,u,d,m,S,k,T,P,Q,R,A,$,L,E,M,D,B,I,j,z,W,q,H,N,X,F,Z,U,V,G,Y,re,ie,ne,oe,se=e[5]&&qO(e),ae=e[4]&&HO(e),le=e[24]&&e[20].length>0&&ZO(e);const ce=[GO,VO],he=[];function ue(e,t){return e[6]?0:1}function de(e,t){return"edit"===e[2]?KO:YO}R=ue(e),A=he[R]=ce[R](e);let fe=de(e),pe=fe(e);function ge(e,t){return void 0===e[27]?e_:JO}let me=ge(e),ve=me(e),Oe=e[23]&&t_(e),_e=e[25]&&n_(e);return{c(){t=v("div"),se&&se.c(),r=_(),ae&&ae.c(),n=_(),o=v("h1"),o.textContent="Email It",s=_(),a=v("div"),l=v("div"),c=v("label"),c.textContent="To:",h=_(),u=v("input"),d=_(),le&&le.c(),m=_(),S=v("div"),k=v("label"),k.textContent="Subject:",T=_(),P=v("input"),Q=_(),A.c(),$=_(),L=v("div"),E=v("button"),M=O("Notes"),D=_(),pe.c(),B=_(),ve.c(),I=_(),j=v("button"),z=O("Clear"),W=_(),q=v("button"),H=O("Templates"),N=_(),X=v("button"),F=O("Scripts"),Z=_(),U=v("button"),V=O("Address Book"),G=_(),Oe&&Oe.c(),Y=_(),_e&&_e.c(),re=b(),w(o,"class","svelte-1fv5snm"),w(c,"for","receiverInput"),w(c,"class","svelte-1fv5snm"),w(u,"id","receiverInput"),w(u,"class","receiverInput svelte-1fv5snm"),x(u,"background-color",e[28].textAreaColor),x(u,"color",e[28].textColor),x(u,"border-color",e[28].borderColor),w(l,"class","headerRow svelte-1fv5snm"),w(k,"for","subject"),w(k,"class","svelte-1fv5snm"),w(P,"id","subject"),x(P,"background-color",e[28].textAreaColor),x(P,"color",e[28].textColor),x(P,"border-color",e[28].borderColor),w(P,"class","svelte-1fv5snm"),w(S,"class","headerRow svelte-1fv5snm"),w(a,"id","header"),w(a,"class","svelte-1fv5snm"),x(E,"background-color",e[28].textAreaColor),x(E,"color",e[28].textColor),x(E,"border-color",e[28].borderColor),w(E,"class","svelte-1fv5snm"),w(j,"id","clear"),x(j,"background-color",e[28].textAreaColor),x(j,"color",e[28].textColor),x(j,"border-color",e[28].borderColor),w(j,"class","svelte-1fv5snm"),x(q,"background-color",e[28].textAreaColor),x(q,"color",e[28].textColor),x(q,"border-color",e[28].borderColor),w(q,"class","svelte-1fv5snm"),x(X,"background-color",e[28].textAreaColor),x(X,"color",e[28].textColor),x(X,"border-color",e[28].borderColor),w(X,"class","svelte-1fv5snm"),w(U,"id","addressBook"),x(U,"background-color",e[28].textAreaColor),x(U,"color",e[28].textColor),x(U,"border-color",e[28].borderColor),w(U,"class","svelte-1fv5snm"),w(L,"id","buttonrow"),w(L,"class","svelte-1fv5snm"),w(t,"id","main"),x(t,"background-color",e[28].backgroundColor),x(t,"font-family",e[28].font),x(t,"color",e[28].textColor),x(t,"font-size",e[28].fontSize),w(t,"class","svelte-1fv5snm")},m(i,g){p(i,t,g),se&&se.m(t,null),f(t,r),ae&&ae.m(t,null),f(t,n),f(t,o),f(t,s),f(t,a),f(a,l),f(l,c),f(l,h),f(l,u),C(u,e[0]),e[65](u),f(l,d),le&&le.m(l,null),f(a,m),f(a,S),f(S,k),f(S,T),f(S,P),e[72](P),f(t,Q),he[R].m(t,null),f(t,$),f(t,L),f(L,E),f(E,M),f(L,D),pe.m(L,null),f(L,B),ve.m(L,null),f(L,I),f(L,j),f(j,z),f(L,W),f(L,q),f(q,H),f(L,N),f(L,X),f(X,F),f(L,Z),f(L,U),f(U,V),p(i,G,g),Oe&&Oe.m(i,g),p(i,Y,g),_e&&_e.m(i,g),p(i,re,g),ie=!0,ne||(oe=[y(u,"input",e[64]),y(u,"blur",e[66]),y(u,"focus",e[67]),y(u,"keydown",e[68]),y(u,"keyup",e[69]),y(u,"change",e[70]),y(P,"blur",e[48]),y(E,"click",e[47]),y(j,"click",e[42]),y(q,"click",e[50]),y(X,"click",e[49]),y(U,"click",e[52])],ne=!0)},p(e,i){e[5]?se?se.p(e,i):(se=qO(e),se.c(),se.m(t,r)):se&&(se.d(1),se=null),e[4]?ae?ae.p(e,i):(ae=HO(e),ae.c(),ae.m(t,n)):ae&&(ae.d(1),ae=null),(!ie||268435456&i[0])&&x(u,"background-color",e[28].textAreaColor),(!ie||268435456&i[0])&&x(u,"color",e[28].textColor),(!ie||268435456&i[0])&&x(u,"border-color",e[28].borderColor),1&i[0]&&u.value!==e[0]&&C(u,e[0]),e[24]&&e[20].length>0?le?le.p(e,i):(le=ZO(e),le.c(),le.m(l,null)):le&&(le.d(1),le=null),(!ie||268435456&i[0])&&x(P,"background-color",e[28].textAreaColor),(!ie||268435456&i[0])&&x(P,"color",e[28].textColor),(!ie||268435456&i[0])&&x(P,"border-color",e[28].borderColor);let o=R;R=ue(e),R===o?he[R].p(e,i):(K(),te(he[o],1,1,(()=>{he[o]=null})),J(),A=he[R],A?A.p(e,i):(A=he[R]=ce[R](e),A.c()),ee(A,1),A.m(t,$)),(!ie||268435456&i[0])&&x(E,"background-color",e[28].textAreaColor),(!ie||268435456&i[0])&&x(E,"color",e[28].textColor),(!ie||268435456&i[0])&&x(E,"border-color",e[28].borderColor),fe===(fe=de(e))&&pe?pe.p(e,i):(pe.d(1),pe=fe(e),pe&&(pe.c(),pe.m(L,B))),me===(me=ge(e))&&ve?ve.p(e,i):(ve.d(1),ve=me(e),ve&&(ve.c(),ve.m(L,I))),(!ie||268435456&i[0])&&x(j,"background-color",e[28].textAreaColor),(!ie||268435456&i[0])&&x(j,"color",e[28].textColor),(!ie||268435456&i[0])&&x(j,"border-color",e[28].borderColor),(!ie||268435456&i[0])&&x(q,"background-color",e[28].textAreaColor),(!ie||268435456&i[0])&&x(q,"color",e[28].textColor),(!ie||268435456&i[0])&&x(q,"border-color",e[28].borderColor),(!ie||268435456&i[0])&&x(X,"background-color",e[28].textAreaColor),(!ie||268435456&i[0])&&x(X,"color",e[28].textColor),(!ie||268435456&i[0])&&x(X,"border-color",e[28].borderColor),(!ie||268435456&i[0])&&x(U,"background-color",e[28].textAreaColor),(!ie||268435456&i[0])&&x(U,"color",e[28].textColor),(!ie||268435456&i[0])&&x(U,"border-color",e[28].borderColor),(!ie||268435456&i[0])&&x(t,"background-color",e[28].backgroundColor),(!ie||268435456&i[0])&&x(t,"font-family",e[28].font),(!ie||268435456&i[0])&&x(t,"color",e[28].textColor),(!ie||268435456&i[0])&&x(t,"font-size",e[28].fontSize),e[23]?Oe?Oe.p(e,i):(Oe=t_(e),Oe.c(),Oe.m(Y.parentNode,Y)):Oe&&(Oe.d(1),Oe=null),e[25]?_e?(_e.p(e,i),33554432&i[0]&&ee(_e,1)):(_e=n_(e),_e.c(),ee(_e,1),_e.m(re.parentNode,re)):_e&&(K(),te(_e,1,1,(()=>{_e=null})),J())},i(e){ie||(ee(A),ee(_e),ie=!0)},o(e){te(A),te(_e),ie=!1},d(r){r&&g(t),se&&se.d(),ae&&ae.d(),e[65](null),le&&le.d(),e[72](null),he[R].d(),pe.d(),ve.d(),r&&g(G),Oe&&Oe.d(r),r&&g(Y),_e&&_e.d(r),r&&g(re),ne=!1,i(oe)}}}function s_(e){var t=0,r=0;do{t+=e.offsetTop||0,r+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:r}}function a_(e,t,r){let i,n,o,a,l,c,h;s(e,EO,(e=>r(82,i=e))),s(e,IO,(e=>r(83,n=e))),s(e,BO,(e=>r(84,o=e))),s(e,MO,(e=>r(85,a=e))),s(e,LO,(e=>r(27,l=e))),s(e,DO,(e=>r(86,c=e))),s(e,OO,(e=>r(28,h=e)));let u,f,p,g="",m="",v="edit",O=!1,_=!1,b=!1,y="",w="",S="",C="",x="",k="",T="",P="",Q="",R=!1,A="",$="",M="",D=[],I=!0,j=[],z=[],W="",q="",H=!1,N=!1,X=!1;function F(e){if(void 0===e||"Escape"!==e.key&&"Tab"!==e.key){var t=g.toString().toLowerCase(),i="",n=t.split(",");n.length>1?(i=n[n.length-1],r(20,z=D.filter((e=>e.toString().toLowerCase().includes(i.trim()))))):r(20,z=D.filter((e=>e.toString().toLowerCase().includes(t))))}else r(24,N=!1),"Tab"!==e.key&&e.preventDefault()}function Z(e){var t=g.split(",");t.length>1?(r(0,g=t.slice(0,t.length-1).map((e=>e.trim())).join(",")+", "+e),r(26,p.selectionStart=g.length,p)):r(0,g=e)}function U(e){d(MO,a=e,a)}function V(e){d(EO,i.body=e.value,i),$=e.value}function G(){r(8,w=""),r(16,R=!1),r(7,y=""),r(9,S=""),r(10,C=""),r(11,x=""),r(12,k=""),r(13,T=""),r(14,P=""),r(15,Q="")}function Y(e){d(LO,l=e,l),"edit"===v?$=a.getValue():K()}function K(){var e=new AO.Converter({extensions:[]});e.setOption("tables",!0),r(17,A=e.makeHtml($+l.signiture)),void 0!==l.headerHTML&&r(17,A=l.headerHTML+A+l.footerHTML)}function J(){r(21,W="Invalid Emails"),r(22,q="Please fix these emails!"),r(23,H=!0)}function ee(e){var t=!0;return r(19,j=[]),e.toString().split(",").forEach((e=>{const r=function(e){if(e.includes("<")){const t=new RegExp(/^[^<]*\<([^\>]*)\>/),r=e.match(t);e=r[1]}return new RegExp(/^[a-zA-Z0-9][\-_\.\+\!\#\$\%\&\'\*\/\=\?\^\`\{\|]{0,1}([a-zA-Z0-9][\-_\.\+\!\#\$\%\&\'\*\/\=\?\^\`\{\|]{0,1})*[a-zA-Z0-9]@[a-zA-Z0-9][-\.]{0,1}([a-zA-Z][-\.]{0,1})*[a-zA-Z0-9]\.[a-zA-Z0-9]{1,}([\.\-]{0,1}[a-zA-Z]){0,}[a-zA-Z0-9]{0,}$/i).test(e)}(e.trim());r||(t=!1,j.push(e))})),t}function te(){if(null!==a){var e=document.getElementById("receiverInput");d(EO,i.to=e.value,i),d(EO,i.body=a.getValue(),i),d(EO,i.subject=m.value,i)}}function re(){d(EO,i.to=g,i)}L((()=>{!function(e){fetch("http://localhost:9978/api/emailit/emails",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((t=>{D=t.emails.map((e=>""===e.name?e.email:`${e.name.trim()} <${e.email.trim()}>`)),void 0!==e&&e()}))}(),function(e){fetch("http://localhost:9978/api/emailit/accounts",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((t=>{r(3,u=t),u.length>0&&void 0===l&&d(LO,l=u.find((e=>e.default)),l),void 0!==e&&e()}))}(),r(2,v="edit"),M="edit",r(18,I=!0)})),E((()=>{void 0!==c&&""!==c&&(r(0,g=c),d(EO,i.to=c,i),d(DO,c=void 0,c)),null!==a&&"edit"===v&&"preview"===M&&(a.setValue($),M="edit")}));return[g,m,v,u,O,_,b,y,w,S,C,x,k,T,P,Q,R,A,I,j,z,W,q,H,N,X,p,l,h,{language:"markdown",lineNumbers:!1,lineWrapping:!0,lineHighlight:!0},F,Z,U,V,function(){f=l,r(4,O=!O)},function(){"preview"===v&&K(),r(4,O=!1)},function(){G(),r(5,_=!0)},function(){d(LO,l=f,l),"edit"===v?$=a.getValue():K(),r(4,O=!1)},Y,function(){var e;e=void 0!==i.to?i.to:document.getElementById("receiverInput").value,ee(e)?($=a.getValue(),r(2,v="preview"),M=v,K(),r(6,b=!0)):J()},async function(){r(2,v="edit"),r(6,b=!1)},async function(){var e;if(ee(e=void 0!==i.to?i.to:document.getElementById("receiverInput").value)){e.toString().split(",").forEach((e=>{var t=e,r="";if(e.includes("<")){const i=new RegExp(/^([^<]*)\<([^\>]*)\>/),n=e.match(i);r=n[1],t=n[2]}!function(e,t){t=t.trim(),e=e.trim(),D=D.filter((e=>e.email!==t)),D.push({name:e,email:t}),fetch("http://localhost:9978/api/emailit/addEmail",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({name:e,email:t})})}(r,t)}));var t=$+l.signiture.replace(/<hr>/gimu,"\n").replace(/<[/]*[^>]+>/gimu,"");r(6,b=!1),r(2,v="edit"),fetch("http://localhost:9978/api/emailit/send",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({acc:l,to:e,from:l.from,subject:m.value,text:t,html:A})})}else J()},function(){document.getElementById("receiverInput").value="",r(0,g=""),r(1,m.value="",m),a.setValue(""),$="",d(EO,i.to="",i),d(EO,i.subject="",i),d(EO,i.body="",i),r(6,b=!1),r(2,v="edit"),M="edit"},function(){var e={name:w,default:R,from:y,username:S,smtpserver:C,port:k,password:x,signiture:T,headerHTML:P,footerHTML:Q};!function(e){fetch("http://localhost:9978/api/emailit/accounts",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(e)})}(e),R&&r(3,u=u.map((e=>(e.default=!1,e)))),u.filter((t=>t.name===e.name)).length>0&&(r(3,u=u.filter((t=>t.name!==e.name))),u.push(e)),d(LO,l=e,l),r(3,u),"preview"===v&&K(),G(),r(5,_=!1)},function(){var e=l;r(3,u=u.filter((t=>t.name!==e.name))),u.length>0?(d(LO,l=u[0],l),f=u[0],"preview"===v&&K()):(r(5,_=!1),d(LO,l=void 0,l),f=void 0),function(e){fetch("http://localhost:9978/api/emailit/accounts",{method:"DELETE",headers:{"Content-type":"application/json"},body:e})}(e)},function(){G(),r(5,_=!1)},function(){r(8,w=l.name),r(16,R=l.default),r(7,y=l.from),r(9,S=l.username),r(10,C=l.smtpserver),r(11,x=l.password),r(12,k=l.port),r(13,T=l.signiture),r(14,P=l.headerHTML),r(15,Q=l.footerHTML),r(5,_=!0)},function(){te(),$O.set("notes")},te,function(){d(BO,o=!o,o)},function(){d(IO,n=!n,n)},re,function(){r(25,X=!X)},function(){R=this.checked,r(16,R)},function(){w=this.value,r(8,w)},function(){y=this.value,r(7,y)},function(){C=this.value,r(10,C)},function(){k=this.value,r(12,k)},function(){S=this.value,r(9,S)},function(){x=this.value,r(11,x)},function(){T=this.value,r(13,T)},function(){P=this.value,r(14,P)},function(){Q=this.value,r(15,Q)},e=>{Y(e)},function(){g=this.value,r(0,g)},function(e){B[e?"unshift":"push"]((()=>{p=e,r(26,p)}))},()=>{re()},()=>{r(24,N=!0),F(),r(26,p.selectionStart=g.length,p)},e=>{F(e)},e=>{F(e)},()=>{F()},e=>{Z(e),p.focus()},function(e){B[e?"unshift":"push"]((()=>{m=e,r(1,m)}))},e=>{V(e.detail.data)},e=>{U(e.detail.data)},()=>{r(23,H=!1)},function(e){X=e,r(25,X)}]}class l_ extends ae{constructor(e){super(),se(this,e,a_,o_,o,{},null,[-1,-1,-1,-1])}}function c_(e){window.runtime.BrowserOpenURL(e)}function h_(e){let t;return{c(){t=v("div"),w(t,"id","logItems"),w(t,"class","svelte-1p4g52i")},m(r,i){p(r,t,i),t.innerHTML=e[0],e[8](t)},p(e,r){1&r&&(t.innerHTML=e[0])},d(r){r&&g(t),e[8](null)}}}function u_(t){let r;return{c(){r=v("p"),r.textContent="No Logs"},m(e,t){p(e,r,t)},p:e,d(e){e&&g(r)}}}function d_(t){let r,n,o,s,a,l,c,h,u,d,m,b,S,C,k,T,P,Q,R;function A(e,t){return void 0===e[0]?u_:h_}let $=A(t),L=$(t);return{c(){r=v("div"),L.c(),n=_(),o=v("div"),s=v("button"),a=O("EmailIt"),l=_(),c=v("button"),h=O("Notes"),u=_(),d=v("button"),m=O("Script Terminal"),b=_(),S=v("button"),C=O("Node-Red"),k=_(),T=v("button"),P=O("Node-Red Dashboard"),x(s,"background-color",t[2].textAreaColor),x(s,"color",t[2].textColor),x(s,"border-color",t[2].borderColor),w(s,"class","svelte-1p4g52i"),x(c,"background-color",t[2].textAreaColor),x(c,"color",t[2].textColor),x(c,"border-color",t[2].borderColor),w(c,"class","svelte-1p4g52i"),x(d,"background-color",t[2].textAreaColor),x(d,"color",t[2].textColor),x(d,"border-color",t[2].borderColor),w(d,"class","svelte-1p4g52i"),x(S,"background-color",t[2].textAreaColor),x(S,"color",t[2].textColor),x(S,"border-color",t[2].borderColor),w(S,"class","svelte-1p4g52i"),x(T,"background-color",t[2].textAreaColor),x(T,"color",t[2].textColor),x(T,"border-color",t[2].borderColor),w(T,"class","svelte-1p4g52i"),w(o,"id","buttonRow"),w(o,"class","svelte-1p4g52i"),w(r,"id","log"),x(r,"background-color",t[2].backgroundColor),x(r,"font-family",t[2].font),x(r,"color",t[2].textColor),x(r,"font-size",t[2].fontSize),w(r,"class","svelte-1p4g52i")},m(e,i){p(e,r,i),L.m(r,null),f(r,n),f(r,o),f(o,s),f(s,a),f(o,l),f(o,c),f(c,h),f(o,u),f(o,d),f(d,m),f(o,b),f(o,S),f(S,C),f(o,k),f(o,T),f(T,P),Q||(R=[y(s,"click",t[3]),y(c,"click",t[4]),y(d,"click",t[5]),y(S,"click",t[6]),y(T,"click",t[7])],Q=!0)},p(e,[t]){$===($=A(e))&&L?L.p(e,t):(L.d(1),L=$(e),L&&(L.c(),L.m(r,n))),4&t&&x(s,"background-color",e[2].textAreaColor),4&t&&x(s,"color",e[2].textColor),4&t&&x(s,"border-color",e[2].borderColor),4&t&&x(c,"background-color",e[2].textAreaColor),4&t&&x(c,"color",e[2].textColor),4&t&&x(c,"border-color",e[2].borderColor),4&t&&x(d,"background-color",e[2].textAreaColor),4&t&&x(d,"color",e[2].textColor),4&t&&x(d,"border-color",e[2].borderColor),4&t&&x(S,"background-color",e[2].textAreaColor),4&t&&x(S,"color",e[2].textColor),4&t&&x(S,"border-color",e[2].borderColor),4&t&&x(T,"background-color",e[2].textAreaColor),4&t&&x(T,"color",e[2].textColor),4&t&&x(T,"border-color",e[2].borderColor),4&t&&x(r,"background-color",e[2].backgroundColor),4&t&&x(r,"font-family",e[2].font),4&t&&x(r,"color",e[2].textColor),4&t&&x(r,"font-size",e[2].fontSize)},i:e,o:e,d(e){e&&g(r),L.d(),Q=!1,i(R)}}}function f_(e,t,r){let i,n,o,a;return s(e,$O,(e=>r(9,i=e))),s(e,OO,(e=>r(2,n=e))),L((()=>{!function(e){fetch("http://localhost:9978/api/messages",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((t=>{r(0,o=function(e){var t="";return e.map((e=>t+="<p>"+e.replaceAll(" ","&nbsp;").replaceAll("\n","<br />").replaceAll("\t","&nbsp;&nbsp;")+"</p>")),t}(t.data)),void 0!==e&&e()}))}()})),E((()=>{void 0!==a&&r(1,a.scrollTop=a.scrollHeight,a)})),[o,a,n,function(){d($O,i="emailit",i)},function(){d($O,i="notes",i)},function(){d($O,i="scriptterm",i)},async function(){c_("http://localhost:9978/red/admin")},async function(){c_("http://localhost:9978/red/api/ui")},function(e){B[e?"unshift":"push"]((()=>{a=e,r(1,a)}))}]}class p_ extends ae{constructor(e){super(),se(this,e,f_,d_,o,{})}}const g_=vO(0),m_=vO(["","","","","","","","","",""]),v_=vO(["","","","","","","","","",""]),O_=vO(void 0);function __(e,t,r){const i=e.slice();return i[28]=t[r],i[30]=r,i}function b_(e){let t,r,i,n;function o(){return e[16](e[30])}return{c(){t=v("div"),w(t,"class",r="noteButton "+(e[1]===e[2].buttons[e[30]].id?"selectedButton":"")+" svelte-yyde1d"),x(t,"background-color",e[2].buttons[e[30]].color)},m(e,r){p(e,t,r),i||(n=y(t,"click",o),i=!0)},p(i,n){e=i,6&n&&r!==(r="noteButton "+(e[1]===e[2].buttons[e[30]].id?"selectedButton":"")+" svelte-yyde1d")&&w(t,"class",r),4&n&&x(t,"background-color",e[2].buttons[e[30]].color)},d(e){e&&g(t),i=!1,n()}}}function y_(e){let t,r,n,o,s,a,l,c,h,u,d,b,S,C,k,T,P,Q,R,A,$,L,E,M,D,B,I,j,z,W;n=new yO({props:{height:"500px",width:"900px",config:e[3],initFinished:e[0]}}),n.$on("textChange",e[14]),n.$on("editorChange",e[15]);let q=e[2].buttons,H=[];for(let t=0;t<q.length;t+=1)H[t]=b_(__(e,q,t));return{c(){t=v("div"),r=v("div"),ie(n.$$.fragment),o=_(),s=v("div");for(let e=0;e<H.length;e+=1)H[e].c();a=_(),l=v("div"),c=v("button"),h=O("EmailIt"),u=_(),d=v("button"),b=O("Logs"),S=_(),C=v("button"),k=O("Script Terminal"),T=_(),P=v("button"),Q=O("Scripts"),R=_(),A=v("button"),$=O("Templates"),L=_(),E=v("button"),M=O("Edit Scripts"),D=_(),B=v("button"),I=O("Edit Templates"),w(s,"id","noteButtons"),w(s,"class","svelte-yyde1d"),w(r,"id","editorRow"),w(r,"class","svelte-yyde1d"),x(c,"background-color",e[2].textAreaColor),x(c,"color",e[2].textColor),x(c,"border-color",e[2].borderColor),w(c,"class","svelte-yyde1d"),x(d,"background-color",e[2].textAreaColor),x(d,"color",e[2].textColor),x(d,"border-color",e[2].borderColor),w(d,"class","svelte-yyde1d"),x(C,"background-color",e[2].textAreaColor),x(C,"color",e[2].textColor),x(C,"border-color",e[2].borderColor),w(C,"class","svelte-yyde1d"),x(P,"background-color",e[2].textAreaColor),x(P,"color",e[2].textColor),x(P,"border-color",e[2].borderColor),w(P,"class","svelte-yyde1d"),x(A,"background-color",e[2].textAreaColor),x(A,"color",e[2].textColor),x(A,"border-color",e[2].borderColor),w(A,"class","svelte-yyde1d"),x(E,"background-color",e[2].textAreaColor),x(E,"color",e[2].textColor),x(E,"border-color",e[2].borderColor),w(E,"class","svelte-yyde1d"),x(B,"background-color",e[2].textAreaColor),x(B,"color",e[2].textColor),x(B,"border-color",e[2].borderColor),w(B,"class","svelte-yyde1d"),w(l,"id","buttonRow"),w(l,"class","svelte-yyde1d"),w(t,"id","notes"),x(t,"background-color",e[2].backgroundColor),x(t,"font-family",e[2].font),x(t,"color",e[2].textColor),x(t,"font-size",e[2].fontSize),w(t,"class","svelte-yyde1d")},m(i,g){p(i,t,g),f(t,r),ne(n,r,null),f(r,o),f(r,s);for(let e=0;e<H.length;e+=1)H[e].m(s,null);f(t,a),f(t,l),f(l,c),f(c,h),f(l,u),f(l,d),f(d,b),f(l,S),f(l,C),f(C,k),f(l,T),f(l,P),f(P,Q),f(l,R),f(l,A),f(A,$),f(l,L),f(l,E),f(E,M),f(l,D),f(l,B),f(B,I),j=!0,z||(W=[y(c,"click",e[7]),y(d,"click",e[6]),y(C,"click",e[13]),y(P,"click",e[9]),y(A,"click",e[10]),y(E,"click",e[12]),y(B,"click",e[11])],z=!0)},p(e,[r]){const i={};if(1&r&&(i.initFinished=e[0]),n.$set(i),262&r){let t;for(q=e[2].buttons,t=0;t<q.length;t+=1){const i=__(e,q,t);H[t]?H[t].p(i,r):(H[t]=b_(i),H[t].c(),H[t].m(s,null))}for(;t<H.length;t+=1)H[t].d(1);H.length=q.length}(!j||4&r)&&x(c,"background-color",e[2].textAreaColor),(!j||4&r)&&x(c,"color",e[2].textColor),(!j||4&r)&&x(c,"border-color",e[2].borderColor),(!j||4&r)&&x(d,"background-color",e[2].textAreaColor),(!j||4&r)&&x(d,"color",e[2].textColor),(!j||4&r)&&x(d,"border-color",e[2].borderColor),(!j||4&r)&&x(C,"background-color",e[2].textAreaColor),(!j||4&r)&&x(C,"color",e[2].textColor),(!j||4&r)&&x(C,"border-color",e[2].borderColor),(!j||4&r)&&x(P,"background-color",e[2].textAreaColor),(!j||4&r)&&x(P,"color",e[2].textColor),(!j||4&r)&&x(P,"border-color",e[2].borderColor),(!j||4&r)&&x(A,"background-color",e[2].textAreaColor),(!j||4&r)&&x(A,"color",e[2].textColor),(!j||4&r)&&x(A,"border-color",e[2].borderColor),(!j||4&r)&&x(E,"background-color",e[2].textAreaColor),(!j||4&r)&&x(E,"color",e[2].textColor),(!j||4&r)&&x(E,"border-color",e[2].borderColor),(!j||4&r)&&x(B,"background-color",e[2].textAreaColor),(!j||4&r)&&x(B,"color",e[2].textColor),(!j||4&r)&&x(B,"border-color",e[2].borderColor),(!j||4&r)&&x(t,"background-color",e[2].backgroundColor),(!j||4&r)&&x(t,"font-family",e[2].font),(!j||4&r)&&x(t,"color",e[2].textColor),(!j||4&r)&&x(t,"font-size",e[2].fontSize)},i(e){j||(ee(n.$$.fragment,e),j=!0)},o(e){te(n.$$.fragment,e),j=!1},d(e){e&&g(t),oe(n),m(H,e),z=!1,i(W)}}}function w_(e,t,r){let i,n,o,a,l,c,h,u;s(e,$O,(e=>r(17,i=e))),s(e,IO,(e=>r(18,n=e))),s(e,BO,(e=>r(19,o=e))),s(e,O_,(e=>r(20,a=e))),s(e,g_,(e=>r(1,l=e))),s(e,v_,(e=>r(21,c=e))),s(e,m_,(e=>r(22,h=e))),s(e,OO,(e=>r(2,u=e)));let f=!1;function p(e,t){fetch(`http://localhost:9978/api/note/${e}/w`,{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((r=>{d(m_,h[e]=r.note,h),void 0!==t&&t()}))}function g(e){d(O_,a=e,a)}function m(e){d(m_,h[l]=e.value,h),d(v_,c[l]=e.cursor,c),function(e){var t=h[e];fetch(`http://localhost:9978/api/note/${e}/w`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({note:t})})}(l)}function v(){null!==a&&a.focus()}function O(){d(v_,c[l]=a.getCursor(),c)}function _(e){d(g_,l=e,l),a.setValue(h[l]);var t=parseInt(c[l]);Number.isInteger(t)||(t=0),a.setCursor(t),v()}L((()=>{p(0),p(1),p(2),p(3),p(4),p(5),p(6),p(7),p(8),p(9,(async()=>{r(0,f=!0),await H(),_(l),v()}))}));return[f,l,u,{language:"markdown",lineNumbers:!0,lineWrapping:!0,lineHighlight:!0},g,m,function(){O(),d($O,i="viewlog",i)},function(){O(),d($O,i="emailit",i)},_,function(){d(BO,o=!o,o)},function(){d(IO,n=!n,n)},function(){d($O,i="templates",i)},function(){d($O,i="scripts",i)},function(){d($O,i="scriptterm",i)},e=>{m(e.detail.data)},e=>{g(e.detail.data)},e=>{_(e)}]}class S_ extends ae{constructor(e){super(),se(this,e,w_,y_,o,{})}}const C_=vO([]),x_=vO(void 0),k_=vO(void 0);function T_(e,t,r){const i=e.slice();return i[20]=t[r],i[22]=r,i}function P_(e){let t,r=e[2],i=[];for(let t=0;t<r.length;t+=1)i[t]=Q_(T_(e,r,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=b()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);p(e,t,r)},p(e,n){if(212&n){let o;for(r=e[2],o=0;o<r.length;o+=1){const s=T_(e,r,o);i[o]?i[o].p(s,n):(i[o]=Q_(s),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d(e){m(i,e),e&&g(t)}}}function Q_(e){let t,r,i,n,o,s=e[20].name+"";function a(){return e[11](e[20])}return{c(){t=v("li"),r=O(s),i=_(),x(t,"background-color",e[4]===e[22]?e[6].Purple:"transparent"),w(t,"data-key",e[22]),w(t,"class","svelte-n0htir")},m(e,s){p(e,t,s),f(t,r),f(t,i),n||(o=y(t,"click",a),n=!0)},p(i,n){e=i,4&n&&s!==(s=e[20].name+"")&&S(r,s),80&n&&x(t,"background-color",e[4]===e[22]?e[6].Purple:"transparent")},d(e){e&&g(t),n=!1,o()}}}function R_(t){let r,n,o,s,a,l,c,h="object"==typeof t[5]&&P_(t);return{c(){r=v("div"),n=v("input"),o=_(),s=v("div"),a=v("ul"),h&&h.c(),w(n,"type","text"),x(n,"background-color",t[6].textAreaColor),x(n,"font-family",t[6].font),x(n,"color",t[6].textColor),x(n,"font-size",t[6].fontSize),x(n,"border","solid 3px "+t[6].borderColor),w(n,"class","svelte-n0htir"),w(a,"class","svelte-n0htir"),w(s,"id","list"),w(s,"class","svelte-n0htir"),w(r,"id","scriptmenu"),x(r,"left",t[1]?"10px":"-900px"),x(r,"background-color",t[6].backgroundColor),x(r,"font-family",t[6].font),x(r,"color",t[6].textColor),x(r,"font-size",t[6].fontSize),x(r,"border","solid 3px "+t[6].borderColor),w(r,"class","svelte-n0htir")},m(e,i){p(e,r,i),f(r,n),C(n,t[0]),t[10](n),f(r,o),f(r,s),f(s,a),h&&h.m(a,null),l||(c=[y(n,"input",t[9]),y(n,"keydown",t[8])],l=!0)},p(e,[t]){64&t&&x(n,"background-color",e[6].textAreaColor),64&t&&x(n,"font-family",e[6].font),64&t&&x(n,"color",e[6].textColor),64&t&&x(n,"font-size",e[6].fontSize),64&t&&x(n,"border","solid 3px "+e[6].borderColor),1&t&&n.value!==e[0]&&C(n,e[0]),"object"==typeof e[5]?h?h.p(e,t):(h=P_(e),h.c(),h.m(a,null)):h&&(h.d(1),h=null),2&t&&x(r,"left",e[1]?"10px":"-900px"),64&t&&x(r,"background-color",e[6].backgroundColor),64&t&&x(r,"font-family",e[6].font),64&t&&x(r,"color",e[6].textColor),64&t&&x(r,"font-size",e[6].fontSize),64&t&&x(r,"border","solid 3px "+e[6].borderColor)},i:e,o:e,d(e){e&&g(r),t[10](null),h&&h.d(),l=!1,i(c)}}}function A_(e,t,r){let i,n,o,a,l,c,h,u;s(e,BO,(e=>r(1,i=e))),s(e,x_,(e=>r(13,n=e))),s(e,$O,(e=>r(14,o=e))),s(e,k_,(e=>r(15,a=e))),s(e,O_,(e=>r(16,l=e))),s(e,MO,(e=>r(17,c=e))),s(e,C_,(e=>r(5,h=e))),s(e,OO,(e=>r(6,u=e)));let f,p="",g=[],m=!0,v=0;function O(e){var t=[];return""===e||void 0===e?t=h:(e=e.toLowerCase(),t=h.filter((t=>null!=t&&t.name.toLowerCase().includes(e)))),t=t.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()))}function _(e){var t="",s=!1;"emailit"===o?c.somethingSelected()?(s=!0,t=c.getSelection()):t=c.getValue():"notes"===o?l.somethingSelected()?(s=!0,t=l.getSelection()):t=l.getValue():"scripts"===o?a.somethingSelected()?(s=!0,t=a.getSelection()):t=a.getValue():"templates"===o&&(n.somethingSelected()?(s=!0,t=n.getSelection()):t=n.getValue()),fetch("http://localhost:9978/api/script/run",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({script:e.name,text:t})}).then((e=>e.json())).then((t=>{"emailit"===o?(s?c.replaceSelection(t.text):e.insert?c.insertAtCursor(t.text):c.setValue(t.text),c.focus()):"notes"===o?(s?l.replaceSelection(t.text):e.insert?l.insertAtCursor(t.text):l.setValue(t.text),l.focus()):"scripts"===o?(s?a.replaceSelection(t.text):e.insert?a.insertAtCursor(t.text):a.setValue(t.text),a.focus()):"templates"===o&&(s?n.replaceSelection(t.text):e.insert?n.insertAtCursor(t.text):n.setValue(t.text),n.focus()),d(BO,i=!1,i),r(0,p="")}))}L((()=>{})),E((()=>{i&&m&&(r(2,g=O(p)),m=!1,f.focus())}));return e.$$.update=()=>{1&e.$$.dirty&&r(2,g=O(p)),2&e.$$.dirty&&i&&(r(4,v=0),r(0,p=""),f.focus())},[p,i,g,f,v,h,u,_,function(e){switch(e.key){case"ArrowDown":e.preventDefault(),r(4,v+=1),v>=g.length&&r(4,v=g.length-1);break;case"ArrowUp":e.preventDefault(),r(4,v-=1),v<0&&r(4,v=0);break;case"Enter":e.preventDefault(),_(g[v]);break;case"Escape":d(BO,i=!1,i)}},function(){p=this.value,r(0,p)},function(e){B[e?"unshift":"push"]((()=>{f=e,r(3,f)}))},e=>{_(e)}]}class $_ extends ae{constructor(e){super(),se(this,e,A_,R_,o,{})}}const L_=vO([]);function E_(e,t,r){const i=e.slice();return i[20]=t[r],i[22]=r,i}function M_(e){let t,r=e[2],i=[];for(let t=0;t<r.length;t+=1)i[t]=D_(E_(e,r,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=b()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);p(e,t,r)},p(e,n){if(212&n){let o;for(r=e[2],o=0;o<r.length;o+=1){const s=E_(e,r,o);i[o]?i[o].p(s,n):(i[o]=D_(s),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d(e){m(i,e),e&&g(t)}}}function D_(e){let t,r,i,n,o,s=e[20]+"";function a(){return e[11](e[20])}return{c(){t=v("li"),r=O(s),i=_(),x(t,"background-color",e[4]===e[22]?e[6].Purple:"transparent"),w(t,"data-key",e[22]),w(t,"class","svelte-wbzyyy")},m(e,s){p(e,t,s),f(t,r),f(t,i),n||(o=y(t,"click",a),n=!0)},p(i,n){e=i,4&n&&s!==(s=e[20]+"")&&S(r,s),80&n&&x(t,"background-color",e[4]===e[22]?e[6].Purple:"transparent")},d(e){e&&g(t),n=!1,o()}}}function B_(t){let r,n,o,s,a,l,c,h="object"==typeof t[5]&&M_(t);return{c(){r=v("div"),n=v("input"),o=_(),s=v("div"),a=v("ul"),h&&h.c(),w(n,"type","text"),x(n,"background-color",t[6].textAreaColor),x(n,"font-family",t[6].font),x(n,"color",t[6].textColor),x(n,"font-size",t[6].fontSize),x(n,"border","solid 3px "+t[6].borderColor),w(n,"class","svelte-wbzyyy"),w(a,"class","svelte-wbzyyy"),w(s,"id","list"),w(s,"class","svelte-wbzyyy"),w(r,"id","templatemenu"),x(r,"left",t[1]?"10px":"-900px"),x(r,"background-color",t[6].backgroundColor),x(r,"font-family",t[6].font),x(r,"color",t[6].textColor),x(r,"font-size",t[6].fontSize),x(r,"border","solid 3px "+t[6].borderColor),w(r,"class","svelte-wbzyyy")},m(e,i){p(e,r,i),f(r,n),C(n,t[0]),t[10](n),f(r,o),f(r,s),f(s,a),h&&h.m(a,null),l||(c=[y(n,"input",t[9]),y(n,"keydown",t[8])],l=!0)},p(e,[t]){64&t&&x(n,"background-color",e[6].textAreaColor),64&t&&x(n,"font-family",e[6].font),64&t&&x(n,"color",e[6].textColor),64&t&&x(n,"font-size",e[6].fontSize),64&t&&x(n,"border","solid 3px "+e[6].borderColor),1&t&&n.value!==e[0]&&C(n,e[0]),"object"==typeof e[5]?h?h.p(e,t):(h=M_(e),h.c(),h.m(a,null)):h&&(h.d(1),h=null),2&t&&x(r,"left",e[1]?"10px":"-900px"),64&t&&x(r,"background-color",e[6].backgroundColor),64&t&&x(r,"font-family",e[6].font),64&t&&x(r,"color",e[6].textColor),64&t&&x(r,"font-size",e[6].fontSize),64&t&&x(r,"border","solid 3px "+e[6].borderColor)},i:e,o:e,d(e){e&&g(r),t[10](null),h&&h.d(),l=!1,i(c)}}}function I_(e,t,r){let i,n,o,a,l,c,h,u;s(e,IO,(e=>r(1,i=e))),s(e,x_,(e=>r(13,n=e))),s(e,$O,(e=>r(14,o=e))),s(e,k_,(e=>r(15,a=e))),s(e,O_,(e=>r(16,l=e))),s(e,MO,(e=>r(17,c=e))),s(e,L_,(e=>r(5,h=e))),s(e,OO,(e=>r(6,u=e)));let f,p="",g=[],m=!0,v=0;function O(e){var t=[];return""===e||void 0===e?t=h:(e=e.toLowerCase(),t=h.filter((t=>null!=t&&t.toLowerCase().includes(e)))),t=t.sort(((e,t)=>e.toLowerCase()>t.toLowerCase()))}function _(e){var t="",s=!1;"emailit"===o?c.somethingSelected()?(s=!0,t=c.getSelection()):t=c.getValue():"notes"===o?l.somethingSelected()?(s=!0,t=l.getSelection()):t=l.getValue():"scripts"===o?a.somethingSelected()?(s=!0,t=a.getSelection()):t=a.getValue():"templates"===o&&(n.somethingSelected()?(s=!0,t=n.getSelection()):t=n.getValue()),fetch("http://localhost:9978/api/template/run",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({template:e,text:t})}).then((e=>e.json())).then((e=>{"emailit"===o?(s?c.replaceSelection(e.text):c.setValue(e.text),c.focus()):"notes"===o?(s?l.replaceSelection(e.text):l.setValue(e.text),l.focus()):"scripts"===o?(s?a.replaceSelection(e.text):a.setValue(e.text),a.focus()):"templates"===o&&(s?n.replaceSelection(e.text):n.setValue(e.text),n.focus()),d(IO,i=!1,i),r(0,p="")}))}L((()=>{})),E((()=>{i&&m&&(r(2,g=O(p)),m=!1,f.focus())}));return e.$$.update=()=>{1&e.$$.dirty&&r(2,g=O(p)),2&e.$$.dirty&&i&&(r(4,v=0),r(0,p=""),f.focus())},[p,i,g,f,v,h,u,_,function(e){switch(e.key){case"ArrowDown":e.preventDefault(),r(4,v+=1),v>=g.length&&r(4,v=g.length-1);break;case"ArrowUp":e.preventDefault(),r(4,v-=1),v<0&&r(4,v=0);break;case"Enter":e.preventDefault(),_(g[v]);break;case"Escape":d(IO,i=!1,i)}},function(){p=this.value,r(0,p)},function(e){B[e?"unshift":"push"]((()=>{f=e,r(3,f)}))},e=>{_(e)}]}class j_ extends ae{constructor(e){super(),se(this,e,I_,B_,o,{})}}const z_=e=>({noResultsText:2048&e[0]}),W_=e=>({noResultsText:e[11]}),q_=e=>({createText:8192&e[0]}),H_=e=>({createText:e[13]}),N_=e=>({loadingText:4096&e[0]}),X_=e=>({loadingText:e[12]});function F_(e,t,r){const i=e.slice();return i[107]=t[r],i[109]=r,i}const Z_=e=>({item:1&e[1],label:1&e[1]}),U_=e=>({item:e[107].item,label:e[107].highlighted?e[107].highlighted.label:e[107].label});function V_(e,t,r){const i=e.slice();return i[110]=t[r],i}const G_=e=>({label:2&e[0],item:2&e[0]}),Y_=e=>({label:e[35](e[110]),item:e[110],unselectItem:e[42]});function K_(e,t,r){const i=e.slice();return i[109]=t[r],i}function J_(e){let t,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=tb(K_(e,r,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=b()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);p(e,t,r)},p(e,n){if(18&n[0]|16&n[1]){let o;for(r=e[1],o=0;o<r.length;o+=1){const s=K_(e,r,o);i[o]?i[o].p(s,n):(i[o]=tb(s),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d(e){m(i,e),e&&g(t)}}}function eb(e){let t,r;return{c(){t=v("option"),r=O(e[3]),t.__value=e[2],t.value=t.__value,t.selected=!0,w(t,"class","svelte-xmtx21")},m(e,i){p(e,t,i),f(t,r)},p(e,i){8&i[0]&&S(r,e[3]),22&i[0]&&(t.__value=e[2],t.value=t.__value)},d(e){e&&g(t)}}}function tb(e){let t,r,i,n,o=e[35](e[109])+"";return{c(){t=v("option"),r=O(o),i=_(),t.__value=n=e[4](e[109],!0),t.value=t.__value,t.selected=!0,w(t,"class","svelte-xmtx21")},m(e,n){p(e,t,n),f(t,r),f(t,i)},p(e,i){2&i[0]&&o!==(o=e[35](e[109])+"")&&S(r,o),18&i[0]&&n!==(n=e[4](e[109],!0))&&(t.__value=n,t.value=t.__value)},d(e){e&&g(t)}}}function rb(e){let t,r,i=e[1],n=[];for(let t=0;t<i.length;t+=1)n[t]=ib(V_(e,i,t));const o=e=>te(n[e],1,1,(()=>{n[e]=null}));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=b()},m(e,i){for(let t=0;t<n.length;t+=1)n[t].m(e,i);p(e,t,i),r=!0},p(e,r){if(2&r[0]|2064&r[1]|2048&r[2]){let s;for(i=e[1],s=0;s<i.length;s+=1){const o=V_(e,i,s);n[s]?(n[s].p(o,r),ee(n[s],1)):(n[s]=ib(o),n[s].c(),ee(n[s],1),n[s].m(t.parentNode,t))}for(K(),s=i.length;s<n.length;s+=1)o(s);J()}},i(e){if(!r){for(let e=0;e<i.length;e+=1)ee(n[e]);r=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)te(n[e]);r=!1},d(e){m(n,e),e&&g(t)}}}function ib(e){let t;const r=e[74].tag,i=a(r,e,e[73],Y_),n=i||function(e){let t,r,i,n,o,s,a,l,c=e[35](e[110])+"";function h(){return e[76](e[110])}return{c(){t=v("div"),r=v("span"),i=O(c),n=_(),o=v("span"),s=_(),w(r,"class","tag svelte-xmtx21"),w(o,"class","tag is-delete svelte-xmtx21"),w(t,"class","tags has-addons svelte-xmtx21")},m(e,c){var u;p(e,t,c),f(t,r),f(r,i),f(t,n),f(t,o),p(e,s,c),a||(l=y(o,"click",(u=h,function(e){return e.preventDefault(),u.call(this,e)})),a=!0)},p(t,r){e=t,2&r[0]&&c!==(c=e[35](e[110])+"")&&S(i,c)},d(e){e&&g(t),e&&g(s),a=!1,l()}}}(e);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,o){i?i.p&&(!t||2&o[0]|2048&o[2])&&h(i,r,e,e[73],t?c(r,e[73],o,G_):u(e[73]),Y_):n&&n.p&&(!t||2&o[0])&&n.p(e,t?o:[-1,-1,-1,-1])},i(e){t||(ee(n,e),t=!0)},o(e){te(n,e),t=!1},d(e){n&&n.d(e)}}}function nb(t){let r,i,n;return{c(){r=v("span"),r.textContent="✖",w(r,"class","autocomplete-clear-button svelte-xmtx21")},m(e,o){p(e,r,o),i||(n=y(r,"click",t[46]),i=!0)},p:e,d(e){e&&g(r),i=!1,n()}}}function ob(e){let t,r;const i=e[74]["no-results"],n=a(i,e,e[73],W_),o=n||function(e){let t;return{c(){t=O(e[11])},m(e,r){p(e,t,r)},p(e,r){2048&r[0]&&S(t,e[11])},d(e){e&&g(t)}}}(e);return{c(){t=v("div"),o&&o.c(),w(t,"class","autocomplete-list-item-no-results svelte-xmtx21")},m(e,i){p(e,t,i),o&&o.m(t,null),r=!0},p(e,t){n?n.p&&(!r||2048&t[0]|2048&t[2])&&h(n,i,e,e[73],r?c(i,e[73],t,z_):u(e[73]),W_):o&&o.p&&(!r||2048&t[0])&&o.p(e,r?t:[-1,-1,-1,-1])},i(e){r||(ee(o,e),r=!0)},o(e){te(o,e),r=!1},d(e){e&&g(t),o&&o.d(e)}}}function sb(e){let t,r,i,n;const o=e[74].create,s=a(o,e,e[73],H_),l=s||function(e){let t;return{c(){t=O(e[13])},m(e,r){p(e,t,r)},p(e,r){8192&r[0]&&S(t,e[13])},d(e){e&&g(t)}}}(e);return{c(){t=v("div"),l&&l.c(),w(t,"class","autocomplete-list-item-create svelte-xmtx21")},m(o,s){p(o,t,s),l&&l.m(t,null),r=!0,i||(n=y(t,"click",e[36]),i=!0)},p(e,t){s?s.p&&(!r||8192&t[0]|2048&t[2])&&h(s,o,e,e[73],r?c(o,e[73],t,q_):u(e[73]),H_):l&&l.p&&(!r||8192&t[0])&&l.p(e,r?t:[-1,-1,-1,-1])},i(e){r||(ee(l,e),r=!0)},o(e){te(l,e),r=!1},d(e){e&&g(t),l&&l.d(e),i=!1,n()}}}function ab(e){let t,r;const i=e[74].loading,n=a(i,e,e[73],X_),o=n||function(e){let t;return{c(){t=O(e[12])},m(e,r){p(e,t,r)},p(e,r){4096&r[0]&&S(t,e[12])},d(e){e&&g(t)}}}(e);return{c(){t=v("div"),o&&o.c(),w(t,"class","autocomplete-list-item-loading svelte-xmtx21")},m(e,i){p(e,t,i),o&&o.m(t,null),r=!0},p(e,t){n?n.p&&(!r||4096&t[0]|2048&t[2])&&h(n,i,e,e[73],r?c(i,e[73],t,N_):u(e[73]),X_):o&&o.p&&(!r||4096&t[0])&&o.p(e,r?t:[-1,-1,-1,-1])},i(e){r||(ee(o,e),r=!0)},o(e){te(o,e),r=!1},d(e){e&&g(t),o&&o.d(e)}}}function lb(e){let t,r,i,n=e[31],o=[];for(let t=0;t<n.length;t+=1)o[t]=fb(F_(e,n,t));const s=e=>te(o[e],1,1,(()=>{o[e]=null}));let a=e[5]>0&&e[31].length>e[5]&&pb(e);return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=_(),a&&a.c(),r=b()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);p(e,t,n),a&&a.m(e,n),p(e,r,n),i=!0},p(e,i){if(1073741856&i[0]|131137&i[1]|2048&i[2]){let r;for(n=e[31],r=0;r<n.length;r+=1){const s=F_(e,n,r);o[r]?(o[r].p(s,i),ee(o[r],1)):(o[r]=fb(s),o[r].c(),ee(o[r],1),o[r].m(t.parentNode,t))}for(K(),r=n.length;r<o.length;r+=1)s(r);J()}e[5]>0&&e[31].length>e[5]?a?a.p(e,i):(a=pb(e),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},i(e){if(!i){for(let e=0;e<n.length;e+=1)ee(o[e]);i=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)te(o[e]);i=!1},d(e){m(o,e),e&&g(t),a&&a.d(e),e&&g(r)}}}function cb(e){let t,r,i=e[107]&&hb(e);return{c(){i&&i.c(),t=b()},m(e,n){i&&i.m(e,n),p(e,t,n),r=!0},p(e,r){e[107]?i?(i.p(e,r),1&r[1]&&ee(i,1)):(i=hb(e),i.c(),ee(i,1),i.m(t.parentNode,t)):i&&(K(),te(i,1,1,(()=>{i=null})),J())},i(e){r||(ee(i),r=!0)},o(e){te(i),r=!1},d(e){i&&i.d(e),e&&g(t)}}}function hb(e){let t,r,n,o,s;const l=e[74].item,d=a(l,e,e[73],U_),f=d||function(e){let t;function r(e,t){return e[107].highlighted?db:ub}let i=r(e),n=i(e);return{c(){n.c(),t=b()},m(e,r){n.m(e,r),p(e,t,r)},p(e,o){i===(i=r(e))&&n?n.p(e,o):(n.d(1),n=i(e),n&&(n.c(),n.m(t.parentNode,t)))},d(e){n.d(e),e&&g(t)}}}(e);function m(){return e[79](e[107])}function O(){return e[80](e[109])}return{c(){t=v("div"),f&&f.c(),w(t,"class",r="autocomplete-list-item "+(e[109]===e[30]?"selected":"")+" svelte-xmtx21"),P(t,"confirmed",e[48](e[107].item))},m(e,r){p(e,t,r),f&&f.m(t,null),n=!0,o||(s=[y(t,"click",m),y(t,"pointerenter",O)],o=!0)},p(i,o){e=i,d?d.p&&(!n||1&o[1]|2048&o[2])&&h(d,l,e,e[73],n?c(l,e[73],o,Z_):u(e[73]),U_):f&&f.p&&(!n||1&o[1])&&f.p(e,n?o:[-1,-1,-1,-1]),(!n||1073741824&o[0]&&r!==(r="autocomplete-list-item "+(e[109]===e[30]?"selected":"")+" svelte-xmtx21"))&&w(t,"class",r),1073741824&o[0]|131073&o[1]&&P(t,"confirmed",e[48](e[107].item))},i(e){n||(ee(f,e),n=!0)},o(e){te(f,e),n=!1},d(e){e&&g(t),f&&f.d(e),o=!1,i(s)}}}function ub(e){let t,r,i=e[107].label+"";return{c(){t=new Q(!1),r=b(),t.a=r},m(e,n){t.m(i,e,n),p(e,r,n)},p(e,r){1&r[1]&&i!==(i=e[107].label+"")&&t.p(i)},d(e){e&&g(r),e&&t.d()}}}function db(e){let t,r,i=e[107].highlighted.label+"";return{c(){t=new Q(!1),r=b(),t.a=r},m(e,n){t.m(i,e,n),p(e,r,n)},p(e,r){1&r[1]&&i!==(i=e[107].highlighted.label+"")&&t.p(i)},d(e){e&&g(r),e&&t.d()}}}function fb(e){let t,r,i=e[107]&&(e[5]<=0||e[109]<e[5])&&cb(e);return{c(){i&&i.c(),t=b()},m(e,n){i&&i.m(e,n),p(e,t,n),r=!0},p(e,r){e[107]&&(e[5]<=0||e[109]<e[5])?i?(i.p(e,r),32&r[0]|1&r[1]&&ee(i,1)):(i=cb(e),i.c(),ee(i,1),i.m(t.parentNode,t)):i&&(K(),te(i,1,1,(()=>{i=null})),J())},i(e){r||(ee(i),r=!0)},o(e){te(i),r=!1},d(e){i&&i.d(e),e&&g(t)}}}function pb(e){let t,r,i,n,o=e[31].length-e[5]+"";return{c(){t=v("div"),r=O("..."),i=O(o),n=O(" results not shown"),w(t,"class","autocomplete-list-item-no-results svelte-xmtx21")},m(e,o){p(e,t,o),f(t,r),f(t,i),f(t,n)},p(e,t){32&t[0]|1&t[1]&&o!==(o=e[31].length-e[5]+"")&&S(i,o)},d(e){e&&g(t)}}}function gb(t){let r,o,s,a,l,c,h,u,d,m,O,b,S,T,Q,R,A,$,L,E;function M(e,t){return!e[6]&&e[2]?eb:e[6]&&e[1]?J_:void 0}let D=M(t),B=D&&D(t),I=t[6]&&t[1]&&rb(t),j=t[32]&&nb(t);const z=[lb,ab,sb,ob],W=[];function q(e,t){return e[31]&&e[31].length>0?0:e[29]&&e[12]?1:e[7]?2:e[11]?3:-1}return~(T=q(t))&&(Q=W[T]=z[T](t)),{c(){r=v("div"),o=v("select"),B&&B.c(),s=_(),a=v("div"),I&&I.c(),l=_(),c=v("input"),O=_(),j&&j.c(),b=_(),S=v("div"),Q&&Q.c(),w(o,"name",t[19]),w(o,"id",t[20]),w(o,"class","svelte-xmtx21"),void 0===t[2]&&N((()=>t[75].call(o))),w(c,"type","text"),w(c,"class",h=(t[16]?t[16]:"")+" input autocomplete-input svelte-xmtx21"),w(c,"id",u=t[17]?t[17]:""),w(c,"autocomplete",d=t[22]?"on":"off"),w(c,"placeholder",t[14]),w(c,"name",t[18]),c.disabled=t[25],w(c,"title",t[21]),c.readOnly=m=t[23]||t[8]&&t[1],x(c,"background-color",t[26].textAreaColor),x(c,"color",t[26].textColor),x(c,"border-color",t[26].borderColor),w(a,"class","input-container svelte-xmtx21"),w(S,"class",R=(t[24]?t[24]:"")+" autocomplete-list "+(t[33]?"":"hidden")+" is-fullwidth svelte-xmtx21"),x(S,"background-color",t[26].textAreaColor),x(S,"color",t[26].textColor),x(S,"border-color",t[26].borderColor),w(r,"class",A=(t[15]?t[15]:"")+" "+(t[9]||!t[0].length?"hide-arrow":"")+" "+(t[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+t[34]+" svelte-xmtx21"),P(r,"show-clear",t[32]),P(r,"is-loading",t[10]&&t[29])},m(i,h){var u;p(i,r,h),f(r,o),B&&B.m(o,null),k(o,t[2]),f(r,s),f(r,a),I&&I.m(a,null),f(a,l),f(a,c),t[77](c),C(c,t[3]),f(a,O),j&&j.m(a,null),f(r,b),f(r,S),~T&&W[T].m(S,null),t[81](S),$=!0,L||(E=[y(window,"click",t[38]),y(o,"change",t[75]),(u=t[47].call(null,o),u&&n(u.destroy)?u.destroy:e),y(c,"input",t[78]),y(c,"input",t[41]),y(c,"focus",t[44]),y(c,"blur",t[45]),y(c,"keydown",t[39]),y(c,"click",t[43]),y(c,"keypress",t[40])],L=!0)},p(e,t){D===(D=M(e))&&B?B.p(e,t):(B&&B.d(1),B=D&&D(e),B&&(B.c(),B.m(o,null))),(!$||524288&t[0])&&w(o,"name",e[19]),(!$||1048576&t[0])&&w(o,"id",e[20]),22&t[0]&&k(o,e[2]),e[6]&&e[1]?I?(I.p(e,t),66&t[0]&&ee(I,1)):(I=rb(e),I.c(),ee(I,1),I.m(a,l)):I&&(K(),te(I,1,1,(()=>{I=null})),J()),(!$||65536&t[0]&&h!==(h=(e[16]?e[16]:"")+" input autocomplete-input svelte-xmtx21"))&&w(c,"class",h),(!$||131072&t[0]&&u!==(u=e[17]?e[17]:""))&&w(c,"id",u),(!$||4194304&t[0]&&d!==(d=e[22]?"on":"off"))&&w(c,"autocomplete",d),(!$||16384&t[0])&&w(c,"placeholder",e[14]),(!$||262144&t[0])&&w(c,"name",e[18]),(!$||33554432&t[0])&&(c.disabled=e[25]),(!$||2097152&t[0])&&w(c,"title",e[21]),(!$||8388866&t[0]&&m!==(m=e[23]||e[8]&&e[1]))&&(c.readOnly=m),(!$||67108864&t[0])&&x(c,"background-color",e[26].textAreaColor),(!$||67108864&t[0])&&x(c,"color",e[26].textColor),(!$||67108864&t[0])&&x(c,"border-color",e[26].borderColor),8&t[0]&&c.value!==e[3]&&C(c,e[3]),e[32]?j?j.p(e,t):(j=nb(e),j.c(),j.m(a,null)):j&&(j.d(1),j=null);let i=T;T=q(e),T===i?~T&&W[T].p(e,t):(Q&&(K(),te(W[i],1,1,(()=>{W[i]=null})),J()),~T?(Q=W[T],Q?Q.p(e,t):(Q=W[T]=z[T](e),Q.c()),ee(Q,1),Q.m(S,null)):Q=null),(!$||16777216&t[0]|4&t[1]&&R!==(R=(e[24]?e[24]:"")+" autocomplete-list "+(e[33]?"":"hidden")+" is-fullwidth svelte-xmtx21"))&&w(S,"class",R),(!$||67108864&t[0])&&x(S,"background-color",e[26].textAreaColor),(!$||67108864&t[0])&&x(S,"color",e[26].textColor),(!$||67108864&t[0])&&x(S,"border-color",e[26].borderColor),(!$||33345&t[0]&&A!==(A=(e[15]?e[15]:"")+" "+(e[9]||!e[0].length?"hide-arrow":"")+" "+(e[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+e[34]+" svelte-xmtx21"))&&w(r,"class",A),33345&t[0]|2&t[1]&&P(r,"show-clear",e[32]),536905281&t[0]&&P(r,"is-loading",e[10]&&e[29])},i(e){$||(ee(I),ee(Q),$=!0)},o(e){te(I),te(Q),$=!1},d(e){e&&g(r),B&&B.d(),I&&I.d(),t[77](null),j&&j.d(),~T&&W[T].d(),t[81](null),L=!1,i(E)}}}function mb(e,t){let r;"function"!=typeof e&&console.error("Not a function: "+e+", argument: "+t);try{r=e(t)}catch(r){console.warn("Error executing Autocomplete function on value: "+t+" function: "+e)}let i=r;return null==i&&(i=""),"string"!=typeof i&&(i=i.toString()),i}function vb(e,t){if(!e)return 0;const r=e.keywords;let i=0;return t.forEach((e=>{r.includes(e)&&i++})),i}function Ob(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function _b(e,t,r){let i,n,{$$slots:o={},$$scope:s}=t,{items:a=[]}=t,{searchFunction:l=!1}=t,{labelFieldName:c}=t,{keywordsFieldName:h=c}=t,{valueFieldName:u}=t,{labelFunction:d=function(e){return null==e?"":c?e[c]:e}}=t,{keywordsFunction:f=function(e){return null==e?"":h?e[h]:d(e)}}=t,{valueFunction:p=function(e,t=!1){return null==e?e:!x||t?u?e[u]:e:e.map((e=>u?e[u]:e))}}=t,{keywordsCleanFunction:g=function(e){return e}}=t,{textCleanFunction:m=function(e){return e}}=t,{beforeChange:v=function(e,t){return!0}}=t,{onChange:O=function(e){}}=t,{onFocus:_=function(){}}=t,{onBlur:b=function(){}}=t,{onCreate:y=function(e){J&&console.log("onCreate: "+e)}}=t,{selectFirstIfEmpty:w=!1}=t,{minCharactersToSearch:S=1}=t,{maxItemsToShowInList:C=0}=t,{multiple:x=!1}=t,{create:k=!1}=t,{ignoreAccents:P=!0}=t,{matchAllKeywords:Q=!0}=t,{sortByMatchedKeywords:R=!1}=t,{lock:A=!1}=t,{delay:$=0}=t,{localFiltering:L=!0}=t,{hideArrow:E=!1}=t,{showClear:M=!1}=t,{showLoadingIndicator:D=!1}=t,{noResultsText:I="No results found"}=t,{loadingText:j="Loading results..."}=t,{createText:z="Not found, add anyway?"}=t,{placeholder:W}=t,{className:q}=t,{inputClassName:H}=t,{inputId:N}=t,{name:X}=t,{selectName:F}=t,{selectId:Z}=t,{title:U}=t,{html5autocomplete:V}=t,{readonly:G}=t,{dropdownClassName:Y}=t,{disabled:K=!1}=t,{debug:J=!1}=t,{selectedItem:ee}=t,{value:te}=t,{theme:re}=t;const ie="sautocomplete-"+Math.floor(1e3*Math.random());let ne,oe,se,ae,le=!1,ce=!1,he=-1,{text:ue}=t,de=0,fe=[],pe=0,ge=0;function me(e){return mb(d,e)}function ve(e){const t=mb(f,e);let r=mb(g,t);return r=r.toLowerCase().trim(),P&&(r=Ob(r)),J&&console.log("Extracted keywords: '"+r+"' from item: "+JSON.stringify(e)),r}function Oe(){let e;J&&(e=`Autocomplete prepare list ${N?`(id: ${N})`:""})`,console.time(e),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(a))),Array.isArray(a)||(console.warn("Autocomplete items / search function did not return array but",a),r(0,a=[]));const t=a?a.length:0;fe=new Array(t),t>0&&a.forEach(((e,t)=>{const r=function(e){return{keywords:ve(e),label:me(e),item:e}}(e);null==r&&console.log("Undefined item for: ",e),fe[t]=r})),J&&(console.log(fe.length+" items to search"),console.timeEnd(e))}async function _e(){let e;J&&(e=`Autocomplete search ${N?`(id: ${N})`:""})`,console.time(e),console.log("Searching user entered text: '"+ue+"'"));const t=function(e){if(null==e)return"";const t=e.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();if(r(72,de=t.length),S>1&&de<S)return"";const i=m(t).toLowerCase().trim();return J&&console.log("Change user entered text '"+e+"' into '"+i+"'"),i}(ue);if(""===t)return l?(r(0,a=[]),J&&console.log("User entered text is empty clear list of items")):(r(31,se=fe),J&&console.log("User entered text is empty set the list of items to all items")),Me(),void(J&&console.timeEnd(e));if(l){pe+=1;const e=pe;r(29,ce=!0);if(l instanceof async function*(){}.constructor)for await(const i of l(t)){if(e<ge)return!1;e>ge&&r(0,a=[]),ge=e,r(0,a=[...a,...i]),be(t)}else{let i=await l(t);if(e<ge)return!1;ge=e,r(0,a=i),be(t)}r(29,ce=!1)}else be(t);J&&(console.timeEnd(e),console.log("Search found "+se.length+" items"))}function be(e){let t;if(Oe(),L){var i=e.split(" ");P&&(i=i.map((e=>Ob(e)))),t=fe.filter((e=>{var t=vb(e,i);return Q?t>=i.length:t>0})),R&&(t=t.sort(((e,t)=>vb(t,i)-vb(e,i))))}else t=fe;const n=De(e,["label"]),o=t.map(n);return r(31,se=o),Me(),!0}function ye(e){if(J&&console.log("selectListItem"),void 0===e)return k?(y(ue),!0):(J&&console.log("listItem is undefined. Can not select."),!1);const t=e.item;return v(ee,t)&&(x?ee?ee.includes(t)?r(1,ee=ee.filter((e=>e!==t))):r(1,ee=[...ee,t]):r(1,ee=[t]):r(1,ee=t)),!0}function we(){J&&console.log("selectItem");ye(se[he])&&(Le(),x&&ne.focus())}function Se(){J&&console.log("up"),$e(),he>0&&r(30,he--,he),xe()}function Ce(){J&&console.log("down"),$e(),he<se.length-1&&r(30,he++,he),xe()}function xe(){J&&console.log("highlight");const e=".selected";J&&console.log("Seaching DOM element: .selected in "+oe);const t=oe&&oe.querySelector(e);t?"function"==typeof t.scrollIntoViewIfNeeded?(J&&console.log("Scrolling selected item into view"),t.scrollIntoViewIfNeeded()):J&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):J&&console.warn("Selected item not found to scroll into view")}function ke(e){J&&console.log("onListItemClick"),ye(e)&&(Le(),x&&ne.focus())}function Te(e){J&&console.log("unselectItem",e),r(1,ee=ee.filter((t=>t!==e))),ne.focus()}function Pe(){_e()&&(r(30,he=0),$e())}function Qe(e){J&&console.log("onEsc"),e.stopPropagation(),le&&(ne.focus(),Le())}function Re(e){J&&console.log("onBackspace"),Te(ee[ee.length-1])}function Ae(){if(J&&console.log("resetListToAllItemsAndOpen"),ue?!fe.length&&ee&&l&&_e():r(31,se=fe),$e(),ee){J&&console.log("Searching currently selected item: "+JSON.stringify(ee));for(let e=0;e<fe.length;e++){const t=fe[e];if(void 0!==t){if(J&&console.log("Item "+e+": "+JSON.stringify(t)),ee==t.item){r(30,he=e),J&&console.log("Found selected item: "+e+": "+JSON.stringify(t)),xe();break}}else J&&console.log(`listItem ${e} is undefined. Skipping.`)}}}function $e(){J&&console.log("open"),Ee()||r(71,le=!0)}function Le(){J&&console.log("close"),r(71,le=!1),r(29,ce=!1),!ue&&w&&(De=0,we())}function Ee(){return S>1&&de<S}function Me(){Ee()&&Le()}function De(e,t){return e=e.split(/\s+/g),r=>{const i=Object.assign({highlighted:{}},r);return t&&t.forEach((t=>{i[t]&&!i.highlighted[t]&&(i.highlighted[t]=i[t]),i.highlighted[t]&&e.forEach((e=>{const r=new RegExp("("+e+")","ig");i.highlighted[t]=i.highlighted[t].replace(r,"<b>$1</b>")}))})),i}}return e.$$set=e=>{"items"in e&&r(0,a=e.items),"searchFunction"in e&&r(49,l=e.searchFunction),"labelFieldName"in e&&r(50,c=e.labelFieldName),"keywordsFieldName"in e&&r(51,h=e.keywordsFieldName),"valueFieldName"in e&&r(52,u=e.valueFieldName),"labelFunction"in e&&r(53,d=e.labelFunction),"keywordsFunction"in e&&r(54,f=e.keywordsFunction),"valueFunction"in e&&r(4,p=e.valueFunction),"keywordsCleanFunction"in e&&r(55,g=e.keywordsCleanFunction),"textCleanFunction"in e&&r(56,m=e.textCleanFunction),"beforeChange"in e&&r(57,v=e.beforeChange),"onChange"in e&&r(58,O=e.onChange),"onFocus"in e&&r(59,_=e.onFocus),"onBlur"in e&&r(60,b=e.onBlur),"onCreate"in e&&r(61,y=e.onCreate),"selectFirstIfEmpty"in e&&r(62,w=e.selectFirstIfEmpty),"minCharactersToSearch"in e&&r(63,S=e.minCharactersToSearch),"maxItemsToShowInList"in e&&r(5,C=e.maxItemsToShowInList),"multiple"in e&&r(6,x=e.multiple),"create"in e&&r(7,k=e.create),"ignoreAccents"in e&&r(64,P=e.ignoreAccents),"matchAllKeywords"in e&&r(65,Q=e.matchAllKeywords),"sortByMatchedKeywords"in e&&r(66,R=e.sortByMatchedKeywords),"lock"in e&&r(8,A=e.lock),"delay"in e&&r(67,$=e.delay),"localFiltering"in e&&r(68,L=e.localFiltering),"hideArrow"in e&&r(9,E=e.hideArrow),"showClear"in e&&r(69,M=e.showClear),"showLoadingIndicator"in e&&r(10,D=e.showLoadingIndicator),"noResultsText"in e&&r(11,I=e.noResultsText),"loadingText"in e&&r(12,j=e.loadingText),"createText"in e&&r(13,z=e.createText),"placeholder"in e&&r(14,W=e.placeholder),"className"in e&&r(15,q=e.className),"inputClassName"in e&&r(16,H=e.inputClassName),"inputId"in e&&r(17,N=e.inputId),"name"in e&&r(18,X=e.name),"selectName"in e&&r(19,F=e.selectName),"selectId"in e&&r(20,Z=e.selectId),"title"in e&&r(21,U=e.title),"html5autocomplete"in e&&r(22,V=e.html5autocomplete),"readonly"in e&&r(23,G=e.readonly),"dropdownClassName"in e&&r(24,Y=e.dropdownClassName),"disabled"in e&&r(25,K=e.disabled),"debug"in e&&r(70,J=e.debug),"selectedItem"in e&&r(1,ee=e.selectedItem),"value"in e&&r(2,te=e.value),"theme"in e&&r(26,re=e.theme),"text"in e&&r(3,ue=e.text),"$$scope"in e&&r(73,s=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty[0]&&(r(2,te=p(ee)),r(3,ue=x?"":me(ee)),O(ee)),1&e.$$.dirty[0]|1536&e.$$.dirty[2]&&r(33,i=le&&(a&&a.length>0||de>0)),322&e.$$.dirty[0]|128&e.$$.dirty[2]&&r(32,n=M||(A||x)&&ee),1&e.$$.dirty[0]&&Oe()},[a,ee,te,ue,p,C,x,k,A,E,D,I,j,z,W,q,H,N,X,F,Z,U,V,G,Y,K,re,ne,oe,ce,he,se,n,i,ie,me,we,ke,function(e){J&&console.log("onDocumentClick: "+JSON.stringify(e.target)),e.target.closest("."+ie)?(J&&console.log("onDocumentClick inside"),xe()):(J&&console.log("onDocumentClick outside"),Le())},function(e){J&&console.log("onKeyDown");let t=e.key;"Tab"===t&&e.shiftKey&&(t="ShiftTab");const r={Tab:le?Ce.bind(this):null,ShiftTab:le?Se.bind(this):null,ArrowDown:Ce.bind(this),Escape:Qe.bind(this),Backspace:x&&ee&&ee.length&&!ue?Re.bind(this):null}[t];"function"==typeof r&&(e.preventDefault(),r(e))},function(e){J&&console.log("onKeyPress"),"Enter"===e.key&&le&&(e.preventDefault(),we())},function(e){J&&console.log("onInput"),r(3,ue=e.target.value),ae&&clearTimeout(ae),$?ae=setTimeout(Pe,$):Pe()},Te,function(){J&&console.log("onInputClick"),Ae()},function(){J&&console.log("onFocus"),_(),Ae()},function(){J&&console.log("onBlur"),b()},function(){J&&console.log("clear"),r(3,ue=""),r(1,ee=void 0),setTimeout((()=>{ne.focus(),Le()}))},function(e){e.multiple=x},function(e){return!!ee&&(x?ee.includes(e):e==ee)},l,c,h,u,d,f,g,m,v,O,_,b,y,w,S,P,Q,R,$,L,M,J,le,de,s,o,function(){te=T(this),r(2,te),r(4,p),r(1,ee)},e=>{Te(e)},function(e){B[e?"unshift":"push"]((()=>{ne=e,r(27,ne)}))},function(){ue=this.value,r(3,ue)},e=>ke(e),e=>{r(30,he=e)},function(e){B[e?"unshift":"push"]((()=>{oe=e,r(28,oe)}))}]}class bb extends ae{constructor(e){super(),se(this,e,_b,gb,o,{items:0,searchFunction:49,labelFieldName:50,keywordsFieldName:51,valueFieldName:52,labelFunction:53,keywordsFunction:54,valueFunction:4,keywordsCleanFunction:55,textCleanFunction:56,beforeChange:57,onChange:58,onFocus:59,onBlur:60,onCreate:61,selectFirstIfEmpty:62,minCharactersToSearch:63,maxItemsToShowInList:5,multiple:6,create:7,ignoreAccents:64,matchAllKeywords:65,sortByMatchedKeywords:66,lock:8,delay:67,localFiltering:68,hideArrow:9,showClear:69,showLoadingIndicator:10,noResultsText:11,loadingText:12,createText:13,placeholder:14,className:15,inputClassName:16,inputId:17,name:18,selectName:19,selectId:20,title:21,html5autocomplete:22,readonly:23,dropdownClassName:24,disabled:25,debug:70,selectedItem:1,value:2,theme:26,text:3},null,[-1,-1,-1,-1])}}const yb=vO([]);function wb(e){let t,r,n,o,s,a,l,c,h,u,d,m,b,S,k,T,P,Q,R,A,$,L,E,M,D,I,j,z,W,q,H,N,F,Z,U,V,G,Y,K,J,se,ae,le,ce;function he(t){e[21](t)}let ue={inputId:"scriptName",items:e[7],inputClassName:"scriptInput",className:"scriptDiv",create:"true",theme:e[9],onChange:e[19],onCreate:e[20]};return void 0!==e[2]&&(ue.selectedItem=e[2]),a=new bb({props:ue}),B.push((()=>re(a,"selectedItem",he))),L=new yO({props:{height:"380px",width:"980px",config:e[10],initFinished:e[0]}}),L.$on("textChange",e[25]),L.$on("editorChange",e[26]),{c(){t=v("div"),r=v("div"),n=v("div"),o=v("label"),o.textContent="Name:",s=_(),ie(a.$$.fragment),c=_(),h=v("label"),h.textContent="Insert?",u=_(),d=v("input"),m=_(),b=v("div"),S=v("label"),S.textContent="Description:",k=_(),T=v("input"),P=_(),Q=v("label"),Q.textContent="Terminal Script?",R=_(),A=v("input"),$=_(),ie(L.$$.fragment),E=_(),M=v("div"),D=v("button"),I=O("Save Script"),j=_(),z=v("button"),W=O("Delete Script"),q=_(),H=v("button"),N=O("Notes"),F=_(),Z=v("button"),U=O("Script Terminal"),V=_(),G=v("button"),Y=O("Scripts Menu"),K=_(),J=v("button"),se=O("Templates Menu"),w(o,"for","scriptName"),w(o,"class","svelte-j1x0bs"),w(h,"id","insertChkLab"),w(h,"for","insertChk"),w(h,"class","svelte-j1x0bs"),w(d,"id","insertChk"),w(d,"name","insertChk"),w(d,"type","checkbox"),x(d,"background-color",e[9].textAreaColor),x(d,"color",e[9].textColor),x(d,"border-color",e[9].borderColor),w(d,"class","svelte-j1x0bs"),w(n,"class","headerRow svelte-j1x0bs"),w(S,"for","description"),w(S,"class","svelte-j1x0bs"),w(T,"id","description"),x(T,"background-color",e[9].textAreaColor),x(T,"color",e[9].textColor),x(T,"border-color",e[9].borderColor),x(T,"font-size",e[9].fontSize),w(T,"class","svelte-j1x0bs"),w(Q,"id","termScriptLab"),w(Q,"for","termScriptChk"),w(Q,"class","svelte-j1x0bs"),w(A,"id","termScriptChk"),w(A,"name","termScriptChk"),w(A,"type","checkbox"),x(A,"background-color",e[9].textAreaColor),x(A,"color",e[9].textColor),x(A,"border-color",e[9].borderColor),x(A,"font-size",e[9].fontSize),w(A,"class","svelte-j1x0bs"),w(b,"class","headerRow svelte-j1x0bs"),w(r,"id","header"),w(r,"class","svelte-j1x0bs"),x(D,"background-color",e[9].textAreaColor),x(D,"color",e[9].textColor),x(D,"border-color",e[9].borderColor),w(D,"class","svelte-j1x0bs"),x(z,"background-color",e[9].textAreaColor),x(z,"color",e[9].textColor),x(z,"border-color",e[9].borderColor),w(z,"class","svelte-j1x0bs"),x(H,"background-color",e[9].textAreaColor),x(H,"color",e[9].textColor),x(H,"border-color",e[9].borderColor),w(H,"class","svelte-j1x0bs"),x(Z,"background-color",e[9].textAreaColor),x(Z,"color",e[9].textColor),x(Z,"border-color",e[9].borderColor),w(Z,"class","svelte-j1x0bs"),x(G,"background-color",e[9].textAreaColor),x(G,"color",e[9].textColor),x(G,"border-color",e[9].borderColor),w(G,"class","svelte-j1x0bs"),x(J,"background-color",e[9].textAreaColor),x(J,"color",e[9].textColor),x(J,"border-color",e[9].borderColor),w(J,"class","svelte-j1x0bs"),w(M,"id","buttonRow"),w(M,"class","svelte-j1x0bs"),w(t,"id","scripts"),x(t,"background-color",e[9].backgroundColor),x(t,"font-family",e[9].font),x(t,"color",e[9].textColor),x(t,"font-size",e[9].fontSize),w(t,"class","svelte-j1x0bs")},m(i,l){p(i,t,l),f(t,r),f(r,n),f(n,o),f(n,s),ne(a,n,null),f(n,c),f(n,h),f(n,u),f(n,d),d.checked=e[5],f(r,m),f(r,b),f(b,S),f(b,k),f(b,T),C(T,e[4]),f(b,P),f(b,Q),f(b,R),f(b,A),A.checked=e[6],f(t,$),ne(L,t,null),f(t,E),f(t,M),f(M,D),f(D,I),f(M,j),f(M,z),f(z,W),f(M,q),f(M,H),f(H,N),f(M,F),f(M,Z),f(Z,U),f(M,V),f(M,G),f(G,Y),f(M,K),f(M,J),f(J,se),ae=!0,le||(ce=[y(d,"change",e[22]),y(T,"input",e[23]),y(A,"change",e[24]),y(D,"click",e[11]),y(z,"click",e[12]),y(H,"click",e[15]),y(Z,"click",e[18]),y(G,"click",e[16]),y(J,"click",e[17])],le=!0)},p(e,r){const i={};128&r[0]&&(i.items=e[7]),512&r[0]&&(i.theme=e[9]),282&r[0]&&(i.onCreate=e[20]),!l&&4&r[0]&&(l=!0,i.selectedItem=e[2],X((()=>l=!1))),a.$set(i),(!ae||512&r[0])&&x(d,"background-color",e[9].textAreaColor),(!ae||512&r[0])&&x(d,"color",e[9].textColor),(!ae||512&r[0])&&x(d,"border-color",e[9].borderColor),32&r[0]&&(d.checked=e[5]),(!ae||512&r[0])&&x(T,"background-color",e[9].textAreaColor),(!ae||512&r[0])&&x(T,"color",e[9].textColor),(!ae||512&r[0])&&x(T,"border-color",e[9].borderColor),(!ae||512&r[0])&&x(T,"font-size",e[9].fontSize),16&r[0]&&T.value!==e[4]&&C(T,e[4]),(!ae||512&r[0])&&x(A,"background-color",e[9].textAreaColor),(!ae||512&r[0])&&x(A,"color",e[9].textColor),(!ae||512&r[0])&&x(A,"border-color",e[9].borderColor),(!ae||512&r[0])&&x(A,"font-size",e[9].fontSize),64&r[0]&&(A.checked=e[6]);const n={};1&r[0]&&(n.initFinished=e[0]),L.$set(n),(!ae||512&r[0])&&x(D,"background-color",e[9].textAreaColor),(!ae||512&r[0])&&x(D,"color",e[9].textColor),(!ae||512&r[0])&&x(D,"border-color",e[9].borderColor),(!ae||512&r[0])&&x(z,"background-color",e[9].textAreaColor),(!ae||512&r[0])&&x(z,"color",e[9].textColor),(!ae||512&r[0])&&x(z,"border-color",e[9].borderColor),(!ae||512&r[0])&&x(H,"background-color",e[9].textAreaColor),(!ae||512&r[0])&&x(H,"color",e[9].textColor),(!ae||512&r[0])&&x(H,"border-color",e[9].borderColor),(!ae||512&r[0])&&x(Z,"background-color",e[9].textAreaColor),(!ae||512&r[0])&&x(Z,"color",e[9].textColor),(!ae||512&r[0])&&x(Z,"border-color",e[9].borderColor),(!ae||512&r[0])&&x(G,"background-color",e[9].textAreaColor),(!ae||512&r[0])&&x(G,"color",e[9].textColor),(!ae||512&r[0])&&x(G,"border-color",e[9].borderColor),(!ae||512&r[0])&&x(J,"background-color",e[9].textAreaColor),(!ae||512&r[0])&&x(J,"color",e[9].textColor),(!ae||512&r[0])&&x(J,"border-color",e[9].borderColor),(!ae||512&r[0])&&x(t,"background-color",e[9].backgroundColor),(!ae||512&r[0])&&x(t,"font-family",e[9].font),(!ae||512&r[0])&&x(t,"color",e[9].textColor),(!ae||512&r[0])&&x(t,"font-size",e[9].fontSize)},i(e){ae||(ee(a.$$.fragment,e),ee(L.$$.fragment,e),ae=!0)},o(e){te(a.$$.fragment,e),te(L.$$.fragment,e),ae=!1},d(e){e&&g(t),oe(a),oe(L),le=!1,i(ce)}}}function Sb(e,t,r){let i,n,o,a,l,c,h;s(e,$O,(e=>r(27,i=e))),s(e,IO,(e=>r(28,n=e))),s(e,BO,(e=>r(29,o=e))),s(e,k_,(e=>r(8,a=e))),s(e,yb,(e=>r(30,l=e))),s(e,C_,(e=>r(31,c=e))),s(e,OO,(e=>r(9,h=e)));let u,f,p=!1,g="",m="",v="",O=!1,_=!1;function b(e){fetch("http://localhost:9978/api/scripts/user",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((t=>{r(7,f=t.scripts.sort()),void 0!==e&&e()}))}function y(e){fetch("http://localhost:9978/api/scripts/list",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((t=>{d(C_,c=t.data,c),void 0!==e&&e()}))}function w(e){fetch("http://localhost:9978/api/scripts/term/list",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((t=>{d(yb,l=t.data,l),void 0!==e&&e()}))}function S(e){d(k_,a=e,a)}function C(e){r(1,u=e.value)}L((()=>{b((()=>{})),r(0,p=!0)}));return[p,u,g,m,v,O,_,f,a,h,{language:"javascript",lineNumbers:!0,lineWrapping:!0,lineHighlight:!0},function(){void 0!==m&&""!==m&&fetch(`http://localhost:9978/api/scripts/${m}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({script:{name:m,insert:O,description:v,script:u,termscript:_,help:v}})}).then((()=>{r(2,g=""),r(3,m=""),r(5,O=!1),r(4,v=""),r(1,u=""),r(6,_=!1),a.setValue(u),y(),b(),w()}))},function(){void 0!==m&&""!==m&&fetch(`http://localhost:9978/api/scripts/${m}`,{method:"DELETE",headers:{"Content-type":"application/json"}}).then((()=>{r(3,m=""),r(2,g=""),r(5,O=!0),r(4,v=""),r(1,u=""),a.setValue(u),y(),b(),w()}))},S,C,function(){d($O,i="notes",i)},function(){d(BO,o=!o,o)},function(){d(IO,n=!n,n)},function(){d($O,i="scriptterm",i)},function(e){void 0!==e&&""!==e&&(r(3,m=e),function(e,t){void 0!==e&&""!==e&&fetch(`http://localhost:9978/api/scripts/${e}`,{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((e=>{r(3,m=e.script.name),r(1,u=e.script.script),r(4,v=e.script.description),r(5,O="true"==e.script.insert),void 0===e.script.termscript?r(6,_=!1):r(6,_=e.script.termscript),a.setValue(u),void 0!==t&&t()}))}(m))},e=>{void 0!==e&&""!==e&&(r(3,m=e),r(4,v=""),r(1,u=""),a.setValue(u))},function(e){g=e,r(2,g)},function(){O=this.checked,r(5,O)},function(){v=this.value,r(4,v)},function(){_=this.checked,r(6,_)},e=>{C(e.detail.data)},e=>{S(e.detail.data)}]}class Cb extends ae{constructor(e){super(),se(this,e,Sb,wb,o,{},null,[-1,-1])}}function xb(e){let t,r,i,n;return{c(){t=v("button"),r=O("Delete Template"),x(t,"background-color",e[7].textAreaColor),x(t,"color",e[7].textColor),x(t,"border-color",e[7].borderColor),w(t,"class","svelte-2ihs3u")},m(o,s){p(o,t,s),f(t,r),i||(n=y(t,"click",e[10]),i=!0)},p(e,r){128&r&&x(t,"background-color",e[7].textAreaColor),128&r&&x(t,"color",e[7].textColor),128&r&&x(t,"border-color",e[7].borderColor)},d(e){e&&g(t),i=!1,n()}}}function kb(e){let t,r,n,o,s,a,l,c,h,u,d,m,b,S,k,T,P,Q,R,A,$,L,E,M,D,I,j,z,W,q,H;function N(t){e[18](t)}let F={inputId:"templateName",items:e[5],inputClassName:"templateInput",className:"templateDiv",create:"true",theme:e[7],onChange:e[16],onCreate:e[17]};void 0!==e[4]&&(F.selectedItem=e[4]),a=new bb({props:F}),B.push((()=>re(a,"selectedItem",N))),S=new yO({props:{height:"375px",width:"980px",config:e[8],initFinished:e[0]}}),S.$on("textChange",e[20]),S.$on("editorChange",e[21]);let Z="Defaults"!==e[3]&&xb(e);return{c(){t=v("div"),r=v("div"),n=v("div"),o=v("label"),o.textContent="Name:",s=_(),ie(a.$$.fragment),c=_(),h=v("div"),u=v("label"),u.textContent="Description:",d=_(),m=v("input"),b=_(),ie(S.$$.fragment),k=_(),T=v("div"),P=v("button"),Q=O("Save Template"),R=_(),Z&&Z.c(),A=_(),$=v("button"),L=O("Notes"),E=_(),M=v("button"),D=O("Scripts Menu"),I=_(),j=v("button"),z=O("Templates Menu"),w(o,"for","templateName"),w(o,"class","svelte-2ihs3u"),w(n,"class","headerRow svelte-2ihs3u"),w(u,"for","description"),w(u,"class","svelte-2ihs3u"),w(m,"id","description"),x(m,"background-color",e[7].textAreaColor),x(m,"color",e[7].textColor),x(m,"border-color",e[7].borderColor),w(m,"class","svelte-2ihs3u"),w(h,"class","headerRow svelte-2ihs3u"),w(r,"id","header"),w(r,"class","svelte-2ihs3u"),x(P,"background-color",e[7].textAreaColor),x(P,"color",e[7].textColor),x(P,"border-color",e[7].borderColor),w(P,"class","svelte-2ihs3u"),x($,"background-color",e[7].textAreaColor),x($,"color",e[7].textColor),x($,"border-color",e[7].borderColor),w($,"class","svelte-2ihs3u"),x(M,"background-color",e[7].textAreaColor),x(M,"color",e[7].textColor),x(M,"border-color",e[7].borderColor),w(M,"class","svelte-2ihs3u"),x(j,"background-color",e[7].textAreaColor),x(j,"color",e[7].textColor),x(j,"border-color",e[7].borderColor),w(j,"class","svelte-2ihs3u"),w(T,"id","buttonRow"),w(T,"class","svelte-2ihs3u"),w(t,"id","templates"),x(t,"background-color",e[7].backgroundColor),x(t,"font-family",e[7].font),x(t,"color",e[7].textColor),x(t,"font-size",e[7].fontSize),w(t,"class","svelte-2ihs3u")},m(i,l){p(i,t,l),f(t,r),f(r,n),f(n,o),f(n,s),ne(a,n,null),f(r,c),f(r,h),f(h,u),f(h,d),f(h,m),C(m,e[2]),f(t,b),ne(S,t,null),f(t,k),f(t,T),f(T,P),f(P,Q),f(T,R),Z&&Z.m(T,null),f(T,A),f(T,$),f($,L),f(T,E),f(T,M),f(M,D),f(T,I),f(T,j),f(j,z),W=!0,q||(H=[y(m,"input",e[19]),y(P,"click",e[9]),y($,"click",e[13]),y(M,"click",e[14]),y(j,"click",e[15])],q=!0)},p(e,[r]){const i={};32&r&&(i.items=e[5]),128&r&&(i.theme=e[7]),78&r&&(i.onCreate=e[17]),!l&&16&r&&(l=!0,i.selectedItem=e[4],X((()=>l=!1))),a.$set(i),(!W||128&r)&&x(m,"background-color",e[7].textAreaColor),(!W||128&r)&&x(m,"color",e[7].textColor),(!W||128&r)&&x(m,"border-color",e[7].borderColor),4&r&&m.value!==e[2]&&C(m,e[2]);const n={};1&r&&(n.initFinished=e[0]),S.$set(n),(!W||128&r)&&x(P,"background-color",e[7].textAreaColor),(!W||128&r)&&x(P,"color",e[7].textColor),(!W||128&r)&&x(P,"border-color",e[7].borderColor),"Defaults"!==e[3]?Z?Z.p(e,r):(Z=xb(e),Z.c(),Z.m(T,A)):Z&&(Z.d(1),Z=null),(!W||128&r)&&x($,"background-color",e[7].textAreaColor),(!W||128&r)&&x($,"color",e[7].textColor),(!W||128&r)&&x($,"border-color",e[7].borderColor),(!W||128&r)&&x(M,"background-color",e[7].textAreaColor),(!W||128&r)&&x(M,"color",e[7].textColor),(!W||128&r)&&x(M,"border-color",e[7].borderColor),(!W||128&r)&&x(j,"background-color",e[7].textAreaColor),(!W||128&r)&&x(j,"color",e[7].textColor),(!W||128&r)&&x(j,"border-color",e[7].borderColor),(!W||128&r)&&x(t,"background-color",e[7].backgroundColor),(!W||128&r)&&x(t,"font-family",e[7].font),(!W||128&r)&&x(t,"color",e[7].textColor),(!W||128&r)&&x(t,"font-size",e[7].fontSize)},i(e){W||(ee(a.$$.fragment,e),ee(S.$$.fragment,e),W=!0)},o(e){te(a.$$.fragment,e),te(S.$$.fragment,e),W=!1},d(e){e&&g(t),oe(a),oe(S),Z&&Z.d(),q=!1,i(H)}}}function Tb(e,t,r){let i,n,o,a,l,c;s(e,IO,(e=>r(22,i=e))),s(e,BO,(e=>r(23,n=e))),s(e,$O,(e=>r(24,o=e))),s(e,x_,(e=>r(6,a=e))),s(e,L_,(e=>r(25,l=e))),s(e,OO,(e=>r(7,c=e)));let h,u,f=!1,p="",g="",m="";function v(e){fetch("http://localhost:9978/api/template/user",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((t=>{r(5,u=t.templates.sort()),void 0!==e&&e()}))}function O(e){fetch("http://localhost:9978/api/template/list",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((t=>{d(L_,l=t.templates,l),void 0!==e&&e()}))}function _(e){d(x_,a=e,a)}function b(e){r(1,p=e.value)}L((()=>{v((()=>{r(0,f=!0)}))}));return[f,p,g,m,h,u,a,c,{language:"javascript",lineNumbers:!0,lineWrapping:!0,lineHighlight:!0},function(){void 0!==m&&""!==m&&fetch(`http://localhost:9978/api/template/${m}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({template:{name:m,description:g,template:p}})}).then((()=>{r(1,p=""),r(3,m=""),r(2,g=""),r(4,h=""),a.setValue(p),O(),v()}))},function(){void 0!==m&&""!==m&&fetch(`http://localhost:9978/api/template/${m}`,{method:"DELETE",headers:{"Content-type":"application/json"}}).then((()=>{r(1,p=""),r(3,m=""),r(2,g=""),r(4,h=""),a.setValue(p),O(),v()}))},_,b,function(){d($O,o="notes",o)},function(){d(BO,n=!n,n)},function(){d(IO,i=!i,i)},function(e){void 0!==e&&(r(3,m=e),function(e,t){void 0!==e&&""!==e&&fetch(`http://localhost:9978/api/template/${e}`,{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((e=>{r(1,p=e.text.template),a.setValue(p),r(2,g=e.text.description),void 0!==t&&t()}))}(m))},e=>{void 0!==e&&(r(3,m=e),r(2,g=""),r(1,p=""),a.setValue(p))},function(e){h=e,r(4,h)},function(){g=this.value,r(2,g)},e=>{b(e.detail.data)},e=>{_(e.detail.data)}]}class Pb extends ae{constructor(e){super(),se(this,e,Tb,kb,o,{})}}function Qb(t){let r,n,o,s,a,l,c,h,u,d,m,O;return{c(){r=v("div"),n=v("div"),o=v("label"),o.textContent="Auto Launch Node-Red?",s=_(),a=v("input"),l=_(),c=v("div"),h=v("label"),h.textContent="Dashboard configured?",u=_(),d=v("input"),w(o,"class","styleLabel svelte-n1ihpd"),w(a,"class","PrefCheck svelte-n1ihpd"),w(a,"type","checkbox"),w(n,"class","labelRadialHolder svelte-n1ihpd"),w(h,"class","styleLabel svelte-n1ihpd"),w(d,"class","PrefCheck svelte-n1ihpd"),w(d,"type","checkbox"),w(c,"class","labelRadialHolder svelte-n1ihpd")},m(e,i){p(e,r,i),f(r,n),f(n,o),f(n,s),f(n,a),a.checked=t[0].REDAuto,f(r,l),f(r,c),f(c,h),f(c,u),f(c,d),d.checked=t[0].REDDashboard,m||(O=[y(a,"change",t[2]),y(a,"change",t[3]),y(d,"change",t[4]),y(d,"change",t[5])],m=!0)},p(e,[t]){1&t&&(a.checked=e[0].REDAuto),1&t&&(d.checked=e[0].REDDashboard)},i:e,o:e,d(e){e&&g(r),m=!1,i(O)}}}function Rb(e,t,r){const i=M();var n={REDAuto:!0,REDDashboard:!0};function o(){!function(e,t){i(e,{data:t})}("changeTodos",{auto:n.REDAuto,dashboard:n.REDDashboard})}return[n,o,function(){n.REDAuto=this.checked,r(0,n)},()=>{o()},function(){n.REDDashboard=this.checked,r(0,n)},()=>{o()}]}class Ab extends ae{constructor(e){super(),se(this,e,Rb,Qb,o,{})}}function $b(t){let r;return{c(){r=v("div"),x(r,"background-color",t[0].backgroundColor)},m(e,t){p(e,r,t)},p(e,[t]){1&t&&x(r,"background-color",e[0].backgroundColor)},i:e,o:e,d(e){e&&g(r)}}}function Lb(e,t,r){let i;return s(e,OO,(e=>r(0,i=e))),[i]}class Eb extends ae{constructor(e){super(),se(this,e,Lb,$b,o,{})}}
/**
     * @category  html5 widgets
     * @package   Kelly
     * @author    Rubchuk Vladimir <torrenttvi@gmail.com>
     * @copyright 2015-2017 Rubchuk Vladimir
     * @license   GPLv3
     * @version   1.19
     *
     * Usage example :
     *
     *   new KellyColorPicker({place : 'color-picker'});
     *
     * ToDo :
     * 
     * Add switch color in colorsavers button (analog of X button in Photoshop)
     *
     **/function Mb(e){var t,r=Math.PI,i=!0,n=new Object;n.radius=4;var o=!1,s=!1,a="quad",l=!1,c=!1,h=!0,u=new Array,d=new Array,f=document.createElement("canvas"),p=!1,g=!1,m=null,v=!1,O=!0,_="mixed",b=new Object;b.tag=!1,b.margin=6;var y,w,S,C,x=!1,k=this,T=200,P="#000000",Q=1,R=!1,A=!1,$=new Array,L=!1,E=new Array;function M(e,t,r){t=!!t;var i=new Object;i.width,i.widthPercentage=22,i.imageData=null,i.align=e,i.selected=t,i.color="#ffffff",i.position,i.paddingY=-4,i.paddingX=4,i.lineWidth=1,i.selectSize=4,"right"==e&&(i.paddingX=-1*i.paddingX),i.selected&&(i.color=P),r&&(i.color=r),i.updateSize=function(){this.width=parseInt(T-T/100*(100-this.widthPercentage)),"left"==this.align?this.position={x:0,y:T-this.width}:"right"==this.align&&(this.position={x:T-this.width,y:T-this.width})},i.calcS=function(e){return Math.abs((e[1].x-e[0].x)*(e[2].y-e[0].y)-(e[2].x-e[0].x)*(e[1].y-e[0].y))/2},i.isDotIn=function(e){var t=new Array;"left"==this.align?(t[0]={x:this.position.x,y:this.position.y},t[1]={x:this.position.x,y:this.position.y+this.width},t[2]={x:this.position.x+this.width,y:this.position.y+this.width}):(t[0]={x:this.position.x+this.width,y:this.position.y},t[1]={x:t[0].x,y:t[0].y+this.width},t[2]={x:t[0].x-this.width,y:this.position.y+this.width});for(var r=0;r<=t.length-1;++r)t[r].x+=this.paddingX,t[r].y+=this.paddingY;var i=this.calcS(t),n=[{x:t[0].x,y:t[0].y},{x:t[1].x,y:t[1].y},{x:e.x,y:e.y}],o=this.calcS(n);return n[1]={x:t[2].x,y:t[2].y},o+=this.calcS(n),n[0]={x:t[1].x,y:t[1].y},o+=this.calcS(n),Math.ceil(o)==Math.ceil(i)},i.draw=function(){f.width=this.width,f.height=this.width,p.clearRect(0,0,this.width,this.width),p.beginPath(),"left"==this.align&&(p.moveTo(this.lineWidth/2,this.width-this.lineWidth),p.lineTo(this.width,this.width-this.lineWidth),p.lineTo(this.lineWidth,this.lineWidth),p.lineTo(this.lineWidth,this.width-this.lineWidth)),"right"==this.align&&(p.moveTo(this.lineWidth/2,this.width-this.lineWidth),p.lineTo(this.width-this.lineWidth,this.width-this.lineWidth),p.lineTo(this.width-this.lineWidth,this.lineWidth),p.lineTo(this.lineWidth,this.width-this.lineWidth)),this.selected&&(p.fillStyle="rgba(255,255,255, 1)",p.fill(),p.strokeStyle="rgba(0, 0, 0, 1)",p.stroke(),p.closePath(),p.beginPath(),p.lineWidth=this.lineWidth,"left"==this.align&&(p.moveTo(this.selectSize,this.width-this.selectSize),p.lineTo(this.width-2*this.selectSize,this.width-this.selectSize),p.lineTo(this.selectSize,2*this.selectSize),p.lineTo(this.selectSize,this.width-this.selectSize)),"right"==this.align&&(p.moveTo(2*this.selectSize,this.width-this.selectSize),p.lineTo(this.width-this.selectSize,this.width-this.selectSize),p.lineTo(this.width-this.selectSize,2*this.selectSize),p.lineTo(2*this.selectSize,this.width-this.selectSize)));var e=U(this.color);p.fillStyle="rgba("+e.r+","+e.g+","+e.b+", 1)",p.fill(),p.strokeStyle="rgba(0, 0, 0, 1)",p.stroke(),this.imageData=p.getImageData(0,0,this.width,this.width),s.drawImage(f,this.position.x+this.paddingX,this.position.y+this.paddingY)};var n=$.length;$[n]=i}var D=new Object;D.width=18,D.imageData=null,D.innerRadius,D.startAngle=0,D.outerRadius,D.outerStrokeStyle="rgba(0,0,0,0.2)",D.innerStrokeStyle="rgba(0,0,0,0.2)",D.pos,D.draw=function(){if(this.imageData)s.putImageData(this.imageData,0,0);else{for(var e=this.startAngle,t=0;t<=360;t++){var i=G(t-2),n=G(t);s.beginPath(),s.moveTo(w,w),s.arc(w,w,this.outerRadius,i,n,!1),s.closePath();var o=F(e/360,1,1);s.fillStyle="rgb("+o.r+", "+o.g+", "+o.b+")",s.fill(),++e>=360&&(e=0)}s.globalCompositeOperation="destination-out",s.beginPath(),s.arc(w,w,this.innerRadius,0,2*r),s.fill(),s.globalCompositeOperation="source-over",s.strokeStyle=this.innerStrokeStyle,s.lineWidth=2,s.stroke(),s.closePath(),s.beginPath(),s.arc(w,w,this.outerRadius,0,2*r),s.strokeStyle=this.outerStrokeStyle,s.lineWidth=2,s.stroke(),s.closePath(),this.imageData=s.getImageData(0,0,T,T)}},D.isDotIn=function(e){return Math.pow(this.pos.x-e.x,2)+Math.pow(this.pos.y-e.y,2)<Math.pow(this.outerRadius,2)&&Math.pow(this.pos.x-e.x,2)+Math.pow(this.pos.y-e.y,2)>Math.pow(this.innerRadius,2)};var B=new Object;B.lineWeight=2,B.height=4,B.paddingX=2,B.path;var I=new Object;I.width=18,I.padding=4,I.outerStrokeStyle="rgba(0,0,0,0.2)",I.innerStrokeStyle="rgba(0,0,0,0.2)",I.height,I.pos,I.updateSize=function(){this.pos={x:T+I.padding,y:I.padding},this.height=T-2*I.padding},I.draw=function(){var e=s.createLinearGradient(0,0,0,this.height),t=F(S.h,1,1);e.addColorStop(0,"rgba("+t.r+","+t.g+","+t.b+",1)"),e.addColorStop(1,"rgba("+t.r+","+t.g+","+t.b+",0)"),s.beginPath(),s.rect(this.pos.x,this.pos.y,this.width,this.height),s.fillStyle="white",s.fill(),s.fillStyle=e,s.fill(),s.strokeStyle="rgba(0,0,0, 0.2)",s.lineWidth=2,s.stroke(),s.closePath()},I.dotToAlpha=function(e){return 1-Math.abs(this.pos.y-e.y)/this.height},I.alphaToDot=function(e){return{x:0,y:this.height-this.height*e}},I.limitDotPosition=function(e){var t=e.y;return t<this.pos.y&&(t=this.pos.y),t>this.pos.y+this.height&&(t=this.pos.y+this.height),{x:this.pos.x,y:t}},I.isDotIn=function(e){return!(e.x<this.pos.x||e.x>this.pos.x+I.width||e.y<this.pos.y||e.y>this.pos.y+this.height)};var j=new Object;function z(e){var t=e.getBoundingClientRect(),r=0,i=0;return l&&(i=I.width+2*I.padding),e===o?t.width<=t.height?r=t.height:t.height<t.width&&(r=t.width):A?"height"==A?r=t.height:"width"==A&&(r=t.width):t.width>t.height?r=t.height:t.height>=t.width&&(r=t.width),r=parseInt(r),l&&(r-=i),!(r<=0)&&r}function W(e,t){var r=1,i=!1;if((e=e.trim(e)).length<=7)"#"==e.charAt(0)&&(e=e.slice(1)),3==e.length?i=e+e:6==e.length&&(i=e);else if("rgb"==e.substring(0,3)){var n=e.split(",");if(n.length>=3&&n.length<=4){n[0]=n[0].replace("rgba(",""),n[0]=n[0].replace("rgb(","");var o={r:parseInt(n[0]),g:parseInt(n[1]),b:parseInt(n[2])};o.r<=255&&o.g<=255&&o.b<=255&&(i=V(o),4==n.length&&((!(r=parseFloat(n[3]))||r<0)&&(r=0),r>1&&(r=1)))}}return(!1!==i||!t)&&(!1===i&&(i="000000"),"#"!=i.charAt(0)&&(i="#"+i),{h:i,a:r})}function q(){if(E.quad)return E.quad;var e=new Object;return e.size,e.padding=2,e.path,e.imageData=null,e.dotToSv=function(e){return{s:Math.abs(this.path[3].x-e.x)/this.size,v:Math.abs(this.path[3].y-e.y)/this.size}},e.svToDot=function(e){var t=this.path[0].x,r=this.path[0].y,i=.02;T<150?i=.07:T<100&&(i=.16);for(var n=0;n<this.size;n++)for(var o=0;o<this.size;o++){var s={x:o+t,y:n+r},a=this.dotToSv(s),l=Math.abs(a.s-e.s),c=Math.abs(a.v-e.v);if(l<i&&c<i)return s}return{x:0,y:0}},e.limitDotPosition=function(e){var t=e.x,r=e.y;return t<this.path[0].x&&(t=this.path[0].x),t>this.path[0].x+this.size&&(t=this.path[0].x+this.size),r<this.path[0].y&&(r=this.path[0].y),r>this.path[0].y+this.size&&(r=this.path[0].y+this.size),{x:t,y:r}},e.draw=function(){this.imageData||(this.imageData=s.createImageData(this.size,this.size));for(var e=0,t=this.path[0].x,r=this.path[0].y,i=0;i<this.size;i++)for(var n=0;n<this.size;n++){var o={x:n+t,y:i+r},a=this.dotToSv(o),l=F(S.h,a.s,a.v);this.imageData.data[e+0]=l.r,this.imageData.data[e+1]=l.g,this.imageData.data[e+2]=l.b,this.imageData.data[e+3]=255,e+=4}s.putImageData(this.imageData,t,r),s.beginPath(),s.strokeStyle="rgba(0,0,0, 0.2)",s.lineWidth=2;for(e=0;e<=this.path.length-1;++e)0==e?s.moveTo(this.path[e].x,this.path[e].y):s.lineTo(this.path[e].x,this.path[e].y);s.stroke(),s.closePath()},e.updateSize=function(){var e=2*D.innerRadius-2*B.paddingX-2*this.padding;this.size=Math.floor(e/Math.sqrt(2)),this.path=new Array,this.path[0]={x:this.size/2*-1,y:this.size/2*-1},this.path[1]={x:this.path[0].x+this.size,y:this.path[0].y},this.path[2]={x:this.path[1].x,y:this.path[1].y+this.size},this.path[3]={x:this.path[2].x-this.size,y:this.path[2].y},this.path[4]={x:this.path[0].x,y:this.path[0].y};for(var t=0;t<=this.path.length-1;++t)this.path[t].x+=D.pos.x,this.path[t].y+=D.pos.y},e.isDotIn=function(e){return!(e.x<this.path[0].x||e.x>this.path[0].x+this.size||e.y<this.path[0].y||e.y>this.path[0].y+this.size)},E.quad=e,e}function H(){if(E.triangle)return E.triangle;var e=new Object;return e.size,e.padding=2,e.path,e.imageData=null,e.followWheel=!0,e.s,e.sOnTop=!1,e.outerRadius,e.limitDotPosition=function(e){var t=e.x,r=e.y,i=this.path[0].x,n=this.path[2].x,o=t,s=r;o=Math.min(Math.max(n,o),i);var a=(this.path[0].y-this.path[1].y)/(this.path[0].x-this.path[1].x),l=Math.ceil(this.path[1].y+a*(o-this.path[1].x));a=(this.path[0].y-this.path[2].y)/(this.path[0].x-this.path[2].x);var c=Math.floor(this.path[2].y+a*(o-this.path[2].x));return t<n&&(D.pos.y,D.pos.x,s=r),{x:o,y:s=Math.min(Math.max(l,s),c)}},e.svToDot=function(e){var r=.02;T<150?r=.07:T<100&&(r=.16);for(var i=0;i<this.size;i++)for(var n=0;n<this.size;n++){var o={x:this.path[1].x+n,y:this.path[1].y+i};if(t.isDotIn(o)){var s=this.dotToSv(o),a=Math.abs(s.s-e.s),l=Math.abs(s.v-e.v);if(a<r&&l<r)return o}}return{x:0,y:0}},e.draw=function(){this.imageData||(this.imageData=p.createImageData(this.size,this.size)),f.width=this.size,f.height=this.size;for(var e=this.path[1].x,r=this.path[1].y,i=0,n=0;n<this.size;n++)for(var o=0;o<this.size;o++){var a={x:this.path[1].x+o,y:this.path[1].y+n};if(t.isDotIn(a)){var l=this.dotToSv(a),c=F(S.h,l.s,l.v);this.imageData.data[i+0]=c.r,this.imageData.data[i+1]=c.g,this.imageData.data[i+2]=c.b,this.imageData.data[i+3]=255}else this.imageData.data[i+0]=0,this.imageData.data[i+1]=0,this.imageData.data[i+2]=0,this.imageData.data[i+3]=0;i+=4}p.putImageData(this.imageData,0,0),s.drawImage(f,e,r),s.beginPath(),s.strokeStyle="rgba(0, 0, 0, 0.3)",s.lineWidth=2;var h=this.path;for(i=0;i<=h.length-1;++i)0==i?s.moveTo(h[i].x,h[i].y):s.lineTo(h[i].x,h[i].y);s.stroke(),s.closePath()},e.calcS=function(e){return Math.abs((e[1].x-e[0].x)*(e[2].y-e[0].y)-(e[2].x-e[0].x)*(e[1].y-e[0].y))/2},e.dotToSv=function(e){var t,r,i=function(e,t){var r=(t[0].x-t[1].x)*(t[0].x-t[1].x)+(t[0].y-t[1].y)*(t[0].y-t[1].y),i=(e.x-t[0].x)*(t[1].x-t[0].x)+(e.y-t[0].y)*(t[1].y-t[0].y),n=!0,o=i/r;o<0&&(o=0,n=!1);o>1&&(o=1,n=!1);return{x:t[0].x+o*(t[1].x-t[0].x),y:t[0].y+o*(t[1].y-t[0].y),pt:n}}({x:e.x,y:e.y},this.vol),n=(t=i,r=this.vol[0],Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)));n<1&&(n=Math.floor(n)),n>this.h-1&&(n=this.h);var o=n/this.h,s=Math.abs(K(e,this.sSide));return s<30&&(s=30),s=60-(s-=30),{s:s/=60,v:o}},e.isDotIn=function(e){var t=[{x:this.path[0].x,y:this.path[0].y},{x:this.path[1].x,y:this.path[1].y},{x:e.x,y:e.y}],r=this.calcS(t);return t[1]={x:this.path[2].x,y:this.path[2].y},r+=this.calcS(t),t[0]={x:this.path[1].x,y:this.path[1].y},r+=this.calcS(t),Math.ceil(r)==Math.ceil(this.s)},e.updateSize=function(){this.outerRadius=D.innerRadius-B.paddingX-this.padding,this.size=Math.floor(2*this.outerRadius*Math.sin(G(60)));var e=Math.sqrt(3)/2*this.size;this.h=Math.sqrt(3)/2*this.size,this.path=new Array,this.path[0]={x:this.outerRadius,y:0},this.path[1]={x:this.path[0].x-e,y:this.size/2*-1},this.path[2]={x:this.path[1].x,y:this.size/2},this.path[3]={x:this.path[0].x,y:this.path[0].y};for(var t=0;t<=this.path.length-1;++t)this.path[t].x+=D.pos.x,this.path[t].y+=D.pos.y;if(this.vol=new Array,this.s=this.calcS(this.path),this.sOnTop){var r=Y(this.path[0],this.path[2]);this.vol[0]={x:this.path[1].x,y:this.path[1].y},this.vol[1]={x:r.x,y:r.y},this.sSide=this.path[1]}else{r=Y(this.path[0],this.path[1]);this.vol[0]={x:this.path[2].x,y:this.path[2].y},this.vol[1]={x:r.x,y:r.y},this.sSide=this.path[2]}},E.triangle=e,e}function N(e,t,r,i){return"object"!=typeof e&&(e=document.getElementById(e)),!!e&&(i||(i=""),u[i+t]=r,e.addEventListener?e.addEventListener(t,u[i+t]):e.attachEvent("on"+t,u[i+t]),!0)}function X(e,t,r){return"object"!=typeof e&&(e=document.getElementById(e)),!!e&&(r||(r=""),!!u[r+t]&&(e.removeEventListener?e.removeEventListener(t,u[r+t]):e.detachEvent("on"+t,u[r+t]),u[r+t]=null,!0))}function F(e,t,r){var i,n,o,s,a,l,c,h;switch(e&&void 0===t&&void 0===r&&(t=e.s,r=e.v,e=e.h),l=r*(1-t),c=r*(1-(a=6*e-(s=Math.floor(6*e)))*t),h=r*(1-(1-a)*t),s%6){case 0:i=r,n=h,o=l;break;case 1:i=c,n=r,o=l;break;case 2:i=l,n=r,o=h;break;case 3:i=l,n=c,o=r;break;case 4:i=h,n=l,o=r;break;case 5:i=r,n=l,o=c}return{r:Math.floor(255*i),g:Math.floor(255*n),b:Math.floor(255*o)}}function Z(e,t,r){e&&void 0===t&&void 0===r&&(t=e.g,r=e.b,e=e.r),e/=255,t/=255,r/=255;var i,n,o=Math.max(e,t,r),s=Math.min(e,t,r),a=o,l=o-s;if(n=0==o?0:l/o,o==s)i=0;else{switch(o){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4}i/=6}return{h:i,s:n,v:a}}function U(e){var t=parseInt("#"==e.charAt(0)?e.slice(1):e,16);return{r:t>>16,g:t>>8&255,b:255&t}}function V(e){var t=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t};return"#"+t(e.r)+t(e.g)+t(e.b)}function G(e){return e*(r/180)}function Y(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function K(e,t,i){t||(t={x:0,y:0});var n=e.x-t.x,o=e.y-t.y,s=180*Math.atan2(o,n)/r;return i&&s<0&&(s=360+s),s}function J(){y=2+B.paddingX,g=!1,D.imageData=null,w=T/2,D.pos={x:w,y:w},D.outerRadius=w-y,D.innerRadius=D.outerRadius-D.width,B.path=[{x:D.innerRadius-B.paddingX,y:-1*B.height},{x:D.outerRadius+B.paddingX,y:-1*B.height},{x:D.outerRadius+B.paddingX,y:B.height},{x:D.innerRadius-B.paddingX,y:B.height},{x:D.innerRadius-B.paddingX,y:-1*B.height}];var e=T;l&&(e+=I.width+2*I.padding),"CANVAS"!=x.tagName&&(x.style.width=e+"px",x.style.height=T+"px"),o.width=e,o.height=T,R!=o&&(o.style.width=e+"px",o.style.height=T+"px");for(var r=0;r<=$.length-1;++r)$[r].updateSize();L&&(L.imageData.triangle=null,L.imageData.quad=null,L.updateSize()),t.updateSize(),l&&I.updateSize()}function ee(e){if(v){if(d.updateinput)if(!(0,d.updateinput)(k,v,e))return;var t="rgba("+C.r+", "+C.g+", "+C.b+", "+Q.toFixed(2)+")";e||(v.value=Q<1&&"mixed"===_?t:"hex"===_||"mixed"===_?P:t),O&&(S.v<.5?v.style.color="#FFF":v.style.color="#000",v.style.background=t)}}function te(){N(o,"mousedown",(function(e){k.mouseDownEvent(e)}),"wait_action_"),N(o,"touchstart",(function(e){k.mouseDownEvent(e)}),"wait_action_"),N(o,"mouseout",(function(e){k.mouseOutEvent(e)}),"wait_action_"),N(window,"touchmove",(function(e){k.touchMoveEvent(e)}),"wait_action_"),N(o,"mousemove",(function(e){k.mouseMoveRest(e)}),"wait_action_")}function re(){X(o,"mousedown","wait_action_"),X(o,"touchstart","wait_action_"),X(o,"mouseout","wait_action_"),X(window,"touchmove","wait_action_"),X(o,"mousemove","wait_action_")}function ie(e){var t,r;e=e||window.event;var i=document.body.scrollLeft+document.documentElement.scrollLeft,n=document.body.scrollTop+document.documentElement.scrollTop;"touchend"==e.type?(t=e.changedTouches[0].clientX+i,r=e.changedTouches[0].clientY+n):"touchmove"==e.type||e.touches?(t=e.touches[0].clientX+i,r=e.touches[0].clientY+n):(t=e.clientX+i,r=e.clientY+n);var s=o.getBoundingClientRect();return{x:t-=s.left+i,y:r-=s.top+n}}function ne(e){for(var t=!1,r=0;r<=$.length-1;++r)$[r].selected&&(t=r),$[r].selected=!1;var i=!1;for(r=0;r<=$.length-1;++r)if(r==e){$[r].selected=!0,k.setColorByHex($[r].color),i=!0;break}i&&d.selectcolorsaver&&(0,d.selectcolorsaver)(k,$[e]);return i||!1===t||($[t].selected=!0),i}function oe(){for(var e=0;e<=$.length-1;++e)$[e].selected&&($[e].color=P)}function se(){if($.length)for(var e=0;e<=$.length-1;++e)$[e].draw()}function ae(){if(!s||(s.clearRect(0,0,o.width,o.height),!(g?(s.putImageData(m,0,0),se(),1):(D.draw(),t.draw(),l&&I.draw(),se(),L&&L.draw(),c||(m=s.getImageData(0,0,o.width,o.height),g=!0),1))))return!1;var e=360*S.h-D.startAngle;if(l){s.beginPath();var i=I.height*(1-Q);s.rect(I.pos.x-2,I.padding+i-1,I.width+4,2),s.strokeStyle="rgba(0,0,0, 0.8)",s.lineWidth=2,s.stroke(),s.closePath()}s.beginPath();for(var a=function(e,t){t=G(t);for(var r=new Array,i=0;i<=e.length-1;++i)r[i]={x:e[i].x*Math.cos(t)-e[i].y*Math.sin(t),y:e[i].x*Math.sin(t)+e[i].y*Math.cos(t)};return r}(B.path,e,(D.pos.x,D.pos.y)),h=0;h<=a.length-1;++h)a[h].x+=D.pos.x,a[h].y+=D.pos.y,0==h?s.moveTo(a[h].x,a[h].y):s.lineTo(a[h].x,a[h].y);return s.strokeStyle="rgba(0,0,0,0.8)",s.lineWidth=B.lineWeight,s.stroke(),s.closePath(),S.v>.5&&S.s<.5?s.strokeStyle="rgba(0, 0, 0, 1)":s.strokeStyle="rgba(255, 255, 255, 1)",s.beginPath(),s.lineWidth=2,s.arc(S.x,S.y,n.radius,0,2*r),s.stroke(),s.closePath(),!1}j.svCursorData=null,j.stCursor=null,j.curType=0,j.size=16,j.cEl=document.body,j.initSvCursor=function(){if(!o)return!1;if(this.curType=1,this.stCursor||(this.stCursor=window.getComputedStyle(this.cEl).cursor,this.stCursor||(this.stCursor="auto")),this.svCursorData)return this.cEl.style.cursor=this.svCursorData,!0;if(!f)return!1;var e=this.size+2;f.width=e,f.height=e,p.clearRect(0,0,this.size,this.size),p.strokeStyle="rgba(255, 255, 255, 1)",p.beginPath(),p.lineWidth=2,p.arc(e/2,e/2,this.size/2,0,2*r),p.stroke(),p.closePath();var t=e,i=f.toDataURL();return this.svCursorData="url("+i+") "+t/2+" "+t/2+", auto",!!this.svCursorData&&(this.cEl.style.cursor=this.svCursorData,-1===this.cEl.style.cursor.indexOf(i)&&(this.svCursorData="crosshair",this.cEl.style.cursor="crosshair"),!0)},j.initStandartCursor=function(){this.stCursor&&(j.curType=0,this.cEl.style.cursor=this.stCursor)},j.updateCursor=function(e){i&&(Mb.cursorLock||(t.isDotIn(e)?j.initSvCursor():j.initStandartCursor()))},this.popUpClose=function(e){if(!1!==b.tag){if(e){if(e.target==v||e.target==o)return!1;if(e.target==b.tag)return!1}b.tag.style.display="none",Mb.activePopUp==k&&(Mb.activePopUp=!1)}},this.popUpShow=function(e){if(!1!==b.tag){if(d.popupshow)if(!(0,d.popupshow)(k,e))return;Mb.popupEventsInclude||(N(document,"click",(function(e){return!!Mb.activePopUp&&Mb.activePopUp.popUpClose(e)}),"popup_close_"),N(window,"resize",(function(e){if(Mb.activePopUp)return Mb.activePopUp.popUpShow(e)}),"popup_resize_"),Mb.popupEventsInclude=!0),Mb.activePopUp&&Mb.activePopUp.popUpClose(!1);var t=k.getCanvas().width,r=k.getAlphaFig();r&&(t-=r.width+r.padding);var i=window.getComputedStyle(b.tag),n=parseInt(i.paddingBottom)+parseInt(i.paddingTop);n<=0&&(n=0);var o=v.getBoundingClientRect(),s=o.top+(window.scrollY||window.pageYOffset||document.body.scrollTop)-n,a=o.left+(window.scrollX||window.pageXOffset||document.body.scrollLeft);return b.tag.style.top=s-t-b.margin+"px",b.tag.style.left=a+"px",b.tag.style.display="block",Mb.activePopUp=k,!1}},this.setHueByDot=function(e){var t=K(e,D.pos)+D.startAngle;(t<0&&(t=360+t),S.h=t/360,C=F(S.h,S.s,S.v),P=V(C),oe(),d.change)&&(0,d.change)(k);ee(),g=!1,ae()},this.setColorForColorSaver=function(e,t){var r=W(e,!0);if(r){var i=k.getColorSaver(t);return i.selected?this.setColorByHex(e,!1):(i.color=r.h,ae()),!0}},this.setColor=function(e,t){k.setColorByHex(e,t)},this.setColorByHex=function(e,r){r||(r=!1);var i=Q;if(!1!==e){if(!e||!e.length)return;var n=W(e,!0);if(!n)return;e=n.h,l&&(i=n.a)}else e=P;if(l&&e==P&&g&&i!=Q)return Q=i,void ae();if(!P||e!=P||!g){Q=i,C=U(e),P=e,S=Z(C);var o=t.svToDot(S);if(S.x=o.x,S.y=o.y,g=!1,oe(),ae(),d.change)(0,d.change)(k);ee(r)}},this.setAlphaByDot=function(e){(Q=I.dotToAlpha(e),d.change)&&(0,d.change)(k);ee(),ae()},this.setAlpha=function(e){Q=e,ee(),ae()},this.setColorByDot=function(e){var r=t.dotToSv(e);(S.s=r.s,S.v=r.v,S.x=e.x,S.y=e.y,S.s>1&&(S.s=1),S.s<0&&(S.s=0),S.v>1&&(S.v=1),S.v<0&&(S.v=0),C=F(S.h,S.s,S.v),P=V(C),oe(),d.change)&&(0,d.change)(k);ee(),ae()},this.mouseOutEvent=function(e){j.curType>0&&!Mb.cursorLock&&j.initStandartCursor()},this.mouseMoveRest=function(e){if(!c&&h){h=!1;var t=ie(e);if(j.updateCursor(t),requestAnimationFrame((function(){h=!0})),d.mousemoverest)(0,d.mousemoverest)(e,k,t)}},this.touchMoveEvent=function(e){c&&event.preventDefault()},this.mouseDownEvent=function(e){e.preventDefault();var r,i=!1,n=ie(e);if(D.isDotIn(n))c="wheel",k.setHueByDot(n),r=function(e){k.wheelMouseMove(e,n)},i=function(e){Mb.cursorLock=!1,k.wheelMouseUp(e,n)};else if(t.isDotIn(n))c="sv",k.setColorByDot(n),r=function(e){k.svMouseMove(e,n)},i=function(e){Mb.cursorLock=!1,k.svMouseUp(e,n)};else if(l&&I.isDotIn(n))c="alpha",k.setAlphaByDot(n),r=function(e){k.alphaMouseMove(e,n)},i=function(e){Mb.cursorLock=!1,k.alphaMouseUp(e,n)};else if(L&&L.isDotIn(n))k.setMethod();else if($.length)for(var o=0;o<=$.length-1;++o)if($[o].isDotIn(n)){ne(o);break}r&&i&&(re(),Mb.cursorLock=k,N(document,"mouseup",i,"action_process_"),N(document,"mousemove",r,"action_process_"),N(document,"touchend",i,"action_process_"),N(document,"touchmove",r,"action_process_"))},this.wheelMouseMove=function(e,t){if(e.preventDefault(),c&&h){h=!1;var r=ie(e);if(requestAnimationFrame((function(){h=!0})),k.setHueByDot(r),d.mousemoveh)(0,d.mousemoveh)(e,k,r)}},this.wheelMouseUp=function(e,t){if(e.preventDefault(),c){X(document,"mouseup","action_process_"),X(document,"mousemove","action_process_"),X(document,"touchend","action_process_"),X(document,"touchmove","action_process_"),te(),c=!1,g=!1,ae();var r=ie(e);if(j.updateCursor(r),d.mouseuph)(0,d.mouseuph)(e,k,r)}},this.alphaMouseMove=function(e,t){if(e.preventDefault(),c&&h){h=!1;var r=ie(e);if(r=I.limitDotPosition(r),requestAnimationFrame((function(){h=!0})),k.setAlphaByDot(r),d.mousemovealpha)(0,d.mousemovealpha)(e,k,r)}},this.alphaMouseUp=function(e,t){if(e.preventDefault(),c){X(document,"mouseup","action_process_"),X(document,"mousemove","action_process_"),X(document,"touchend","action_process_"),X(document,"touchmove","action_process_"),te(),c=!1;var r=ie(e);if(j.updateCursor(r),d.mouseupalpha)(0,d.mouseupalpha)(e,k,r)}},this.svMouseMove=function(e,r){if(e.preventDefault(),c&&h){h=!1;var i=ie(e);if(i=t.limitDotPosition(i),requestAnimationFrame((function(){h=!0})),k.setColorByDot(i),d.mousemovesv)(0,d.mousemovesv)(e,k,i)}},this.svMouseUp=function(e,t){if(e.preventDefault(),c){X(document,"mouseup","action_process_"),X(document,"mousemove","action_process_"),X(document,"touchend","action_process_"),X(document,"touchmove","action_process_"),te(),c=!1;var r=ie(e);if(j.updateCursor(r),l&&(g=!1,ae()),d.mouseupsv)(0,d.mouseupsv)(e,k,r)}},this.addUserEvent=function(e,t){return d[e]=t,!0},this.removeUserEvent=function(e){return!!d[e]&&(d[e]=null,!0)},this.getCanvas=function(){return!!s&&o},this.getCtx=function(){return s||!1},this.getInput=function(){return v},this.getSvFig=function(){return t},this.getSvFigCursor=function(){return n},this.getWheel=function(){return D},this.getWheelCursor=function(){return B},this.getCurColorHsv=function(){return S},this.getCurColorRgb=function(){return C},this.getCurColorHex=function(){return P},this.getCurColorRgba=function(){return{r:C.r,g:C.g,b:C.b,a:Q}},this.getCurAlpha=function(){return Q},this.getAlphaFig=function(){return!!l&&I},this.getPopup=function(){return b},this.getSize=function(){return T},this.getColorSaver=function(e){for(var t=0;t<=$.length-1;++t)if(!e&&$[t].selected||$[t].align==e)return $[t].rgb=U($[t].color),$[t].hsv=Z($[t].rgb.r,$[t].rgb.g,$[t].rgb.b),$[t]},this.setColorSaver=function(e){if(!e)return!1;for(var t=0;t<=$.length-1;++t)if($[t].align==e)return ne(t),$[t]},this.updateView=function(e){return!!s&&(e&&(D.imageData=null,t.imageData=null,m=null),g=!1,J(),ae(),!0)},this.resize=function(e,r){return!!s&&(e==T&&!r||(g=!1,D.imageData=null,t.imageData=null,m=null,T=e,J(),k.setColorByHex(!1),!1))},this.syncSize=function(e){if(!R)return!1;var t=z(R);return t&&k.resize(t),!1},this.setMethod=function(e){if(e||(e="triangle","triangle"==a&&(e="quad")),e==a)return!1;if("quad"!=a&&"triangle"!=a)return!1;("quad"==(a=e)&&(t=q()),"triangle"==a&&(t=H()),k.resize(T,!0),d.setmethod)&&(0,d.setmethod)(k,a);return!0},this.destroy=function(){if(!k)return!1;j.curType>0&&(Mb.cursorLock=!1,j.initStandartCursor()),c&&(X(document,"mouseup","action_process_"),X(document,"mousemove","action_process_"),X(document,"touchend","action_process_"),X(document,"touchmove","action_process_"),c=!1),b.tag&&X(v,"click","popup_"),v&&(X(v,"click","input_edit_"),X(v,"change","input_edit_"),X(v,"keyup","input_edit_"),X(v,"keypress","input_edit_")),Mb.popupEventsInclude&&u.popup_close_click&&(Mb.activePopUp&&Mb.activePopUp.popUpClose(!1),X(document,"click","popup_close_"),X(window,"resize","popup_resize_"),Mb.popupEventsInclude=!1),D.imageData=null,t.imageData=null,m=null,f=null,x&&x.parentNode&&x.parentNode.removeChild(x),R&&X(window,"resize","canvas_"),re(),k=null},function(e){var n="",c="";if(void 0!==e.alpha_slider&&(e.alphaSlider=e.alpha_slider),void 0!==e.input_color&&(e.inputColor=e.input_color),void 0!==e.input_format&&(e.inputFormat=e.input_format),e.input&&"object"!=typeof e.input?(e.input=document.getElementById(e.input),v=e.input):"object"==typeof e.input&&(v=e.input),void 0!==e.changeCursor&&(i=e.changeCursor),void 0!==e.alpha&&(Q=e.alpha),void 0!==e.alphaSlider&&(l=e.alphaSlider),void 0!==e.inputColor&&(O=e.inputColor),void 0!==e.inputFormat&&(_=e.inputFormat),e.userEvents&&(d=e.userEvents),e.place&&"object"!=typeof e.place&&(c=e.place,e.place=document.getElementById(e.place)),e.place)x=e.place;else if(v){b.tag=document.createElement("div"),b.tag.className="popup-kelly-color",e.popupClass?b.tag.className=e.popupClass:(b.tag.className="popup-kelly-color",b.tag.style.position="absolute",b.tag.style.bottom="0px",b.tag.style.left="0px",b.tag.style.display="none",b.tag.style.backgroundColor="#e1e1e1",b.tag.style.border="1px solid #bfbfbf",b.tag.style.boxShadow="7px 7px 14px -3px rgba(0,0,0,0.24)",b.tag.style.borderTopLeftRadius="4px",b.tag.style.borderTopRightRadius="4px",b.tag.style.borderBottomLeftRadius="4px",b.tag.style.borderBottomRightRadius="4px",b.tag.style.padding="12px",b.tag.style.boxSizing="content-box"),x=b.tag,document.getElementsByTagName("body")[0].appendChild(b.tag),N(v,"click",(function(e){return k.popUpShow(e)}),"popup_")}else n+='| "place" ('+c+") not not found";var h=!1;if(e.color?h=W(e.color):v&&v.value&&(h=W(v.value)),h&&(P=h.h,l&&(Q=h.a)),!e.method||"triangle"!=e.method&&"quad"!=e.method||(a=e.method),function(){if(!x)return!1;"CANVAS"!=x.tagName?(o=document.createElement("CANVAS"),x.appendChild(o)):o=x;void 0!==window.G_vmlCanvasManager&&(o=window.G_vmlCanvasManager.initElement(o),f=window.G_vmlCanvasManager.initElement(f));return!(!o.getContext||!o.getContext("2d"))&&(s=o.getContext("2d"),p=f.getContext("2d"),!0)}()||(n+=" | cant init canvas context"),e.resizeWith&&("object"!=typeof e.resizeWith&&"boolean"!=typeof e.resizeWith&&(e.resizeWith=document.getElementById(e.resizeWith)),R=!0===e.resizeWith?o:e.resizeWith,e.resizeSide&&(A=e.resizeSide),R&&(z(R)&&(e.size=z(R)),N(window,"resize",(function(e){return k.syncSize(e)}),"canvas_"))),e.size&&e.size>0&&(T=e.size),n)"undefined"!=typeof console&&console.log("KellyColorPicker : "+n);else{if("quad"==a&&(t=q()),"triangle"==a&&(t=H()),v){var u=function(e){(e=e||window.event).target||(e.target=e.srcElement),k.setColorByHex(e.target.value,!0)};N(v,"click",u,"input_edit_"),N(v,"change",u,"input_edit_"),N(v,"keyup",u,"input_edit_"),N(v,"keypress",u,"input_edit_")}e.colorSaver&&(M("left",!0),M("right")),e.methodSwitch&&((L=new Object).size,L.sizePercentage=10,L.position,L.paddingY=4,L.paddingX=4,L.imageData=new Array,L.lineWidth=2,L.color="#c1ebf5",L.updateSize=function(){this.size=parseInt(T-T/100*(100-this.sizePercentage)),this.size<16&&(this.size=16),this.position={x:this.paddingX,y:this.paddingY}},L.draw=function(){if(this.imageData[a])s.putImageData(this.imageData[a],this.position.x,this.position.y);else{var e=U(this.color);f.width=this.size,f.height=this.size,p.clearRect(0,0,this.size,this.size),p.beginPath();var t,i="triangle";if("triangle"==a&&(i="quad"),p.beginPath(),this.size<35)var n=o=f.width/2;else{var o=f.width/2-this.lineWidth;p.arc(this.size/2,this.size/2,o,0,2*r),p.strokeStyle="rgba(0, 0, 0, 0.4)",p.lineWidth=this.lineWidth,p.stroke(),n=o-6,p.closePath(),p.beginPath(),p.arc(this.size/2,this.size/2,n,0,2*r),p.strokeStyle="rgba(0, 0, 0, 0.4)",p.lineWidth=this.lineWidth,p.stroke(),p.closePath()}if(p.beginPath(),"quad"==i){var l=2*n-4;t=Math.floor(l/Math.sqrt(2));var c=(this.size-t)/2;(h={x:c+t,y:c+t/2}).y=h.y-t/2,p.moveTo(h.x,h.y),p.lineTo(h.x-t,h.y),p.lineTo(h.x-t,h.y+t),p.lineTo(h.x,h.y+t)}else{t=Math.floor((2*n-4)*Math.sin(G(60)));var h={x:2*n+(o-n),y:this.size/2},u=Math.sqrt(3)/2*t;p.moveTo(h.x,h.y),p.lineTo(h.x-u,h.y-t/2),p.lineTo(h.x-u,h.y+t/2),p.lineTo(h.x,h.y)}p.lineTo(h.x,h.y),p.fillStyle="rgba("+e.r+","+e.g+","+e.b+", 1)",p.fill(),p.lineWidth=this.lineWidth,p.strokeStyle="rgba(0, 0, 0, 0.6)",p.stroke(),p.closePath(),this.imageData[a]=p.getImageData(0,0,f.width,f.width),s.drawImage(f,this.position.x,this.position.y)}},L.isDotIn=function(e){return e.x>=this.position.x&&e.x<=this.position.x+this.size&&e.y>=this.position.y&&e.y<=this.position.y+this.size}),te(),J(),k.setColorByHex(!1)}}(e)}function Db(e){let t,r,n,o,s,a,l,c,h,u,d,m,b,C,k,T,P,Q;return{c(){t=v("div"),r=v("p"),n=O("The color for "),o=O(e[2]),s=O(":"),a=_(),l=v("canvas"),c=v("br"),h=_(),u=v("input"),d=_(),m=v("button"),b=O("Select"),C=_(),k=v("button"),T=O("Quit"),w(l,"id","picker"),w(u,"id","color"),u.value=e[0],x(m,"background-color",e[5].textAreaColor),x(m,"font-family",e[5].font),x(m,"color",e[5].textColor),x(m,"font-size",e[5].fontSize),w(m,"class","svelte-6rjn91"),x(k,"background-color",e[5].textAreaColor),x(k,"font-family",e[5].font),x(k,"color",e[5].textColor),x(k,"font-size",e[5].fontSize),w(k,"class","svelte-6rjn91"),w(t,"id","colorPicker"),x(t,"background-color",e[5].backgroundColor),x(t,"font-family",e[5].font),x(t,"color",e[5].textColor),x(t,"font-size",e[5].fontSize),w(t,"class","svelte-6rjn91")},m(i,g){p(i,t,g),f(t,r),f(r,n),f(r,o),f(r,s),f(t,a),f(t,l),e[11](l),f(t,c),f(t,h),f(t,u),e[12](u),f(t,d),f(t,m),f(m,b),f(t,C),f(t,k),f(k,T),P||(Q=[y(u,"keyup",e[13]),y(m,"click",e[14]),y(k,"click",e[15])],P=!0)},p(e,r){4&r&&S(o,e[2]),1&r&&u.value!==e[0]&&(u.value=e[0]),32&r&&x(m,"background-color",e[5].textAreaColor),32&r&&x(m,"font-family",e[5].font),32&r&&x(m,"color",e[5].textColor),32&r&&x(m,"font-size",e[5].fontSize),32&r&&x(k,"background-color",e[5].textAreaColor),32&r&&x(k,"font-family",e[5].font),32&r&&x(k,"color",e[5].textColor),32&r&&x(k,"font-size",e[5].fontSize),32&r&&x(t,"background-color",e[5].backgroundColor),32&r&&x(t,"font-family",e[5].font),32&r&&x(t,"color",e[5].textColor),32&r&&x(t,"font-size",e[5].fontSize)},d(r){r&&g(t),e[11](null),e[12](null),P=!1,i(Q)}}}function Bb(t){let r,i=t[1]&&Db(t);return{c(){i&&i.c(),r=b()},m(e,t){i&&i.m(e,t),p(e,r,t)},p(e,[t]){e[1]?i?i.p(e,t):(i=Db(e),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&g(r)}}}function Ib(e,t,r){let i;s(e,OO,(e=>r(5,i=e)));let n,o,{color:a=""}=t,{id:l=0}=t,{show:c=!1}=t,{item:h="circle"}=t,{explainText:u=""}=t;const d=M();function f(e,t){d(e,{data:t})}function p(){f("quitColorPicker",{})}function g(){document.body.style.cursor="default",f("colorChanged",{color:o.value,id:l})}function m(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),g())}E((()=>{c&&new Mb({place:n,input:o,colorSaver:!0,methodSwitch:!0})}));return e.$$set=e=>{"color"in e&&r(0,a=e.color),"id"in e&&r(9,l=e.id),"show"in e&&r(1,c=e.show),"item"in e&&r(10,h=e.item),"explainText"in e&&r(2,u=e.explainText)},[a,c,u,n,o,i,p,g,m,l,h,function(e){B[e?"unshift":"push"]((()=>{n=e,r(3,n)}))},function(e){B[e?"unshift":"push"]((()=>{o=e,r(4,o)}))},e=>{m(e)},e=>{g()},e=>{p()}]}Mb.cursorLock=!1,Mb.activePopUp=!1,Mb.popupEventsInclude=!1,Mb.attachToInputByClass=function(e,t){for(var r=new Array,i=document.getElementsByClassName(e),n=0;n<i.length;n++)t?t.input=i[n]:t={input:i[n],size:150},r.push(new Mb(t));return r};class jb extends ae{constructor(e){super(),se(this,e,Ib,Bb,o,{color:0,id:9,show:1,item:10,explainText:2})}}function zb(e,t,r){const i=e.slice();return i[40]=t[r],i[42]=r,i}function Wb(e,t,r){const i=e.slice();return i[43]=t[r],i}function qb(e){let t,r,n,o,s,a,l,c,h,u,d=void 0!==e[7]&&Nb(e);return{c(){t=v("select"),d&&d.c(),r=v("option"),r.textContent="New",n=_(),o=v("button"),s=O("Update Theme"),a=_(),l=v("button"),c=O("Delete Theme"),r.__value="New",r.value=r.__value,w(t,"class","prefSelector svelte-1igofh5"),x(t,"background-color",e[8].textAreaColor),x(t,"color",e[8].textColor),void 0===e[5]&&N((()=>e[17].call(t))),x(o,"background-color",e[8].textAreaColor),x(o,"font-family",e[8].font),x(o,"color",e[8].textColor),x(o,"font-size",e[8].fontSize),w(o,"class","svelte-1igofh5"),x(l,"background-color",e[8].textAreaColor),x(l,"font-family",e[8].font),x(l,"color",e[8].textColor),x(l,"font-size",e[8].fontSize),w(l,"class","svelte-1igofh5")},m(i,g){p(i,t,g),d&&d.m(t,null),f(t,r),k(t,e[5]),p(i,n,g),p(i,o,g),f(o,s),p(i,a,g),p(i,l,g),f(l,c),h||(u=[y(t,"change",e[17]),y(t,"change",e[18]),y(o,"click",e[13]),y(l,"click",e[14])],h=!0)},p(e,i){void 0!==e[7]?d?d.p(e,i):(d=Nb(e),d.c(),d.m(t,r)):d&&(d.d(1),d=null),256&i[0]&&x(t,"background-color",e[8].textAreaColor),256&i[0]&&x(t,"color",e[8].textColor),160&i[0]&&k(t,e[5]),256&i[0]&&x(o,"background-color",e[8].textAreaColor),256&i[0]&&x(o,"font-family",e[8].font),256&i[0]&&x(o,"color",e[8].textColor),256&i[0]&&x(o,"font-size",e[8].fontSize),256&i[0]&&x(l,"background-color",e[8].textAreaColor),256&i[0]&&x(l,"font-family",e[8].font),256&i[0]&&x(l,"color",e[8].textColor),256&i[0]&&x(l,"font-size",e[8].fontSize)},d(e){e&&g(t),d&&d.d(),e&&g(n),e&&g(o),e&&g(a),e&&g(l),h=!1,i(u)}}}function Hb(e){let t,r,n,o,s,a;return{c(){t=v("input"),r=_(),n=v("button"),o=O("Save New"),w(t,"class","prefInput svelte-1igofh5"),x(t,"background-color",e[8].textAreaColor),x(t,"color",e[8].textColor),x(n,"background-color",e[8].textAreaColor),x(n,"font-family",e[8].font),x(n,"color",e[8].textColor),x(n,"font-size",e[8].fontSize),w(n,"class","svelte-1igofh5")},m(i,l){p(i,t,l),C(t,e[5]),p(i,r,l),p(i,n,l),f(n,o),s||(a=[y(t,"input",e[15]),y(t,"change",e[16]),y(n,"click",e[12])],s=!0)},p(e,r){256&r[0]&&x(t,"background-color",e[8].textAreaColor),256&r[0]&&x(t,"color",e[8].textColor),160&r[0]&&t.value!==e[5]&&C(t,e[5]),256&r[0]&&x(n,"background-color",e[8].textAreaColor),256&r[0]&&x(n,"font-family",e[8].font),256&r[0]&&x(n,"color",e[8].textColor),256&r[0]&&x(n,"font-size",e[8].fontSize)},d(e){e&&g(t),e&&g(r),e&&g(n),s=!1,i(a)}}}function Nb(e){let t,r=e[7],i=[];for(let t=0;t<r.length;t+=1)i[t]=Xb(Wb(e,r,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=b()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);p(e,t,r)},p(e,n){if(128&n[0]){let o;for(r=e[7],o=0;o<r.length;o+=1){const s=Wb(e,r,o);i[o]?i[o].p(s,n):(i[o]=Xb(s),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d(e){m(i,e),e&&g(t)}}}function Xb(e){let t,r,i,n=e[43]+"";return{c(){t=v("option"),r=O(n),t.__value=i=e[43],t.value=t.__value},m(e,i){p(e,t,i),f(t,r)},p(e,o){128&o[0]&&n!==(n=e[43]+"")&&S(r,n),128&o[0]&&i!==(i=e[43])&&(t.__value=i,t.value=t.__value)},d(e){e&&g(t)}}}function Fb(e){let t,r,i,n,o,s,a,l,c,h,u,d,m=e[40].color+"";function b(...t){return e[19](e[40],...t)}return{c(){t=v("div"),r=v("label"),i=O("#"),n=O(e[42]),o=_(),s=v("div"),a=_(),l=v("label"),c=O(m),h=_(),w(r,"class","circlePickerLabel svelte-1igofh5"),w(s,"class","circlePicker svelte-1igofh5"),x(s,"background-color",e[40].color),w(l,"class","circlePickerLabel svelte-1igofh5"),w(t,"class","circlePickerWrap svelte-1igofh5")},m(e,g){p(e,t,g),f(t,r),f(r,i),f(r,n),f(t,o),f(t,s),f(t,a),f(t,l),f(l,c),f(t,h),u||(d=y(s,"click",b),u=!0)},p(t,r){e=t,256&r[0]&&x(s,"background-color",e[40].color),256&r[0]&&m!==(m=e[40].color+"")&&S(c,m)},d(e){e&&g(t),u=!1,d()}}}function Zb(e){let t,r;return t=new jb({props:{item:e[4],explainText:e[6],color:e[0],id:e[1],show:e[2]}}),t.$on("colorChanged",e[37]),t.$on("quitColorPicker",e[38]),{c(){ie(t.$$.fragment)},m(e,i){ne(t,e,i),r=!0},p(e,r){const i={};16&r[0]&&(i.item=e[4]),64&r[0]&&(i.explainText=e[6]),1&r[0]&&(i.color=e[0]),2&r[0]&&(i.id=e[1]),4&r[0]&&(i.show=e[2]),t.$set(i)},i(e){r||(ee(t.$$.fragment,e),r=!0)},o(e){te(t.$$.fragment,e),r=!1},d(e){oe(t,e)}}}function Ub(e){let t,r,n,o,s,a,l,c,h,u,d,C,k,T,P,Q,R,A,$,L,E,M,D,B,I,j,z,W,q,H,N,X,F,Z,U,V,G,Y,re,ie,ne,oe,se,ae,le,ce,he,ue,de,fe,pe,ge,me,ve,Oe,_e,be,ye,we,Se,Ce,xe,ke,Te,Pe,Qe,Re,Ae,$e,Le,Ee,Me,De,Be,Ie,je,ze,We,qe,He,Ne,Xe,Fe,Ze,Ue,Ve,Ge,Ye,Ke,Je,et,tt,rt,it,nt,ot,st,at,lt,ct,ht,ut,dt,ft,pt,gt,mt,vt,Ot,_t,bt,yt,wt,St,Ct,xt,kt,Tt,Pt,Qt,Rt,At,$t,Lt,Et,Mt,Dt,Bt,It,jt,zt,Wt,qt,Ht,Nt=e[8].textAreaColor+"",Xt=e[8].backgroundColor+"",Ft=e[8].textColor+"",Zt=e[8].borderColor+"",Ut=e[8].functionColor+"",Vt=e[8].stringColor+"",Gt=e[8].constantColor+"",Yt=e[8].keywordColor+"",Kt=e[8].highlightBackgroundColor+"",Jt=e[8].selectionColor+"",er=e[8].Cyan+"",tr=e[8].Green+"",rr=e[8].Orange+"",ir=e[8].Pink+"",nr=e[8].Purple+"",or=e[8].Red+"",sr=e[8].Yellow+"";function ar(e,t){return e[3]?Hb:qb}let lr=ar(e),cr=lr(e),hr=e[8].buttons,ur=[];for(let t=0;t<hr.length;t+=1)ur[t]=Fb(zb(e,hr,t));let dr=void 0!==e[8]&&Zb(e);return{c(){t=v("div"),r=v("label"),r.textContent="Name of theme:",n=_(),cr.c(),o=_(),s=v("h3"),s.textContent="Circle Colors",a=_(),l=v("div");for(let e=0;e<ur.length;e+=1)ur[e].c();c=_(),h=v("h3"),h.textContent="Various Other Colors",u=_(),d=v("div"),C=v("label"),C.textContent="textAreaColor",k=_(),T=v("div"),P=_(),Q=v("label"),R=O(Nt),A=_(),$=v("label"),$.textContent="backgroundColor",L=_(),E=v("div"),M=_(),D=v("label"),B=O(Xt),I=_(),j=v("label"),j.textContent="textColor",z=_(),W=v("div"),q=_(),H=v("label"),N=O(Ft),X=_(),F=v("label"),F.textContent="borderColor",Z=_(),U=v("div"),V=_(),G=v("label"),Y=O(Zt),re=_(),ie=v("label"),ie.textContent="functionColor",ne=_(),oe=v("div"),se=_(),ae=v("label"),le=O(Ut),ce=_(),he=v("label"),he.textContent="stringColor",ue=_(),de=v("div"),fe=_(),pe=v("label"),ge=O(Vt),me=_(),ve=v("label"),ve.textContent="constantColor",Oe=_(),_e=v("div"),be=_(),ye=v("label"),we=O(Gt),Se=_(),Ce=v("label"),Ce.textContent="keywordColor",xe=_(),ke=v("div"),Te=_(),Pe=v("label"),Qe=O(Yt),Re=_(),Ae=v("label"),Ae.textContent="highlightBackgroundColor",$e=_(),Le=v("div"),Ee=_(),Me=v("label"),De=O(Kt),Be=_(),Ie=v("label"),Ie.textContent="selectionColor",je=_(),ze=v("div"),We=_(),qe=v("label"),He=O(Jt),Ne=_(),Xe=v("label"),Xe.textContent="Cyan",Fe=_(),Ze=v("div"),Ue=_(),Ve=v("label"),Ge=O(er),Ye=_(),Ke=v("label"),Ke.textContent="Green",Je=_(),et=v("div"),tt=_(),rt=v("label"),it=O(tr),nt=_(),ot=v("label"),ot.textContent="Orange",st=_(),at=v("div"),lt=_(),ct=v("label"),ht=O(rr),ut=_(),dt=v("label"),dt.textContent="Pink",ft=_(),pt=v("div"),gt=_(),mt=v("label"),vt=O(ir),Ot=_(),_t=v("label"),_t.textContent="Purple",bt=_(),yt=v("div"),wt=_(),St=v("label"),Ct=O(nr),xt=_(),kt=v("label"),kt.textContent="Red",Tt=_(),Pt=v("div"),Qt=_(),Rt=v("label"),At=O(or),$t=_(),Lt=v("label"),Lt.textContent="Yellow",Et=_(),Mt=v("div"),Dt=_(),Bt=v("label"),It=O(sr),jt=_(),dr&&dr.c(),zt=b(),w(t,"id","themeName"),w(t,"class","svelte-1igofh5"),w(l,"class","circlePickersWrap svelte-1igofh5"),w(C,"class","variousPickerLabel1 svelte-1igofh5"),w(T,"class","circlePicker svelte-1igofh5"),x(T,"background-color",e[8].textAreaColor),w(Q,"class","variousPickerLabel2 svelte-1igofh5"),w($,"class","variousPickerLabel1 svelte-1igofh5"),w(E,"class","circlePicker svelte-1igofh5"),x(E,"background-color",e[8].backgroundColor),w(D,"class","variousPickerLabel2 svelte-1igofh5"),w(j,"class","variousPickerLabel1 svelte-1igofh5"),w(W,"class","circlePicker svelte-1igofh5"),x(W,"background-color",e[8].textColor),w(H,"class","variousPickerLabel2 svelte-1igofh5"),w(F,"class","variousPickerLabel1 svelte-1igofh5"),w(U,"class","circlePicker svelte-1igofh5"),x(U,"background-color",e[8].borderColor),w(G,"class","variousPickerLabel2 svelte-1igofh5"),w(ie,"class","variousPickerLabel1 svelte-1igofh5"),w(oe,"class","circlePicker svelte-1igofh5"),x(oe,"background-color",e[8].functionColor),w(ae,"class","variousPickerLabel2 svelte-1igofh5"),w(he,"class","variousPickerLabel1 svelte-1igofh5"),w(de,"class","circlePicker svelte-1igofh5"),x(de,"background-color",e[8].stringColor),w(pe,"class","variousPickerLabel2 svelte-1igofh5"),w(ve,"class","variousPickerLabel1 svelte-1igofh5"),w(_e,"class","circlePicker svelte-1igofh5"),x(_e,"background-color",e[8].constantColor),w(ye,"class","variousPickerLabel2 svelte-1igofh5"),w(Ce,"class","variousPickerLabel1 svelte-1igofh5"),w(ke,"class","circlePicker svelte-1igofh5"),x(ke,"background-color",e[8].keywordColor),w(Pe,"class","variousPickerLabel2 svelte-1igofh5"),w(Ae,"class","variousPickerLabel1 svelte-1igofh5"),w(Le,"class","circlePicker svelte-1igofh5"),x(Le,"background-color",e[8].highlightBackgroundColor),w(Me,"class","variousPickerLabel2 svelte-1igofh5"),w(Ie,"class","variousPickerLabel1 svelte-1igofh5"),w(ze,"class","circlePicker svelte-1igofh5"),x(ze,"background-color",e[8].selectionColor),w(qe,"class","variousPickerLabel2 svelte-1igofh5"),w(Xe,"class","variousPickerLabel1 svelte-1igofh5"),w(Ze,"class","circlePicker svelte-1igofh5"),x(Ze,"background-color",e[8].Cyan),w(Ve,"class","variousPickerLabel2 svelte-1igofh5"),w(Ke,"class","variousPickerLabel1 svelte-1igofh5"),w(et,"class","circlePicker svelte-1igofh5"),x(et,"background-color",e[8].Green),w(rt,"class","variousPickerLabel2 svelte-1igofh5"),w(ot,"class","variousPickerLabel1 svelte-1igofh5"),w(at,"class","circlePicker svelte-1igofh5"),x(at,"background-color",e[8].Orange),w(ct,"class","variousPickerLabel2 svelte-1igofh5"),w(dt,"class","variousPickerLabel1 svelte-1igofh5"),w(pt,"class","circlePicker svelte-1igofh5"),x(pt,"background-color",e[8].Pink),w(mt,"class","variousPickerLabel2 svelte-1igofh5"),w(_t,"class","variousPickerLabel1 svelte-1igofh5"),w(yt,"class","circlePicker svelte-1igofh5"),x(yt,"background-color",e[8].Purple),w(St,"class","variousPickerLabel2 svelte-1igofh5"),w(kt,"class","variousPickerLabel1 svelte-1igofh5"),w(Pt,"class","circlePicker svelte-1igofh5"),x(Pt,"background-color",e[8].Red),w(Rt,"class","variousPickerLabel2 svelte-1igofh5"),w(Lt,"class","variousPickerLabel1 svelte-1igofh5"),w(Mt,"class","circlePicker svelte-1igofh5"),x(Mt,"background-color",e[8].Yellow),w(Bt,"class","variousPickerLabel2 svelte-1igofh5"),w(d,"id","variousOtherColorsDiv"),w(d,"class","svelte-1igofh5")},m(i,g){p(i,t,g),f(t,r),f(t,n),cr.m(t,null),p(i,o,g),p(i,s,g),p(i,a,g),p(i,l,g);for(let e=0;e<ur.length;e+=1)ur[e].m(l,null);p(i,c,g),p(i,h,g),p(i,u,g),p(i,d,g),f(d,C),f(d,k),f(d,T),f(d,P),f(d,Q),f(Q,R),f(d,A),f(d,$),f(d,L),f(d,E),f(d,M),f(d,D),f(D,B),f(d,I),f(d,j),f(d,z),f(d,W),f(d,q),f(d,H),f(H,N),f(d,X),f(d,F),f(d,Z),f(d,U),f(d,V),f(d,G),f(G,Y),f(d,re),f(d,ie),f(d,ne),f(d,oe),f(d,se),f(d,ae),f(ae,le),f(d,ce),f(d,he),f(d,ue),f(d,de),f(d,fe),f(d,pe),f(pe,ge),f(d,me),f(d,ve),f(d,Oe),f(d,_e),f(d,be),f(d,ye),f(ye,we),f(d,Se),f(d,Ce),f(d,xe),f(d,ke),f(d,Te),f(d,Pe),f(Pe,Qe),f(d,Re),f(d,Ae),f(d,$e),f(d,Le),f(d,Ee),f(d,Me),f(Me,De),f(d,Be),f(d,Ie),f(d,je),f(d,ze),f(d,We),f(d,qe),f(qe,He),f(d,Ne),f(d,Xe),f(d,Fe),f(d,Ze),f(d,Ue),f(d,Ve),f(Ve,Ge),f(d,Ye),f(d,Ke),f(d,Je),f(d,et),f(d,tt),f(d,rt),f(rt,it),f(d,nt),f(d,ot),f(d,st),f(d,at),f(d,lt),f(d,ct),f(ct,ht),f(d,ut),f(d,dt),f(d,ft),f(d,pt),f(d,gt),f(d,mt),f(mt,vt),f(d,Ot),f(d,_t),f(d,bt),f(d,yt),f(d,wt),f(d,St),f(St,Ct),f(d,xt),f(d,kt),f(d,Tt),f(d,Pt),f(d,Qt),f(d,Rt),f(Rt,At),f(d,$t),f(d,Lt),f(d,Et),f(d,Mt),f(d,Dt),f(d,Bt),f(Bt,It),p(i,jt,g),dr&&dr.m(i,g),p(i,zt,g),Wt=!0,qt||(Ht=[y(T,"click",e[20]),y(E,"click",e[21]),y(W,"click",e[22]),y(U,"click",e[23]),y(oe,"click",e[24]),y(de,"click",e[25]),y(_e,"click",e[26]),y(ke,"click",e[27]),y(Le,"click",e[28]),y(ze,"click",e[29]),y(Ze,"click",e[30]),y(et,"click",e[31]),y(at,"click",e[32]),y(pt,"click",e[33]),y(yt,"click",e[34]),y(Pt,"click",e[35]),y(Mt,"click",e[36])],qt=!0)},p(e,r){if(lr===(lr=ar(e))&&cr?cr.p(e,r):(cr.d(1),cr=lr(e),cr&&(cr.c(),cr.m(t,null))),2304&r[0]){let t;for(hr=e[8].buttons,t=0;t<hr.length;t+=1){const i=zb(e,hr,t);ur[t]?ur[t].p(i,r):(ur[t]=Fb(i),ur[t].c(),ur[t].m(l,null))}for(;t<ur.length;t+=1)ur[t].d(1);ur.length=hr.length}(!Wt||256&r[0])&&x(T,"background-color",e[8].textAreaColor),(!Wt||256&r[0])&&Nt!==(Nt=e[8].textAreaColor+"")&&S(R,Nt),(!Wt||256&r[0])&&x(E,"background-color",e[8].backgroundColor),(!Wt||256&r[0])&&Xt!==(Xt=e[8].backgroundColor+"")&&S(B,Xt),(!Wt||256&r[0])&&x(W,"background-color",e[8].textColor),(!Wt||256&r[0])&&Ft!==(Ft=e[8].textColor+"")&&S(N,Ft),(!Wt||256&r[0])&&x(U,"background-color",e[8].borderColor),(!Wt||256&r[0])&&Zt!==(Zt=e[8].borderColor+"")&&S(Y,Zt),(!Wt||256&r[0])&&x(oe,"background-color",e[8].functionColor),(!Wt||256&r[0])&&Ut!==(Ut=e[8].functionColor+"")&&S(le,Ut),(!Wt||256&r[0])&&x(de,"background-color",e[8].stringColor),(!Wt||256&r[0])&&Vt!==(Vt=e[8].stringColor+"")&&S(ge,Vt),(!Wt||256&r[0])&&x(_e,"background-color",e[8].constantColor),(!Wt||256&r[0])&&Gt!==(Gt=e[8].constantColor+"")&&S(we,Gt),(!Wt||256&r[0])&&x(ke,"background-color",e[8].keywordColor),(!Wt||256&r[0])&&Yt!==(Yt=e[8].keywordColor+"")&&S(Qe,Yt),(!Wt||256&r[0])&&x(Le,"background-color",e[8].highlightBackgroundColor),(!Wt||256&r[0])&&Kt!==(Kt=e[8].highlightBackgroundColor+"")&&S(De,Kt),(!Wt||256&r[0])&&x(ze,"background-color",e[8].selectionColor),(!Wt||256&r[0])&&Jt!==(Jt=e[8].selectionColor+"")&&S(He,Jt),(!Wt||256&r[0])&&x(Ze,"background-color",e[8].Cyan),(!Wt||256&r[0])&&er!==(er=e[8].Cyan+"")&&S(Ge,er),(!Wt||256&r[0])&&x(et,"background-color",e[8].Green),(!Wt||256&r[0])&&tr!==(tr=e[8].Green+"")&&S(it,tr),(!Wt||256&r[0])&&x(at,"background-color",e[8].Orange),(!Wt||256&r[0])&&rr!==(rr=e[8].Orange+"")&&S(ht,rr),(!Wt||256&r[0])&&x(pt,"background-color",e[8].Pink),(!Wt||256&r[0])&&ir!==(ir=e[8].Pink+"")&&S(vt,ir),(!Wt||256&r[0])&&x(yt,"background-color",e[8].Purple),(!Wt||256&r[0])&&nr!==(nr=e[8].Purple+"")&&S(Ct,nr),(!Wt||256&r[0])&&x(Pt,"background-color",e[8].Red),(!Wt||256&r[0])&&or!==(or=e[8].Red+"")&&S(At,or),(!Wt||256&r[0])&&x(Mt,"background-color",e[8].Yellow),(!Wt||256&r[0])&&sr!==(sr=e[8].Yellow+"")&&S(It,sr),void 0!==e[8]?dr?(dr.p(e,r),256&r[0]&&ee(dr,1)):(dr=Zb(e),dr.c(),ee(dr,1),dr.m(zt.parentNode,zt)):dr&&(K(),te(dr,1,1,(()=>{dr=null})),J())},i(e){Wt||(ee(dr),Wt=!0)},o(e){te(dr),Wt=!1},d(e){e&&g(t),cr.d(),e&&g(o),e&&g(s),e&&g(a),e&&g(l),m(ur,e),e&&g(c),e&&g(h),e&&g(u),e&&g(d),e&&g(jt),dr&&dr.d(e),e&&g(zt),qt=!1,i(Ht)}}}async function Vb(e){let t=await fetch(`http://localhost:9978/api/theme/${e}`,{method:"GET",headers:{"Content-type":"application/json"}}),r=await t.json();return r.theme.name=e,r.theme}async function Gb(){let e=await fetch("http://localhost:9978/api/theme/list",{method:"GET",headers:{"Content-type":"application/json"}});return(await e.json()).themes}function Yb(e,t,r){let i;s(e,OO,(e=>r(8,i=e)));let n,o,a="",l=0,c=!1,h=!1,u=!1,f="",p="Default";async function g(){"New"===p?(r(3,u=!0),d(OO,i.name=p,i)):(d(OO,i=await Vb(p),i),d(OO,i.name=p,i))}function m(e,t){if(h)d(OO,i.buttons[e].color=t,i);else switch(e){case"textAreaColor":d(OO,i.textAreaColor=t,i);break;case"backgroundColor":d(OO,i.backgroundColor=t,i);break;case"textColor":d(OO,i.textColor=t,i);break;case"borderColor":d(OO,i.borderColor=t,i);break;case"Cyan":d(OO,i.Cyan=t,i);break;case"Green":d(OO,i.Green=t,i);break;case"Orange":d(OO,i.Orange=t,i);break;case"Pink":d(OO,i.Pink=t,i);break;case"Purple":d(OO,i.Purple=t,i);break;case"Red":d(OO,i.Red=t,i);break;case"Yellow":d(OO,i.Yellow=t,i);break;case"functionColor":d(OO,i.functionColor=t,i);break;case"stringColor":d(OO,i.stringColor=t,i);break;case"constantColor":d(OO,i.constantColor=t,i);break;case"keywordColor":d(OO,i.keywordColor=t,i);break;case"highlightBackgroundColor":d(OO,i.highlightBackgroundColor=t,i);break;case"selectionColor":d(OO,i.selectionColor=t,i);break;default:console.log("Invalid id.")}r(2,c=!1),h=!1}function v(e){r(0,a=e.color),r(1,l=e.id),r(2,c=!0),isNaN(l)?(h=!1,r(4,f=l),r(6,n=`${l}`)):(h=!0,r(4,f="Circle"),r(6,n=`#${l} Circle`))}async function O(){d(OO,i.name=p,i),await fetch(`http://localhost:9978/api/theme/${p}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(i)}),r(7,o=await Gb())}L((async()=>{r(7,o=await Gb())}));return[a,l,c,u,f,p,n,o,i,g,m,v,function(){r(3,u=!1),O()},O,async function(){await fetch(`http://localhost:9978/api/theme/${p}`,{method:"DELETE",headers:{"Content-type":"application/json"},body:JSON.stringify(i)}),r(7,o=await Gb()),r(5,p="Default"),d(OO,i=await Vb(p),i)},function(){p=this.value,r(5,p),r(7,o)},()=>{r(3,u=!0)},function(){p=T(this),r(5,p),r(7,o)},()=>{g()},(e,t)=>{v(e)},e=>{v({id:"textAreaColor",color:i.textAreaColor})},e=>{v({id:"backgroundColor",color:i.backgroundColor})},e=>{v({id:"textColor",color:i.textColor})},e=>{v({id:"borderColor",color:i.borderColor})},e=>{v({id:"functionColor",color:i.functionColor})},e=>{v({id:"stringColor",color:i.stringColor})},e=>{v({id:"constantColor",color:i.constantColor})},e=>{v({id:"keywordColor",color:i.keywordColor})},e=>{v({id:"highlightBackgroundColor",color:i.highlightBackgroundColor})},e=>{v({id:"selectionColor",color:i.selectionColor})},e=>{v({id:"Cyan",color:i.Cyan})},e=>{v({id:"Green",color:i.Green})},e=>{v({id:"Orange",color:i.Orange})},e=>{v({id:"Pink",color:i.Pink})},e=>{v({id:"Purple",color:i.Purple})},e=>{v({id:"Red",color:i.Red})},e=>{v({id:"Yellow",color:i.Yellow})},e=>{m(e.detail.data.id,e.detail.data.color)},e=>{r(2,c=!1)}]}class Kb extends ae{constructor(e){super(),se(this,e,Yb,Ub,o,{},null,[-1,-1])}}function Jb(e,t,r){const i=e.slice();return i[6]=t[r],i}function ey(e){let t,r,i,n,o,s,a=e[6]+"";function l(){return e[4](e[6])}return{c(){t=v("li"),r=v("span"),i=O(a),n=_(),w(r,"class","scriptName svelte-xv3rwd")},m(e,a){p(e,t,a),f(t,r),f(r,i),f(t,n),o||(s=y(r,"click",l),o=!0)},p(t,r){e=t,1&r&&a!==(a=e[6]+"")&&S(i,a)},d(e){e&&g(t),o=!1,s()}}}function ty(t){let r,i,n,o,s,a,l,c,h,u,d=t[0],b=[];for(let e=0;e<d.length;e+=1)b[e]=ey(Jb(t,d,e));return{c(){r=v("div"),i=v("h2"),i.textContent="External Scripts",n=_(),o=v("ol");for(let e=0;e<b.length;e+=1)b[e].c();s=_(),a=v("div"),l=v("button"),c=O("New Script"),w(i,"class","svelte-xv3rwd"),w(o,"class","svelte-xv3rwd"),w(l,"id","new"),w(l,"class","buttonStyle svelte-xv3rwd"),w(l,"type","button"),x(l,"background-color",t[1].textAreaColor),x(l,"color",t[1].textColor),x(l,"font-name",t[1].font),x(l,"font-size",t[1].fontSize),w(a,"id","buttonRow"),w(a,"class","svelte-xv3rwd"),w(r,"id","scriptlist"),w(r,"class","svelte-xv3rwd")},m(e,d){p(e,r,d),f(r,i),f(r,n),f(r,o);for(let e=0;e<b.length;e+=1)b[e].m(o,null);f(r,s),f(r,a),f(a,l),f(l,c),h||(u=y(l,"click",t[3]),h=!0)},p(e,[t]){if(5&t){let r;for(d=e[0],r=0;r<d.length;r+=1){const i=Jb(e,d,r);b[r]?b[r].p(i,t):(b[r]=ey(i),b[r].c(),b[r].m(o,null))}for(;r<b.length;r+=1)b[r].d(1);b.length=d.length}2&t&&x(l,"background-color",e[1].textAreaColor),2&t&&x(l,"color",e[1].textColor),2&t&&x(l,"font-name",e[1].font),2&t&&x(l,"font-size",e[1].fontSize)},i:e,o:e,d(e){e&&g(r),m(b,e),h=!1,u()}}}function ry(e,t,r){let i;s(e,OO,(e=>r(1,i=e)));let n=[];const o=M();function a(e){o("changeView",{view:"script",config:{script:e}})}L((async()=>{r(0,n=await async function(){let e=await fetch("http://localhost:9978/api/scripts/ext/list",{headers:{"Content-type":"application/json"}});return await e.json()}())}));return[n,i,a,function(){o("changeView",{view:"script",config:{script:"new"}})},e=>{a(e)}]}class iy extends ae{constructor(e){super(),se(this,e,ry,ty,o,{})}}function ny(e,t,r){const i=e.slice();return i[16]=t[r],i}function oy(e){let t,r,n,o,s,a,l,c,h,u,d,f,O,b,S,T,P,Q,R,A,$,L,E,M,D,B,I,j,z,W=e[1],q=[];for(let t=0;t<W.length;t+=1)q[t]=sy(ny(e,W,t));return{c(){t=v("label"),t.textContent="Name of Script",r=_(),n=v("input"),o=_(),s=v("label"),s.textContent="Description",a=_(),l=v("input"),c=_(),h=v("label"),h.textContent="Help",u=_(),d=v("input"),f=_(),O=v("label"),O.textContent="What is the name of the Script file?",b=_(),S=v("input"),T=_(),P=v("label"),P.textContent="What is the directory for the script?",Q=_(),R=v("input"),A=_(),$=v("label"),$.textContent="What is the environment for the script?",L=_(),E=v("select");for(let e=0;e<q.length;e+=1)q[e].c();M=_(),D=v("label"),D.textContent="Terminal Script?",B=_(),I=v("input"),w(t,"id","scriptNameLab"),w(t,"for","scriptName"),w(t,"class","svelte-npefic"),w(n,"id","scriptName"),w(n,"name","scriptName"),x(n,"border-radius","5px"),x(n,"border-color","$"+e[2].borderColor),x(n,"background-color",e[2].textAreaColor),x(n,"color",e[2].textColor),x(n,"font-name",e[2].font),x(n,"font-size",e[2].fontSize),w(s,"id","scriptDesLab"),w(s,"for","scriptDes"),w(s,"class","svelte-npefic"),w(l,"id","scriptDes"),w(l,"name","scriptDes"),x(l,"border-radius","5px"),x(l,"border-color","$"+e[2].borderColor),x(l,"background-color",e[2].textAreaColor),x(l,"color",e[2].textColor),x(l,"font-name",e[2].font),x(l,"font-size",e[2].fontSize),w(h,"id","helpLab"),w(h,"for","help"),w(h,"class","svelte-npefic"),w(d,"id","help"),w(d,"name","help"),x(d,"border-radius","5px"),x(d,"border-color","$"+e[2].borderColor),x(d,"background-color",e[2].textAreaColor),x(d,"color",e[2].textColor),x(d,"font-name",e[2].font),x(d,"font-size",e[2].fontSize),w(O,"id","scriptScript"),w(O,"for","scriptScript"),w(O,"class","svelte-npefic"),w(S,"id","scriptScript"),w(S,"name","scriptScript"),x(S,"border-radius","5px"),x(S,"border-color","$"+e[2].borderColor),x(S,"background-color",e[2].textAreaColor),x(S,"color",e[2].textColor),x(S,"font-name",e[2].font),x(S,"font-size",e[2].fontSize),w(P,"id","scriptPath"),w(P,"for","scriptPath"),w(P,"class","svelte-npefic"),w(R,"id","scriptPath"),w(R,"name","scriptPath"),x(R,"border-radius","5px"),x(R,"border-color","$"+e[2].borderColor),x(R,"background-color",e[2].textAreaColor),x(R,"color",e[2].textColor),x(R,"font-name",e[2].font),x(R,"font-size",e[2].fontSize),w($,"id","scriptEnv"),w($,"for","scriptEnv"),w($,"class","svelte-npefic"),w(E,"id","scriptEnv"),w(E,"name","scriptEnv"),x(E,"border-radius","5px"),x(E,"border-color","$"+e[2].borderColor),x(E,"background-color",e[2].textAreaColor),x(E,"color",e[2].textColor),x(E,"font-name",e[2].font),x(E,"font-size",e[2].fontSize),w(E,"class","svelte-npefic"),void 0===e[0].env&&N((()=>e[12].call(E))),w(D,"id","termScriptLab"),w(D,"for","termScriptChk"),w(D,"class","svelte-npefic"),w(I,"id","termScriptChk"),w(I,"name","termScriptChk"),w(I,"type","checkbox")},m(i,g){p(i,t,g),p(i,r,g),p(i,n,g),C(n,e[0].name),p(i,o,g),p(i,s,g),p(i,a,g),p(i,l,g),C(l,e[0].description),p(i,c,g),p(i,h,g),p(i,u,g),p(i,d,g),C(d,e[0].help),p(i,f,g),p(i,O,g),p(i,b,g),p(i,S,g),C(S,e[0].script),p(i,T,g),p(i,P,g),p(i,Q,g),p(i,R,g),C(R,e[0].path),p(i,A,g),p(i,$,g),p(i,L,g),p(i,E,g);for(let e=0;e<q.length;e+=1)q[e].m(E,null);k(E,e[0].env),p(i,M,g),p(i,D,g),p(i,B,g),p(i,I,g),C(I,e[0].termscript),j||(z=[y(n,"blur",e[3]),y(n,"input",e[7]),y(l,"input",e[8]),y(l,"blur",e[3]),y(d,"input",e[9]),y(d,"blur",e[3]),y(S,"blur",e[3]),y(S,"input",e[10]),y(R,"blur",e[3]),y(R,"input",e[11]),y(E,"blur",e[3]),y(E,"change",e[12]),y(I,"change",e[13])],j=!0)},p(e,t){if(4&t&&x(n,"border-color","$"+e[2].borderColor),4&t&&x(n,"background-color",e[2].textAreaColor),4&t&&x(n,"color",e[2].textColor),4&t&&x(n,"font-name",e[2].font),4&t&&x(n,"font-size",e[2].fontSize),3&t&&n.value!==e[0].name&&C(n,e[0].name),4&t&&x(l,"border-color","$"+e[2].borderColor),4&t&&x(l,"background-color",e[2].textAreaColor),4&t&&x(l,"color",e[2].textColor),4&t&&x(l,"font-name",e[2].font),4&t&&x(l,"font-size",e[2].fontSize),3&t&&l.value!==e[0].description&&C(l,e[0].description),4&t&&x(d,"border-color","$"+e[2].borderColor),4&t&&x(d,"background-color",e[2].textAreaColor),4&t&&x(d,"color",e[2].textColor),4&t&&x(d,"font-name",e[2].font),4&t&&x(d,"font-size",e[2].fontSize),3&t&&d.value!==e[0].help&&C(d,e[0].help),4&t&&x(S,"border-color","$"+e[2].borderColor),4&t&&x(S,"background-color",e[2].textAreaColor),4&t&&x(S,"color",e[2].textColor),4&t&&x(S,"font-name",e[2].font),4&t&&x(S,"font-size",e[2].fontSize),3&t&&S.value!==e[0].script&&C(S,e[0].script),4&t&&x(R,"border-color","$"+e[2].borderColor),4&t&&x(R,"background-color",e[2].textAreaColor),4&t&&x(R,"color",e[2].textColor),4&t&&x(R,"font-name",e[2].font),4&t&&x(R,"font-size",e[2].fontSize),3&t&&R.value!==e[0].path&&C(R,e[0].path),2&t){let r;for(W=e[1],r=0;r<W.length;r+=1){const i=ny(e,W,r);q[r]?q[r].p(i,t):(q[r]=sy(i),q[r].c(),q[r].m(E,null))}for(;r<q.length;r+=1)q[r].d(1);q.length=W.length}4&t&&x(E,"border-color","$"+e[2].borderColor),4&t&&x(E,"background-color",e[2].textAreaColor),4&t&&x(E,"color",e[2].textColor),4&t&&x(E,"font-name",e[2].font),4&t&&x(E,"font-size",e[2].fontSize),3&t&&k(E,e[0].env),3&t&&C(I,e[0].termscript)},d(e){e&&g(t),e&&g(r),e&&g(n),e&&g(o),e&&g(s),e&&g(a),e&&g(l),e&&g(c),e&&g(h),e&&g(u),e&&g(d),e&&g(f),e&&g(O),e&&g(b),e&&g(S),e&&g(T),e&&g(P),e&&g(Q),e&&g(R),e&&g(A),e&&g($),e&&g(L),e&&g(E),m(q,e),e&&g(M),e&&g(D),e&&g(B),e&&g(I),j=!1,i(z)}}}function sy(e){let t,r,i,n=e[16]+"";return{c(){t=v("option"),r=O(n),t.__value=i=e[16],t.value=t.__value},m(e,i){p(e,t,i),f(t,r)},p(e,o){2&o&&n!==(n=e[16]+"")&&S(r,n),2&o&&i!==(i=e[16])&&(t.__value=i,t.value=t.__value)},d(e){e&&g(t)}}}function ay(t){let r,n,o,s,a,l,c,h,u,d,m=void 0!==t[0]&&void 0!==t[1]&&oy(t);return{c(){r=v("div"),m&&m.c(),n=_(),o=v("div"),s=v("button"),a=O("Return"),l=_(),c=v("button"),h=O("Delete"),w(r,"id","script"),x(r,"color",t[2].textColor),x(r,"font-name",t[2].font),x(r,"font-size",t[2].fontSize),w(r,"class","svelte-npefic"),w(s,"class","buttonStyle svelte-npefic"),w(s,"type","button"),x(s,"border-radius","5px"),x(s,"border-color","$"+t[2].borderColor),x(s,"background-color",t[2].textAreaColor),x(s,"color",t[2].textColor),x(s,"font-name",t[2].font),x(s,"font-size",t[2].fontSize),w(c,"class","buttonStyle svelte-npefic"),w(c,"type","button"),x(c,"border-radius","5px"),x(c,"border-color","$"+t[2].borderColor),x(c,"background-color",t[2].textAreaColor),x(c,"color",t[2].textColor),x(c,"font-name",t[2].font),x(c,"font-size",t[2].fontSize),w(o,"id","buttonRow"),w(o,"class","svelte-npefic")},m(e,i){p(e,r,i),m&&m.m(r,null),p(e,n,i),p(e,o,i),f(o,s),f(s,a),f(o,l),f(o,c),f(c,h),u||(d=[y(s,"click",t[14]),y(c,"click",t[4])],u=!0)},p(e,[t]){void 0!==e[0]&&void 0!==e[1]?m?m.p(e,t):(m=oy(e),m.c(),m.m(r,null)):m&&(m.d(1),m=null),4&t&&x(r,"color",e[2].textColor),4&t&&x(r,"font-name",e[2].font),4&t&&x(r,"font-size",e[2].fontSize),4&t&&x(s,"border-color","$"+e[2].borderColor),4&t&&x(s,"background-color",e[2].textAreaColor),4&t&&x(s,"color",e[2].textColor),4&t&&x(s,"font-name",e[2].font),4&t&&x(s,"font-size",e[2].fontSize),4&t&&x(c,"border-color","$"+e[2].borderColor),4&t&&x(c,"background-color",e[2].textAreaColor),4&t&&x(c,"color",e[2].textColor),4&t&&x(c,"font-name",e[2].font),4&t&&x(c,"font-size",e[2].fontSize)},i:e,o:e,d(e){e&&g(r),m&&m.d(),e&&g(n),e&&g(o),u=!1,i(d)}}}function ly(e,t,r){let i;s(e,OO,(e=>r(2,i=e)));let n,o,{config:a}=t;const l=M();async function c(){""!==n.name&&null!==n.name&&"new"!==n.name&&await fetch(`http://localhost:9978/api/scripts/ext/${n.name}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(n)})}function h(){l("changeView",{view:"lists",config:{}})}L((async()=>{"new"!==a.script?r(0,n=await async function(e){let t=await fetch(`http://localhost:9978/api/scripts/ext/${e}`,{headers:{"Content-type":"application/json"}});return await t.json()}(a.script)):r(0,n={name:"new",script:"",path:"",env:"",termscript:!1,description:"",help:""}),r(1,o=await async function(){let e=await fetch("http://localhost:9978/api/scripts/env/list",{headers:{"Content-type":"application/json"}});return await e.json()}())}));return e.$$set=e=>{"config"in e&&r(6,a=e.config)},[n,o,i,c,async function(){await fetch(`http://localhost:9978/api/scripts/ext/${n.name}`,{method:"DELETE",headers:{"Content-type":"application/json"}}),H(),h()},h,a,function(){n.name=this.value,r(0,n),r(1,o)},function(){n.description=this.value,r(0,n),r(1,o)},function(){n.help=this.value,r(0,n),r(1,o)},function(){n.script=this.value,r(0,n),r(1,o)},function(){n.path=this.value,r(0,n),r(1,o)},function(){n.env=T(this),r(0,n),r(1,o)},function(){n.termscript=this.value,r(0,n),r(1,o)},()=>{c(),h()}]}class cy extends ae{constructor(e){super(),se(this,e,ly,ay,o,{config:6})}}function hy(e){let t,r;return t=new cy({props:{config:e[1]}}),t.$on("changeView",e[3]),{c(){ie(t.$$.fragment)},m(e,i){ne(t,e,i),r=!0},p(e,r){const i={};2&r&&(i.config=e[1]),t.$set(i)},i(e){r||(ee(t.$$.fragment,e),r=!0)},o(e){te(t.$$.fragment,e),r=!1},d(e){oe(t,e)}}}function uy(t){let r,i,n;return i=new iy({}),i.$on("changeView",t[3]),{c(){r=v("div"),ie(i.$$.fragment),w(r,"id","listviews"),w(r,"class","svelte-10ddyhx")},m(e,t){p(e,r,t),ne(i,r,null),n=!0},p:e,i(e){n||(ee(i.$$.fragment,e),n=!0)},o(e){te(i.$$.fragment,e),n=!1},d(e){e&&g(r),oe(i)}}}function dy(e){let t,r,i,n;const o=[uy,hy],s=[];function a(e,t){return"lists"===e[0]?0:"script"===e[0]?1:-1}return~(r=a(e))&&(i=s[r]=o[r](e)),{c(){t=v("div"),i&&i.c(),w(t,"id","ExtScriptEditor"),x(t,"color",e[2].textcolor),x(t,"background-color",e[2].appBackground),w(t,"class","svelte-10ddyhx")},m(e,i){p(e,t,i),~r&&s[r].m(t,null),n=!0},p(e,[l]){let c=r;r=a(e),r===c?~r&&s[r].p(e,l):(i&&(K(),te(s[c],1,1,(()=>{s[c]=null})),J()),~r?(i=s[r],i?i.p(e,l):(i=s[r]=o[r](e),i.c()),ee(i,1),i.m(t,null)):i=null),(!n||4&l)&&x(t,"color",e[2].textcolor),(!n||4&l)&&x(t,"background-color",e[2].appBackground)},i(e){n||(ee(i),n=!0)},o(e){te(i),n=!1},d(e){e&&g(t),~r&&s[r].d()}}}function fy(e,t,r){let i;s(e,OO,(e=>r(2,i=e)));let n="lists",o={};return[n,o,i,function(e){r(0,n=e.detail.view),r(1,o=e.detail.config)}]}class py extends ae{constructor(e){super(),se(this,e,fy,dy,o,{})}}function gy(e,t,r){const i=e.slice();return i[9]=t[r],i}function my(e){let t,r,i,n,o,s,a=e[9]+"";function l(){return e[6](e[9])}return{c(){t=v("li"),r=v("span"),i=O(a),n=_(),w(r,"class","envName svelte-1xg0rtz")},m(e,a){p(e,t,a),f(t,r),f(r,i),f(t,n),o||(s=y(r,"click",l),o=!0)},p(t,r){e=t,1&r&&a!==(a=e[9]+"")&&S(i,a)},d(e){e&&g(t),o=!1,s()}}}function vy(e){let t,r,i,n;return{c(){t=v("button"),r=O("Create Default"),w(t,"id","default"),w(t,"class","buttonStyle svelte-1xg0rtz"),x(t,"background-color",e[2].textAreaColor),x(t,"color",e[2].textColor),x(t,"font-name",e[2].font),x(t,"font-size",e[2].fontSize),w(t,"type","button")},m(o,s){p(o,t,s),f(t,r),i||(n=y(t,"click",e[5]),i=!0)},p(e,r){4&r&&x(t,"background-color",e[2].textAreaColor),4&r&&x(t,"color",e[2].textColor),4&r&&x(t,"font-name",e[2].font),4&r&&x(t,"font-size",e[2].fontSize)},d(e){e&&g(t),i=!1,n()}}}function Oy(t){let r,i,n,o,s,a,l,c,h,u,d,b=t[0],S=[];for(let e=0;e<b.length;e+=1)S[e]=my(gy(t,b,e));let C=t[1]&&vy(t);return{c(){r=v("div"),i=v("h2"),i.textContent="Environments",n=_(),o=v("ol");for(let e=0;e<S.length;e+=1)S[e].c();s=_(),a=v("div"),l=v("button"),c=O("New Environment"),h=_(),C&&C.c(),w(i,"class","svelte-1xg0rtz"),w(o,"class","svelte-1xg0rtz"),w(l,"id","new"),w(l,"class","buttonStyle svelte-1xg0rtz"),x(l,"background-color",t[2].textAreaColor),x(l,"color",t[2].textColor),x(l,"font-name",t[2].font),x(l,"font-size",t[2].fontSize),w(l,"type","button"),w(a,"id","buttonRow"),w(a,"class","svelte-1xg0rtz"),w(r,"id","envlist"),w(r,"class","svelte-1xg0rtz")},m(e,g){p(e,r,g),f(r,i),f(r,n),f(r,o);for(let e=0;e<S.length;e+=1)S[e].m(o,null);f(r,s),f(r,a),f(a,l),f(l,c),f(a,h),C&&C.m(a,null),u||(d=y(l,"click",t[3]),u=!0)},p(e,[t]){if(17&t){let r;for(b=e[0],r=0;r<b.length;r+=1){const i=gy(e,b,r);S[r]?S[r].p(i,t):(S[r]=my(i),S[r].c(),S[r].m(o,null))}for(;r<S.length;r+=1)S[r].d(1);S.length=b.length}4&t&&x(l,"background-color",e[2].textAreaColor),4&t&&x(l,"color",e[2].textColor),4&t&&x(l,"font-name",e[2].font),4&t&&x(l,"font-size",e[2].fontSize),e[1]?C?C.p(e,t):(C=vy(e),C.c(),C.m(a,null)):C&&(C.d(1),C=null)},i:e,o:e,d(e){e&&g(r),m(S,e),C&&C.d(),u=!1,d()}}}function _y(e,t,r){let i;s(e,OO,(e=>r(2,i=e)));let n=[],o=!1;const a=M();function l(e){a("changeView",{view:"env",config:{env:e}})}L((async()=>{await async function(){var e=await fetch("http://localhost:9978/api/scripts/env/list");r(0,n=await e.json())}();var e=n.filter((e=>"Default"==e));Array.isArray(e)&&0===e.length&&r(1,o=!0)}));return[n,o,i,async function(){a("changeView",{view:"env",config:{env:"new",envVar:[]}})},l,async function(){await fetch("http://localhost:9978/api/scripts/env/Default",{method:"PUT"}),a("changeView",{view:"env",config:{env:"Default"}})},e=>{l(e)}]}class by extends ae{constructor(e){super(),se(this,e,_y,Oy,o,{})}}function yy(e){let t,r,n,o,s,a,l,c,h,u,d,m,b;return{c(){t=v("td"),r=v("span"),r.textContent="✏️",n=_(),o=v("td"),s=v("span"),s.textContent="❌",a=_(),l=v("td"),c=O(e[0]),h=_(),u=v("td"),d=O(e[1]),w(t,"class","editTD svelte-iq93qk"),x(s,"width","10px"),x(s,"cursor","pointer"),w(o,"class","deleteTD svelte-iq93qk")},m(i,g){p(i,t,g),f(t,r),p(i,n,g),p(i,o,g),f(o,s),p(i,a,g),p(i,l,g),f(l,c),p(i,h,g),p(i,u,g),f(u,d),m||(b=[y(r,"click",e[10]),y(s,"click",e[6])],m=!0)},p(e,t){1&t&&S(c,e[0]),2&t&&S(d,e[1])},d(e){e&&g(t),e&&g(n),e&&g(o),e&&g(a),e&&g(l),e&&g(h),e&&g(u),m=!1,i(b)}}}function wy(e){let t,r,n,o,s,a,l,c,h,u;return{c(){t=v("td"),r=v("td"),n=_(),o=v("td"),s=v("input"),a=_(),l=v("td"),c=v("input"),w(s,"type","text"),x(s,"padding-left","10px"),x(s,"border-radius","10px"),x(s,"border-color",e[4].borderColor),x(s,"background-color",e[4].textAreaColor),x(s,"color",e[4].textColor),x(s,"font-family","'"+e[4].font+"'"),x(s,"font-size",e[4].fontSize),w(c,"type","text"),x(c,"padding-left","10px"),x(c,"border-radius","10px"),x(c,"border-color",e[4].borderColor),x(c,"background-color",e[4].textAreaColor),x(c,"color",e[4].textColor),x(c,"font-family",e[4].font),x(c,"font-size",e[4].fontSize)},m(i,d){p(i,t,d),p(i,r,d),p(i,n,d),p(i,o,d),f(o,s),e[7](s),C(s,e[0]),p(i,a,d),p(i,l,d),f(l,c),C(c,e[1]),h||(u=[y(s,"input",e[8]),y(c,"input",e[9]),y(c,"blur",e[5])],h=!0)},p(e,t){16&t&&x(s,"border-color",e[4].borderColor),16&t&&x(s,"background-color",e[4].textAreaColor),16&t&&x(s,"color",e[4].textColor),16&t&&x(s,"font-family","'"+e[4].font+"'"),16&t&&x(s,"font-size",e[4].fontSize),1&t&&s.value!==e[0]&&C(s,e[0]),16&t&&x(c,"border-color",e[4].borderColor),16&t&&x(c,"background-color",e[4].textAreaColor),16&t&&x(c,"color",e[4].textColor),16&t&&x(c,"font-family",e[4].font),16&t&&x(c,"font-size",e[4].fontSize),2&t&&c.value!==e[1]&&C(c,e[1])},d(s){s&&g(t),s&&g(r),s&&g(n),s&&g(o),e[7](null),s&&g(a),s&&g(l),h=!1,i(u)}}}function Sy(t){let r;function i(e,t){return e[2]?wy:yy}let n=i(t),o=n(t);return{c(){r=v("tr"),o.c()},m(e,t){p(e,r,t),o.m(r,null)},p(e,[t]){n===(n=i(e))&&o?o.p(e,t):(o.d(1),o=n(e),o&&(o.c(),o.m(r,null)))},i:e,o:e,d(e){e&&g(r),o.d()}}}function Cy(e,t,r){let i;s(e,OO,(e=>r(4,i=e)));const n=M();let{name:o}=t,{value:a}=t;var l,c=!1;E((()=>{c&&l.focus()}));return e.$$set=e=>{"name"in e&&r(0,o=e.name),"value"in e&&r(1,a=e.value)},[o,a,c,l,i,function(){r(2,c=!1),n("editRow",{name:o,value:a})},function(){n("deleteRow",{name:o,value:a})},function(e){B[e?"unshift":"push"]((()=>{r(3,l=e)}))},function(){o=this.value,r(0,o)},function(){a=this.value,r(1,a)},()=>{r(2,c=!0)}]}class xy extends ae{constructor(e){super(),se(this,e,Cy,Sy,o,{name:0,value:1})}}function ky(e,t,r){const i=e.slice();return i[19]=t[r],i}function Ty(e){let t,r,n,o,s,a,l,c,h,u="undefined"!==e[0].envVar&&Py(e);return{c(){t=v("div"),r=v("label"),r.textContent="Name of the Environment",n=_(),o=v("input"),s=_(),u&&u.c(),a=b(),w(r,"id","envName"),w(r,"for","envName"),w(o,"id","envName"),w(o,"name","envName"),x(o,"padding-left","10px"),x(o,"margin-top","-5px"),x(o,"margin-left","20px"),x(o,"border-radius","10px"),x(o,"border-color",e[4].borderColor),x(o,"background-color",e[4].textAreaColor),x(o,"font-family",e[4].font),x(o,"color",e[4].textColor),x(o,"font-size",e[4].fontSize),x(o,"border","solid 3px "+e[4].borderColor),x(t,"display","flex"),x(t,"flex-direction","row")},m(i,d){p(i,t,d),f(t,r),f(t,n),f(t,o),C(o,e[0].name),p(i,s,d),u&&u.m(i,d),p(i,a,d),l=!0,c||(h=[y(o,"blur",e[5]),y(o,"input",e[11])],c=!0)},p(e,t){(!l||16&t)&&x(o,"border-color",e[4].borderColor),(!l||16&t)&&x(o,"background-color",e[4].textAreaColor),(!l||16&t)&&x(o,"font-family",e[4].font),(!l||16&t)&&x(o,"color",e[4].textColor),(!l||16&t)&&x(o,"font-size",e[4].fontSize),(!l||16&t)&&x(o,"border","solid 3px "+e[4].borderColor),1&t&&o.value!==e[0].name&&C(o,e[0].name),"undefined"!==e[0].envVar?u?(u.p(e,t),1&t&&ee(u,1)):(u=Py(e),u.c(),ee(u,1),u.m(a.parentNode,a)):u&&(K(),te(u,1,1,(()=>{u=null})),J())},i(e){l||(ee(u),l=!0)},o(e){te(u),l=!1},d(e){e&&g(t),e&&g(s),u&&u.d(e),e&&g(a),c=!1,i(h)}}}function Py(e){let t,r,i,n,o,s,a,l=Object.entries(e[0].envVar).length>0,c=l&&Qy(e);function h(e,t){return e[1]?$y:Ay}let u=h(e),d=u(e);return{c(){t=v("div"),r=v("table"),i=v("thead"),i.innerHTML='<tr><th class="svelte-13talvl"></th> \n              <th class="svelte-13talvl"></th> \n              <th class="svelte-13talvl">Name</th> \n              <th class="svelte-13talvl">Value</th></tr>',n=_(),o=v("tbody"),c&&c.c(),s=_(),d.c(),w(t,"id","EnvTable"),w(t,"class","svelte-13talvl")},m(e,l){p(e,t,l),f(t,r),f(r,i),f(r,n),f(r,o),c&&c.m(o,null),f(o,s),d.m(o,null),a=!0},p(e,t){1&t&&(l=Object.entries(e[0].envVar).length>0),l?c?(c.p(e,t),1&t&&ee(c,1)):(c=Qy(e),c.c(),ee(c,1),c.m(o,s)):c&&(K(),te(c,1,1,(()=>{c=null})),J()),u===(u=h(e))&&d?d.p(e,t):(d.d(1),d=u(e),d&&(d.c(),d.m(o,null)))},i(e){a||(ee(c),a=!0)},o(e){te(c),a=!1},d(e){e&&g(t),c&&c.d(),d.d()}}}function Qy(e){let t,r,i=Object.entries(e[0].envVar),n=[];for(let t=0;t<i.length;t+=1)n[t]=Ry(ky(e,i,t));const o=e=>te(n[e],1,1,(()=>{n[e]=null}));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=b()},m(e,i){for(let t=0;t<n.length;t+=1)n[t].m(e,i);p(e,t,i),r=!0},p(e,r){if(769&r){let s;for(i=Object.entries(e[0].envVar),s=0;s<i.length;s+=1){const o=ky(e,i,s);n[s]?(n[s].p(o,r),ee(n[s],1)):(n[s]=Ry(o),n[s].c(),ee(n[s],1),n[s].m(t.parentNode,t))}for(K(),s=i.length;s<n.length;s+=1)o(s);J()}},i(e){if(!r){for(let e=0;e<i.length;e+=1)ee(n[e]);r=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)te(n[e]);r=!1},d(e){m(n,e),e&&g(t)}}}function Ry(e){let t,r;return t=new xy({props:{name:e[19][0],value:e[19][1]}}),t.$on("deleteRow",(function(){return e[12](e[19])})),t.$on("editRow",e[13]),{c(){ie(t.$$.fragment)},m(e,i){ne(t,e,i),r=!0},p(r,i){e=r;const n={};1&i&&(n.name=e[19][0]),1&i&&(n.value=e[19][1]),t.$set(n)},i(e){r||(ee(t.$$.fragment,e),r=!0)},o(e){te(t.$$.fragment,e),r=!1},d(e){oe(t,e)}}}function Ay(t){let r,i,n,o,s;return{c(){r=v("tr"),i=v("td"),n=v("span"),n.textContent="+",w(n,"class","addNewItem svelte-13talvl"),w(i,"span","2"),w(i,"class","svelte-13talvl")},m(e,a){p(e,r,a),f(r,i),f(i,n),o||(s=y(n,"click",t[16]),o=!0)},p:e,d(e){e&&g(r),o=!1,s()}}}function $y(e){let t,r,n,o,s,a,l,c,h,u;return{c(){t=v("tr"),r=v("td"),n=v("input"),s=_(),a=v("td"),l=v("input"),w(n,"class","inputKV"),w(n,"type","text"),w(n,"style",o="background-color: "+e[4].textAreaColor+"; text= "+e[4].textColor+"; font-name: "+e[4].font+"; font-size: "+e[4].fontSize+";"),w(r,"class","svelte-13talvl"),w(l,"class","inputKV"),w(l,"type","text"),w(l,"style",c="background-color: "+e[4].textAreaColor+"; text= "+e[4].textColor+"; font-name: "+e[4].font+"; font-size: "+e[4].fontSize+";"),w(a,"class","svelte-13talvl")},m(i,o){p(i,t,o),f(t,r),f(r,n),C(n,e[2]),f(t,s),f(t,a),f(a,l),C(l,e[3]),h||(u=[y(n,"input",e[14]),y(l,"input",e[15]),y(l,"blur",e[8])],h=!0)},p(e,t){16&t&&o!==(o="background-color: "+e[4].textAreaColor+"; text= "+e[4].textColor+"; font-name: "+e[4].font+"; font-size: "+e[4].fontSize+";")&&w(n,"style",o),4&t&&n.value!==e[2]&&C(n,e[2]),16&t&&c!==(c="background-color: "+e[4].textAreaColor+"; text= "+e[4].textColor+"; font-name: "+e[4].font+"; font-size: "+e[4].fontSize+";")&&w(l,"style",c),8&t&&l.value!==e[3]&&C(l,e[3])},d(e){e&&g(t),h=!1,i(u)}}}function Ly(e){let t,r,n,o,s,a,l,c,h,u,d,m=void 0!==e[0]&&Ty(e);return{c(){t=v("div"),m&&m.c(),r=_(),n=v("div"),o=v("button"),s=O("Return"),a=_(),l=v("button"),c=O("Delete"),w(o,"id","goback"),w(o,"class","buttonStyle svelte-13talvl"),w(o,"type","button"),x(o,"background-color",e[4].textAreaColor),x(o,"color",e[4].textColor),x(o,"font-name",e[4].font),x(o,"font-size",e[4].fontSize),w(l,"class","buttonStyle svelte-13talvl"),w(l,"type","button"),x(l,"background-color",e[4].textAreaColor),x(l,"color",e[4].textColor),x(l,"font-name",e[4].font),x(l,"font-size",e[4].fontSize),w(n,"id","buttonRow"),w(n,"class","svelte-13talvl"),w(t,"id","env"),x(t,"color",e[4].textColor),x(t,"background-color",e[4].textareaColor),w(t,"class","svelte-13talvl")},m(i,g){p(i,t,g),m&&m.m(t,null),f(t,r),f(t,n),f(n,o),f(o,s),f(n,a),f(n,l),f(l,c),h=!0,u||(d=[y(o,"click",e[17]),y(l,"click",e[6])],u=!0)},p(e,[i]){void 0!==e[0]?m?(m.p(e,i),1&i&&ee(m,1)):(m=Ty(e),m.c(),ee(m,1),m.m(t,r)):m&&(K(),te(m,1,1,(()=>{m=null})),J()),(!h||16&i)&&x(o,"background-color",e[4].textAreaColor),(!h||16&i)&&x(o,"color",e[4].textColor),(!h||16&i)&&x(o,"font-name",e[4].font),(!h||16&i)&&x(o,"font-size",e[4].fontSize),(!h||16&i)&&x(l,"background-color",e[4].textAreaColor),(!h||16&i)&&x(l,"color",e[4].textColor),(!h||16&i)&&x(l,"font-name",e[4].font),(!h||16&i)&&x(l,"font-size",e[4].fontSize),(!h||16&i)&&x(t,"color",e[4].textColor),(!h||16&i)&&x(t,"background-color",e[4].textareaColor)},i(e){h||(ee(m),h=!0)},o(e){te(m),h=!1},d(e){e&&g(t),m&&m.d(),u=!1,i(d)}}}async function Ey(e){var t=await fetch(`http://localhost:9978/api/scripts/env/${e}`);return await t.json()}function My(e,t,r){let i;s(e,OO,(e=>r(4,i=e)));let n,{config:o}=t,a=!1,l="",c="";const h=M();async function u(){null!=n&&""!==n.name&&null!==n.name&&"new"!==n.name&&await async function(e){await fetch(`http://localhost:9978/api/scripts/env/${e.name}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(e)})}(n)}function d(){h("changeView",{view:"lists",config:{}})}async function f(){r(0,n.envVar[l]=c,n),r(1,a=!1),r(2,l=""),r(3,c=""),await u()}async function p(e){delete n.envVar[e[0]],await u(),r(0,n=await Ey(o.env))}L((async()=>{void 0!==o.env&&("new"!==o.env&&null!==o.env?("default"===o.env&&r(10,o.env="Default",o),r(0,n=await Ey(o.env))):r(0,n={name:"new",envVar:{}}))}));return e.$$set=e=>{"config"in e&&r(10,o=e.config)},[n,a,l,c,i,u,async function(){void 0!==n&&null!==n.name&&"new"!==n.name&&""!==n.name&&(await async function(e){await fetch(`http://localhost:9978/api/scripts/env/${e}`,{method:"DELETE"})}(n.name),H(),d())},d,f,p,o,function(){n.name=this.value,r(0,n)},e=>{p(e)},e=>{r(0,n.envVar[e.detail.name]=e.detail.value,n),f()},function(){l=this.value,r(2,l)},function(){c=this.value,r(3,c)},()=>{r(1,a=!0)},()=>{u(),d()}]}class Dy extends ae{constructor(e){super(),se(this,e,My,Ly,o,{config:10})}}function By(e){let t,r;return t=new Dy({props:{config:e[1]}}),t.$on("changeView",e[3]),{c(){ie(t.$$.fragment)},m(e,i){ne(t,e,i),r=!0},p(e,r){const i={};2&r&&(i.config=e[1]),t.$set(i)},i(e){r||(ee(t.$$.fragment,e),r=!0)},o(e){te(t.$$.fragment,e),r=!1},d(e){oe(t,e)}}}function Iy(t){let r,i,n;return i=new by({}),i.$on("changeView",t[3]),{c(){r=v("div"),ie(i.$$.fragment),w(r,"id","listviews"),w(r,"class","svelte-gorzvb")},m(e,t){p(e,r,t),ne(i,r,null),n=!0},p:e,i(e){n||(ee(i.$$.fragment,e),n=!0)},o(e){te(i.$$.fragment,e),n=!1},d(e){e&&g(r),oe(i)}}}function jy(e){let t,r,i,n;const o=[Iy,By],s=[];function a(e,t){return"lists"===e[0]?0:"env"===e[0]?1:-1}return~(r=a(e))&&(i=s[r]=o[r](e)),{c(){t=v("div"),i&&i.c(),w(t,"id","EnvEditor"),x(t,"color",e[2].textColor),x(t,"background-color",e[2].backgroundColor),w(t,"class","svelte-gorzvb")},m(e,i){p(e,t,i),~r&&s[r].m(t,null),n=!0},p(e,[l]){let c=r;r=a(e),r===c?~r&&s[r].p(e,l):(i&&(K(),te(s[c],1,1,(()=>{s[c]=null})),J()),~r?(i=s[r],i?i.p(e,l):(i=s[r]=o[r](e),i.c()),ee(i,1),i.m(t,null)):i=null),(!n||4&l)&&x(t,"color",e[2].textColor),(!n||4&l)&&x(t,"background-color",e[2].backgroundColor)},i(e){n||(ee(i),n=!0)},o(e){te(i),n=!1},d(e){e&&g(t),~r&&s[r].d()}}}function zy(e,t,r){let i;s(e,OO,(e=>r(2,i=e)));let n="lists",o={env:"Default"};return[n,o,i,function(e){r(0,n=e.detail.view),r(1,o=e.detail.config)}]}class Wy extends ae{constructor(e){super(),se(this,e,zy,jy,o,{})}}function qy(e,t,r){const i=e.slice();return i[12]=t[r],i}function Hy(e){let t,r,i,n,o,s=e[12].name+"";function a(){return e[7](e[12])}return{c(){t=v("li"),r=O(s),i=_(),w(t,"class","tabName svelte-1c0xrvo"),x(t,"border-color","gray")},m(e,s){p(e,t,s),f(t,r),f(t,i),n||(o=y(t,"click",a),n=!0)},p(t,r){e=t},d(e){e&&g(t),n=!1,o()}}}function Ny(e){let t,r,i,n=e[12].name+"";return{c(){t=v("li"),r=O(n),i=_(),w(t,"class","tabName svelte-1c0xrvo"),x(t,"border-bottom","3px "+e[1].backgroundColor),x(t,"z-index","100")},m(e,n){p(e,t,n),f(t,r),f(t,i)},p(e,r){2&r&&x(t,"border-bottom","3px "+e[1].backgroundColor)},d(e){e&&g(t)}}}function Xy(e){let t;function r(e,t){return e[12].name===e[0]?Ny:Hy}let i=r(e),n=i(e);return{c(){n.c(),t=b()},m(e,r){n.m(e,r),p(e,t,r)},p(e,o){i===(i=r(e))&&n?n.p(e,o):(n.d(1),n=i(e),n&&(n.c(),n.m(t.parentNode,t)))},d(e){n.d(e),e&&g(t)}}}function Fy(e){let t,r;return t=new Wy({}),{c(){ie(t.$$.fragment)},m(e,i){ne(t,e,i),r=!0},i(e){r||(ee(t.$$.fragment,e),r=!0)},o(e){te(t.$$.fragment,e),r=!1},d(e){oe(t,e)}}}function Zy(e){let t,r;return t=new py({}),{c(){ie(t.$$.fragment)},m(e,i){ne(t,e,i),r=!0},i(e){r||(ee(t.$$.fragment,e),r=!0)},o(e){te(t.$$.fragment,e),r=!1},d(e){oe(t,e)}}}function Uy(e){let t,r;return t=new Ab({}),{c(){ie(t.$$.fragment)},m(e,i){ne(t,e,i),r=!0},i(e){r||(ee(t.$$.fragment,e),r=!0)},o(e){te(t.$$.fragment,e),r=!1},d(e){oe(t,e)}}}function Vy(e){let t,r;return t=new Kb({}),{c(){ie(t.$$.fragment)},m(e,i){ne(t,e,i),r=!0},i(e){r||(ee(t.$$.fragment,e),r=!0)},o(e){te(t.$$.fragment,e),r=!1},d(e){oe(t,e)}}}function Gy(e){let t,r;return t=new Eb({}),{c(){ie(t.$$.fragment)},m(e,i){ne(t,e,i),r=!0},i(e){r||(ee(t.$$.fragment,e),r=!0)},o(e){te(t.$$.fragment,e),r=!1},d(e){oe(t,e)}}}function Yy(e){let t,r,n,o,s,a,l,c,h,u,d,b,S,C,k,T,P,Q,R,A=e[2],$=[];for(let t=0;t<A.length;t+=1)$[t]=Xy(qy(e,A,t));const L=[Gy,Vy,Uy,Zy,Fy],E=[];function M(e,t){return"General"===e[0]?0:"Theme"===e[0]?1:"Node-Red"===e[0]?2:"External Scripts"===e[0]?3:"Environments"===e[0]?4:-1}return~(s=M(e))&&(a=E[s]=L[s](e)),{c(){t=v("div"),r=v("ul");for(let e=0;e<$.length;e+=1)$[e].c();n=_(),o=v("div"),a&&a.c(),l=_(),c=v("div"),h=v("button"),u=O("EmailIt+"),d=_(),b=v("button"),S=O("Notes"),C=_(),k=v("button"),T=O("Script Terminal"),w(r,"id","tabs"),w(r,"class","svelte-1c0xrvo"),w(o,"id","prefListWrap"),w(o,"class","svelte-1c0xrvo"),x(h,"background-color",e[1].textAreaColor),x(h,"font-family",e[1].font),x(h,"color",e[1].textColor),x(h,"font-size",e[1].fontSize),w(h,"class","svelte-1c0xrvo"),x(b,"background-color",e[1].textAreaColor),x(b,"font-family",e[1].font),x(b,"color",e[1].textColor),x(b,"font-size",e[1].fontSize),w(b,"class","svelte-1c0xrvo"),x(k,"background-color",e[1].textAreaColor),x(k,"font-family",e[1].font),x(k,"color",e[1].textColor),x(k,"font-size",e[1].fontSize),w(k,"class","svelte-1c0xrvo"),w(c,"id","buttonPanel"),w(c,"class","svelte-1c0xrvo"),w(t,"id","PreferencePanel"),x(t,"background-color",e[1].backgroundColor),x(t,"font-family",e[1].font),x(t,"color",e[1].textColor),x(t,"font-size",e[1].fontSize),w(t,"class","svelte-1c0xrvo")},m(i,a){p(i,t,a),f(t,r);for(let e=0;e<$.length;e+=1)$[e].m(r,null);f(t,n),f(t,o),~s&&E[s].m(o,null),f(t,l),f(t,c),f(c,h),f(h,u),f(c,d),f(c,b),f(b,S),f(c,C),f(c,k),f(k,T),P=!0,Q||(R=[y(h,"click",e[8]),y(b,"click",e[9]),y(k,"click",e[10])],Q=!0)},p(e,[i]){if(15&i){let t;for(A=e[2],t=0;t<A.length;t+=1){const n=qy(e,A,t);$[t]?$[t].p(n,i):($[t]=Xy(n),$[t].c(),$[t].m(r,null))}for(;t<$.length;t+=1)$[t].d(1);$.length=A.length}let n=s;s=M(e),s!==n&&(a&&(K(),te(E[n],1,1,(()=>{E[n]=null})),J()),~s?(a=E[s],a||(a=E[s]=L[s](e),a.c()),ee(a,1),a.m(o,null)):a=null),(!P||2&i)&&x(h,"background-color",e[1].textAreaColor),(!P||2&i)&&x(h,"font-family",e[1].font),(!P||2&i)&&x(h,"color",e[1].textColor),(!P||2&i)&&x(h,"font-size",e[1].fontSize),(!P||2&i)&&x(b,"background-color",e[1].textAreaColor),(!P||2&i)&&x(b,"font-family",e[1].font),(!P||2&i)&&x(b,"color",e[1].textColor),(!P||2&i)&&x(b,"font-size",e[1].fontSize),(!P||2&i)&&x(k,"background-color",e[1].textAreaColor),(!P||2&i)&&x(k,"font-family",e[1].font),(!P||2&i)&&x(k,"color",e[1].textColor),(!P||2&i)&&x(k,"font-size",e[1].fontSize),(!P||2&i)&&x(t,"background-color",e[1].backgroundColor),(!P||2&i)&&x(t,"font-family",e[1].font),(!P||2&i)&&x(t,"color",e[1].textColor),(!P||2&i)&&x(t,"font-size",e[1].fontSize)},i(e){P||(ee(a),P=!0)},o(e){te(a),P=!1},d(e){e&&g(t),m($,e),~s&&E[s].d(),Q=!1,i(R)}}}function Ky(e,t,r){let i,n;s(e,$O,(e=>r(11,i=e))),s(e,OO,(e=>r(1,n=e)));let o="General";function a(e){r(0,o=e)}function l(){d($O,i="emailit",i)}function c(){d($O,i="notes",i)}function h(){d($O,i="scriptterm",i)}return[o,n,[{name:"General"},{name:"Theme"},{name:"Node-Red"},{name:"External Scripts"},{name:"Environments"}],a,l,c,h,e=>{a(e.name)},()=>{l()},e=>{c()},e=>{h()}]}class Jy extends ae{constructor(e){super(),se(this,e,Ky,Yy,o,{})}}var ew={exports:{}};!function(e,t){self,e.exports=(()=>{var e={4567:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;var o=r(9042),s=r(6114),a=r(9924),l=r(3656),c=r(844),h=r(5596),u=r(9631),d=function(e){function t(t,r){var i=e.call(this)||this;i._terminal=t,i._renderService=r,i._liveRegionLineCount=0,i._charsToConsume=[],i._charsToAnnounce="",i._accessibilityTreeRoot=document.createElement("div"),i._accessibilityTreeRoot.classList.add("xterm-accessibility"),i._accessibilityTreeRoot.tabIndex=0,i._rowContainer=document.createElement("div"),i._rowContainer.setAttribute("role","list"),i._rowContainer.classList.add("xterm-accessibility-tree"),i._rowElements=[];for(var n=0;n<i._terminal.rows;n++)i._rowElements[n]=i._createAccessibilityTreeNode(),i._rowContainer.appendChild(i._rowElements[n]);if(i._topBoundaryFocusListener=function(e){return i._onBoundaryFocus(e,0)},i._bottomBoundaryFocusListener=function(e){return i._onBoundaryFocus(e,1)},i._rowElements[0].addEventListener("focus",i._topBoundaryFocusListener),i._rowElements[i._rowElements.length-1].addEventListener("focus",i._bottomBoundaryFocusListener),i._refreshRowsDimensions(),i._accessibilityTreeRoot.appendChild(i._rowContainer),i._renderRowsDebouncer=new a.TimeBasedDebouncer(i._renderRows.bind(i)),i._refreshRows(),i._liveRegion=document.createElement("div"),i._liveRegion.classList.add("live-region"),i._liveRegion.setAttribute("aria-live","assertive"),i._accessibilityTreeRoot.appendChild(i._liveRegion),!i._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return i._terminal.element.insertAdjacentElement("afterbegin",i._accessibilityTreeRoot),i.register(i._renderRowsDebouncer),i.register(i._terminal.onResize((function(e){return i._onResize(e.rows)}))),i.register(i._terminal.onRender((function(e){return i._refreshRows(e.start,e.end)}))),i.register(i._terminal.onScroll((function(){return i._refreshRows()}))),i.register(i._terminal.onA11yChar((function(e){return i._onChar(e)}))),i.register(i._terminal.onLineFeed((function(){return i._onChar("\n")}))),i.register(i._terminal.onA11yTab((function(e){return i._onTab(e)}))),i.register(i._terminal.onKey((function(e){return i._onKey(e.key)}))),i.register(i._terminal.onBlur((function(){return i._clearLiveRegion()}))),i.register(i._renderService.onDimensionsChange((function(){return i._refreshRowsDimensions()}))),i._screenDprMonitor=new h.ScreenDprMonitor,i.register(i._screenDprMonitor),i._screenDprMonitor.setListener((function(){return i._refreshRowsDimensions()})),i.register((0,l.addDisposableDomListener)(window,"resize",(function(){return i._refreshRowsDimensions()}))),i}return n(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),(0,u.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(e,t){var r=e.target,i=this._rowElements[0===t?1:this._rowElements.length-2];if(r.getAttribute("aria-posinset")!==(0===t?"1":""+this._terminal.buffer.lines.length)&&e.relatedTarget===i){var n,o;if(0===t?(n=r,o=this._rowElements.pop(),this._rowContainer.removeChild(o)):(n=this._rowElements.shift(),o=r,this._rowContainer.removeChild(n)),n.removeEventListener("focus",this._topBoundaryFocusListener),o.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){var s=this._createAccessibilityTreeNode();this._rowElements.unshift(s),this._rowContainer.insertAdjacentElement("afterbegin",s)}else s=this._createAccessibilityTreeNode(),this._rowElements.push(s),this._rowContainer.appendChild(s);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}},t.prototype._onResize=function(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e},t.prototype._onTab=function(e){for(var t=0;t<e;t++)this._onChar(" ")},t.prototype._onChar=function(e){var t=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=o.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((function(){t._accessibilityTreeRoot.appendChild(t._liveRegion)}),0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&(0,u.removeElementFromParent)(this._liveRegion)},t.prototype._onKey=function(e){this._clearLiveRegion(),this._charsToConsume.push(e)},t.prototype._refreshRows=function(e,t){this._renderRowsDebouncer.refresh(e,t,this._terminal.rows)},t.prototype._renderRows=function(e,t){for(var r=this._terminal.buffer,i=r.lines.length.toString(),n=e;n<=t;n++){var o=r.translateBufferLineToString(r.ydisp+n,!0),s=(r.ydisp+n+1).toString(),a=this._rowElements[n];a&&(0===o.length?a.innerText=" ":a.textContent=o,a.setAttribute("aria-posinset",s),a.setAttribute("aria-setsize",i))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}},t.prototype._refreshRowDimensions=function(e){e.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(c.Disposable);t.AccessibilityManager=d},3614:(e,t)=>{function r(e){return e.replace(/\r?\n/g,"\r")}function i(e,t){return t?"[200~"+e+"[201~":e}function n(e,t,n){e=i(e=r(e),n.decPrivateModes.bracketedPasteMode),n.triggerDataEvent(e,!0),t.value=""}function o(e,t,r){var i=r.getBoundingClientRect(),n=e.clientX-i.left-10,o=e.clientY-i.top-10;t.style.width="20px",t.style.height="20px",t.style.left=n+"px",t.style.top=o+"px",t.style.zIndex="1000",t.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=r,t.bracketTextForPaste=i,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,r){e.stopPropagation(),e.clipboardData&&n(e.clipboardData.getData("text/plain"),t,r)},t.paste=n,t.moveTextAreaUnderMouseCursor=o,t.rightClickHandler=function(e,t,r,i,n){o(e,t,r),n&&i.rightClickSelect(e),t.value=i.selectionText,t.select()}},7239:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;var r=function(){function e(){this._color={},this._rgba={}}return e.prototype.clear=function(){this._color={},this._rgba={}},e.prototype.setCss=function(e,t,r){this._rgba[e]||(this._rgba[e]={}),this._rgba[e][t]=r},e.prototype.getCss=function(e,t){return this._rgba[e]?this._rgba[e][t]:void 0},e.prototype.setColor=function(e,t,r){this._color[e]||(this._color[e]={}),this._color[e][t]=r},e.prototype.getColor=function(e,t){return this._color[e]?this._color[e][t]:void 0},e}();t.ColorContrastCache=r},5680:function(e,t,r){var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorManager=t.DEFAULT_ANSI_COLORS=void 0;var n=r(8055),o=r(7239),s=n.css.toColor("#ffffff"),a=n.css.toColor("#000000"),l=n.css.toColor("#ffffff"),c=n.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var e=[n.css.toColor("#2e3436"),n.css.toColor("#cc0000"),n.css.toColor("#4e9a06"),n.css.toColor("#c4a000"),n.css.toColor("#3465a4"),n.css.toColor("#75507b"),n.css.toColor("#06989a"),n.css.toColor("#d3d7cf"),n.css.toColor("#555753"),n.css.toColor("#ef2929"),n.css.toColor("#8ae234"),n.css.toColor("#fce94f"),n.css.toColor("#729fcf"),n.css.toColor("#ad7fa8"),n.css.toColor("#34e2e2"),n.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],r=0;r<216;r++){var i=t[r/36%6|0],o=t[r/6%6|0],s=t[r%6];e.push({css:n.channels.toCss(i,o,s),rgba:n.channels.toRgba(i,o,s)})}for(r=0;r<24;r++){var a=8+10*r;e.push({css:n.channels.toCss(a,a,a),rgba:n.channels.toRgba(a,a,a)})}return e}());var u=function(){function e(e,r){this.allowTransparency=r;var i=e.createElement("canvas");i.width=1,i.height=1;var u=i.getContext("2d");if(!u)throw new Error("Could not get rendering context");this._ctx=u,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new o.ColorContrastCache,this.colors={foreground:s,background:a,cursor:l,cursorAccent:c,selectionTransparent:h,selectionOpaque:n.color.blend(a,h),selectionForeground:void 0,ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return e.prototype.onOptionsChange=function(e){"minimumContrastRatio"===e&&this._contrastCache.clear()},e.prototype.setTheme=function(e){void 0===e&&(e={}),this.colors.foreground=this._parseColor(e.foreground,s),this.colors.background=this._parseColor(e.background,a),this.colors.cursor=this._parseColor(e.cursor,l,!0),this.colors.cursorAccent=this._parseColor(e.cursorAccent,c,!0),this.colors.selectionTransparent=this._parseColor(e.selection,h,!0),this.colors.selectionOpaque=n.color.blend(this.colors.background,this.colors.selectionTransparent);var r={css:"",rgba:0};this.colors.selectionForeground=e.selectionForeground?this._parseColor(e.selectionForeground,r):void 0,this.colors.selectionForeground===r&&(this.colors.selectionForeground=void 0),n.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=n.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(e.black,t.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(e.red,t.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(e.green,t.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(e.yellow,t.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(e.blue,t.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(e.magenta,t.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(e.cyan,t.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(e.white,t.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},e.prototype.restoreColor=function(e){if(void 0!==e)switch(e){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[e]=this._restoreColors.ansi[e]}else for(var t=0;t<this._restoreColors.ansi.length;++t)this.colors.ansi[t]=this._restoreColors.ansi[t]},e.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:this.colors.ansi.slice()}},e.prototype._parseColor=function(e,t,r){if(void 0===r&&(r=this.allowTransparency),void 0===e)return t;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=e,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+e+" is invalid using fallback "+t.css),t;this._ctx.fillRect(0,0,1,1);var o=this._ctx.getImageData(0,0,1,1).data;if(255!==o[3]){if(!r)return console.warn("Color: "+e+" is using transparency, but allowTransparency is false. Using fallback "+t.css+"."),t;var s=i(this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map((function(e){return Number(e)})),4),a=s[0],l=s[1],c=s[2],h=s[3],u=Math.round(255*h);return{rgba:n.channels.toRgba(a,l,c,u),css:e}}return{css:this._ctx.fillStyle,rgba:n.channels.toRgba(o[0],o[1],o[2],o[3])}},e}();t.ColorManager=u},9631:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.removeElementFromParent=void 0,t.removeElementFromParent=function(){for(var e,t,i,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{for(var s=r(n),a=s.next();!a.done;a=s.next()){var l=a.value;null===(i=null==l?void 0:l.parentElement)||void 0===i||i.removeChild(l)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}},3656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,r,i){e.addEventListener(t,r,i);var n=!1;return{dispose:function(){n||(n=!0,e.removeEventListener(t,r,i))}}}},3551:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZone=t.Linkifier=void 0;var o=r(8460),s=r(2585),a=function(){function e(e,t,r){this._bufferService=e,this._logService=t,this._unicodeService=r,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new o.EventEmitter,this._onHideLinkUnderline=new o.EventEmitter,this._onLinkTooltip=new o.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(e.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),e.prototype.attachToDom=function(e,t){this._element=e,this._mouseZoneManager=t},e.prototype.linkifyRows=function(t,r){var i=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=t,this._rowsToLinkify.end=r):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,t),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,r)),this._mouseZoneManager.clearAll(t,r),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout((function(){return i._linkifyRows()}),e._timeBeforeLatency))},e.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var e=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var t=e.ydisp+this._rowsToLinkify.start;if(!(t>=e.lines.length)){for(var r=e.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,i=Math.ceil(2e3/this._bufferService.cols),n=this._bufferService.buffer.iterator(!1,t,r,i,i);n.hasNext();)for(var o=n.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(o.range.first,o.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},e.prototype.registerLinkMatcher=function(e,t,r){if(void 0===r&&(r={}),!t)throw new Error("handler must be defined");var i={id:this._nextLinkMatcherId++,regex:e,handler:t,matchIndex:r.matchIndex,validationCallback:r.validationCallback,hoverTooltipCallback:r.tooltipCallback,hoverLeaveCallback:r.leaveCallback,willLinkActivate:r.willLinkActivate,priority:r.priority||0};return this._addLinkMatcherToList(i),i.id},e.prototype._addLinkMatcherToList=function(e){if(0!==this._linkMatchers.length){for(var t=this._linkMatchers.length-1;t>=0;t--)if(e.priority<=this._linkMatchers[t].priority)return void this._linkMatchers.splice(t+1,0,e);this._linkMatchers.splice(0,0,e)}else this._linkMatchers.push(e)},e.prototype.deregisterLinkMatcher=function(e){for(var t=0;t<this._linkMatchers.length;t++)if(this._linkMatchers[t].id===e)return this._linkMatchers.splice(t,1),!0;return!1},e.prototype._doLinkifyRow=function(e,t,r){for(var i,n=this,o=new RegExp(r.regex.source,(r.regex.flags||"")+"g"),s=-1,a=function(){var a=i["number"!=typeof r.matchIndex?0:r.matchIndex];if(!a)return l._logService.debug("match found without corresponding matchIndex",i,r),"break";if(s=t.indexOf(a,s+1),o.lastIndex=s+a.length,s<0)return"break";var c=l._bufferService.buffer.stringIndexToBufferIndex(e,s);if(c[0]<0)return"break";var h=l._bufferService.buffer.lines.get(c[0]);if(!h)return"break";var u=h.getFg(c[1]),d=u?u>>9&511:void 0;r.validationCallback?r.validationCallback(a,(function(e){n._rowsTimeoutId||e&&n._addLink(c[1],c[0]-n._bufferService.buffer.ydisp,a,r,d)})):l._addLink(c[1],c[0]-l._bufferService.buffer.ydisp,a,r,d)},l=this;null!==(i=o.exec(t))&&"break"!==a(););},e.prototype._addLink=function(e,t,r,i,n){var o=this;if(this._mouseZoneManager&&this._element){var s=this._unicodeService.getStringCellWidth(r),a=e%this._bufferService.cols,c=t+Math.floor(e/this._bufferService.cols),h=(a+s)%this._bufferService.cols,u=c+Math.floor((a+s)/this._bufferService.cols);0===h&&(h=this._bufferService.cols,u--),this._mouseZoneManager.add(new l(a+1,c+1,h+1,u+1,(function(e){if(i.handler)return i.handler(e,r);var t=window.open();t?(t.opener=null,t.location.href=r):console.warn("Opening link blocked as opener could not be cleared")}),(function(){o._onShowLinkUnderline.fire(o._createLinkHoverEvent(a,c,h,u,n)),o._element.classList.add("xterm-cursor-pointer")}),(function(e){o._onLinkTooltip.fire(o._createLinkHoverEvent(a,c,h,u,n)),i.hoverTooltipCallback&&i.hoverTooltipCallback(e,r,{start:{x:a,y:c},end:{x:h,y:u}})}),(function(){o._onHideLinkUnderline.fire(o._createLinkHoverEvent(a,c,h,u,n)),o._element.classList.remove("xterm-cursor-pointer"),i.hoverLeaveCallback&&i.hoverLeaveCallback()}),(function(e){return!i.willLinkActivate||i.willLinkActivate(e,r)})))}},e.prototype._createLinkHoverEvent=function(e,t,r,i,n){return{x1:e,y1:t,x2:r,y2:i,cols:this._bufferService.cols,fg:n}},e._timeBeforeLatency=200,e=i([n(0,s.IBufferService),n(1,s.ILogService),n(2,s.IUnicodeService)],e)}();t.Linkifier=a;var l=function(e,t,r,i,n,o,s,a,l){this.x1=e,this.y1=t,this.x2=r,this.y2=i,this.clickCallback=n,this.hoverCallback=o,this.tooltipCallback=s,this.leaveCallback=a,this.willLinkActivate=l};t.MouseZone=l},6465:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;var c=r(2585),h=r(8460),u=r(844),d=r(3656),f=function(e){function t(t){var r=e.call(this)||this;return r._bufferService=t,r._linkProviders=[],r._linkCacheDisposables=[],r._isMouseOut=!0,r._activeLine=-1,r._onShowLinkUnderline=r.register(new h.EventEmitter),r._onHideLinkUnderline=r.register(new h.EventEmitter),r.register((0,u.getDisposeArrayDisposable)(r._linkCacheDisposables)),r}return n(t,e),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var t=this;return this._linkProviders.push(e),{dispose:function(){var r=t._linkProviders.indexOf(e);-1!==r&&t._linkProviders.splice(r,1)}}},t.prototype.attachToDom=function(e,t,r){var i=this;this._element=e,this._mouseService=t,this._renderService=r,this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",(function(){i._isMouseOut=!0,i._clearCurrentLink()}))),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(t){this._isMouseOut=!1;for(var r=e.composedPath(),i=0;i<r.length;i++){var n=r[i];if(n.classList.contains("xterm"))break;if(n.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._onHover(t),this._lastBufferCell=t)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,t){var r,i,n,o,s=this;this._activeProviderReplies&&t||(null===(n=this._activeProviderReplies)||void 0===n||n.forEach((function(e){null==e||e.forEach((function(e){e.link.dispose&&e.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=e.y);var c=!1,h=function(r,i){t?(null===(o=u._activeProviderReplies)||void 0===o?void 0:o.get(r))&&(c=u._checkLinkProviderResult(r,e,c)):i.provideLinks(e.y,(function(t){var i,n;if(!s._isMouseOut){var o=null==t?void 0:t.map((function(e){return{link:e}}));null===(i=s._activeProviderReplies)||void 0===i||i.set(r,o),c=s._checkLinkProviderResult(r,e,c),(null===(n=s._activeProviderReplies)||void 0===n?void 0:n.size)===s._linkProviders.length&&s._removeIntersectingLinks(e.y,s._activeProviderReplies)}}))},u=this;try{for(var d=a(this._linkProviders.entries()),f=d.next();!f.done;f=d.next()){var p=l(f.value,2);h(p[0],p[1])}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}},t.prototype._removeIntersectingLinks=function(e,t){for(var r=new Set,i=0;i<t.size;i++){var n=t.get(i);if(n)for(var o=0;o<n.length;o++)for(var s=n[o],a=s.link.range.start.y<e?0:s.link.range.start.x,l=s.link.range.end.y>e?this._bufferService.cols:s.link.range.end.x,c=a;c<=l;c++){if(r.has(c)){n.splice(o--,1);break}r.add(c)}}},t.prototype._checkLinkProviderResult=function(e,t,r){var i,n=this;if(!this._activeProviderReplies)return r;for(var o=this._activeProviderReplies.get(e),s=!1,a=0;a<e;a++)this._activeProviderReplies.has(a)&&!this._activeProviderReplies.get(a)||(s=!0);if(!s&&o){var l=o.find((function(e){return n._linkAtPosition(e.link,t)}));l&&(r=!0,this._handleNewLink(l))}if(this._activeProviderReplies.size===this._linkProviders.length&&!r)for(a=0;a<this._activeProviderReplies.size;a++){var c=null===(i=this._activeProviderReplies.get(a))||void 0===i?void 0:i.find((function(e){return n._linkAtPosition(e.link,t)}));if(c){r=!0,this._handleNewLink(c);break}}return r},t.prototype._handleMouseDown=function(){this._mouseDownLink=this._currentLink},t.prototype._handleMouseUp=function(e){if(this._element&&this._mouseService&&this._currentLink){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,t){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,u.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var t=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var r=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);r&&this._linkAtPosition(e.link,r)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var e,r;return null===(r=null===(e=t._currentLink)||void 0===e?void 0:e.state)||void 0===r?void 0:r.decorations.pointerCursor},set:function(e){var r,i;(null===(r=t._currentLink)||void 0===r?void 0:r.state)&&t._currentLink.state.decorations.pointerCursor!==e&&(t._currentLink.state.decorations.pointerCursor=e,t._currentLink.state.isHovered&&(null===(i=t._element)||void 0===i||i.classList.toggle("xterm-cursor-pointer",e)))}},underline:{get:function(){var e,r;return null===(r=null===(e=t._currentLink)||void 0===e?void 0:e.state)||void 0===r?void 0:r.decorations.underline},set:function(r){var i,n,o;(null===(i=t._currentLink)||void 0===i?void 0:i.state)&&(null===(o=null===(n=t._currentLink)||void 0===n?void 0:n.state)||void 0===o?void 0:o.decorations.underline)!==r&&(t._currentLink.state.decorations.underline=r,t._currentLink.state.isHovered&&t._fireUnderlineEvent(e.link,r))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((function(e){var r=0===e.start?0:e.start+1+t._bufferService.buffer.ydisp;t._clearCurrentLink(r,e.end+1+t._bufferService.buffer.ydisp)}))))}},t.prototype._linkHover=function(e,t,r){var i;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(r,t.text)},t.prototype._fireUnderlineEvent=function(e,t){var r=e.range,i=this._bufferService.buffer.ydisp,n=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-i-1,r.end.x,r.end.y-i-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(n)},t.prototype._linkLeave=function(e,t,r){var i;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(r,t.text)},t.prototype._linkAtPosition=function(e,t){var r=e.range.start.y===e.range.end.y,i=e.range.start.y<t.y,n=e.range.end.y>t.y;return(r&&e.range.start.x<=t.x&&e.range.end.x>=t.x||i&&e.range.end.x>=t.x||n&&e.range.start.x<=t.x||i&&n)&&e.range.start.y<=t.y&&e.range.end.y>=t.y},t.prototype._positionFromMouseEvent=function(e,t,r){var i=r.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(i)return{x:i[0],y:i[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,t,r,i,n){return{x1:e,y1:t,x2:r,y2:i,cols:this._bufferService.cols,fg:n}},o([s(0,c.IBufferService)],t)}(u.Disposable);t.Linkifier2=f},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZoneManager=void 0;var a=r(844),l=r(3656),c=r(4725),h=r(2585),u=function(e){function t(t,r,i,n,o,s){var a=e.call(this)||this;return a._element=t,a._screenElement=r,a._bufferService=i,a._mouseService=n,a._selectionService=o,a._optionsService=s,a._zones=[],a._areZonesActive=!1,a._lastHoverCoords=[void 0,void 0],a._initialSelectionLength=0,a.register((0,l.addDisposableDomListener)(a._element,"mousedown",(function(e){return a._onMouseDown(e)}))),a._mouseMoveListener=function(e){return a._onMouseMove(e)},a._mouseLeaveListener=function(e){return a._onMouseLeave(e)},a._clickListener=function(e){return a._onClick(e)},a}return n(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(e,t){if(0!==this._zones.length){e&&t||(e=0,t=this._bufferService.rows-1);for(var r=0;r<this._zones.length;r++){var i=this._zones[r];(i.y1>e&&i.y1<=t+1||i.y2>e&&i.y2<=t+1||i.y1<e&&i.y2>t+1)&&(this._currentZone&&this._currentZone===i&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(r--,1))}0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var t=this,r=this._findZoneEventAt(e);r!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),r&&(this._currentZone=r,r.hoverCallback&&r.hoverCallback(e),this._tooltipTimeout=window.setTimeout((function(){return t._onTooltip(e)}),this._optionsService.rawOptions.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var t=this._findZoneEventAt(e);null==t||t.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var t=this._findZoneEventAt(e);(null==t?void 0:t.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var t=this._findZoneEventAt(e),r=this._getSelectionLength();t&&r===this._initialSelectionLength&&(t.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(t)for(var r=t[0],i=t[1],n=0;n<this._zones.length;n++){var o=this._zones[n];if(o.y1===o.y2){if(i===o.y1&&r>=o.x1&&r<o.x2)return o}else if(i===o.y1&&r>=o.x1||i===o.y2&&r<o.x2||i>o.y1&&i<o.y2)return o}},o([s(2,h.IBufferService),s(3,c.IMouseService),s(4,c.ISelectionService),s(5,h.IOptionsService)],t)}(a.Disposable);t.MouseZoneManager=u},6193:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0;var i=function(){function e(e){this._renderCallback=e,this._refreshCallbacks=[]}return e.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.addRefreshCallback=function(e){var t=this;return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return t._innerRefresh()}))),this._animationFrame},e.prototype.refresh=function(e,t,r){var i=this;this._rowCount=r,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return i._innerRefresh()})))},e.prototype._innerRefresh=function(){if(this._animationFrame=void 0,void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}else this._runRefreshCallbacks()},e.prototype._runRefreshCallbacks=function(){var e,t;try{for(var i=r(this._refreshCallbacks),n=i.next();!n.done;n=i.next())(0,n.value)(0)}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this._refreshCallbacks=[]},e}();t.RenderDebouncer=i},5596:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._currentDevicePixelRatio=window.devicePixelRatio,t}return n(t,e),t.prototype.setListener=function(e){var t=this;this._listener&&this.clearListener(),this._listener=e,this._outerListener=function(){t._listener&&(t._listener(window.devicePixelRatio,t._currentDevicePixelRatio),t._updateDpr())},this._updateDpr()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.clearListener()},t.prototype._updateDpr=function(){var e;this._outerListener&&(null===(e=this._resolutionMediaMatchList)||void 0===e||e.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},t.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},t}(r(844).Disposable);t.ScreenDprMonitor=o},3236:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var l=r(2950),c=r(1680),h=r(3614),u=r(2584),d=r(5435),f=r(3525),p=r(3551),g=r(9312),m=r(6114),v=r(3656),O=r(9042),_=r(357),b=r(6954),y=r(4567),w=r(1296),S=r(7399),C=r(8460),x=r(8437),k=r(5680),T=r(3230),P=r(4725),Q=r(428),R=r(8934),A=r(6465),$=r(5114),L=r(8969),E=r(8055),M=r(4269),D=r(5941),B=r(3107),I=r(5744),j=r(9074),z=r(2585),W="undefined"!=typeof window?window.document:null,q=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;return r.browser=m,r._keyDownHandled=!1,r._keyDownSeen=!1,r._keyPressHandled=!1,r._unprocessedDeadKey=!1,r._onCursorMove=new C.EventEmitter,r._onKey=new C.EventEmitter,r._onRender=new C.EventEmitter,r._onSelectionChange=new C.EventEmitter,r._onTitleChange=new C.EventEmitter,r._onBell=new C.EventEmitter,r._onFocus=new C.EventEmitter,r._onBlur=new C.EventEmitter,r._onA11yCharEmitter=new C.EventEmitter,r._onA11yTabEmitter=new C.EventEmitter,r._setup(),r.linkifier=r._instantiationService.createInstance(p.Linkifier),r.linkifier2=r.register(r._instantiationService.createInstance(A.Linkifier2)),r._decorationService=r._instantiationService.createInstance(j.DecorationService),r._instantiationService.setService(z.IDecorationService,r._decorationService),r.register(r._inputHandler.onRequestBell((function(){return r.bell()}))),r.register(r._inputHandler.onRequestRefreshRows((function(e,t){return r.refresh(e,t)}))),r.register(r._inputHandler.onRequestSendFocus((function(){return r._reportFocus()}))),r.register(r._inputHandler.onRequestReset((function(){return r.reset()}))),r.register(r._inputHandler.onRequestWindowsOptionsReport((function(e){return r._reportWindowsOptions(e)}))),r.register(r._inputHandler.onColor((function(e){return r._handleColorEvent(e)}))),r.register((0,C.forwardEvent)(r._inputHandler.onCursorMove,r._onCursorMove)),r.register((0,C.forwardEvent)(r._inputHandler.onTitleChange,r._onTitleChange)),r.register((0,C.forwardEvent)(r._inputHandler.onA11yChar,r._onA11yCharEmitter)),r.register((0,C.forwardEvent)(r._inputHandler.onA11yTab,r._onA11yTabEmitter)),r.register(r._bufferService.onResize((function(e){return r._afterResize(e.cols,e.rows)}))),r}return n(t,e),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),t.prototype._handleColorEvent=function(e){var t,r,i,n;if(this._colorManager){try{for(var l=o(e),c=l.next();!c.done;c=l.next()){var h=c.value,d=void 0,f="";switch(h.index){case 256:d="foreground",f="10";break;case 257:d="background",f="11";break;case 258:d="cursor",f="12";break;default:d="ansi",f="4;"+h.index}if(d)switch(h.type){case 0:var p=E.color.toColorRGB("ansi"===d?this._colorManager.colors.ansi[h.index]:this._colorManager.colors[d]);this.coreService.triggerDataEvent(u.C0.ESC+"]"+f+";"+(0,D.toRgbString)(p)+u.C1_ESCAPED.ST);break;case 1:"ansi"===d?this._colorManager.colors.ansi[h.index]=E.rgba.toColor.apply(E.rgba,a([],s(h.color),!1)):this._colorManager.colors[d]=E.rgba.toColor.apply(E.rgba,a([],s(h.color),!1));break;case 2:this._colorManager.restoreColor(h.index)}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}null===(i=this._renderService)||void 0===i||i.setColors(this._colorManager.colors),null===(n=this.viewport)||void 0===n||n.onThemeChange(this._colorManager.colors)}},t.prototype.dispose=function(){var t,r,i;this._isDisposed||(e.prototype.dispose.call(this),null===(t=this._renderService)||void 0===t||t.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(i=null===(r=this.element)||void 0===r?void 0:r.parentNode)||void 0===i||i.removeChild(this.element))},t.prototype._setup=function(){e.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},t.prototype._updateOptions=function(t){var r,i,n,o;switch(e.prototype._updateOptions.call(this,t),t){case"fontFamily":case"fontSize":null===(r=this._renderService)||void 0===r||r.clear(),null===(i=this._charSizeService)||void 0===i||i.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(n=this.viewport)||void 0===n||n.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new y.AccessibilityManager(this,this._renderService)):(null===(o=this._accessibilityManager)||void 0===o||o.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},t.prototype._onTextAreaFocus=function(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(u.C0.ESC+"[I"),this.updateCursorStyle(e),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},t.prototype.blur=function(){var e;return null===(e=this.textarea)||void 0===e?void 0:e.blur()},t.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(u.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},t.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(t){var r=Math.min(this.buffer.x,this.cols-1),i=this._renderService.dimensions.actualCellHeight,n=t.getWidth(r),o=this._renderService.dimensions.actualCellWidth*n,s=this.buffer.y*this._renderService.dimensions.actualCellHeight,a=r*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=a+"px",this.textarea.style.top=s+"px",this.textarea.style.width=o+"px",this.textarea.style.height=i+"px",this.textarea.style.lineHeight=i+"px",this.textarea.style.zIndex="-5"}}},t.prototype._initGlobal=function(){var e=this;this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",(function(t){e.hasSelection()&&(0,h.copyHandler)(t,e._selectionService)})));var t=function(t){return(0,h.handlePasteEvent)(t,e.textarea,e.coreService)};this.register((0,v.addDisposableDomListener)(this.textarea,"paste",t)),this.register((0,v.addDisposableDomListener)(this.element,"paste",t)),m.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(function(t){2===t.button&&(0,h.rightClickHandler)(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)}))):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",(function(t){(0,h.rightClickHandler)(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)}))),m.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",(function(t){1===t.button&&(0,h.moveTextAreaUnderMouseCursor)(t,e.textarea,e.screenElement)})))},t.prototype._bindKeys=function(){var e=this;this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",(function(t){return e._keyUp(t)}),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",(function(t){return e._keyDown(t)}),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",(function(t){return e._keyPress(t)}),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",(function(){return e._compositionHelper.compositionstart()}))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",(function(t){return e._compositionHelper.compositionupdate(t)}))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",(function(){return e._compositionHelper.compositionend()}))),this.register((0,v.addDisposableDomListener)(this.textarea,"input",(function(t){return e._inputEvent(t)}),!0)),this.register(this.onRender((function(){return e._compositionHelper.updateCompositionElements()}))),this.register(this.onRender((function(t){return e._queueLinkification(t.start,t.end)})))},t.prototype.open=function(e){var t=this;if(!e)throw new Error("Terminal requires a parent element.");e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=e.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),e.appendChild(this.element);var r=W.createDocumentFragment();this._viewportElement=W.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),r.appendChild(this._viewportElement),this._viewportScrollArea=W.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=W.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=W.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),r.appendChild(this.screenElement),this.textarea=W.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",O.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,v.addDisposableDomListener)(this.textarea,"focus",(function(e){return t._onTextAreaFocus(e)}))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",(function(){return t._onTextAreaBlur()}))),this._helperContainer.appendChild(this.textarea);var i=this._instantiationService.createInstance($.CoreBrowserService,this.textarea);this._instantiationService.setService(P.ICoreBrowserService,i),this._charSizeService=this._instantiationService.createInstance(Q.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(P.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new k.ColorManager(W,this.options.allowTransparency),this.register(this.optionsService.onOptionChange((function(e){return t._colorManager.onOptionsChange(e)}))),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(M.CharacterJoinerService),this._instantiationService.setService(P.ICharacterJoinerService,this._characterJoinerService);var n=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(T.RenderService,n,this.rows,this.screenElement)),this._instantiationService.setService(P.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((function(e){return t._onRender.fire(e)}))),this.onResize((function(e){return t._renderService.resize(e.cols,e.rows)})),this._compositionView=W.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(r),this._soundService=this._instantiationService.createInstance(_.SoundService),this._instantiationService.setService(P.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(R.MouseService),this._instantiationService.setService(P.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(c.Viewport,(function(e){return t.scrollLines(e,!0,1)}),this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar((function(){return t.viewport.syncScrollArea()}))),this.register(this.viewport),this.register(this.onCursorMove((function(){t._renderService.onCursorMove(),t._syncTextArea()}))),this.register(this.onResize((function(){return t._renderService.onResize(t.cols,t.rows)}))),this.register(this.onBlur((function(){return t._renderService.onBlur()}))),this.register(this.onFocus((function(){return t._renderService.onFocus()}))),this.register(this._renderService.onDimensionsChange((function(){return t.viewport.syncScrollArea()}))),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(P.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((function(e){return t.scrollLines(e.amount,e.suppressScrollEvent)}))),this.register(this._selectionService.onSelectionChange((function(){return t._onSelectionChange.fire()}))),this.register(this._selectionService.onRequestRedraw((function(e){return t._renderService.onSelectionChanged(e.start,e.end,e.columnSelectMode)}))),this.register(this._selectionService.onLinuxMouseSelection((function(e){t.textarea.value=e,t.textarea.focus(),t.textarea.select()}))),this.register(this._onScroll.event((function(e){t.viewport.syncScrollArea(),t._selectionService.refresh()}))),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",(function(){return t._selectionService.refresh()}))),this._mouseZoneManager=this._instantiationService.createInstance(b.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll((function(){return t._mouseZoneManager.clearAll()}))),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(B.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(function(e){return t._selectionService.onMouseDown(e)}))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new y.AccessibilityManager(this,this._renderService)),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this._instantiationService.createInstance(I.OverviewRulerRenderer,this._viewportElement,this.screenElement)),this.optionsService.onOptionChange((function(){!t._overviewRulerRenderer&&t.options.overviewRulerWidth&&t._viewportElement&&t.screenElement&&(t._overviewRulerRenderer=t._instantiationService.createInstance(I.OverviewRulerRenderer,t._viewportElement,t.screenElement))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},t.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(f.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(w.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},t.prototype._setTheme=function(e){var t,r,i;this._theme=e,null===(t=this._colorManager)||void 0===t||t.setTheme(e),null===(r=this._renderService)||void 0===r||r.setColors(this._colorManager.colors),null===(i=this.viewport)||void 0===i||i.onThemeChange(this._colorManager.colors)},t.prototype.bindMouse=function(){var e=this,t=this,r=this.element;function i(e){var r,i,n=t._mouseService.getRawByteCoords(e,t.screenElement,t.cols,t.rows);if(!n)return!1;switch(e.overrideType||e.type){case"mousemove":i=32,void 0===e.buttons?(r=3,void 0!==e.button&&(r=e.button<3?e.button:3)):r=1&e.buttons?0:4&e.buttons?1:2&e.buttons?2:3;break;case"mouseup":i=0,r=e.button<3?e.button:3;break;case"mousedown":i=1,r=e.button<3?e.button:3;break;case"wheel":if(0===t.viewport.getLinesScrolled(e))return!1;i=e.deltaY<0?0:1,r=4;break;default:return!1}return!(void 0===i||void 0===r||r>4)&&t.coreMouseService.triggerMouseEvent({col:n.x-33,row:n.y-33,button:r,action:i,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey})}var n={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o=function(t){return i(t),t.buttons||(e._document.removeEventListener("mouseup",n.mouseup),n.mousedrag&&e._document.removeEventListener("mousemove",n.mousedrag)),e.cancel(t)},s=function(t){return i(t),e.cancel(t,!0)},a=function(e){e.buttons&&i(e)},l=function(e){e.buttons||i(e)};this.register(this.coreMouseService.onProtocolChange((function(t){t?("debug"===e.optionsService.rawOptions.logLevel&&e._logService.debug("Binding to mouse events:",e.coreMouseService.explainEvents(t)),e.element.classList.add("enable-mouse-events"),e._selectionService.disable()):(e._logService.debug("Unbinding from mouse events."),e.element.classList.remove("enable-mouse-events"),e._selectionService.enable()),8&t?n.mousemove||(r.addEventListener("mousemove",l),n.mousemove=l):(r.removeEventListener("mousemove",n.mousemove),n.mousemove=null),16&t?n.wheel||(r.addEventListener("wheel",s,{passive:!1}),n.wheel=s):(r.removeEventListener("wheel",n.wheel),n.wheel=null),2&t?n.mouseup||(n.mouseup=o):(e._document.removeEventListener("mouseup",n.mouseup),n.mouseup=null),4&t?n.mousedrag||(n.mousedrag=a):(e._document.removeEventListener("mousemove",n.mousedrag),n.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(r,"mousedown",(function(t){if(t.preventDefault(),e.focus(),e.coreMouseService.areMouseEventsActive&&!e._selectionService.shouldForceSelection(t))return i(t),n.mouseup&&e._document.addEventListener("mouseup",n.mouseup),n.mousedrag&&e._document.addEventListener("mousemove",n.mousedrag),e.cancel(t)}))),this.register((0,v.addDisposableDomListener)(r,"wheel",(function(t){if(!n.wheel){if(!e.buffer.hasScrollback){var r=e.viewport.getLinesScrolled(t);if(0===r)return;for(var i=u.C0.ESC+(e.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(t.deltaY<0?"A":"B"),o="",s=0;s<Math.abs(r);s++)o+=i;return e.coreService.triggerDataEvent(o,!0),e.cancel(t,!0)}return e.viewport.onWheel(t)?e.cancel(t):void 0}}),{passive:!1})),this.register((0,v.addDisposableDomListener)(r,"touchstart",(function(t){if(!e.coreMouseService.areMouseEventsActive)return e.viewport.onTouchStart(t),e.cancel(t)}),{passive:!0})),this.register((0,v.addDisposableDomListener)(r,"touchmove",(function(t){if(!e.coreMouseService.areMouseEventsActive)return e.viewport.onTouchMove(t)?void 0:e.cancel(t)}),{passive:!1}))},t.prototype.refresh=function(e,t){var r;null===(r=this._renderService)||void 0===r||r.refreshRows(e,t)},t.prototype._queueLinkification=function(e,t){var r;null===(r=this.linkifier)||void 0===r||r.linkifyRows(e,t)},t.prototype.updateCursorStyle=function(e){var t;(null===(t=this._selectionService)||void 0===t?void 0:t.shouldColumnSelect(e))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},t.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},t.prototype.scrollLines=function(t,r,i){void 0===i&&(i=0),e.prototype.scrollLines.call(this,t,r,i),this.refresh(0,this.rows-1)},t.prototype.paste=function(e){(0,h.paste)(e,this.textarea,this.coreService)},t.prototype.attachCustomKeyEventHandler=function(e){this._customKeyEventHandler=e},t.prototype.registerLinkMatcher=function(e,t,r){var i=this.linkifier.registerLinkMatcher(e,t,r);return this.refresh(0,this.rows-1),i},t.prototype.deregisterLinkMatcher=function(e){this.linkifier.deregisterLinkMatcher(e)&&this.refresh(0,this.rows-1)},t.prototype.registerLinkProvider=function(e){return this.linkifier2.registerLinkProvider(e)},t.prototype.registerCharacterJoiner=function(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t},t.prototype.deregisterCharacterJoiner=function(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)},Object.defineProperty(t.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),t.prototype.addMarker=function(e){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)},t.prototype.registerDecoration=function(e){return this._decorationService.registerDecoration(e)},t.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},t.prototype.select=function(e,t,r){this._selectionService.setSelection(e,t,r)},t.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},t.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},t.prototype.clearSelection=function(){var e;null===(e=this._selectionService)||void 0===e||e.clearSelection()},t.prototype.selectAll=function(){var e;null===(e=this._selectionService)||void 0===e||e.selectAll()},t.prototype.selectLines=function(e,t){var r;null===(r=this._selectionService)||void 0===r||r.selectLines(e,t)},t.prototype._keyDown=function(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;var t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;t||"Dead"!==e.key&&"AltGraph"!==e.key||(this._unprocessedDeadKey=!0);var r=(0,S.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===r.type||2===r.type){var i=this.rows-1;return this.scrollLines(2===r.type?-i:i),this.cancel(e,!0)}return 1===r.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(r.cancel&&this.cancel(e,!0),!r.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(r.key!==u.C0.ETX&&r.key!==u.C0.CR||(this.textarea.value=""),this._onKey.fire({key:r.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(r.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(e,!0))))},t.prototype._isThirdLevelShift=function(e,t){var r=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return"keypress"===t.type?r:r&&(!t.keyCode||t.keyCode>47)},t.prototype._keyUp=function(e){this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)},t.prototype._keyPress=function(e){var t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},t.prototype._inputEvent=function(e){if(e.data&&"insertText"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1},t.prototype.bell=function(){var e;this._soundBell()&&(null===(e=this._soundService)||void 0===e||e.playBellSound()),this._onBell.fire()},t.prototype.resize=function(t,r){t!==this.cols||r!==this.rows?e.prototype.resize.call(this,t,r):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},t.prototype._afterResize=function(e,t){var r,i;null===(r=this._charSizeService)||void 0===r||r.measure(),null===(i=this.viewport)||void 0===i||i.syncScrollArea(!0)},t.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(x.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},t.prototype.reset=function(){var t,r;this.options.rows=this.rows,this.options.cols=this.cols;var i=this._customKeyEventHandler;this._setup(),e.prototype.reset.call(this),null===(t=this._selectionService)||void 0===t||t.reset(),this._decorationService.reset(),this._customKeyEventHandler=i,this.refresh(0,this.rows-1),null===(r=this.viewport)||void 0===r||r.syncScrollArea()},t.prototype.clearTextureAtlas=function(){var e;null===(e=this._renderService)||void 0===e||e.clearTextureAtlas()},t.prototype._reportFocus=function(){var e;(null===(e=this.element)||void 0===e?void 0:e.classList.contains("focus"))?this.coreService.triggerDataEvent(u.C0.ESC+"[I"):this.coreService.triggerDataEvent(u.C0.ESC+"[O")},t.prototype._reportWindowsOptions=function(e){if(this._renderService)switch(e){case d.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var t=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),r=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(u.C0.ESC+"[4;"+r+";"+t+"t");break;case d.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var i=this._renderService.dimensions.scaledCellWidth.toFixed(0),n=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(u.C0.ESC+"[6;"+n+";"+i+"t")}},t.prototype.cancel=function(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1},t.prototype._visualBell=function(){return!1},t.prototype._soundBell=function(){return"sound"===this.options.bellStyle},t}(L.CoreTerminal);t.Terminal=q},9924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0;var r=function(){function e(e,t){void 0===t&&(t=1e3),this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return e.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},e.prototype.refresh=function(e,t,r){var i=this;this._rowCount=r,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;var n=Date.now();if(n-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=n,this._innerRefresh();else if(!this._additionalRefreshRequested){var o=n-this._lastRefreshMs,s=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((function(){i._lastRefreshMs=Date.now(),i._innerRefresh(),i._additionalRefreshRequested=!1,i._refreshTimeoutID=void 0}),s)}},e.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},e}();t.TimeBasedDebouncer=r},1680:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var a=r(844),l=r(3656),c=r(4725),h=r(2585),u=function(e){function t(t,r,i,n,o,s,a,c){var h=e.call(this)||this;return h._scrollLines=t,h._viewportElement=r,h._scrollArea=i,h._element=n,h._bufferService=o,h._optionsService=s,h._charSizeService=a,h._renderService=c,h.scrollBarWidth=0,h._currentRowHeight=0,h._currentScaledCellHeight=0,h._lastRecordedBufferLength=0,h._lastRecordedViewportHeight=0,h._lastRecordedBufferHeight=0,h._lastTouchY=0,h._lastScrollTop=0,h._wheelPartialScroll=0,h._refreshAnimationFrame=null,h._ignoreNextScrollEvent=!1,h.scrollBarWidth=h._viewportElement.offsetWidth-h._scrollArea.offsetWidth||15,h.register((0,l.addDisposableDomListener)(h._viewportElement,"scroll",h._onScroll.bind(h))),h._activeBuffer=h._bufferService.buffer,h.register(h._bufferService.buffers.onBufferActivate((function(e){return h._activeBuffer=e.activeBuffer}))),h._renderDimensions=h._renderService.dimensions,h.register(h._renderService.onDimensionsChange((function(e){return h._renderDimensions=e}))),setTimeout((function(){return h.syncScrollArea()}),0),h}return n(t,e),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var t=this;if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame((function(){return t._innerRefresh()})))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(void 0===e&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight||this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(t)}},t.prototype._bubbleScroll=function(e,t){var r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&r<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var t=this._getPixelsScrolled(e);return 0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},t.prototype._getPixelsScrolled=function(e){if(0===e.deltaY||e.shiftKey)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t},t.prototype.getLinesScrolled=function(e){if(0===e.deltaY||e.shiftKey)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t},t.prototype._applyScrollModifier=function(e,t){var r=this._optionsService.rawOptions.fastScrollModifier;return"alt"===r&&t.altKey||"ctrl"===r&&t.ctrlKey||"shift"===r&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},o([s(4,h.IBufferService),s(5,h.IOptionsService),s(6,c.ICharSizeService),s(7,c.IRenderService)],t)}(a.Disposable);t.Viewport=u},3107:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecorationRenderer=void 0;var l=r(3656),c=r(4725),h=r(844),u=r(2585),d=function(e){function t(t,r,i,n){var o=e.call(this)||this;return o._screenElement=t,o._bufferService=r,o._decorationService=i,o._renderService=n,o._decorationElements=new Map,o._altBufferIsActive=!1,o._dimensionsChanged=!1,o._container=document.createElement("div"),o._container.classList.add("xterm-decoration-container"),o._screenElement.appendChild(o._container),o.register(o._renderService.onRenderedViewportChange((function(){return o._queueRefresh()}))),o.register(o._renderService.onDimensionsChange((function(){o._dimensionsChanged=!0,o._queueRefresh()}))),o.register((0,l.addDisposableDomListener)(window,"resize",(function(){return o._queueRefresh()}))),o.register(o._bufferService.buffers.onBufferActivate((function(){o._altBufferIsActive=o._bufferService.buffer===o._bufferService.buffers.alt}))),o.register(o._decorationService.onDecorationRegistered((function(){return o._queueRefresh()}))),o.register(o._decorationService.onDecorationRemoved((function(e){return o._removeDecoration(e)}))),o}return n(t,e),t.prototype.dispose=function(){this._container.remove(),this._decorationElements.clear(),e.prototype.dispose.call(this)},t.prototype._queueRefresh=function(){var e=this;void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback((function(){e.refreshDecorations(),e._animationFrame=void 0})))},t.prototype.refreshDecorations=function(){var e,t;try{for(var r=a(this._decorationService.decorations),i=r.next();!i.done;i=r.next()){var n=i.value;this._renderDecoration(n)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this._dimensionsChanged=!1},t.prototype._renderDecoration=function(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)},t.prototype._createElement=function(e){var t,r=document.createElement("div");r.classList.add("xterm-decoration"),r.style.width=Math.round((e.options.width||1)*this._renderService.dimensions.actualCellWidth)+"px",r.style.height=(e.options.height||1)*this._renderService.dimensions.actualCellHeight+"px",r.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.actualCellHeight+"px",r.style.lineHeight=this._renderService.dimensions.actualCellHeight+"px";var i=null!==(t=e.options.x)&&void 0!==t?t:0;return i&&i>this._bufferService.cols&&(r.style.display="none"),this._refreshXPosition(e,r),r},t.prototype._refreshStyle=function(e){var t=this,r=e.marker.line-this._bufferService.buffers.active.ydisp;if(r<0||r>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{var i=this._decorationElements.get(e);i||(e.onDispose((function(){return t._removeDecoration(e)})),i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i)),i.style.top=r*this._renderService.dimensions.actualCellHeight+"px",i.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(i)}},t.prototype._refreshXPosition=function(e,t){var r;if(void 0===t&&(t=e.element),t){var i=null!==(r=e.options.x)&&void 0!==r?r:0;"right"===(e.options.anchor||"left")?t.style.right=i?i*this._renderService.dimensions.actualCellWidth+"px":"":t.style.left=i?i*this._renderService.dimensions.actualCellWidth+"px":""}},t.prototype._removeDecoration=function(e){var t;null===(t=this._decorationElements.get(e))||void 0===t||t.remove(),this._decorationElements.delete(e)},o([s(1,u.IBufferService),s(2,u.IDecorationService),s(3,c.IRenderService)],t)}(h.Disposable);t.BufferDecorationRenderer=d},5871:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorZoneStore=void 0;var i=function(){function e(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}return Object.defineProperty(e.prototype,"zones",{get:function(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._zones.length=0,this._zonePoolIndex=0},e.prototype.addDecoration=function(e){var t,i;if(e.options.overviewRulerOptions){try{for(var n=r(this._zones),o=n.next();!o.done;o=n.next()){var s=o.value;if(s.color===e.options.overviewRulerOptions.color&&s.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(s,e.marker.line))return;if(this._lineAdjacentToZone(s,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(s,e.marker.line)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}},e.prototype.setPadding=function(e){this._linePadding=e},e.prototype._lineIntersectsZone=function(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine},e.prototype._lineAdjacentToZone=function(e,t,r){return t>=e.startBufferLine-this._linePadding[r||"full"]&&t<=e.endBufferLine+this._linePadding[r||"full"]},e.prototype._addLineToZone=function(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)},e}();t.ColorZoneStore=i},5744:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewRulerRenderer=void 0;var l=r(5871),c=r(3656),h=r(4725),u=r(844),d=r(2585),f={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0},g={full:0,left:0,center:0,right:0},m=function(e){function t(t,r,i,n,o,s){var a,c=e.call(this)||this;c._viewportElement=t,c._screenElement=r,c._bufferService=i,c._decorationService=n,c._renderService=o,c._optionsService=s,c._colorZoneStore=new l.ColorZoneStore,c._shouldUpdateDimensions=!0,c._shouldUpdateAnchor=!0,c._lastKnownBufferLength=0,c._canvas=document.createElement("canvas"),c._canvas.classList.add("xterm-decoration-overview-ruler"),c._refreshCanvasDimensions(),null===(a=c._viewportElement.parentElement)||void 0===a||a.insertBefore(c._canvas,c._viewportElement);var h=c._canvas.getContext("2d");if(!h)throw new Error("Ctx cannot be null");return c._ctx=h,c._registerDecorationListeners(),c._registerBufferChangeListeners(),c._registerDimensionChangeListeners(),c}return n(t,e),Object.defineProperty(t.prototype,"_width",{get:function(){return this._optionsService.options.overviewRulerWidth||0},enumerable:!1,configurable:!0}),t.prototype._registerDecorationListeners=function(){var e=this;this.register(this._decorationService.onDecorationRegistered((function(){return e._queueRefresh(void 0,!0)}))),this.register(this._decorationService.onDecorationRemoved((function(){return e._queueRefresh(void 0,!0)})))},t.prototype._registerBufferChangeListeners=function(){var e=this;this.register(this._renderService.onRenderedViewportChange((function(){return e._queueRefresh()}))),this.register(this._bufferService.buffers.onBufferActivate((function(){e._canvas.style.display=e._bufferService.buffer===e._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((function(){e._lastKnownBufferLength!==e._bufferService.buffers.normal.lines.length&&(e._refreshDrawHeightConstants(),e._refreshColorZonePadding())})))},t.prototype._registerDimensionChangeListeners=function(){var e=this;this.register(this._renderService.onRender((function(){e._containerHeight&&e._containerHeight===e._screenElement.clientHeight||(e._queueRefresh(!0),e._containerHeight=e._screenElement.clientHeight)}))),this.register(this._optionsService.onOptionChange((function(t){"overviewRulerWidth"===t&&e._queueRefresh(!0)}))),this.register((0,c.addDisposableDomListener)(window,"resize",(function(){e._queueRefresh(!0)}))),this._queueRefresh(!0)},t.prototype.dispose=function(){var t;null===(t=this._canvas)||void 0===t||t.remove(),e.prototype.dispose.call(this)},t.prototype._refreshDrawConstants=function(){var e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);p.full=this._canvas.width,p.left=e,p.center=t,p.right=e,this._refreshDrawHeightConstants(),g.full=0,g.left=0,g.center=p.left,g.right=p.left+p.center},t.prototype._refreshDrawHeightConstants=function(){f.full=Math.round(2*window.devicePixelRatio);var e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*window.devicePixelRatio);f.left=t,f.center=t,f.right=t},t.prototype._refreshColorZonePadding=function(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length},t.prototype._refreshCanvasDimensions=function(){this._canvas.style.width=this._width+"px",this._canvas.width=Math.round(this._width*window.devicePixelRatio),this._canvas.style.height=this._screenElement.clientHeight+"px",this._canvas.height=Math.round(this._screenElement.clientHeight*window.devicePixelRatio),this._refreshDrawConstants(),this._refreshColorZonePadding()},t.prototype._refreshDecorations=function(){var e,t,r,i,n,o;this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();try{for(var s=a(this._decorationService.decorations),l=s.next();!l.done;l=s.next()){var c=l.value;this._colorZoneStore.addDecoration(c)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}this._ctx.lineWidth=1;var h=this._colorZoneStore.zones;try{for(var u=a(h),d=u.next();!d.done;d=u.next())"full"!==(g=d.value).position&&this._renderColorZone(g)}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}try{for(var f=a(h),p=f.next();!p.done;p=f.next()){var g;"full"===(g=p.value).position&&this._renderColorZone(g)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1},t.prototype._renderColorZone=function(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(g[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-f[e.position||"full"]/2),p[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+f[e.position||"full"]))},t.prototype._queueRefresh=function(e,t){var r=this;this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=window.requestAnimationFrame((function(){r._refreshDecorations(),r._animationFrame=void 0})))},o([s(2,d.IBufferService),s(3,d.IDecorationService),s(4,h.IRenderService),s(5,d.IOptionsService)],t)}(u.Disposable);t.OverviewRulerRenderer=m},2950:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;var o=r(4725),s=r(2585),a=function(){function e(e,t,r,i,n,o){this._textarea=e,this._compositionView=t,this._bufferService=r,this._optionsService=i,this._coreService=n,this._renderService=o,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(e.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),e.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},e.prototype.compositionupdate=function(e){var t=this;this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout((function(){t._compositionPosition.end=t._textarea.value.length}),0)},e.prototype.compositionend=function(){this._finalizeComposition(!0)},e.prototype.keydown=function(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)},e.prototype._finalizeComposition=function(e){var t=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){var r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((function(){var e;t._isSendingComposition&&(t._isSendingComposition=!1,r.start+=t._dataAlreadySent.length,(e=t._isComposing?t._textarea.value.substring(r.start,r.end):t._textarea.value.substring(r.start)).length>0&&t._coreService.triggerDataEvent(e,!0))}),0)}else{this._isSendingComposition=!1;var i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}},e.prototype._handleAnyTextareaChanges=function(){var e=this,t=this._textarea.value;setTimeout((function(){if(!e._isComposing){var r=e._textarea.value.replace(t,"");r.length>0&&(e._dataAlreadySent=r,e._coreService.triggerDataEvent(r,!0))}}),0)},e.prototype.updateCompositionElements=function(e){var t=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.actualCellHeight,n=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,o=r*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=o+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var s=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(s.width,1)+"px",this._textarea.style.height=Math.max(s.height,1)+"px",this._textarea.style.lineHeight=s.height+"px"}e||setTimeout((function(){return t.updateCompositionElements(!0)}),0)}},i([n(2,s.IBufferService),n(3,s.IOptionsService),n(4,s.ICoreService),n(5,o.IRenderService)],e)}();t.CompositionHelper=a},9806:(e,t)=>{function r(e,t,r){var i=r.getBoundingClientRect(),n=e.getComputedStyle(r),o=parseInt(n.getPropertyValue("padding-left")),s=parseInt(n.getPropertyValue("padding-top"));return[t.clientX-i.left-o,t.clientY-i.top-s]}Object.defineProperty(t,"__esModule",{value:!0}),t.getRawByteCoords=t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=r,t.getCoords=function(e,t,i,n,o,s,a,l,c){if(s){var h=r(e,t,i);if(h)return h[0]=Math.ceil((h[0]+(c?a/2:0))/a),h[1]=Math.ceil(h[1]/l),h[0]=Math.min(Math.max(h[0],1),n+(c?1:0)),h[1]=Math.min(Math.max(h[1],1),o),h}},t.getRawByteCoords=function(e){if(e)return{x:e[0]+32,y:e[1]+32}}},9504:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;var i=r(2584);function n(e,t,r,i){var n=e-o(r,e),a=t-o(r,t),h=Math.abs(n-a)-function(e,t,r){for(var i=0,n=e-o(r,e),a=t-o(r,t),l=0;l<Math.abs(n-a);l++){var c="A"===s(e,t)?-1:1,h=r.buffer.lines.get(n+c*l);(null==h?void 0:h.isWrapped)&&i++}return i}(e,t,r);return c(h,l(s(e,t),i))}function o(e,t){for(var r=0,i=e.buffer.lines.get(t),n=null==i?void 0:i.isWrapped;n&&t>=0&&t<e.rows;)r++,n=null==(i=e.buffer.lines.get(--t))?void 0:i.isWrapped;return r}function s(e,t){return e>t?"A":"B"}function a(e,t,r,i,n,o){for(var s=e,a=t,l="";s!==r||a!==i;)s+=n?1:-1,n&&s>o.cols-1?(l+=o.buffer.translateBufferLineToString(a,!1,e,s),s=0,e=0,a++):!n&&s<0&&(l+=o.buffer.translateBufferLineToString(a,!1,0,e+1),e=s=o.cols-1,a--);return l+o.buffer.translateBufferLineToString(a,!1,e,s)}function l(e,t){var r=t?"O":"[";return i.C0.ESC+r+e}function c(e,t){e=Math.floor(e);for(var r="",i=0;i<e;i++)r+=t;return r}t.moveToCellSequence=function(e,t,r,i){var s,h=r.buffer.x,u=r.buffer.y;if(!r.buffer.hasScrollback)return function(e,t,r,i,s,h){return 0===n(t,i,s,h).length?"":c(a(e,t,e,t-o(s,t),!1,s).length,l("D",h))}(h,u,0,t,r,i)+n(u,t,r,i)+function(e,t,r,i,s,h){var u;u=n(t,i,s,h).length>0?i-o(s,i):t;var d=i,f=function(e,t,r,i,s,a){var l;return l=n(r,i,s,a).length>0?i-o(s,i):t,e<r&&l<=i||e>=r&&l<i?"C":"D"}(e,t,r,i,s,h);return c(a(e,u,r,d,"C"===f,s).length,l(f,h))}(h,u,e,t,r,i);if(u===t)return s=h>e?"D":"C",c(Math.abs(h-e),l(s,i));s=u>t?"D":"C";var d=Math.abs(u-t);return c(function(e,t){return t.cols-e}(u>t?e:h,r)+(d-1)*r.cols+1+((u>t?h:e)-1),l(s,i))}},4389:function(e,t,r){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var o=r(3236),s=r(9042),a=r(7975),l=r(7090),c=r(5741),h=r(8285),u=["cols","rows"],d=function(){function e(e){var t=this;this._core=new o.Terminal(e),this._addonManager=new c.AddonManager,this._publicOptions=i({},this._core.options);var r=function(e){return t._core.options[e]},n=function(e,r){t._checkReadonlyOptions(e),t._core.options[e]=r};for(var s in this._core.options){var a={get:r.bind(this,s),set:n.bind(this,s)};Object.defineProperty(this._publicOptions,s,a)}}return e.prototype._checkReadonlyOptions=function(e){if(u.includes(e))throw new Error('Option "'+e+'" can only be set in the constructor')},e.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(e.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onWriteParsed",{get:function(){return this._core.onWriteParsed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new a.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unicode",{get:function(){return this._checkProposedApi(),new l.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new h.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modes",{get:function(){var e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._publicOptions},set:function(e){for(var t in e)this._publicOptions[t]=e[t]},enumerable:!1,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)},e.prototype.open=function(e){this._core.open(e)},e.prototype.attachCustomKeyEventHandler=function(e){this._core.attachCustomKeyEventHandler(e)},e.prototype.registerLinkMatcher=function(e,t,r){return this._checkProposedApi(),this._core.registerLinkMatcher(e,t,r)},e.prototype.deregisterLinkMatcher=function(e){this._checkProposedApi(),this._core.deregisterLinkMatcher(e)},e.prototype.registerLinkProvider=function(e){return this._checkProposedApi(),this._core.registerLinkProvider(e)},e.prototype.registerCharacterJoiner=function(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)},e.prototype.deregisterCharacterJoiner=function(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)},e.prototype.registerMarker=function(e){return void 0===e&&(e=0),this._checkProposedApi(),this._verifyIntegers(e),this._core.addMarker(e)},e.prototype.registerDecoration=function(e){var t,r,i;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(t=e.x)&&void 0!==t?t:0,null!==(r=e.width)&&void 0!==r?r:0,null!==(i=e.height)&&void 0!==i?i:0),this._core.registerDecoration(e)},e.prototype.addMarker=function(e){return this.registerMarker(e)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(e){this._verifyIntegers(e),this._core.scrollLines(e)},e.prototype.scrollPages=function(e){this._verifyIntegers(e),this._core.scrollPages(e)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(e){this._verifyIntegers(e),this._core.scrollToLine(e)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(e,t){this._core.write(e,t)},e.prototype.writeUtf8=function(e,t){this._core.write(e,t)},e.prototype.writeln=function(e,t){this._core.write(e),this._core.write("\r\n",t)},e.prototype.paste=function(e){this._core.paste(e)},e.prototype.getOption=function(e){return this._core.optionsService.getOption(e)},e.prototype.setOption=function(e,t){this._checkReadonlyOptions(e),this._core.optionsService.setOption(e,t)},e.prototype.refresh=function(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)},e.prototype.reset=function(){this._core.reset()},e.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},e.prototype.loadAddon=function(e){return this._addonManager.loadAddon(this,e)},Object.defineProperty(e,"strings",{get:function(){return s},enumerable:!1,configurable:!0}),e.prototype._verifyIntegers=function(){for(var e,t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{for(var o=n(r),s=o.next();!s.done;s=o.next()){var a=s.value;if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype._verifyPositiveIntegers=function(){for(var e,t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{for(var o=n(r),s=o.next();!s.done;s=o.next()){var a=s.value;if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e}();t.Terminal=d},1546:function(e,t,r){var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;var n=r(643),o=r(8803),s=r(1420),a=r(3734),l=r(1752),c=r(8055),h=r(9631),u=r(8978),d=function(){function e(e,t,r,i,n,o,s,a,l){this._container=e,this._alpha=i,this._colors=n,this._rendererId=o,this._bufferService=s,this._optionsService=a,this._decorationService=l,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._columnSelectMode=!1,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+t+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return e.prototype.dispose=function(){var e;(0,h.removeElementFromParent)(this._canvas),null===(e=this._charAtlas)||void 0===e||e.dispose()},e.prototype._initCanvas=function(){this._ctx=(0,l.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},e.prototype.onOptionsChanged=function(){},e.prototype.onBlur=function(){},e.prototype.onFocus=function(){},e.prototype.onCursorMove=function(){},e.prototype.onGridChanged=function(e,t){},e.prototype.onSelectionChanged=function(e,t,r){void 0===r&&(r=!1),this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r},e.prototype.setColors=function(e){this._refreshCharAtlas(e)},e.prototype._setTransparency=function(e){if(e!==this._alpha){var t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},e.prototype._refreshCharAtlas=function(e){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,s.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,e,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},e.prototype.resize=function(e){this._scaledCellWidth=e.scaledCellWidth,this._scaledCellHeight=e.scaledCellHeight,this._scaledCharWidth=e.scaledCharWidth,this._scaledCharHeight=e.scaledCharHeight,this._scaledCharLeft=e.scaledCharLeft,this._scaledCharTop=e.scaledCharTop,this._canvas.width=e.scaledCanvasWidth,this._canvas.height=e.scaledCanvasHeight,this._canvas.style.width=e.canvasWidth+"px",this._canvas.style.height=e.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},e.prototype.clearTextureAtlas=function(){var e;null===(e=this._charAtlas)||void 0===e||e.clear()},e.prototype._fillCells=function(e,t,r,i){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight)},e.prototype._fillMiddleLineAtCells=function(e,t,r){void 0===r&&(r=1);var i=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-i-window.devicePixelRatio,r*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillBottomLineAtCells=function(e,t,r){void 0===r&&(r=1),this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillLeftLineAtCell=function(e,t,r){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},e.prototype._strokeRectAtCell=function(e,t,r,i){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(e*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,i*this._scaledCellHeight-window.devicePixelRatio)},e.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},e.prototype._clearCells=function(e,t,r,i){this._alpha?this._ctx.clearRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight))},e.prototype._fillCharTrueColor=function(e,t,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=o.TEXT_BASELINE,this._clipRow(r);var i=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(i=(0,u.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),i||this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},e.prototype._drawChars=function(e,t,r){var s,a,l,c=this._getContrastColor(e,t,r);if(c||e.isFgRGB()||e.isBgRGB())this._drawUncachedChars(e,t,r,c);else{var h,u;e.isInverse()?(h=e.isBgDefault()?o.INVERTED_DEFAULT_COLOR:e.getBgColor(),u=e.isFgDefault()?o.INVERTED_DEFAULT_COLOR:e.getFgColor()):(u=e.isBgDefault()?n.DEFAULT_COLOR:e.getBgColor(),h=e.isFgDefault()?n.DEFAULT_COLOR:e.getFgColor()),h+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&h<8?8:0,this._currentGlyphIdentifier.chars=e.getChars()||n.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=e.getCode()||n.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=u,this._currentGlyphIdentifier.fg=h,this._currentGlyphIdentifier.bold=!!e.isBold(),this._currentGlyphIdentifier.dim=!!e.isDim(),this._currentGlyphIdentifier.italic=!!e.isItalic();var d=!1;try{for(var f=i(this._decorationService.getDecorationsAtCell(t,r)),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.backgroundColorRGB||g.foregroundColorRGB){d=!0;break}}}catch(e){s={error:e}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}!d&&(null===(l=this._charAtlas)||void 0===l?void 0:l.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(e,t,r)}},e.prototype._drawUncachedChars=function(e,t,r,i){if(this._ctx.save(),this._ctx.font=this._getFont(!!e.isBold(),!!e.isItalic()),this._ctx.textBaseline=o.TEXT_BASELINE,e.isInverse())if(i)this._ctx.fillStyle=i.css;else if(e.isBgDefault())this._ctx.fillStyle=c.color.opaque(this._colors.background).css;else if(e.isBgRGB())this._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var n=e.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&n<8&&(n+=8),this._ctx.fillStyle=this._colors.ansi[n].css}else if(i)this._ctx.fillStyle=i.css;else if(e.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(e.isFgRGB())this._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var s=e.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&s<8&&(s+=8),this._ctx.fillStyle=this._colors.ansi[s].css}this._clipRow(r),e.isDim()&&(this._ctx.globalAlpha=o.DIM_OPACITY);var l=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(l=(0,u.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),l||this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},e.prototype._clipRow=function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},e.prototype._getFont=function(e,t){return(t?"italic":"")+" "+(e?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},e.prototype._getContrastColor=function(e,t,r){var n,o,s,a,h=!1;try{for(var u=i(this._decorationService.getDecorationsAtCell(t,r)),d=u.next();!d.done;d=u.next()){var f=d.value;"top"!==f.options.layer&&h||(f.backgroundColorRGB&&(s=f.backgroundColorRGB.rgba),f.foregroundColorRGB&&(a=f.foregroundColorRGB.rgba),h="top"===f.options.layer)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}if(h||this._colors.selectionForeground&&this._isCellInSelection(t,r)&&(a=this._colors.selectionForeground.rgba),s||a||1!==this._optionsService.rawOptions.minimumContrastRatio&&!(0,l.excludeFromContrastRatioDemands)(e.getCode())){if(!s&&!a){var p=this._colors.contrastCache.getColor(e.bg,e.fg);if(void 0!==p)return p||void 0}var g=e.getFgColor(),m=e.getFgColorMode(),v=e.getBgColor(),O=e.getBgColorMode(),_=!!e.isInverse(),b=!!e.isInverse();if(_){var y=g;g=v,v=y;var w=m;m=O,O=w}var S=this._resolveBackgroundRgba(void 0!==s?50331648:O,null!=s?s:v,_),C=this._resolveForegroundRgba(m,g,_,b),x=c.rgba.ensureContrastRatio(null!=s?s:S,null!=a?a:C,this._optionsService.rawOptions.minimumContrastRatio);if(!x){if(!a)return void this._colors.contrastCache.setColor(e.bg,e.fg,null);x=a}var k={css:c.channels.toCss(x>>24&255,x>>16&255,x>>8&255),rgba:x};return s||a||this._colors.contrastCache.setColor(e.bg,e.fg,k),k}},e.prototype._resolveBackgroundRgba=function(e,t,r){switch(e){case 16777216:case 33554432:return this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},e.prototype._resolveForegroundRgba=function(e,t,r,i){switch(e){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&i&&t<8&&(t+=8),this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},e.prototype._isCellInSelection=function(e,t){var r=this._selectionStart,i=this._selectionEnd;return!(!r||!i)&&(this._columnSelectMode?e>=r[0]&&t>=r[1]&&e<i[0]&&t<i[1]:t>r[1]&&t<i[1]||r[1]===i[1]&&t===r[1]&&e>=r[0]&&e<i[0]||r[1]<i[1]&&t===i[1]&&e<i[0]||r[1]<i[1]&&t===r[1]&&e>=r[0])},e}();t.BaseRenderLayer=d},2512:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;var a=r(1546),l=r(511),c=r(2585),h=r(4725),u=600,d=function(e){function t(t,r,i,n,o,s,a,c,h,u){var d=e.call(this,t,"cursor",r,!0,i,n,s,a,u)||this;return d._onRequestRedraw=o,d._coreService=c,d._coreBrowserService=h,d._cell=new l.CellData,d._state={x:0,y:0,isFocused:!1,style:"",width:0},d._cursorRenderers={bar:d._renderBarCursor.bind(d),block:d._renderBlockCursor.bind(d),underline:d._renderUnderlineCursor.bind(d)},d}return n(t,e),t.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){var e;this._clearCursor(),null===(e=this._cursorBlinkStateManager)||void 0===e||e.restartBlinkAnimation(),this.onOptionsChanged()},t.prototype.onBlur=function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var e,t=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new f(this._coreBrowserService.isFocused,(function(){t._render(!0)}))):(null===(e=this._cursorBlinkStateManager)||void 0===e||e.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.restartBlinkAnimation()},t.prototype.onGridChanged=function(e,t){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(e){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,r=t-this._bufferService.buffer.ydisp;if(r<0||r>=this._bufferService.rows)this._clearCursor();else{var i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(t).loadCell(i,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var n=this._optionsService.rawOptions.cursorStyle;return n&&"block"!==n?this._cursorRenderers[n](i,r,this._cell):this._renderBlurCursor(i,r,this._cell),this._ctx.restore(),this._state.x=i,this._state.y=r,this._state.isFocused=!1,this._state.style=n,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===i&&this._state.y===r&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](i,r,this._cell),this._ctx.restore(),this._state.x=i,this._state.y=r,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(e,t,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(e,t,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(e,t,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(e,t,r.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(r,e,t),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(e,t,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(e,t),this._ctx.restore()},t.prototype._renderBlurCursor=function(e,t,r){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(e,t,r.getWidth(),1),this._ctx.restore()},o([s(5,c.IBufferService),s(6,c.IOptionsService),s(7,c.ICoreService),s(8,h.ICoreBrowserService),s(9,c.IDecorationService)],t)}(a.BaseRenderLayer);t.CursorRenderLayer=d;var f=function(){function e(e,t){this._renderCallback=t,this.isCursorVisible=!0,e&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0}))))},e.prototype._restartInterval=function(e){var t=this;void 0===e&&(e=u),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout((function(){if(t._animationTimeRestarted){var e=u-(Date.now()-t._animationTimeRestarted);if(t._animationTimeRestarted=void 0,e>0)return void t._restartInterval(e)}t.isCursorVisible=!1,t._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=void 0})),t._blinkInterval=window.setInterval((function(){if(t._animationTimeRestarted){var e=u-(Date.now()-t._animationTimeRestarted);return t._animationTimeRestarted=void 0,void t._restartInterval(e)}t.isCursorVisible=!t.isCursorVisible,t._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=void 0}))}),u)}),e)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:function(e,t,r){var i,n,o,s,a,l,c,h,u,d,f,p,g,m,v,O,_,b,y,w,S,C,x,k,T,P,Q,R,A,$,L,E,M,D,B,I,j,z,W,q,H,N,X,F,Z,U,V,G,Y,K,J,ee,te,re,ie,ne,oe,se,ae,le,ce,he,ue,de,fe,pe,ge,me,ve,Oe,_e,be,ye,we,Se,Ce,xe,ke,Te,Pe,Qe,Re,Ae,$e,Le,Ee,Me,De,Be,Ie,je,ze,We,qe,He,Ne,Xe,Fe,Ze,Ue,Ve,Ge,Ye,Ke,Je,et,tt,rt,it,nt,ot,st,at,lt,ct,ht,ut,dt,ft,pt,gt,mt,vt,Ot,_t,bt,yt,wt,St=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},Ct=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.powerlineDefinitions=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;var xt=r(1752);t.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:9,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var kt={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"─":(i={},i[1]="M0,.5 L1,.5",i),"━":(n={},n[3]="M0,.5 L1,.5",n),"│":(o={},o[1]="M.5,0 L.5,1",o),"┃":(s={},s[3]="M.5,0 L.5,1",s),"┌":(a={},a[1]="M0.5,1 L.5,.5 L1,.5",a),"┏":(l={},l[3]="M0.5,1 L.5,.5 L1,.5",l),"┐":(c={},c[1]="M0,.5 L.5,.5 L.5,1",c),"┓":(h={},h[3]="M0,.5 L.5,.5 L.5,1",h),"└":(u={},u[1]="M.5,0 L.5,.5 L1,.5",u),"┗":(d={},d[3]="M.5,0 L.5,.5 L1,.5",d),"┘":(f={},f[1]="M.5,0 L.5,.5 L0,.5",f),"┛":(p={},p[3]="M.5,0 L.5,.5 L0,.5",p),"├":(g={},g[1]="M.5,0 L.5,1 M.5,.5 L1,.5",g),"┣":(m={},m[3]="M.5,0 L.5,1 M.5,.5 L1,.5",m),"┤":(v={},v[1]="M.5,0 L.5,1 M.5,.5 L0,.5",v),"┫":(O={},O[3]="M.5,0 L.5,1 M.5,.5 L0,.5",O),"┬":(_={},_[1]="M0,.5 L1,.5 M.5,.5 L.5,1",_),"┳":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,1",b),"┴":(y={},y[1]="M0,.5 L1,.5 M.5,.5 L.5,0",y),"┻":(w={},w[3]="M0,.5 L1,.5 M.5,.5 L.5,0",w),"┼":(S={},S[1]="M0,.5 L1,.5 M.5,0 L.5,1",S),"╋":(C={},C[3]="M0,.5 L1,.5 M.5,0 L.5,1",C),"╴":(x={},x[1]="M.5,.5 L0,.5",x),"╸":(k={},k[3]="M.5,.5 L0,.5",k),"╵":(T={},T[1]="M.5,.5 L.5,0",T),"╹":(P={},P[3]="M.5,.5 L.5,0",P),"╶":(Q={},Q[1]="M.5,.5 L1,.5",Q),"╺":(R={},R[3]="M.5,.5 L1,.5",R),"╷":(A={},A[1]="M.5,.5 L.5,1",A),"╻":($={},$[3]="M.5,.5 L.5,1",$),"═":(L={},L[1]=function(e,t){return"M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)},L),"║":(E={},E[1]=function(e,t){return"M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1"},E),"╒":(M={},M[1]=function(e,t){return"M.5,1 L.5,"+(.5-t)+" L1,"+(.5-t)+" M.5,"+(.5+t)+" L1,"+(.5+t)},M),"╓":(D={},D[1]=function(e,t){return"M"+(.5-e)+",1 L"+(.5-e)+",.5 L1,.5 M"+(.5+e)+",.5 L"+(.5+e)+",1"},D),"╔":(B={},B[1]=function(e,t){return"M1,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1"},B),"╕":(I={},I[1]=function(e,t){return"M0,"+(.5-t)+" L.5,"+(.5-t)+" L.5,1 M0,"+(.5+t)+" L.5,"+(.5+t)},I),"╖":(j={},j[1]=function(e,t){return"M"+(.5+e)+",1 L"+(.5+e)+",.5 L0,.5 M"+(.5-e)+",.5 L"+(.5-e)+",1"},j),"╗":(z={},z[1]=function(e,t){return"M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M0,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",1"},z),"╘":(W={},W[1]=function(e,t){return"M.5,0 L.5,"+(.5+t)+" L1,"+(.5+t)+" M.5,"+(.5-t)+" L1,"+(.5-t)},W),"╙":(q={},q[1]=function(e,t){return"M1,.5 L"+(.5-e)+",.5 L"+(.5-e)+",0 M"+(.5+e)+",.5 L"+(.5+e)+",0"},q),"╚":(H={},H[1]=function(e,t){return"M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0 M1,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",0"},H),"╛":(N={},N[1]=function(e,t){return"M0,"+(.5+t)+" L.5,"+(.5+t)+" L.5,0 M0,"+(.5-t)+" L.5,"+(.5-t)},N),"╜":(X={},X[1]=function(e,t){return"M0,.5 L"+(.5+e)+",.5 L"+(.5+e)+",0 M"+(.5-e)+",.5 L"+(.5-e)+",0"},X),"╝":(F={},F[1]=function(e,t){return"M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0 M0,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",0"},F),"╞":(Z={},Z[1]=function(e,t){return"M.5,0 L.5,1 M.5,"+(.5-t)+" L1,"+(.5-t)+" M.5,"+(.5+t)+" L1,"+(.5+t)},Z),"╟":(U={},U[1]=function(e,t){return"M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1 M"+(.5+e)+",.5 L1,.5"},U),"╠":(V={},V[1]=function(e,t){return"M"+(.5-e)+",0 L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1 M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0"},V),"╡":(G={},G[1]=function(e,t){return"M.5,0 L.5,1 M0,"+(.5-t)+" L.5,"+(.5-t)+" M0,"+(.5+t)+" L.5,"+(.5+t)},G),"╢":(Y={},Y[1]=function(e,t){return"M0,.5 L"+(.5-e)+",.5 M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1"},Y),"╣":(K={},K[1]=function(e,t){return"M"+(.5+e)+",0 L"+(.5+e)+",1 M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0"},K),"╤":(J={},J[1]=function(e,t){return"M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)+" M.5,"+(.5+t)+" L.5,1"},J),"╥":(ee={},ee[1]=function(e,t){return"M0,.5 L1,.5 M"+(.5-e)+",.5 L"+(.5-e)+",1 M"+(.5+e)+",.5 L"+(.5+e)+",1"},ee),"╦":(te={},te[1]=function(e,t){return"M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1"},te),"╧":(re={},re[1]=function(e,t){return"M.5,0 L.5,"+(.5-t)+" M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)},re),"╨":(ie={},ie[1]=function(e,t){return"M0,.5 L1,.5 M"+(.5-e)+",.5 L"+(.5-e)+",0 M"+(.5+e)+",.5 L"+(.5+e)+",0"},ie),"╩":(ne={},ne[1]=function(e,t){return"M0,"+(.5+t)+" L1,"+(.5+t)+" M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0 M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0"},ne),"╪":(oe={},oe[1]=function(e,t){return"M.5,0 L.5,1 M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)},oe),"╫":(se={},se[1]=function(e,t){return"M0,.5 L1,.5 M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1"},se),"╬":(ae={},ae[1]=function(e,t){return"M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1 M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0 M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0"},ae),"╱":(le={},le[1]="M1,0 L0,1",le),"╲":(ce={},ce[1]="M0,0 L1,1",ce),"╳":(he={},he[1]="M1,0 L0,1 M0,0 L1,1",he),"╼":(ue={},ue[1]="M.5,.5 L0,.5",ue[3]="M.5,.5 L1,.5",ue),"╽":(de={},de[1]="M.5,.5 L.5,0",de[3]="M.5,.5 L.5,1",de),"╾":(fe={},fe[1]="M.5,.5 L1,.5",fe[3]="M.5,.5 L0,.5",fe),"╿":(pe={},pe[1]="M.5,.5 L.5,1",pe[3]="M.5,.5 L.5,0",pe),"┍":(ge={},ge[1]="M.5,.5 L.5,1",ge[3]="M.5,.5 L1,.5",ge),"┎":(me={},me[1]="M.5,.5 L1,.5",me[3]="M.5,.5 L.5,1",me),"┑":(ve={},ve[1]="M.5,.5 L.5,1",ve[3]="M.5,.5 L0,.5",ve),"┒":(Oe={},Oe[1]="M.5,.5 L0,.5",Oe[3]="M.5,.5 L.5,1",Oe),"┕":(_e={},_e[1]="M.5,.5 L.5,0",_e[3]="M.5,.5 L1,.5",_e),"┖":(be={},be[1]="M.5,.5 L1,.5",be[3]="M.5,.5 L.5,0",be),"┙":(ye={},ye[1]="M.5,.5 L.5,0",ye[3]="M.5,.5 L0,.5",ye),"┚":(we={},we[1]="M.5,.5 L0,.5",we[3]="M.5,.5 L.5,0",we),"┝":(Se={},Se[1]="M.5,0 L.5,1",Se[3]="M.5,.5 L1,.5",Se),"┞":(Ce={},Ce[1]="M0.5,1 L.5,.5 L1,.5",Ce[3]="M.5,.5 L.5,0",Ce),"┟":(xe={},xe[1]="M.5,0 L.5,.5 L1,.5",xe[3]="M.5,.5 L.5,1",xe),"┠":(ke={},ke[1]="M.5,.5 L1,.5",ke[3]="M.5,0 L.5,1",ke),"┡":(Te={},Te[1]="M.5,.5 L.5,1",Te[3]="M.5,0 L.5,.5 L1,.5",Te),"┢":(Pe={},Pe[1]="M.5,.5 L.5,0",Pe[3]="M0.5,1 L.5,.5 L1,.5",Pe),"┥":(Qe={},Qe[1]="M.5,0 L.5,1",Qe[3]="M.5,.5 L0,.5",Qe),"┦":(Re={},Re[1]="M0,.5 L.5,.5 L.5,1",Re[3]="M.5,.5 L.5,0",Re),"┧":(Ae={},Ae[1]="M.5,0 L.5,.5 L0,.5",Ae[3]="M.5,.5 L.5,1",Ae),"┨":($e={},$e[1]="M.5,.5 L0,.5",$e[3]="M.5,0 L.5,1",$e),"┩":(Le={},Le[1]="M.5,.5 L.5,1",Le[3]="M.5,0 L.5,.5 L0,.5",Le),"┪":(Ee={},Ee[1]="M.5,.5 L.5,0",Ee[3]="M0,.5 L.5,.5 L.5,1",Ee),"┭":(Me={},Me[1]="M0.5,1 L.5,.5 L1,.5",Me[3]="M.5,.5 L0,.5",Me),"┮":(De={},De[1]="M0,.5 L.5,.5 L.5,1",De[3]="M.5,.5 L1,.5",De),"┯":(Be={},Be[1]="M.5,.5 L.5,1",Be[3]="M0,.5 L1,.5",Be),"┰":(Ie={},Ie[1]="M0,.5 L1,.5",Ie[3]="M.5,.5 L.5,1",Ie),"┱":(je={},je[1]="M.5,.5 L1,.5",je[3]="M0,.5 L.5,.5 L.5,1",je),"┲":(ze={},ze[1]="M.5,.5 L0,.5",ze[3]="M0.5,1 L.5,.5 L1,.5",ze),"┵":(We={},We[1]="M.5,0 L.5,.5 L1,.5",We[3]="M.5,.5 L0,.5",We),"┶":(qe={},qe[1]="M.5,0 L.5,.5 L0,.5",qe[3]="M.5,.5 L1,.5",qe),"┷":(He={},He[1]="M.5,.5 L.5,0",He[3]="M0,.5 L1,.5",He),"┸":(Ne={},Ne[1]="M0,.5 L1,.5",Ne[3]="M.5,.5 L.5,0",Ne),"┹":(Xe={},Xe[1]="M.5,.5 L1,.5",Xe[3]="M.5,0 L.5,.5 L0,.5",Xe),"┺":(Fe={},Fe[1]="M.5,.5 L0,.5",Fe[3]="M.5,0 L.5,.5 L1,.5",Fe),"┽":(Ze={},Ze[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Ze[3]="M.5,.5 L0,.5",Ze),"┾":(Ue={},Ue[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Ue[3]="M.5,.5 L1,.5",Ue),"┿":(Ve={},Ve[1]="M.5,0 L.5,1",Ve[3]="M0,.5 L1,.5",Ve),"╀":(Ge={},Ge[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Ge[3]="M.5,.5 L.5,0",Ge),"╁":(Ye={},Ye[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Ye[3]="M.5,.5 L.5,1",Ye),"╂":(Ke={},Ke[1]="M0,.5 L1,.5",Ke[3]="M.5,0 L.5,1",Ke),"╃":(Je={},Je[1]="M0.5,1 L.5,.5 L1,.5",Je[3]="M.5,0 L.5,.5 L0,.5",Je),"╄":(et={},et[1]="M0,.5 L.5,.5 L.5,1",et[3]="M.5,0 L.5,.5 L1,.5",et),"╅":(tt={},tt[1]="M.5,0 L.5,.5 L1,.5",tt[3]="M0,.5 L.5,.5 L.5,1",tt),"╆":(rt={},rt[1]="M.5,0 L.5,.5 L0,.5",rt[3]="M0.5,1 L.5,.5 L1,.5",rt),"╇":(it={},it[1]="M.5,.5 L.5,1",it[3]="M.5,.5 L.5,0 M0,.5 L1,.5",it),"╈":(nt={},nt[1]="M.5,.5 L.5,0",nt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",nt),"╉":(ot={},ot[1]="M.5,.5 L1,.5",ot[3]="M.5,0 L.5,1 M.5,.5 L0,.5",ot),"╊":(st={},st[1]="M.5,.5 L0,.5",st[3]="M.5,0 L.5,1 M.5,.5 L1,.5",st),"╌":(at={},at[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",at),"╍":(lt={},lt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",lt),"┄":(ct={},ct[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",ct),"┅":(ht={},ht[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",ht),"┈":(ut={},ut[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",ut),"┉":(dt={},dt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",dt),"╎":(ft={},ft[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",ft),"╏":(pt={},pt[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",pt),"┆":(gt={},gt[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",gt),"┇":(mt={},mt[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",mt),"┊":(vt={},vt[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",vt),"┋":(Ot={},Ot[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Ot),"╭":(_t={},_t[1]="C.5,1,.5,.5,1,.5",_t),"╮":(bt={},bt[1]="C.5,1,.5,.5,0,.5",bt),"╯":(yt={},yt[1]="C.5,0,.5,.5,0,.5",yt),"╰":(wt={},wt[1]="C.5,0,.5,.5,1,.5",wt)},t.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0},"":{d:"M0,0 L1,.5 L0,1",type:1,horizontalPadding:.5},"":{d:"M1,0 L0,.5 L1,1",type:0},"":{d:"M1,0 L0,.5 L1,1",type:1,horizontalPadding:.5}},t.tryDrawCustomChar=function(e,r,i,n,o,s){var a=t.blockElementDefinitions[r];if(a)return function(e,t,r,i,n,o){for(var s=0;s<t.length;s++){var a=t[s],l=n/8,c=o/8;e.fillRect(r+a.x*l,i+a.y*c,a.w*l,a.h*c)}}(e,a,i,n,o,s),!0;var l=kt[r];if(l)return function(e,t,r,i,n,o){var s,a=Tt.get(t);a||(a=new Map,Tt.set(t,a));var l=e.fillStyle;if("string"!=typeof l)throw new Error('Unexpected fillStyle type "'+l+'"');var c=a.get(l);if(!c){var h=t[0].length,u=t.length,d=document.createElement("canvas");d.width=h,d.height=u;var f=(0,xt.throwIfFalsy)(d.getContext("2d")),p=new ImageData(h,u),g=void 0,m=void 0,v=void 0,O=void 0;if(l.startsWith("#"))g=parseInt(l.slice(1,3),16),m=parseInt(l.slice(3,5),16),v=parseInt(l.slice(5,7),16),O=l.length>7&&parseInt(l.slice(7,9),16)||1;else{if(!l.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+l+'" when drawing pattern glyph');g=(s=St(l.substring(5,l.length-1).split(",").map((function(e){return parseFloat(e)})),4))[0],m=s[1],v=s[2],O=s[3]}for(var _=0;_<u;_++)for(var b=0;b<h;b++)p.data[4*(_*h+b)]=g,p.data[4*(_*h+b)+1]=m,p.data[4*(_*h+b)+2]=v,p.data[4*(_*h+b)+3]=t[_][b]*(255*O);f.putImageData(p,0,0),c=(0,xt.throwIfFalsy)(e.createPattern(d,null)),a.set(l,c)}e.fillStyle=c,e.fillRect(r,i,n,o)}(e,l,i,n,o,s),!0;var c=t.boxDrawingDefinitions[r];if(c)return function(e,t,r,i,n,o){var s,a,l,c;e.strokeStyle=e.fillStyle;try{for(var h=Ct(Object.entries(t)),u=h.next();!u.done;u=h.next()){var d=St(u.value,2),f=d[0],p=d[1];e.beginPath(),e.lineWidth=window.devicePixelRatio*Number.parseInt(f);var g=void 0;g="function"==typeof p?p(.15,.15/o*n):p;try{for(var m=(l=void 0,Ct(g.split(" "))),v=m.next();!v.done;v=m.next()){var O=v.value,_=O[0],b=Qt[_];if(b){var y=O.substring(1).split(",");y[0]&&y[1]&&b(e,Rt(y,n,o,r,i))}else console.error('Could not find drawing instructions for "'+_+'"')}}catch(e){l={error:e}}finally{try{v&&!v.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}e.stroke(),e.closePath()}}catch(e){s={error:e}}finally{try{u&&!u.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}}(e,c,i,n,o,s),!0;var h=t.powerlineDefinitions[r];return!!h&&(function(e,t,r,i,n,o){var s,a;e.beginPath(),e.lineWidth=window.devicePixelRatio;try{for(var l=Ct(t.d.split(" ")),c=l.next();!c.done;c=l.next()){var h=c.value,u=h[0],d=Qt[u];if(d){var f=h.substring(1).split(",");f[0]&&f[1]&&d(e,Rt(f,n,o,r,i,t.horizontalPadding))}else console.error('Could not find drawing instructions for "'+u+'"')}}catch(e){s={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}1===t.type?(e.strokeStyle=e.fillStyle,e.stroke()):e.fill(),e.closePath()}(e,h,i,n,o,s),!0)};var Tt=new Map;function Pt(e,t,r){return void 0===r&&(r=0),Math.max(Math.min(e,t),r)}var Qt={C:function(e,t){return e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},L:function(e,t){return e.lineTo(t[0],t[1])},M:function(e,t){return e.moveTo(t[0],t[1])}};function Rt(e,t,r,i,n,o){void 0===o&&(o=0);var s=e.map((function(e){return parseFloat(e)||parseInt(e)}));if(s.length<2)throw new Error("Too few arguments for instruction");for(var a=0;a<s.length;a+=2)s[a]*=t-2*o*window.devicePixelRatio,0!==s[a]&&(s[a]=Pt(Math.round(s[a]+.5)-.5,t,0)),s[a]+=i+o*window.devicePixelRatio;for(var l=1;l<s.length;l+=2)s[l]*=r,0!==s[l]&&(s[l]=Pt(Math.round(s[l]+.5)-.5,r,0)),s[l]+=n;return s}},3700:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0;var r=function(){function e(){this.cache=[]}return e.prototype.resize=function(e,t){for(var r=0;r<e;r++){this.cache.length<=r&&this.cache.push([]);for(var i=this.cache[r].length;i<t;i++)this.cache[r].push(void 0);this.cache[r].length=t}this.cache.length=e},e.prototype.clear=function(){for(var e=0;e<this.cache.length;e++)for(var t=0;t<this.cache[e].length;t++)this.cache[e][t]=void 0},e}();t.GridCache=r},5098:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;var a=r(1546),l=r(8803),c=r(2040),h=r(2585),u=function(e){function t(t,r,i,n,o,s,a,l,c){var h=e.call(this,t,"link",r,!0,i,n,a,l,c)||this;return o.onShowLinkUnderline((function(e){return h._onShowLinkUnderline(e)})),o.onHideLinkUnderline((function(e){return h._onHideLinkUnderline(e)})),s.onShowLinkUnderline((function(e){return h._onShowLinkUnderline(e)})),s.onHideLinkUnderline((function(e){return h._onHideLinkUnderline(e)})),h}return n(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(e.fg===l.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,c.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},o([s(6,h.IBufferService),s(7,h.IOptionsService),s(8,h.IDecorationService)],t)}(a.BaseRenderLayer);t.LinkRenderLayer=u},3525:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var l=r(9596),c=r(4149),h=r(2512),u=r(5098),d=r(844),f=r(4725),p=r(2585),g=r(1420),m=r(8460),v=1,O=function(e){function t(t,r,i,n,o,s,a,d){var f=e.call(this)||this;f._colors=t,f._screenElement=r,f._bufferService=s,f._charSizeService=a,f._optionsService=d,f._id=v++,f._onRequestRedraw=new m.EventEmitter;var p=f._optionsService.rawOptions.allowTransparency;return f._renderLayers=[o.createInstance(l.TextRenderLayer,f._screenElement,0,f._colors,p,f._id),o.createInstance(c.SelectionRenderLayer,f._screenElement,1,f._colors,f._id),o.createInstance(u.LinkRenderLayer,f._screenElement,2,f._colors,f._id,i,n),o.createInstance(h.CursorRenderLayer,f._screenElement,3,f._colors,f._id,f._onRequestRedraw)],f.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},f._devicePixelRatio=window.devicePixelRatio,f._updateDimensions(),f.onOptionsChanged(),f}return n(t,e),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t,r;try{for(var i=a(this._renderLayers),n=i.next();!n.done;n=i.next())n.value.dispose()}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.prototype.dispose.call(this),(0,g.removeTerminalFromCache)(this._id)},t.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},t.prototype.setColors=function(e){var t,r;this._colors=e;try{for(var i=a(this._renderLayers),n=i.next();!n.done;n=i.next()){var o=n.value;o.setColors(this._colors),o.reset()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.onResize=function(e,t){var r,i;this._updateDimensions();try{for(var n=a(this._renderLayers),o=n.next();!o.done;o=n.next())o.value.resize(this.dimensions)}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},t.prototype.onBlur=function(){this._runOperation((function(e){return e.onBlur()}))},t.prototype.onFocus=function(){this._runOperation((function(e){return e.onFocus()}))},t.prototype.onSelectionChanged=function(e,t,r){void 0===r&&(r=!1),this._runOperation((function(i){return i.onSelectionChanged(e,t,r)})),this._colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})},t.prototype.onCursorMove=function(){this._runOperation((function(e){return e.onCursorMove()}))},t.prototype.onOptionsChanged=function(){this._runOperation((function(e){return e.onOptionsChanged()}))},t.prototype.clear=function(){this._runOperation((function(e){return e.reset()}))},t.prototype._runOperation=function(e){var t,r;try{for(var i=a(this._renderLayers),n=i.next();!n.done;n=i.next())e(n.value)}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.renderRows=function(e,t){var r,i;try{for(var n=a(this._renderLayers),o=n.next();!o.done;o=n.next())o.value.onGridChanged(e,t)}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}},t.prototype.clearTextureAtlas=function(){var e,t;try{for(var r=a(this._renderLayers),i=r.next();!i.done;i=r.next())i.value.clearTextureAtlas()}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},o([s(4,p.IInstantiationService),s(5,p.IBufferService),s(6,f.ICharSizeService),s(7,p.IOptionsService)],t)}(d.Disposable);t.Renderer=O},1752:(e,t)=>{function r(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.excludeFromContrastRatioDemands=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=r,t.excludeFromContrastRatioDemands=function(e){return r(e)||function(e){return 9472<=e&&e<=9631}(e)}},4149:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0;var a=r(1546),l=r(2585),c=function(e){function t(t,r,i,n,o,s,a){var l=e.call(this,t,"selection",r,!0,i,n,o,s,a)||this;return l._clearState(),l}return n(t,e),t.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._clearState()},t.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},t.prototype.onSelectionChanged=function(t,r,i){if(e.prototype.onSelectionChanged.call(this,t,r,i),this._didStateChange(t,r,i,this._bufferService.buffer.ydisp))if(this._clearAll(),t&&r){var n=t[1]-this._bufferService.buffer.ydisp,o=r[1]-this._bufferService.buffer.ydisp,s=Math.max(n,0),a=Math.min(o,this._bufferService.rows-1);if(s>=this._bufferService.rows||a<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,i){var l=t[0],c=r[0]-l,h=a-s+1;this._fillCells(l,s,c,h)}else{l=n===s?t[0]:0;var u=s===o?r[0]:this._bufferService.cols;this._fillCells(l,s,u-l,1);var d=Math.max(a-s-1,0);if(this._fillCells(0,s+1,this._bufferService.cols,d),s!==a){var f=o===a?r[0]:this._bufferService.cols;this._fillCells(0,a,f,1)}}this._state.start=[t[0],t[1]],this._state.end=[r[0],r[1]],this._state.columnSelectMode=i,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},t.prototype._didStateChange=function(e,t,r,i){return!this._areCoordinatesEqual(e,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||r!==this._state.columnSelectMode||i!==this._state.ydisp},t.prototype._areCoordinatesEqual=function(e,t){return!(!e||!t)&&e[0]===t[0]&&e[1]===t[1]},o([s(4,l.IBufferService),s(5,l.IOptionsService),s(6,l.IDecorationService)],t)}(a.BaseRenderLayer);t.SelectionRenderLayer=c},9596:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;var l=r(3700),c=r(1546),h=r(3734),u=r(643),d=r(511),f=r(2585),p=r(4725),g=r(4269),m=function(e){function t(t,r,i,n,o,s,a,c,h){var u=e.call(this,t,"text",r,n,i,o,s,a,h)||this;return u._characterJoinerService=c,u._characterWidth=0,u._characterFont="",u._characterOverlapCache={},u._workCell=new d.CellData,u._state=new l.GridCache,u}return n(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t);var r=this._getFont(!1,!1);this._characterWidth===t.scaledCharWidth&&this._characterFont===r||(this._characterWidth=t.scaledCharWidth,this._characterFont=r,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},t.prototype.reset=function(){this._state.clear(),this._clearAll()},t.prototype._forEachCell=function(e,t,r){for(var i=e;i<=t;i++)for(var n=i+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.lines.get(n),s=this._characterJoinerService.getJoinedCharacters(n),a=0;a<this._bufferService.cols;a++){o.loadCell(a,this._workCell);var l=this._workCell,c=!1,h=a;if(0!==l.getWidth()){if(s.length>0&&a===s[0][0]){c=!0;var d=s.shift();l=new g.JoinedCellData(this._workCell,o.translateToString(!0,d[0],d[1]),d[1]-d[0]),h=d[1]-1}!c&&this._isOverlapping(l)&&h<o.length-1&&o.getCodePoint(h+1)===u.NULL_CELL_CODE&&(l.content&=-12582913,l.content|=2<<22),r(l,a,i),a=h}}},t.prototype._drawBackground=function(e,t){var r=this,i=this._ctx,n=this._bufferService.cols,o=0,s=0,l=null;i.save(),this._forEachCell(e,t,(function(e,t,c){var u,d,f=null;e.isInverse()?f=e.isFgDefault()?r._colors.foreground.css:e.isFgRGB()?"rgb("+h.AttributeData.toColorRGB(e.getFgColor()).join(",")+")":r._colors.ansi[e.getFgColor()].css:e.isBgRGB()?f="rgb("+h.AttributeData.toColorRGB(e.getBgColor()).join(",")+")":e.isBgPalette()&&(f=r._colors.ansi[e.getBgColor()].css);var p=!1;try{for(var g=a(r._decorationService.getDecorationsAtCell(t,r._bufferService.buffer.ydisp+c)),m=g.next();!m.done;m=g.next()){var v=m.value;"top"!==v.options.layer&&p||(v.backgroundColorRGB&&(f=v.backgroundColorRGB.css),p="top"===v.options.layer)}}catch(e){u={error:e}}finally{try{m&&!m.done&&(d=g.return)&&d.call(g)}finally{if(u)throw u.error}}null===l&&(o=t,s=c),c!==s?(i.fillStyle=l||"",r._fillCells(o,s,n-o,1),o=t,s=c):l!==f&&(i.fillStyle=l||"",r._fillCells(o,s,t-o,1),o=t,s=c),l=f})),null!==l&&(i.fillStyle=l,this._fillCells(o,s,n-o,1)),i.restore()},t.prototype._drawForeground=function(e,t){var r=this;this._forEachCell(e,t,(function(e,t,i){if(!e.isInvisible()&&(r._drawChars(e,t,i),e.isUnderline()||e.isStrikethrough())){if(r._ctx.save(),e.isInverse())if(e.isBgDefault())r._ctx.fillStyle=r._colors.background.css;else if(e.isBgRGB())r._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var n=e.getBgColor();r._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&n<8&&(n+=8),r._ctx.fillStyle=r._colors.ansi[n].css}else if(e.isFgDefault())r._ctx.fillStyle=r._colors.foreground.css;else if(e.isFgRGB())r._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var o=e.getFgColor();r._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&o<8&&(o+=8),r._ctx.fillStyle=r._colors.ansi[o].css}e.isStrikethrough()&&r._fillMiddleLineAtCells(t,i,e.getWidth()),e.isUnderline()&&r._fillBottomLineAtCells(t,i,e.getWidth()),r._ctx.restore()}}))},t.prototype.onGridChanged=function(e,t){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,t-e+1),this._drawBackground(e,t),this._drawForeground(e,t))},t.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},t.prototype._isOverlapping=function(e){if(1!==e.getWidth())return!1;if(e.getCode()<256)return!1;var t=e.getChars();if(this._characterOverlapCache.hasOwnProperty(t))return this._characterOverlapCache[t];this._ctx.save(),this._ctx.font=this._characterFont;var r=Math.floor(this._ctx.measureText(t).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[t]=r,r},o([s(5,f.IBufferService),s(6,f.IOptionsService),s(7,p.ICharacterJoinerService),s(8,f.IDecorationService)],t)}(c.BaseRenderLayer);t.TextRenderLayer=m},9616:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCharAtlas=void 0;var r=function(){function e(){this._didWarmUp=!1}return e.prototype.dispose=function(){},e.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},e.prototype._doWarmUp=function(){},e.prototype.clear=function(){},e.prototype.beginFrame=function(){},e}();t.BaseCharAtlas=r},1420:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireCharAtlas=void 0;var i=r(2040),n=r(1906),o=[];t.acquireCharAtlas=function(e,t,r,s,a){for(var l=(0,i.generateConfig)(s,a,e,r),c=0;c<o.length;c++){var h=(u=o[c]).ownedBy.indexOf(t);if(h>=0){if((0,i.configEquals)(u.config,l))return u.atlas;1===u.ownedBy.length?(u.atlas.dispose(),o.splice(c,1)):u.ownedBy.splice(h,1);break}}for(c=0;c<o.length;c++){var u=o[c];if((0,i.configEquals)(u.config,l))return u.ownedBy.push(t),u.atlas}var d={atlas:new n.DynamicCharAtlas(document,l),config:l,ownedBy:[t]};return o.push(d),d.atlas},t.removeTerminalFromCache=function(e){for(var t=0;t<o.length;t++){var r=o[t].ownedBy.indexOf(e);if(-1!==r){1===o[t].ownedBy.length?(o[t].atlas.dispose(),o.splice(t,1)):o[t].ownedBy.splice(r,1);break}}}},2040:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;var i=r(643);t.generateConfig=function(e,t,r,i){var n={foreground:i.foreground,background:i.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:i.ansi.slice()};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:e,scaledCharHeight:t,fontFamily:r.fontFamily,fontSize:r.fontSize,fontWeight:r.fontWeight,fontWeightBold:r.fontWeightBold,allowTransparency:r.allowTransparency,colors:n}},t.configEquals=function(e,t){for(var r=0;r<e.colors.ansi.length;r++)if(e.colors.ansi[r].rgba!==t.colors.ansi[r].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.scaledCharWidth===t.scaledCharWidth&&e.scaledCharHeight===t.scaledCharHeight&&e.colors.foreground===t.colors.foreground&&e.colors.background===t.colors.background},t.is256Color=function(e){return e<i.DEFAULT_COLOR}},8803:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR_ATLAS_CELL_SPACING=t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;var i=r(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=i.isFirefox||i.isLegacyEdge?"bottom":"ideographic",t.CHAR_ATLAS_CELL_SPACING=1},1906:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.NoneCharAtlas=t.DynamicCharAtlas=t.getGlyphCacheKey=void 0;var o=r(8803),s=r(9616),a=r(5680),l=r(7001),c=r(6114),h=r(1752),u=r(8055),d=1024,f=1024,p={css:"rgba(0, 0, 0, 0)",rgba:0};function g(e){return e.code<<21|e.bg<<12|e.fg<<3|(e.bold?0:4)+(e.dim?0:2)+(e.italic?0:1)}t.getGlyphCacheKey=g;var m=function(e){function t(t,r){var i=e.call(this)||this;i._config=r,i._drawToCacheCount=0,i._glyphsWaitingOnBitmap=[],i._bitmapCommitTimeout=null,i._bitmap=null,i._cacheCanvas=t.createElement("canvas"),i._cacheCanvas.width=d,i._cacheCanvas.height=f,i._cacheCtx=(0,h.throwIfFalsy)(i._cacheCanvas.getContext("2d",{alpha:!0}));var n=t.createElement("canvas");n.width=i._config.scaledCharWidth,n.height=i._config.scaledCharHeight,i._tmpCtx=(0,h.throwIfFalsy)(n.getContext("2d",{alpha:i._config.allowTransparency})),i._width=Math.floor(d/i._config.scaledCharWidth),i._height=Math.floor(f/i._config.scaledCharHeight);var o=i._width*i._height;return i._cacheMap=new l.LRUMap(o),i._cacheMap.prealloc(o),i}return n(t,e),t.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},t.prototype.beginFrame=function(){this._drawToCacheCount=0},t.prototype.clear=function(){if(this._cacheMap.size>0){var e=this._width*this._height;this._cacheMap=new l.LRUMap(e),this._cacheMap.prealloc(e)}this._cacheCtx.clearRect(0,0,d,f),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},t.prototype.draw=function(e,t,r,i){if(32===t.code)return!0;if(!this._canCache(t))return!1;var n=g(t),o=this._cacheMap.get(n);if(null!=o)return this._drawFromCache(e,o,r,i),!0;if(this._drawToCacheCount<100){var s;s=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var a=this._drawToCache(t,s);return this._cacheMap.set(n,a),this._drawFromCache(e,a,r,i),!0}return!1},t.prototype._canCache=function(e){return e.code<256},t.prototype._toCoordinateX=function(e){return e%this._width*this._config.scaledCharWidth},t.prototype._toCoordinateY=function(e){return Math.floor(e/this._width)*this._config.scaledCharHeight},t.prototype._drawFromCache=function(e,t,r,i){if(!t.isEmpty){var n=this._toCoordinateX(t.index),o=this._toCoordinateY(t.index);e.drawImage(t.inBitmap?this._bitmap:this._cacheCanvas,n,o,this._config.scaledCharWidth,this._config.scaledCharHeight,r,i,this._config.scaledCharWidth,this._config.scaledCharHeight)}},t.prototype._getColorFromAnsiIndex=function(e){return e<this._config.colors.ansi.length?this._config.colors.ansi[e]:a.DEFAULT_ANSI_COLORS[e]},t.prototype._getBackgroundColor=function(e){return this._config.allowTransparency?p:e.bg===o.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:e.bg<256?this._getColorFromAnsiIndex(e.bg):this._config.colors.background},t.prototype._getForegroundColor=function(e){return e.fg===o.INVERTED_DEFAULT_COLOR?u.color.opaque(this._config.colors.background):e.fg<256?this._getColorFromAnsiIndex(e.fg):this._config.colors.foreground},t.prototype._drawToCache=function(e,t){this._drawToCacheCount++,this._tmpCtx.save();var r=this._getBackgroundColor(e);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=r.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var i=e.bold?this._config.fontWeightBold:this._config.fontWeight,n=e.italic?"italic":"";this._tmpCtx.font=n+" "+i+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=o.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(e).css,e.dim&&(this._tmpCtx.globalAlpha=o.DIM_OPACITY),this._tmpCtx.fillText(e.chars,0,this._config.scaledCharHeight);var s=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),a=!1;if(this._config.allowTransparency||(a=O(s,r)),a&&"_"===e.chars&&!this._config.allowTransparency)for(var l=1;l<=5&&(this._tmpCtx.fillText(e.chars,0,this._config.scaledCharHeight-l),a=O(s=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),r));l++);this._tmpCtx.restore();var c=this._toCoordinateX(t),h=this._toCoordinateY(t);this._cacheCtx.putImageData(s,c,h);var u={index:t,isEmpty:a,inBitmap:!1};return this._addGlyphToBitmap(u),u},t.prototype._addGlyphToBitmap=function(e){var t=this;!("createImageBitmap"in window)||c.isFirefox||c.isSafari||(this._glyphsWaitingOnBitmap.push(e),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout((function(){return t._generateBitmap()}),100)))},t.prototype._generateBitmap=function(){var e=this,t=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then((function(r){e._bitmap=r;for(var i=0;i<t.length;i++)t[i].inBitmap=!0})),this._bitmapCommitTimeout=null},t}(s.BaseCharAtlas);t.DynamicCharAtlas=m;var v=function(e){function t(t,r){return e.call(this)||this}return n(t,e),t.prototype.draw=function(e,t,r,i){return!1},t}(s.BaseCharAtlas);function O(e,t){for(var r=!0,i=t.rgba>>>24,n=t.rgba>>>16&255,o=t.rgba>>>8&255,s=0;s<e.data.length;s+=4)e.data[s]===i&&e.data[s+1]===n&&e.data[s+2]===o?e.data[s+3]=0:r=!1;return r}t.NoneCharAtlas=v},7001:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LRUMap=void 0;var r=function(){function e(e){this.capacity=e,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return e.prototype._unlinkNode=function(e){var t=e.prev,r=e.next;e===this._head&&(this._head=r),e===this._tail&&(this._tail=t),null!==t&&(t.next=r),null!==r&&(r.prev=t)},e.prototype._appendNode=function(e){var t=this._tail;null!==t&&(t.next=e),e.prev=t,e.next=null,this._tail=e,null===this._head&&(this._head=e)},e.prototype.prealloc=function(e){for(var t=this._nodePool,r=0;r<e;r++)t.push({prev:null,next:null,key:null,value:null})},e.prototype.get=function(e){var t=this._map[e];return void 0!==t?(this._unlinkNode(t),this._appendNode(t),t.value):null},e.prototype.peekValue=function(e){var t=this._map[e];return void 0!==t?t.value:null},e.prototype.peek=function(){var e=this._head;return null===e?null:e.value},e.prototype.set=function(e,t){var r=this._map[e];if(void 0!==r)r=this._map[e],this._unlinkNode(r),r.value=t;else if(this.size>=this.capacity)r=this._head,this._unlinkNode(r),delete this._map[r.key],r.key=e,r.value=t,this._map[e]=r;else{var i=this._nodePool;i.length>0?((r=i.pop()).key=e,r.value=t):r={prev:null,next:null,key:e,value:t},this._map[e]=r,this.size++}this._appendNode(r)},e}();t.LRUMap=r},1296:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;var l=r(3787),c=r(8803),h=r(844),u=r(4725),d=r(2585),f=r(8460),p=r(8055),g=r(9631),m="xterm-dom-renderer-owner-",v="xterm-fg-",O="xterm-bg-",_="xterm-focus",b=1,y=function(e){function t(t,r,i,n,o,s,a,c,h,u){var d=e.call(this)||this;return d._colors=t,d._element=r,d._screenElement=i,d._viewportElement=n,d._linkifier=o,d._linkifier2=s,d._charSizeService=c,d._optionsService=h,d._bufferService=u,d._terminalClass=b++,d._rowElements=[],d._rowContainer=document.createElement("div"),d._rowContainer.classList.add("xterm-rows"),d._rowContainer.style.lineHeight="normal",d._rowContainer.setAttribute("aria-hidden","true"),d._refreshRowElements(d._bufferService.cols,d._bufferService.rows),d._selectionContainer=document.createElement("div"),d._selectionContainer.classList.add("xterm-selection"),d._selectionContainer.setAttribute("aria-hidden","true"),d.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},d._updateDimensions(),d._injectCss(),d._rowFactory=a.createInstance(l.DomRendererRowFactory,document,d._colors),d._element.classList.add(m+d._terminalClass),d._screenElement.appendChild(d._rowContainer),d._screenElement.appendChild(d._selectionContainer),d.register(d._linkifier.onShowLinkUnderline((function(e){return d._onLinkHover(e)}))),d.register(d._linkifier.onHideLinkUnderline((function(e){return d._onLinkLeave(e)}))),d.register(d._linkifier2.onShowLinkUnderline((function(e){return d._onLinkHover(e)}))),d.register(d._linkifier2.onHideLinkUnderline((function(e){return d._onLinkLeave(e)}))),d}return n(t,e),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return(new f.EventEmitter).event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._element.classList.remove(m+this._terminalClass),(0,g.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),e.prototype.dispose.call(this)},t.prototype._updateDimensions=function(){var e,t;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;try{for(var r=a(this._rowElements),i=r.next();!i.done;i=r.next()){var n=i.value;n.style.width=this.dimensions.canvasWidth+"px",n.style.height=this.dimensions.actualCellHeight+"px",n.style.lineHeight=this.dimensions.actualCellHeight+"px",n.style.overflow="hidden"}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var o=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=o,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.setColors=function(e){this._colors=e,this._injectCss()},t.prototype._injectCss=function(){var e=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var t=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";t+=this._terminalSelector+" span:not(."+l.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+l.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+l.ITALIC_CLASS+" { font-style: italic;}",t+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",t+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",t+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_BLINK_CLASS+":not(."+l.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_BLINK_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",t+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionOpaque.css+";}",this._colors.ansi.forEach((function(r,i){t+=e._terminalSelector+" ."+v+i+" { color: "+r.css+"; }"+e._terminalSelector+" ."+O+i+" { background-color: "+r.css+"; }"})),t+=this._terminalSelector+" ."+v+c.INVERTED_DEFAULT_COLOR+" { color: "+p.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+O+c.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=t},t.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},t.prototype._refreshRowElements=function(e,t){for(var r=this._rowElements.length;r<=t;r++){var i=document.createElement("div");this._rowContainer.appendChild(i),this._rowElements.push(i)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())},t.prototype.onResize=function(e,t){this._refreshRowElements(e,t),this._updateDimensions()},t.prototype.onCharSizeChanged=function(){this._updateDimensions()},t.prototype.onBlur=function(){this._rowContainer.classList.remove(_)},t.prototype.onFocus=function(){this._rowContainer.classList.add(_)},t.prototype.onSelectionChanged=function(e,t,r){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.onSelectionChanged(e,t,r),this.renderRows(0,this._bufferService.rows-1),e&&t){var i=e[1]-this._bufferService.buffer.ydisp,n=t[1]-this._bufferService.buffer.ydisp,o=Math.max(i,0),s=Math.min(n,this._bufferService.rows-1);if(!(o>=this._bufferService.rows||s<0)){var a=document.createDocumentFragment();if(r){var l=e[0]>t[0];a.appendChild(this._createSelectionElement(o,l?t[0]:e[0],l?e[0]:t[0],s-o+1))}else{var c=i===o?e[0]:0,h=o===n?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,c,h));var u=s-o-1;if(a.appendChild(this._createSelectionElement(o+1,0,this._bufferService.cols,u)),o!==s){var d=n===s?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(s,0,d))}}this._selectionContainer.appendChild(a)}}},t.prototype._createSelectionElement=function(e,t,r,i){void 0===i&&(i=1);var n=document.createElement("div");return n.style.height=i*this.dimensions.actualCellHeight+"px",n.style.top=e*this.dimensions.actualCellHeight+"px",n.style.left=t*this.dimensions.actualCellWidth+"px",n.style.width=this.dimensions.actualCellWidth*(r-t)+"px",n},t.prototype.onCursorMove=function(){},t.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},t.prototype.clear=function(){var e,t;try{for(var r=a(this._rowElements),i=r.next();!i.done;i=r.next())i.value.innerText=""}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.renderRows=function(e,t){for(var r=this._bufferService.buffer.ybase+this._bufferService.buffer.y,i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._optionsService.rawOptions.cursorBlink,o=e;o<=t;o++){var s=this._rowElements[o];s.innerText="";var a=o+this._bufferService.buffer.ydisp,l=this._bufferService.buffer.lines.get(a),c=this._optionsService.rawOptions.cursorStyle;s.appendChild(this._rowFactory.createRow(l,a,a===r,c,i,n,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(t.prototype,"_terminalSelector",{get:function(){return"."+m+this._terminalClass},enumerable:!1,configurable:!0}),t.prototype._onLinkHover=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)},t.prototype._onLinkLeave=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)},t.prototype._setCellUnderline=function(e,t,r,i,n,o){for(;e!==t||r!==i;){var s=this._rowElements[r];if(!s)return;var a=s.children[e];a&&(a.style.textDecoration=o?"underline":"none"),++e>=n&&(e=0,r++)}},o([s(6,d.IInstantiationService),s(7,u.ICharSizeService),s(8,d.IOptionsService),s(9,d.IBufferService)],t)}(h.Disposable);t.DomRenderer=y},3787:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=t.CURSOR_STYLE_UNDERLINE_CLASS=t.CURSOR_STYLE_BAR_CLASS=t.CURSOR_STYLE_BLOCK_CLASS=t.CURSOR_BLINK_CLASS=t.CURSOR_CLASS=t.STRIKETHROUGH_CLASS=t.UNDERLINE_CLASS=t.ITALIC_CLASS=t.DIM_CLASS=t.BOLD_CLASS=void 0;var s=r(8803),a=r(643),l=r(511),c=r(2585),h=r(8055),u=r(4725),d=r(4269),f=r(1752);t.BOLD_CLASS="xterm-bold",t.DIM_CLASS="xterm-dim",t.ITALIC_CLASS="xterm-italic",t.UNDERLINE_CLASS="xterm-underline",t.STRIKETHROUGH_CLASS="xterm-strikethrough",t.CURSOR_CLASS="xterm-cursor",t.CURSOR_BLINK_CLASS="xterm-cursor-blink",t.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",t.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",t.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var p=function(){function e(e,t,r,i,n,o){this._document=e,this._colors=t,this._characterJoinerService=r,this._optionsService=i,this._coreService=n,this._decorationService=o,this._workCell=new l.CellData,this._columnSelectMode=!1}return e.prototype.setColors=function(e){this._colors=e},e.prototype.onSelectionChanged=function(e,t,r){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r},e.prototype.createRow=function(e,r,i,n,l,c,u,f){for(var p,m,v=this._document.createDocumentFragment(),O=this._characterJoinerService.getJoinedCharacters(r),_=0,b=Math.min(e.length,f)-1;b>=0;b--)if(e.loadCell(b,this._workCell).getCode()!==a.NULL_CELL_CODE||i&&b===l){_=b+1;break}for(b=0;b<_;b++){e.loadCell(b,this._workCell);var y=this._workCell.getWidth();if(0!==y){var w=!1,S=b,C=this._workCell;if(O.length>0&&b===O[0][0]){w=!0;var x=O.shift();C=new d.JoinedCellData(this._workCell,e.translateToString(!0,x[0],x[1]),x[1]-x[0]),S=x[1]-1,y=C.getWidth()}var k=this._document.createElement("span");if(y>1&&(k.style.width=u*y+"px"),w&&(k.style.display="inline",l>=b&&l<=S&&(l=b)),!this._coreService.isCursorHidden&&i&&b===l)switch(k.classList.add(t.CURSOR_CLASS),c&&k.classList.add(t.CURSOR_BLINK_CLASS),n){case"bar":k.classList.add(t.CURSOR_STYLE_BAR_CLASS);break;case"underline":k.classList.add(t.CURSOR_STYLE_UNDERLINE_CLASS);break;default:k.classList.add(t.CURSOR_STYLE_BLOCK_CLASS)}C.isBold()&&k.classList.add(t.BOLD_CLASS),C.isItalic()&&k.classList.add(t.ITALIC_CLASS),C.isDim()&&k.classList.add(t.DIM_CLASS),C.isUnderline()&&k.classList.add(t.UNDERLINE_CLASS),C.isInvisible()?k.textContent=a.WHITESPACE_CELL_CHAR:k.textContent=C.getChars()||a.WHITESPACE_CELL_CHAR,C.isStrikethrough()&&k.classList.add(t.STRIKETHROUGH_CLASS);var T=C.getFgColor(),P=C.getFgColorMode(),Q=C.getBgColor(),R=C.getBgColorMode(),A=!!C.isInverse();if(A){var $=T;T=Q,Q=$;var L=P;P=R,R=L}var E=void 0,M=void 0,D=!1;try{for(var B=(p=void 0,o(this._decorationService.getDecorationsAtCell(b,r))),I=B.next();!I.done;I=B.next()){var j=I.value;"top"!==j.options.layer&&D||(j.backgroundColorRGB&&(R=50331648,Q=j.backgroundColorRGB.rgba>>8&16777215,E=j.backgroundColorRGB),j.foregroundColorRGB&&(P=50331648,T=j.foregroundColorRGB.rgba>>8&16777215,M=j.foregroundColorRGB),D="top"===j.options.layer)}}catch(e){p={error:e}}finally{try{I&&!I.done&&(m=B.return)&&m.call(B)}finally{if(p)throw p.error}}var z=this._isCellInSelection(b,r);D||this._colors.selectionForeground&&z&&(P=50331648,T=this._colors.selectionForeground.rgba>>8&16777215,M=this._colors.selectionForeground),z&&(E=this._colors.selectionOpaque,D=!0),D&&k.classList.add("xterm-decoration-top");var W=void 0;switch(R){case 16777216:case 33554432:W=this._colors.ansi[Q],k.classList.add("xterm-bg-"+Q);break;case 50331648:W=h.rgba.toColor(Q>>16,Q>>8&255,255&Q),this._addStyle(k,"background-color:#"+g((Q>>>0).toString(16),"0",6));break;default:A?(W=this._colors.foreground,k.classList.add("xterm-bg-"+s.INVERTED_DEFAULT_COLOR)):W=this._colors.background}switch(P){case 16777216:case 33554432:C.isBold()&&T<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(T+=8),this._applyMinimumContrast(k,W,this._colors.ansi[T],C,E,void 0)||k.classList.add("xterm-fg-"+T);break;case 50331648:var q=h.rgba.toColor(T>>16&255,T>>8&255,255&T);this._applyMinimumContrast(k,W,q,C,E,M)||this._addStyle(k,"color:#"+g(T.toString(16),"0",6));break;default:this._applyMinimumContrast(k,W,this._colors.foreground,C,E,void 0)||A&&k.classList.add("xterm-fg-"+s.INVERTED_DEFAULT_COLOR)}v.appendChild(k),b=S}}return v},e.prototype._applyMinimumContrast=function(e,t,r,i,n,o){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,f.excludeFromContrastRatioDemands)(i.getCode()))return!1;var s=void 0;return n||o||(s=this._colors.contrastCache.getColor(t.rgba,r.rgba)),void 0===s&&(s=h.color.ensureContrastRatio(n||t,o||r,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor((n||t).rgba,(o||r).rgba,null!=s?s:null)),!!s&&(this._addStyle(e,"color:"+s.css),!0)},e.prototype._addStyle=function(e,t){e.setAttribute("style",""+(e.getAttribute("style")||"")+t+";")},e.prototype._isCellInSelection=function(e,t){var r=this._selectionStart,i=this._selectionEnd;return!(!r||!i)&&(this._columnSelectMode?r[0]<=i[0]?e>=r[0]&&t>=r[1]&&e<i[0]&&t<=i[1]:e<r[0]&&t>=r[1]&&e>=i[0]&&t<=i[1]:t>r[1]&&t<i[1]||r[1]===i[1]&&t===r[1]&&e>=r[0]&&e<i[0]||r[1]<i[1]&&t===i[1]&&e<i[0]||r[1]<i[1]&&t===r[1]&&e>=r[0])},i([n(2,u.ICharacterJoinerService),n(3,c.IOptionsService),n(4,c.ICoreService),n(5,c.IDecorationService)],e)}();function g(e,t,r){for(;e.length<r;)e=t+e;return e}t.DomRendererRowFactory=p},456:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0;var r=function(){function e(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}return e.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(e.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1]:this.selectionStart?!this.selectionEnd||this.areSelectionValuesReversed()?(e=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?(e=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:void 0;var e},enumerable:!1,configurable:!0}),e.prototype.areSelectionValuesReversed=function(){var e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])},e.prototype.onTrim=function(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},e}();t.SelectionModel=r},428:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;var o=r(2585),s=r(8460),a=function(){function e(e,t,r){this._optionsService=r,this.width=0,this.height=0,this._onCharSizeChange=new s.EventEmitter,this._measureStrategy=new l(e,t,this._optionsService)}return Object.defineProperty(e.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),e.prototype.measure=function(){var e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())},i([n(2,o.IOptionsService)],e)}();t.CharSizeService=a;var l=function(){function e(e,t,r){this._document=e,this._parentElement=t,this._optionsService=r,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return e.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var e=this._measureElement.getBoundingClientRect();return 0!==e.width&&0!==e.height&&(this._result.width=e.width,this._result.height=Math.ceil(e.height)),this._result},e}()},4269:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;var a=r(3734),l=r(643),c=r(511),h=r(2585),u=function(e){function t(t,r,i){var n=e.call(this)||this;return n.content=0,n.combinedData="",n.fg=t.fg,n.bg=t.bg,n.combinedData=r,n._width=i,n}return n(t,e),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(e){throw new Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(a.AttributeData);t.JoinedCellData=u;var d=function(){function e(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new c.CellData}return e.prototype.register=function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id},e.prototype.deregister=function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1},e.prototype.getJoinedCharacters=function(e){if(0===this._characterJoiners.length)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];for(var r=[],i=t.translateToString(!0),n=0,o=0,s=0,a=t.getFg(0),c=t.getBg(0),h=0;h<t.getTrimmedLength();h++)if(t.loadCell(h,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==a||this._workCell.bg!==c){if(h-n>1)for(var u=this._getJoinedRanges(i,s,o,t,n),d=0;d<u.length;d++)r.push(u[d]);n=h,s=o,a=this._workCell.fg,c=this._workCell.bg}o+=this._workCell.getChars().length||l.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-n>1)for(u=this._getJoinedRanges(i,s,o,t,n),d=0;d<u.length;d++)r.push(u[d]);return r},e.prototype._getJoinedRanges=function(t,r,i,n,o){var s=t.substring(r,i),a=[];try{a=this._characterJoiners[0].handler(s)}catch(e){console.error(e)}for(var l=1;l<this._characterJoiners.length;l++)try{for(var c=this._characterJoiners[l].handler(s),h=0;h<c.length;h++)e._mergeRanges(a,c[h])}catch(e){console.error(e)}return this._stringRangesToCellRanges(a,n,o),a},e.prototype._stringRangesToCellRanges=function(e,t,r){var i=0,n=!1,o=0,s=e[i];if(s){for(var a=r;a<this._bufferService.cols;a++){var c=t.getWidth(a),h=t.getString(a).length||l.WHITESPACE_CELL_CHAR.length;if(0!==c){if(!n&&s[0]<=o&&(s[0]=a,n=!0),s[1]<=o){if(s[1]=a,!(s=e[++i]))break;s[0]<=o?(s[0]=a,n=!0):n=!1}o+=h}}s&&(s[1]=this._bufferService.cols)}},e._mergeRanges=function(e,t){for(var r=!1,i=0;i<e.length;i++){var n=e[i];if(r){if(t[1]<=n[0])return e[i-1][1]=t[1],e;if(t[1]<=n[1])return e[i-1][1]=Math.max(t[1],n[1]),e.splice(i,1),e;e.splice(i,1),i--}else{if(t[1]<=n[0])return e.splice(i,0,t),e;if(t[1]<=n[1])return n[0]=Math.min(t[0],n[0]),e;t[0]<n[1]&&(n[0]=Math.min(t[0],n[0]),r=!0)}}return r?e[e.length-1][1]=t[1]:e.push(t),e},e=o([s(0,h.IBufferService)],e)}();t.CharacterJoinerService=d},5114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0;var r=function(){function e(e){this._textarea=e}return Object.defineProperty(e.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),e}();t.CoreBrowserService=r},8934:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;var o=r(4725),s=r(9806),a=function(){function e(e,t){this._renderService=e,this._charSizeService=t}return e.prototype.getCoords=function(e,t,r,i,n){return(0,s.getCoords)(window,e,t,r,i,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,n)},e.prototype.getRawByteCoords=function(e,t,r,i){var n=this.getCoords(e,t,r,i);return(0,s.getRawByteCoords)(n)},i([n(0,o.IRenderService),n(1,o.ICharSizeService)],e)}();t.MouseService=a},3230:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;var a=r(6193),l=r(8460),c=r(844),h=r(5596),u=r(3656),d=r(2585),f=r(4725),p=function(e){function t(t,r,i,n,o,s,c){var d=e.call(this)||this;if(d._renderer=t,d._rowCount=r,d._charSizeService=o,d._isPaused=!1,d._needsFullRefresh=!1,d._isNextRenderRedrawOnly=!0,d._needsSelectionRefresh=!1,d._canvasWidth=0,d._canvasHeight=0,d._selectionState={start:void 0,end:void 0,columnSelectMode:!1},d._onDimensionsChange=new l.EventEmitter,d._onRenderedViewportChange=new l.EventEmitter,d._onRender=new l.EventEmitter,d._onRefreshRequest=new l.EventEmitter,d.register({dispose:function(){return d._renderer.dispose()}}),d._renderDebouncer=new a.RenderDebouncer((function(e,t){return d._renderRows(e,t)})),d.register(d._renderDebouncer),d._screenDprMonitor=new h.ScreenDprMonitor,d._screenDprMonitor.setListener((function(){return d.onDevicePixelRatioChange()})),d.register(d._screenDprMonitor),d.register(c.onResize((function(){return d._fullRefresh()}))),d.register(c.buffers.onBufferActivate((function(){var e;return null===(e=d._renderer)||void 0===e?void 0:e.clear()}))),d.register(n.onOptionChange((function(){return d._handleOptionsChanged()}))),d.register(d._charSizeService.onCharSizeChange((function(){return d.onCharSizeChanged()}))),d.register(s.onDecorationRegistered((function(){return d._fullRefresh()}))),d.register(s.onDecorationRemoved((function(){return d._fullRefresh()}))),d._renderer.onRequestRedraw((function(e){return d.refreshRows(e.start,e.end,!0)})),d.register((0,u.addDisposableDomListener)(window,"resize",(function(){return d.onDevicePixelRatioChange()}))),"IntersectionObserver"in window){var f=new IntersectionObserver((function(e){return d._onIntersectionChange(e[e.length-1])}),{threshold:0});f.observe(i),d.register({dispose:function(){return f.disconnect()}})}return d}return n(t,e),Object.defineProperty(t.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRenderedViewportChange",{get:function(){return this._onRenderedViewportChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),t.prototype._onIntersectionChange=function(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},t.prototype.refreshRows=function(e,t,r){void 0===r&&(r=!1),this._isPaused?this._needsFullRefresh=!0:(r||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))},t.prototype._renderRows=function(e,t){this._renderer.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0},t.prototype.resize=function(e,t){this._rowCount=t,this._fireOnCanvasResize()},t.prototype._handleOptionsChanged=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},t.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.setRenderer=function(e){var t=this;this._renderer.dispose(),this._renderer=e,this._renderer.onRequestRedraw((function(e){return t.refreshRows(e.start,e.end,!0)})),this._needsSelectionRefresh=!0,this._fullRefresh()},t.prototype.addRefreshCallback=function(e){return this._renderDebouncer.addRefreshCallback(e)},t.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},t.prototype.clearTextureAtlas=function(){var e,t;null===(t=null===(e=this._renderer)||void 0===e?void 0:e.clearTextureAtlas)||void 0===t||t.call(e),this._fullRefresh()},t.prototype.setColors=function(e){this._renderer.setColors(e),this._fullRefresh()},t.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},t.prototype.onResize=function(e,t){this._renderer.onResize(e,t),this._fullRefresh()},t.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},t.prototype.onBlur=function(){this._renderer.onBlur()},t.prototype.onFocus=function(){this._renderer.onFocus()},t.prototype.onSelectionChanged=function(e,t,r){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=r,this._renderer.onSelectionChanged(e,t,r)},t.prototype.onCursorMove=function(){this._renderer.onCursorMove()},t.prototype.clear=function(){this._renderer.clear()},o([s(3,d.IOptionsService),s(4,f.ICharSizeService),s(5,d.IDecorationService),s(6,d.IBufferService)],t)}(c.Disposable);t.RenderService=p},9312:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;var a=r(6114),l=r(456),c=r(511),h=r(8460),u=r(4725),d=r(2585),f=r(9806),p=r(9504),g=r(844),m=r(4841),v=String.fromCharCode(160),O=new RegExp(v,"g"),_=function(e){function t(t,r,i,n,o,s,a,u){var d=e.call(this)||this;return d._element=t,d._screenElement=r,d._linkifier=i,d._bufferService=n,d._coreService=o,d._mouseService=s,d._optionsService=a,d._renderService=u,d._dragScrollAmount=0,d._enabled=!0,d._workCell=new c.CellData,d._mouseDownTimeStamp=0,d._oldHasSelection=!1,d._oldSelectionStart=void 0,d._oldSelectionEnd=void 0,d._onLinuxMouseSelection=d.register(new h.EventEmitter),d._onRedrawRequest=d.register(new h.EventEmitter),d._onSelectionChange=d.register(new h.EventEmitter),d._onRequestScrollLines=d.register(new h.EventEmitter),d._mouseMoveListener=function(e){return d._onMouseMove(e)},d._mouseUpListener=function(e){return d._onMouseUp(e)},d._coreService.onUserInput((function(){d.hasSelection&&d.clearSelection()})),d._trimListener=d._bufferService.buffer.lines.onTrim((function(e){return d._onTrim(e)})),d.register(d._bufferService.buffers.onBufferActivate((function(e){return d._onBufferActivate(e)}))),d.enable(),d._model=new l.SelectionModel(d._bufferService),d._activeSelectionMode=0,d}return n(t,e),Object.defineProperty(t.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._removeMouseDownListeners()},t.prototype.reset=function(){this.clearSelection()},t.prototype.disable=function(){this.clearSelection(),this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelection",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionText",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";var r=this._bufferService.buffer,i=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";for(var n=e[0]<t[0]?e[0]:t[0],o=e[0]<t[0]?t[0]:e[0],s=e[1];s<=t[1];s++){var l=r.translateBufferLineToString(s,!0,n,o);i.push(l)}}else{var c=e[1]===t[1]?t[0]:void 0;for(i.push(r.translateBufferLineToString(e[1],!0,e[0],c)),s=e[1]+1;s<=t[1]-1;s++){var h=r.lines.get(s);l=r.translateBufferLineToString(s,!0),(null==h?void 0:h.isWrapped)?i[i.length-1]+=l:i.push(l)}e[1]!==t[1]&&(h=r.lines.get(t[1]),l=r.translateBufferLineToString(t[1],!0,0,t[0]),h&&h.isWrapped?i[i.length-1]+=l:i.push(l))}return i.map((function(e){return e.replace(O," ")})).join(a.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),t.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},t.prototype.refresh=function(e){var t=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame((function(){return t._refresh()}))),a.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},t.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},t.prototype._isClickInSelection=function(e){var t=this._getMouseBufferCoords(e),r=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!!(r&&i&&t)&&this._areCoordsInSelection(t,r,i)},t.prototype.isCellInSelection=function(e,t){var r=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!(!r||!i)&&this._areCoordsInSelection([e,t],r,i)},t.prototype._areCoordsInSelection=function(e,t,r){return e[1]>t[1]&&e[1]<r[1]||t[1]===r[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<r[0]||t[1]<r[1]&&e[1]===r[1]&&e[0]<r[0]||t[1]<r[1]&&e[1]===t[1]&&e[0]>=t[0]},t.prototype._selectWordAtCursor=function(e,t){var r,i,n=null===(i=null===(r=this._linkifier.currentLink)||void 0===r?void 0:r.link)||void 0===i?void 0:i.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=(0,m.getRangeLength)(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var o=this._getMouseBufferCoords(e);return!!o&&(this._selectWordAt(o,t),this._model.selectionEnd=void 0,!0)},t.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},t.prototype.selectLines=function(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()},t.prototype._onTrim=function(e){this._model.onTrim(e)&&this.refresh()},t.prototype._getMouseBufferCoords=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t},t.prototype._getMouseEventScrollAmount=function(e){var t=(0,f.getCoordsRelativeToElement)(window,e,this._screenElement)[1],r=this._renderService.dimensions.canvasHeight;return t>=0&&t<=r?0:(t>r&&(t-=r),t=Math.min(Math.max(t,-50),50),(t/=50)/Math.abs(t)+Math.round(14*t))},t.prototype.shouldForceSelection=function(e){return a.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey},t.prototype.onMouseDown=function(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._onIncrementalClick(e):1===e.detail?this._onSingleClick(e):2===e.detail?this._onDoubleClick(e):3===e.detail&&this._onTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}},t.prototype._addMouseDownListeners=function(){var e=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval((function(){return e._dragScroll()}),50)},t.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},t.prototype._onIncrementalClick=function(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))},t.prototype._onSingleClick=function(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),this._model.selectionStart){this._model.selectionEnd=void 0;var t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},t.prototype._onDoubleClick=function(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)},t.prototype._onTripleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))},t.prototype.shouldColumnSelect=function(e){return e.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},t.prototype._onMouseMove=function(e){if(e.stopImmediatePropagation(),this._model.selectionStart){var t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var r=this._bufferService.buffer;if(this._model.selectionEnd[1]<r.lines.length){var i=r.lines.get(this._model.selectionEnd[1]);i&&0===i.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},t.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}},t.prototype._onMouseUp=function(e){var t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var r=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(r&&void 0!==r[0]&&void 0!==r[1]){var i=(0,p.moveToCellSequence)(r[0]-1,r[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(i,!0)}}}else this._fireEventIfSelectionChanged()},t.prototype._fireEventIfSelectionChanged=function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,r=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);r?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,r)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,r)},t.prototype._fireOnSelectionChange=function(e,t,r){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=r,this._onSelectionChange.fire()},t.prototype._onBufferActivate=function(e){var t=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim((function(e){return t._onTrim(e)}))},t.prototype._convertViewportColToCharacterIndex=function(e,t){for(var r=t[0],i=0;t[0]>=i;i++){var n=e.loadCell(i,this._workCell).getChars().length;0===this._workCell.getWidth()?r--:n>1&&t[0]!==i&&(r+=n-1)}return r},t.prototype.setSelection=function(e,t,r){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=r,this.refresh(),this._fireEventIfSelectionChanged()},t.prototype.rightClickSelect=function(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},t.prototype._getWordAt=function(e,t,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),!(e[0]>=this._bufferService.cols)){var n=this._bufferService.buffer,o=n.lines.get(e[1]);if(o){var s=n.translateBufferLineToString(e[1],!1),a=this._convertViewportColToCharacterIndex(o,e),l=a,c=e[0]-a,h=0,u=0,d=0,f=0;if(" "===s.charAt(a)){for(;a>0&&" "===s.charAt(a-1);)a--;for(;l<s.length&&" "===s.charAt(l+1);)l++}else{var p=e[0],g=e[0];0===o.getWidth(p)&&(h++,p--),2===o.getWidth(g)&&(u++,g++);var m=o.getString(g).length;for(m>1&&(f+=m-1,l+=m-1);p>0&&a>0&&!this._isCharWordSeparator(o.loadCell(p-1,this._workCell));){o.loadCell(p-1,this._workCell);var v=this._workCell.getChars().length;0===this._workCell.getWidth()?(h++,p--):v>1&&(d+=v-1,a-=v-1),a--,p--}for(;g<o.length&&l+1<s.length&&!this._isCharWordSeparator(o.loadCell(g+1,this._workCell));){o.loadCell(g+1,this._workCell);var O=this._workCell.getChars().length;2===this._workCell.getWidth()?(u++,g++):O>1&&(f+=O-1,l+=O-1),l++,g++}}l++;var _=a+c-h+d,b=Math.min(this._bufferService.cols,l-a+h+u-d-f);if(t||""!==s.slice(a,l).trim()){if(r&&0===_&&32!==o.getCodePoint(0)){var y=n.lines.get(e[1]-1);if(y&&o.isWrapped&&32!==y.getCodePoint(this._bufferService.cols-1)){var w=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(w){var S=this._bufferService.cols-w.start;_-=S,b+=S}}}if(i&&_+b===this._bufferService.cols&&32!==o.getCodePoint(this._bufferService.cols-1)){var C=n.lines.get(e[1]+1);if((null==C?void 0:C.isWrapped)&&32!==C.getCodePoint(0)){var x=this._getWordAt([0,e[1]+1],!1,!1,!0);x&&(b+=x.length)}}return{start:_,length:b}}}}},t.prototype._selectWordAt=function(e,t){var r=this._getWordAt(e,t);if(r){for(;r.start<0;)r.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[r.start,e[1]],this._model.selectionStartLength=r.length}},t.prototype._selectToWordAt=function(e){var t=this._getWordAt(e,!0);if(t){for(var r=e[1];t.start<0;)t.start+=this._bufferService.cols,r--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,r++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,r]}},t.prototype._isCharWordSeparator=function(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0},t.prototype._selectLineAt=function(e){var t=this._bufferService.buffer.getWrappedRangeForLine(e),r={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,m.getRangeLength)(r,this._bufferService.cols)},o([s(3,d.IBufferService),s(4,d.ICoreService),s(5,u.IMouseService),s(6,d.IOptionsService),s(7,u.IRenderService)],t)}(g.Disposable);t.SelectionService=_},4725:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ICharacterJoinerService=t.ISoundService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;var i=r(8343);t.ICharSizeService=(0,i.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,i.createDecorator)("CoreBrowserService"),t.IMouseService=(0,i.createDecorator)("MouseService"),t.IRenderService=(0,i.createDecorator)("RenderService"),t.ISelectionService=(0,i.createDecorator)("SelectionService"),t.ISoundService=(0,i.createDecorator)("SoundService"),t.ICharacterJoinerService=(0,i.createDecorator)("CharacterJoinerService")},357:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SoundService=void 0;var o=r(2585),s=function(){function e(e){this._optionsService=e}return Object.defineProperty(e,"audioContext",{get:function(){if(!e._audioContext){var t=window.AudioContext||window.webkitAudioContext;if(!t)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;e._audioContext=new t}return e._audioContext},enumerable:!1,configurable:!0}),e.prototype.playBellSound=function(){var t=e.audioContext;if(t){var r=t.createBufferSource();t.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),(function(e){r.buffer=e,r.connect(t.destination),r.start(0)}))}},e.prototype._base64ToArrayBuffer=function(e){for(var t=window.atob(e),r=t.length,i=new Uint8Array(r),n=0;n<r;n++)i[n]=t.charCodeAt(n);return i.buffer},e.prototype._removeMimeType=function(e){return e.split(",")[1]},e=i([n(0,o.IOptionsService)],e)}();t.SoundService=s},6349:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;var i=r(8460),n=function(){function e(e){this._maxLength=e,this.onDeleteEmitter=new i.EventEmitter,this.onInsertEmitter=new i.EventEmitter,this.onTrimEmitter=new i.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(e.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLength},set:function(e){if(this._maxLength!==e){for(var t=new Array(e),r=0;r<Math.min(e,this.length);r++)t[r]=this._array[this._getCyclicIndex(r)];this._array=t,this._maxLength=e,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(e){if(e>this._length)for(var t=this._length;t<e;t++)this._array[t]=void 0;this._length=e},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._array[this._getCyclicIndex(e)]},e.prototype.set=function(e,t){this._array[this._getCyclicIndex(e)]=t},e.prototype.push=function(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},e.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(e.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),e.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},e.prototype.splice=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t){for(var n=e;n<this._length-t;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(n=this._length-1;n>=e;n--)this._array[this._getCyclicIndex(n+r.length)]=this._array[this._getCyclicIndex(n)];for(n=0;n<r.length;n++)this._array[this._getCyclicIndex(e+n)]=r[n];if(r.length&&this.onInsertEmitter.fire({index:e,amount:r.length}),this._length+r.length>this._maxLength){var o=this._length+r.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=r.length},e.prototype.trimStart=function(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)},e.prototype.shiftElements=function(e,t,r){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+r<0)throw new Error("Cannot shift elements in list beyond index 0");if(r>0){for(var i=t-1;i>=0;i--)this.set(e+i+r,this.get(e+i));var n=e+t+r-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(i=0;i<t;i++)this.set(e+i+r,this.get(e+i))}},e.prototype._getCyclicIndex=function(e){return(this._startIndex+e)%this._maxLength},e}();t.CircularList=n},1439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t,r){if(void 0===r&&(r=5),"object"!=typeof t)return t;var i=Array.isArray(t)?[]:{};for(var n in t)i[n]=r<=1?t[n]:t[n]&&e(t[n],r-1);return i}},8055:function(e,t){var r,i,n,o,s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s};function a(e){var t=e.toString(16);return t.length<2?"0"+t:t}function l(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=void 0,function(e){e.toCss=function(e,t,r,i){return void 0!==i?"#"+a(e)+a(t)+a(r)+a(i):"#"+a(e)+a(t)+a(r)},e.toRgba=function(e,t,r,i){return void 0===i&&(i=255),(e<<24|t<<16|r<<8|i)>>>0}}(r=t.channels||(t.channels={})),(i=t.color||(t.color={})).blend=function(e,t){var i=(255&t.rgba)/255;if(1===i)return{css:t.css,rgba:t.rgba};var n=t.rgba>>24&255,o=t.rgba>>16&255,s=t.rgba>>8&255,a=e.rgba>>24&255,l=e.rgba>>16&255,c=e.rgba>>8&255,h=a+Math.round((n-a)*i),u=l+Math.round((o-l)*i),d=c+Math.round((s-c)*i);return{css:r.toCss(h,u,d),rgba:r.toRgba(h,u,d)}},i.isOpaque=function(e){return 255==(255&e.rgba)},i.ensureContrastRatio=function(e,t,r){var i=o.ensureContrastRatio(e.rgba,t.rgba,r);if(i)return o.toColor(i>>24&255,i>>16&255,i>>8&255)},i.opaque=function(e){var t=(255|e.rgba)>>>0,i=s(o.toChannels(t),3),n=i[0],a=i[1],l=i[2];return{css:r.toCss(n,a,l),rgba:t}},i.opacity=function(e,t){var i=Math.round(255*t),n=s(o.toChannels(e.rgba),3),a=n[0],l=n[1],c=n[2];return{css:r.toCss(a,l,c,i),rgba:r.toRgba(a,l,c,i)}},i.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]},(t.css||(t.css={})).toColor=function(e){if(e.match(/#[0-9a-f]{3,8}/i))switch(e.length){case 4:var t=parseInt(e.slice(1,2).repeat(2),16),r=parseInt(e.slice(2,3).repeat(2),16),i=parseInt(e.slice(3,4).repeat(2),16);return o.toColor(t,r,i);case 5:t=parseInt(e.slice(1,2).repeat(2),16),r=parseInt(e.slice(2,3).repeat(2),16),i=parseInt(e.slice(3,4).repeat(2),16);var n=parseInt(e.slice(4,5).repeat(2),16);return o.toColor(t,r,i,n);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}var s=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(s)return t=parseInt(s[1]),r=parseInt(s[2]),i=parseInt(s[3]),n=Math.round(255*(void 0===s[5]?1:parseFloat(s[5]))),o.toColor(t,r,i,n);throw new Error("css.toColor: Unsupported css format")},function(e){function t(e,t,r){var i=e/255,n=t/255,o=r/255;return.2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(n=t.rgb||(t.rgb={})),function(e){function t(e,t,r){for(var i=e>>24&255,o=e>>16&255,s=e>>8&255,a=t>>24&255,c=t>>16&255,h=t>>8&255,u=l(n.relativeLuminance2(a,c,h),n.relativeLuminance2(i,o,s));u<r&&(a>0||c>0||h>0);)a-=Math.max(0,Math.ceil(.1*a)),c-=Math.max(0,Math.ceil(.1*c)),h-=Math.max(0,Math.ceil(.1*h)),u=l(n.relativeLuminance2(a,c,h),n.relativeLuminance2(i,o,s));return(a<<24|c<<16|h<<8|255)>>>0}function i(e,t,r){for(var i=e>>24&255,o=e>>16&255,s=e>>8&255,a=t>>24&255,c=t>>16&255,h=t>>8&255,u=l(n.relativeLuminance2(a,c,h),n.relativeLuminance2(i,o,s));u<r&&(a<255||c<255||h<255);)a=Math.min(255,a+Math.ceil(.1*(255-a))),c=Math.min(255,c+Math.ceil(.1*(255-c))),h=Math.min(255,h+Math.ceil(.1*(255-h))),u=l(n.relativeLuminance2(a,c,h),n.relativeLuminance2(i,o,s));return(a<<24|c<<16|h<<8|255)>>>0}e.ensureContrastRatio=function(e,r,o){var s=n.relativeLuminance(e>>8),a=n.relativeLuminance(r>>8);if(l(s,a)<o){if(a<s){var c=t(e,r,o),h=l(s,n.relativeLuminance(c>>8));if(h<o){var u=i(e,e,o);return h>l(s,n.relativeLuminance(u>>8))?c:u}return c}var d=i(e,r,o),f=l(s,n.relativeLuminance(d>>8));return f<o?(u=t(e,e,o),f>l(s,n.relativeLuminance(u>>8))?d:u):d}},e.reduceLuminance=t,e.increaseLuminance=i,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,i,n){return{css:r.toCss(e,t,i,n),rgba:r.toRgba(e,t,i,n)}}}(o=t.rgba||(t.rgba={})),t.toPaddedHex=a,t.contrastRatio=l},8969:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;var s=r(844),a=r(2585),l=r(4348),c=r(7866),h=r(744),u=r(7302),d=r(6975),f=r(8460),p=r(1753),g=r(3730),m=r(1480),v=r(7994),O=r(9282),_=r(5435),b=r(5981),y=!1,w=function(e){function t(t){var r=e.call(this)||this;return r._onBinary=new f.EventEmitter,r._onData=new f.EventEmitter,r._onLineFeed=new f.EventEmitter,r._onResize=new f.EventEmitter,r._onScroll=new f.EventEmitter,r._onWriteParsed=new f.EventEmitter,r._instantiationService=new l.InstantiationService,r.optionsService=new u.OptionsService(t),r._instantiationService.setService(a.IOptionsService,r.optionsService),r._bufferService=r.register(r._instantiationService.createInstance(h.BufferService)),r._instantiationService.setService(a.IBufferService,r._bufferService),r._logService=r._instantiationService.createInstance(c.LogService),r._instantiationService.setService(a.ILogService,r._logService),r.coreService=r.register(r._instantiationService.createInstance(d.CoreService,(function(){return r.scrollToBottom()}))),r._instantiationService.setService(a.ICoreService,r.coreService),r.coreMouseService=r._instantiationService.createInstance(p.CoreMouseService),r._instantiationService.setService(a.ICoreMouseService,r.coreMouseService),r._dirtyRowService=r._instantiationService.createInstance(g.DirtyRowService),r._instantiationService.setService(a.IDirtyRowService,r._dirtyRowService),r.unicodeService=r._instantiationService.createInstance(m.UnicodeService),r._instantiationService.setService(a.IUnicodeService,r.unicodeService),r._charsetService=r._instantiationService.createInstance(v.CharsetService),r._instantiationService.setService(a.ICharsetService,r._charsetService),r._inputHandler=new _.InputHandler(r._bufferService,r._charsetService,r.coreService,r._dirtyRowService,r._logService,r.optionsService,r.coreMouseService,r.unicodeService),r.register((0,f.forwardEvent)(r._inputHandler.onLineFeed,r._onLineFeed)),r.register(r._inputHandler),r.register((0,f.forwardEvent)(r._bufferService.onResize,r._onResize)),r.register((0,f.forwardEvent)(r.coreService.onData,r._onData)),r.register((0,f.forwardEvent)(r.coreService.onBinary,r._onBinary)),r.register(r.optionsService.onOptionChange((function(e){return r._updateOptions(e)}))),r.register(r._bufferService.onScroll((function(e){r._onScroll.fire({position:r._bufferService.buffer.ydisp,source:0}),r._dirtyRowService.markRangeDirty(r._bufferService.buffer.scrollTop,r._bufferService.buffer.scrollBottom)}))),r.register(r._inputHandler.onScroll((function(e){r._onScroll.fire({position:r._bufferService.buffer.ydisp,source:0}),r._dirtyRowService.markRangeDirty(r._bufferService.buffer.scrollTop,r._bufferService.buffer.scrollBottom)}))),r._writeBuffer=new b.WriteBuffer((function(e,t){return r._inputHandler.parse(e,t)})),r.register((0,f.forwardEvent)(r._writeBuffer.onWriteParsed,r._onWriteParsed)),r}return n(t,e),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){var e=this;return this._onScrollApi||(this._onScrollApi=new f.EventEmitter,this.register(this._onScroll.event((function(t){var r;null===(r=e._onScrollApi)||void 0===r||r.fire(t.position)})))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.optionsService.options},set:function(e){for(var t in e)this.optionsService.options[t]=e[t]},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t;this._isDisposed||(e.prototype.dispose.call(this),null===(t=this._windowsMode)||void 0===t||t.dispose(),this._windowsMode=void 0)},t.prototype.write=function(e,t){this._writeBuffer.write(e,t)},t.prototype.writeSync=function(e,t){this._logService.logLevel<=a.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(e,t)},t.prototype.resize=function(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,h.MINIMUM_COLS),t=Math.max(t,h.MINIMUM_ROWS),this._bufferService.resize(e,t))},t.prototype.scroll=function(e,t){void 0===t&&(t=!1),this._bufferService.scroll(e,t)},t.prototype.scrollLines=function(e,t,r){this._bufferService.scrollLines(e,t,r)},t.prototype.scrollPages=function(e){this._bufferService.scrollPages(e)},t.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},t.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},t.prototype.scrollToLine=function(e){this._bufferService.scrollToLine(e)},t.prototype.registerEscHandler=function(e,t){return this._inputHandler.registerEscHandler(e,t)},t.prototype.registerDcsHandler=function(e,t){return this._inputHandler.registerDcsHandler(e,t)},t.prototype.registerCsiHandler=function(e,t){return this._inputHandler.registerCsiHandler(e,t)},t.prototype.registerOscHandler=function(e,t){return this._inputHandler.registerOscHandler(e,t)},t.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},t.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},t.prototype._updateOptions=function(e){var t;switch(e){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():(null===(t=this._windowsMode)||void 0===t||t.dispose(),this._windowsMode=void 0)}},t.prototype._enableWindowsMode=function(){var e=this;if(!this._windowsMode){var t=[];t.push(this.onLineFeed(O.updateWindowsModeWrappedState.bind(null,this._bufferService))),t.push(this.registerCsiHandler({final:"H"},(function(){return(0,O.updateWindowsModeWrappedState)(e._bufferService),!1}))),this._windowsMode={dispose:function(){var e,r;try{for(var i=o(t),n=i.next();!n.done;n=i.next())n.value.dispose()}catch(t){e={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}}}},t}(s.Disposable);t.CoreTerminal=w},8460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0;var r=function(){function e(){this._listeners=[],this._disposed=!1}return Object.defineProperty(e.prototype,"event",{get:function(){var e=this;return this._event||(this._event=function(t){return e._listeners.push(t),{dispose:function(){if(!e._disposed)for(var r=0;r<e._listeners.length;r++)if(e._listeners[r]===t)return void e._listeners.splice(r,1)}}}),this._event},enumerable:!1,configurable:!0}),e.prototype.fire=function(e,t){for(var r=[],i=0;i<this._listeners.length;i++)r.push(this._listeners[i]);for(i=0;i<r.length;i++)r[i].call(void 0,e,t)},e.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},e}();t.EventEmitter=r,t.forwardEvent=function(e,t){return e((function(e){return t.fire(e)}))}},5435:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;var o,s=r(2584),a=r(7116),l=r(2015),c=r(844),h=r(8273),u=r(482),d=r(8437),f=r(8460),p=r(643),g=r(511),m=r(3734),v=r(2585),O=r(6242),_=r(6351),b=r(5941),y={"(":0,")":1,"*":2,"+":3,"-":1,".":2},w=131072;function S(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}!function(e){e[e.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",e[e.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(o=t.WindowsOptionsReportType||(t.WindowsOptionsReportType={}));var C=function(){function e(e,t,r,i){this._bufferService=e,this._coreService=t,this._logService=r,this._optionsService=i,this._data=new Uint32Array(0)}return e.prototype.hook=function(e){this._data=new Uint32Array(0)},e.prototype.put=function(e,t,r){this._data=(0,h.concat)(this._data,e.subarray(t,r))},e.prototype.unhook=function(e){if(!e)return this._data=new Uint32Array(0),!0;var t=(0,u.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),t){case'"q':this._coreService.triggerDataEvent(s.C0.ESC+'P1$r0"q'+s.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(s.C0.ESC+'P1$r61;1"p'+s.C0.ESC+"\\");break;case"r":var r=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+r+s.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(s.C0.ESC+"P1$r0m"+s.C0.ESC+"\\");break;case" q":var i={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];i-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+i+" q"+s.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",t),this._coreService.triggerDataEvent(s.C0.ESC+"P0$r"+s.C0.ESC+"\\")}return!0},e}(),x=function(e){function t(t,r,i,n,o,c,h,p,m){void 0===m&&(m=new l.EscapeSequenceParser);var v=e.call(this)||this;v._bufferService=t,v._charsetService=r,v._coreService=i,v._dirtyRowService=n,v._logService=o,v._optionsService=c,v._coreMouseService=h,v._unicodeService=p,v._parser=m,v._parseBuffer=new Uint32Array(4096),v._stringDecoder=new u.StringToUtf32,v._utf8Decoder=new u.Utf8ToUtf32,v._workCell=new g.CellData,v._windowTitle="",v._iconName="",v._windowTitleStack=[],v._iconNameStack=[],v._curAttrData=d.DEFAULT_ATTR_DATA.clone(),v._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone(),v._onRequestBell=new f.EventEmitter,v._onRequestRefreshRows=new f.EventEmitter,v._onRequestReset=new f.EventEmitter,v._onRequestSendFocus=new f.EventEmitter,v._onRequestSyncScrollBar=new f.EventEmitter,v._onRequestWindowsOptionsReport=new f.EventEmitter,v._onA11yChar=new f.EventEmitter,v._onA11yTab=new f.EventEmitter,v._onCursorMove=new f.EventEmitter,v._onLineFeed=new f.EventEmitter,v._onScroll=new f.EventEmitter,v._onTitleChange=new f.EventEmitter,v._onColor=new f.EventEmitter,v._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},v._specialColors=[256,257,258],v.register(v._parser),v._activeBuffer=v._bufferService.buffer,v.register(v._bufferService.buffers.onBufferActivate((function(e){return v._activeBuffer=e.activeBuffer}))),v._parser.setCsiHandlerFallback((function(e,t){v._logService.debug("Unknown CSI code: ",{identifier:v._parser.identToString(e),params:t.toArray()})})),v._parser.setEscHandlerFallback((function(e){v._logService.debug("Unknown ESC code: ",{identifier:v._parser.identToString(e)})})),v._parser.setExecuteHandlerFallback((function(e){v._logService.debug("Unknown EXECUTE code: ",{code:e})})),v._parser.setOscHandlerFallback((function(e,t,r){v._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:r})})),v._parser.setDcsHandlerFallback((function(e,t,r){"HOOK"===t&&(r=r.toArray()),v._logService.debug("Unknown DCS code: ",{identifier:v._parser.identToString(e),action:t,payload:r})})),v._parser.setPrintHandler((function(e,t,r){return v.print(e,t,r)})),v._parser.registerCsiHandler({final:"@"},(function(e){return v.insertChars(e)})),v._parser.registerCsiHandler({intermediates:" ",final:"@"},(function(e){return v.scrollLeft(e)})),v._parser.registerCsiHandler({final:"A"},(function(e){return v.cursorUp(e)})),v._parser.registerCsiHandler({intermediates:" ",final:"A"},(function(e){return v.scrollRight(e)})),v._parser.registerCsiHandler({final:"B"},(function(e){return v.cursorDown(e)})),v._parser.registerCsiHandler({final:"C"},(function(e){return v.cursorForward(e)})),v._parser.registerCsiHandler({final:"D"},(function(e){return v.cursorBackward(e)})),v._parser.registerCsiHandler({final:"E"},(function(e){return v.cursorNextLine(e)})),v._parser.registerCsiHandler({final:"F"},(function(e){return v.cursorPrecedingLine(e)})),v._parser.registerCsiHandler({final:"G"},(function(e){return v.cursorCharAbsolute(e)})),v._parser.registerCsiHandler({final:"H"},(function(e){return v.cursorPosition(e)})),v._parser.registerCsiHandler({final:"I"},(function(e){return v.cursorForwardTab(e)})),v._parser.registerCsiHandler({final:"J"},(function(e){return v.eraseInDisplay(e)})),v._parser.registerCsiHandler({prefix:"?",final:"J"},(function(e){return v.eraseInDisplay(e)})),v._parser.registerCsiHandler({final:"K"},(function(e){return v.eraseInLine(e)})),v._parser.registerCsiHandler({prefix:"?",final:"K"},(function(e){return v.eraseInLine(e)})),v._parser.registerCsiHandler({final:"L"},(function(e){return v.insertLines(e)})),v._parser.registerCsiHandler({final:"M"},(function(e){return v.deleteLines(e)})),v._parser.registerCsiHandler({final:"P"},(function(e){return v.deleteChars(e)})),v._parser.registerCsiHandler({final:"S"},(function(e){return v.scrollUp(e)})),v._parser.registerCsiHandler({final:"T"},(function(e){return v.scrollDown(e)})),v._parser.registerCsiHandler({final:"X"},(function(e){return v.eraseChars(e)})),v._parser.registerCsiHandler({final:"Z"},(function(e){return v.cursorBackwardTab(e)})),v._parser.registerCsiHandler({final:"`"},(function(e){return v.charPosAbsolute(e)})),v._parser.registerCsiHandler({final:"a"},(function(e){return v.hPositionRelative(e)})),v._parser.registerCsiHandler({final:"b"},(function(e){return v.repeatPrecedingCharacter(e)})),v._parser.registerCsiHandler({final:"c"},(function(e){return v.sendDeviceAttributesPrimary(e)})),v._parser.registerCsiHandler({prefix:">",final:"c"},(function(e){return v.sendDeviceAttributesSecondary(e)})),v._parser.registerCsiHandler({final:"d"},(function(e){return v.linePosAbsolute(e)})),v._parser.registerCsiHandler({final:"e"},(function(e){return v.vPositionRelative(e)})),v._parser.registerCsiHandler({final:"f"},(function(e){return v.hVPosition(e)})),v._parser.registerCsiHandler({final:"g"},(function(e){return v.tabClear(e)})),v._parser.registerCsiHandler({final:"h"},(function(e){return v.setMode(e)})),v._parser.registerCsiHandler({prefix:"?",final:"h"},(function(e){return v.setModePrivate(e)})),v._parser.registerCsiHandler({final:"l"},(function(e){return v.resetMode(e)})),v._parser.registerCsiHandler({prefix:"?",final:"l"},(function(e){return v.resetModePrivate(e)})),v._parser.registerCsiHandler({final:"m"},(function(e){return v.charAttributes(e)})),v._parser.registerCsiHandler({final:"n"},(function(e){return v.deviceStatus(e)})),v._parser.registerCsiHandler({prefix:"?",final:"n"},(function(e){return v.deviceStatusPrivate(e)})),v._parser.registerCsiHandler({intermediates:"!",final:"p"},(function(e){return v.softReset(e)})),v._parser.registerCsiHandler({intermediates:" ",final:"q"},(function(e){return v.setCursorStyle(e)})),v._parser.registerCsiHandler({final:"r"},(function(e){return v.setScrollRegion(e)})),v._parser.registerCsiHandler({final:"s"},(function(e){return v.saveCursor(e)})),v._parser.registerCsiHandler({final:"t"},(function(e){return v.windowOptions(e)})),v._parser.registerCsiHandler({final:"u"},(function(e){return v.restoreCursor(e)})),v._parser.registerCsiHandler({intermediates:"'",final:"}"},(function(e){return v.insertColumns(e)})),v._parser.registerCsiHandler({intermediates:"'",final:"~"},(function(e){return v.deleteColumns(e)})),v._parser.setExecuteHandler(s.C0.BEL,(function(){return v.bell()})),v._parser.setExecuteHandler(s.C0.LF,(function(){return v.lineFeed()})),v._parser.setExecuteHandler(s.C0.VT,(function(){return v.lineFeed()})),v._parser.setExecuteHandler(s.C0.FF,(function(){return v.lineFeed()})),v._parser.setExecuteHandler(s.C0.CR,(function(){return v.carriageReturn()})),v._parser.setExecuteHandler(s.C0.BS,(function(){return v.backspace()})),v._parser.setExecuteHandler(s.C0.HT,(function(){return v.tab()})),v._parser.setExecuteHandler(s.C0.SO,(function(){return v.shiftOut()})),v._parser.setExecuteHandler(s.C0.SI,(function(){return v.shiftIn()})),v._parser.setExecuteHandler(s.C1.IND,(function(){return v.index()})),v._parser.setExecuteHandler(s.C1.NEL,(function(){return v.nextLine()})),v._parser.setExecuteHandler(s.C1.HTS,(function(){return v.tabSet()})),v._parser.registerOscHandler(0,new O.OscHandler((function(e){return v.setTitle(e),v.setIconName(e),!0}))),v._parser.registerOscHandler(1,new O.OscHandler((function(e){return v.setIconName(e)}))),v._parser.registerOscHandler(2,new O.OscHandler((function(e){return v.setTitle(e)}))),v._parser.registerOscHandler(4,new O.OscHandler((function(e){return v.setOrReportIndexedColor(e)}))),v._parser.registerOscHandler(10,new O.OscHandler((function(e){return v.setOrReportFgColor(e)}))),v._parser.registerOscHandler(11,new O.OscHandler((function(e){return v.setOrReportBgColor(e)}))),v._parser.registerOscHandler(12,new O.OscHandler((function(e){return v.setOrReportCursorColor(e)}))),v._parser.registerOscHandler(104,new O.OscHandler((function(e){return v.restoreIndexedColor(e)}))),v._parser.registerOscHandler(110,new O.OscHandler((function(e){return v.restoreFgColor(e)}))),v._parser.registerOscHandler(111,new O.OscHandler((function(e){return v.restoreBgColor(e)}))),v._parser.registerOscHandler(112,new O.OscHandler((function(e){return v.restoreCursorColor(e)}))),v._parser.registerEscHandler({final:"7"},(function(){return v.saveCursor()})),v._parser.registerEscHandler({final:"8"},(function(){return v.restoreCursor()})),v._parser.registerEscHandler({final:"D"},(function(){return v.index()})),v._parser.registerEscHandler({final:"E"},(function(){return v.nextLine()})),v._parser.registerEscHandler({final:"H"},(function(){return v.tabSet()})),v._parser.registerEscHandler({final:"M"},(function(){return v.reverseIndex()})),v._parser.registerEscHandler({final:"="},(function(){return v.keypadApplicationMode()})),v._parser.registerEscHandler({final:">"},(function(){return v.keypadNumericMode()})),v._parser.registerEscHandler({final:"c"},(function(){return v.fullReset()})),v._parser.registerEscHandler({final:"n"},(function(){return v.setgLevel(2)})),v._parser.registerEscHandler({final:"o"},(function(){return v.setgLevel(3)})),v._parser.registerEscHandler({final:"|"},(function(){return v.setgLevel(3)})),v._parser.registerEscHandler({final:"}"},(function(){return v.setgLevel(2)})),v._parser.registerEscHandler({final:"~"},(function(){return v.setgLevel(1)})),v._parser.registerEscHandler({intermediates:"%",final:"@"},(function(){return v.selectDefaultCharset()})),v._parser.registerEscHandler({intermediates:"%",final:"G"},(function(){return v.selectDefaultCharset()}));var _=function(e){b._parser.registerEscHandler({intermediates:"(",final:e},(function(){return v.selectCharset("("+e)})),b._parser.registerEscHandler({intermediates:")",final:e},(function(){return v.selectCharset(")"+e)})),b._parser.registerEscHandler({intermediates:"*",final:e},(function(){return v.selectCharset("*"+e)})),b._parser.registerEscHandler({intermediates:"+",final:e},(function(){return v.selectCharset("+"+e)})),b._parser.registerEscHandler({intermediates:"-",final:e},(function(){return v.selectCharset("-"+e)})),b._parser.registerEscHandler({intermediates:".",final:e},(function(){return v.selectCharset("."+e)})),b._parser.registerEscHandler({intermediates:"/",final:e},(function(){return v.selectCharset("/"+e)}))},b=this;for(var y in a.CHARSETS)_(y);return v._parser.registerEscHandler({intermediates:"#",final:"8"},(function(){return v.screenAlignmentPattern()})),v._parser.setErrorHandler((function(e){return v._logService.error("Parsing error: ",e),e})),v._parser.registerDcsHandler({intermediates:"$",final:"q"},new C(v._bufferService,v._coreService,v._logService,v._optionsService)),v}return n(t,e),Object.defineProperty(t.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype._preserveStack=function(e,t,r,i){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=r,this._parseStack.position=i},t.prototype._logSlowResolvingAsync=function(e){this._logService.logLevel<=v.LogLevelEnum.WARN&&Promise.race([e,new Promise((function(e,t){return setTimeout((function(){return t("#SLOW_TIMEOUT")}),5e3)}))]).catch((function(e){if("#SLOW_TIMEOUT"!==e)throw e;console.warn("async parser handler taking longer than 5000 ms")}))},t.prototype.parse=function(e,t){var r,i=this._activeBuffer.x,n=this._activeBuffer.y,o=0,s=this._parseStack.paused;if(s){if(r=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(r),r;i=this._parseStack.cursorStartX,n=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>w&&(o=this._parseStack.position+w)}if(this._logService.logLevel<=v.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof e?' "'+e+'"':' "'+Array.prototype.map.call(e,(function(e){return String.fromCharCode(e)})).join("")+'"'),"string"==typeof e?e.split("").map((function(e){return e.charCodeAt(0)})):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<w&&(this._parseBuffer=new Uint32Array(Math.min(e.length,w))),s||this._dirtyRowService.clearRange(),e.length>w)for(var a=o;a<e.length;a+=w){var l=a+w<e.length?a+w:e.length,c="string"==typeof e?this._stringDecoder.decode(e.substring(a,l),this._parseBuffer):this._utf8Decoder.decode(e.subarray(a,l),this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,c))return this._preserveStack(i,n,c,a),this._logSlowResolvingAsync(r),r}else if(!s&&(c="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer),r=this._parser.parse(this._parseBuffer,c)))return this._preserveStack(i,n,c,0),this._logSlowResolvingAsync(r),r;this._activeBuffer.x===i&&this._activeBuffer.y===n||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},t.prototype.print=function(e,t,r){var i,n,o=this._charsetService.charset,s=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,l=this._coreService.decPrivateModes.wraparound,c=this._coreService.modes.insertMode,h=this._curAttrData,d=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&r-t>0&&2===d.getWidth(this._activeBuffer.x-1)&&d.setCellFromCodePoint(this._activeBuffer.x-1,0,1,h.fg,h.bg,h.extended);for(var f=t;f<r;++f){if(i=e[f],n=this._unicodeService.wcwidth(i),i<127&&o){var g=o[String.fromCharCode(i)];g&&(i=g.charCodeAt(0))}if(s&&this._onA11yChar.fire((0,u.stringFromCodePoint)(i)),n||!this._activeBuffer.x){if(this._activeBuffer.x+n-1>=a)if(l){for(;this._activeBuffer.x<a;)d.setCellFromCodePoint(this._activeBuffer.x++,0,1,h.fg,h.bg,h.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),d=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=a-1,2===n)continue;if(c&&(d.insertCells(this._activeBuffer.x,n,this._activeBuffer.getNullCell(h),h),2===d.getWidth(a-1)&&d.setCellFromCodePoint(a-1,p.NULL_CELL_CODE,p.NULL_CELL_WIDTH,h.fg,h.bg,h.extended)),d.setCellFromCodePoint(this._activeBuffer.x++,i,n,h.fg,h.bg,h.extended),n>0)for(;--n;)d.setCellFromCodePoint(this._activeBuffer.x++,0,0,h.fg,h.bg,h.extended)}else d.getWidth(this._activeBuffer.x-1)?d.addCodepointToCell(this._activeBuffer.x-1,i):d.addCodepointToCell(this._activeBuffer.x-2,i)}r-t>0&&(d.loadCell(this._activeBuffer.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<a&&r-t>0&&0===d.getWidth(this._activeBuffer.x)&&!d.hasContent(this._activeBuffer.x)&&d.setCellFromCodePoint(this._activeBuffer.x,0,1,h.fg,h.bg,h.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype.registerCsiHandler=function(e,t){var r=this;return"t"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,(function(e){return!S(e.params[0],r._optionsService.rawOptions.windowOptions)||t(e)}))},t.prototype.registerDcsHandler=function(e,t){return this._parser.registerDcsHandler(e,new _.DcsHandler(t))},t.prototype.registerEscHandler=function(e,t){return this._parser.registerEscHandler(e,t)},t.prototype.registerOscHandler=function(e,t){return this._parser.registerOscHandler(e,new O.OscHandler(t))},t.prototype.bell=function(){return this._onRequestBell.fire(),!0},t.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},t.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},t.prototype.backspace=function(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===e?void 0:e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},t.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0},t.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},t.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},t.prototype._restrictCursor=function(e){void 0===e&&(e=this._bufferService.cols-1),this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype._setCursor=function(e,t){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype._moveCursor=function(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)},t.prototype.cursorUp=function(e){var t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0},t.prototype.cursorDown=function(e){var t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0},t.prototype.cursorForward=function(e){return this._moveCursor(e.params[0]||1,0),!0},t.prototype.cursorBackward=function(e){return this._moveCursor(-(e.params[0]||1),0),!0},t.prototype.cursorNextLine=function(e){return this.cursorDown(e),this._activeBuffer.x=0,!0},t.prototype.cursorPrecedingLine=function(e){return this.cursorUp(e),this._activeBuffer.x=0,!0},t.prototype.cursorCharAbsolute=function(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0},t.prototype.cursorPosition=function(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0},t.prototype.charPosAbsolute=function(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0},t.prototype.hPositionRelative=function(e){return this._moveCursor(e.params[0]||1,0),!0},t.prototype.linePosAbsolute=function(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0},t.prototype.vPositionRelative=function(e){return this._moveCursor(0,e.params[0]||1),!0},t.prototype.hVPosition=function(e){return this.cursorPosition(e),!0},t.prototype.tabClear=function(e){var t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0},t.prototype.cursorForwardTab=function(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var t=e.params[0]||1;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},t.prototype.cursorBackwardTab=function(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var t=e.params[0]||1;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},t.prototype._eraseInBufferLine=function(e,t,r,i){void 0===i&&(i=!1);var n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n.replaceCells(t,r,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i&&(n.isWrapped=!1)},t.prototype._resetBufferLine=function(e){var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);t.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),t.isWrapped=!1},t.prototype.eraseInDisplay=function(e){var t;switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(t=this._activeBuffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);t<this._bufferService.rows;t++)this._resetBufferLine(t);this._dirtyRowService.markDirty(t);break;case 1:for(t=this._activeBuffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(t+1).isWrapped=!1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 2:for(t=this._bufferService.rows,this._dirtyRowService.markDirty(t-1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 3:var r=this._activeBuffer.lines.length-this._bufferService.rows;r>0&&(this._activeBuffer.lines.trimStart(r),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-r,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-r,0),this._onScroll.fire(0))}return!0},t.prototype.eraseInLine=function(e){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},t.prototype.insertLines=function(e){this._restrictCursor();var t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var r=this._activeBuffer.ybase+this._activeBuffer.y,i=this._bufferService.rows-1-this._activeBuffer.scrollBottom,n=this._bufferService.rows-1+this._activeBuffer.ybase-i+1;t--;)this._activeBuffer.lines.splice(n-1,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},t.prototype.deleteLines=function(e){this._restrictCursor();var t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var r,i=this._activeBuffer.ybase+this._activeBuffer.y;for(r=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-r;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},t.prototype.insertChars=function(e){this._restrictCursor();var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.deleteChars=function(e){this._restrictCursor();var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.scrollUp=function(e){for(var t=e.params[0]||1;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollDown=function(e){for(var t=e.params[0]||1;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(d.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollLeft=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){var i=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);i.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollRight=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){var i=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);i.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.insertColumns=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){var i=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);i.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.deleteColumns=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){var i=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);i.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.eraseChars=function(e){this._restrictCursor();var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.repeatPrecedingCharacter=function(e){if(!this._parser.precedingCodepoint)return!0;for(var t=e.params[0]||1,r=new Uint32Array(t),i=0;i<t;++i)r[i]=this._parser.precedingCodepoint;return this.print(r,0,r.length),!0},t.prototype.sendDeviceAttributesPrimary=function(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(s.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(s.C0.ESC+"[?6c")),!0},t.prototype.sendDeviceAttributesSecondary=function(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(s.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(s.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(s.C0.ESC+"[>83;40003;0c")),!0},t.prototype._is=function(e){return 0===(this._optionsService.rawOptions.termName+"").indexOf(e)},t.prototype.setMode=function(e){for(var t=0;t<e.length;t++)4===e.params[t]&&(this._coreService.modes.insertMode=!0);return!0},t.prototype.setModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),this._charsetService.setgCharset(1,a.DEFAULT_CHARSET),this._charsetService.setgCharset(2,a.DEFAULT_CHARSET),this._charsetService.setgCharset(3,a.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},t.prototype.resetMode=function(e){for(var t=0;t<e.length;t++)4===e.params[t]&&(this._coreService.modes.insertMode=!1);return!0},t.prototype.resetModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},t.prototype._updateAttrColor=function(e,t,r,i,n){return 2===t?(e|=50331648,e&=-16777216,e|=m.AttributeData.fromColorRGB([r,i,n])):5===t&&(e&=-50331904,e|=33554432|255&r),e},t.prototype._extractColor=function(e,t,r){var i=[0,0,-1,0,0,0],n=0,o=0;do{if(i[o+n]=e.params[t+o],e.hasSubParams(t+o)){var s=e.getSubParams(t+o),a=0;do{5===i[1]&&(n=1),i[o+a+1+n]=s[a]}while(++a<s.length&&a+o+1+n<i.length);break}if(5===i[1]&&o+n>=2||2===i[1]&&o+n>=5)break;i[1]&&(n=1)}while(++o+t<e.length&&o+n<i.length);for(a=2;a<i.length;++a)-1===i[a]&&(i[a]=0);switch(i[0]){case 38:r.fg=this._updateAttrColor(r.fg,i[1],i[3],i[4],i[5]);break;case 48:r.bg=this._updateAttrColor(r.bg,i[1],i[3],i[4],i[5]);break;case 58:r.extended=r.extended.clone(),r.extended.underlineColor=this._updateAttrColor(r.extended.underlineColor,i[1],i[3],i[4],i[5])}return o},t.prototype._processUnderline=function(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()},t.prototype.charAttributes=function(e){if(1===e.length&&0===e.params[0])return this._curAttrData.fg=d.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=d.DEFAULT_ATTR_DATA.bg,!0;for(var t,r=e.length,i=this._curAttrData,n=0;n<r;n++)(t=e.params[n])>=30&&t<=37?(i.fg&=-50331904,i.fg|=16777216|t-30):t>=40&&t<=47?(i.bg&=-50331904,i.bg|=16777216|t-40):t>=90&&t<=97?(i.fg&=-50331904,i.fg|=16777224|t-90):t>=100&&t<=107?(i.bg&=-50331904,i.bg|=16777224|t-100):0===t?(i.fg=d.DEFAULT_ATTR_DATA.fg,i.bg=d.DEFAULT_ATTR_DATA.bg):1===t?i.fg|=134217728:3===t?i.bg|=67108864:4===t?(i.fg|=268435456,this._processUnderline(e.hasSubParams(n)?e.getSubParams(n)[0]:1,i)):5===t?i.fg|=536870912:7===t?i.fg|=67108864:8===t?i.fg|=1073741824:9===t?i.fg|=2147483648:2===t?i.bg|=134217728:21===t?this._processUnderline(2,i):22===t?(i.fg&=-134217729,i.bg&=-134217729):23===t?i.bg&=-67108865:24===t?i.fg&=-268435457:25===t?i.fg&=-536870913:27===t?i.fg&=-67108865:28===t?i.fg&=-1073741825:29===t?i.fg&=2147483647:39===t?(i.fg&=-67108864,i.fg|=16777215&d.DEFAULT_ATTR_DATA.fg):49===t?(i.bg&=-67108864,i.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):38===t||48===t||58===t?n+=this._extractColor(e,n,i):59===t?(i.extended=i.extended.clone(),i.extended.underlineColor=-1,i.updateExtended()):100===t?(i.fg&=-67108864,i.fg|=16777215&d.DEFAULT_ATTR_DATA.fg,i.bg&=-67108864,i.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",t);return!0},t.prototype.deviceStatus=function(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(s.C0.ESC+"[0n");break;case 6:var t=this._activeBuffer.y+1,r=this._activeBuffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+"["+t+";"+r+"R")}return!0},t.prototype.deviceStatusPrivate=function(e){if(6===e.params[0]){var t=this._activeBuffer.y+1,r=this._activeBuffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+"[?"+t+";"+r+"R")}return!0},t.prototype.softReset=function(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},t.prototype.setCursorStyle=function(e){var t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var r=t%2==1;return this._optionsService.options.cursorBlink=r,!0},t.prototype.setScrollRegion=function(e){var t,r=e.params[0]||1;return(e.length<2||(t=e.params[1])>this._bufferService.rows||0===t)&&(t=this._bufferService.rows),t>r&&(this._activeBuffer.scrollTop=r-1,this._activeBuffer.scrollBottom=t-1,this._setCursor(0,0)),!0},t.prototype.windowOptions=function(e){if(!S(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;var t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(o.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(o.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(s.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},t.prototype.saveCursor=function(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},t.prototype.restoreCursor=function(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},t.prototype.setTitle=function(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0},t.prototype.setIconName=function(e){return this._iconName=e,!0},t.prototype.setOrReportIndexedColor=function(e){for(var t=[],r=e.split(";");r.length>1;){var i=r.shift(),n=r.shift();if(/^\d+$/.exec(i)){var o=parseInt(i);if(0<=o&&o<256)if("?"===n)t.push({type:0,index:o});else{var s=(0,b.parseColor)(n);s&&t.push({type:1,index:o,color:s})}}}return t.length&&this._onColor.fire(t),!0},t.prototype._setOrReportSpecialColor=function(e,t){for(var r=e.split(";"),i=0;i<r.length&&!(t>=this._specialColors.length);++i,++t)if("?"===r[i])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{var n=(0,b.parseColor)(r[i]);n&&this._onColor.fire([{type:1,index:this._specialColors[t],color:n}])}return!0},t.prototype.setOrReportFgColor=function(e){return this._setOrReportSpecialColor(e,0)},t.prototype.setOrReportBgColor=function(e){return this._setOrReportSpecialColor(e,1)},t.prototype.setOrReportCursorColor=function(e){return this._setOrReportSpecialColor(e,2)},t.prototype.restoreIndexedColor=function(e){if(!e)return this._onColor.fire([{type:2}]),!0;for(var t=[],r=e.split(";"),i=0;i<r.length;++i)if(/^\d+$/.exec(r[i])){var n=parseInt(r[i]);0<=n&&n<256&&t.push({type:2,index:n})}return t.length&&this._onColor.fire(t),!0},t.prototype.restoreFgColor=function(e){return this._onColor.fire([{type:2,index:256}]),!0},t.prototype.restoreBgColor=function(e){return this._onColor.fire([{type:2,index:257}]),!0},t.prototype.restoreCursorColor=function(e){return this._onColor.fire([{type:2,index:258}]),!0},t.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},t.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},t.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},t.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),!0},t.prototype.selectCharset=function(e){return 2!==e.length?(this.selectDefaultCharset(),!0):("/"===e[0]||this._charsetService.setgCharset(y[e[0]],a.CHARSETS[e[1]]||a.DEFAULT_CHARSET),!0)},t.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},t.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},t.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},t.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},t.prototype.reset=function(){this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone()},t.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},t.prototype.setgLevel=function(e){return this._charsetService.setgLevel(e),!0},t.prototype.screenAlignmentPattern=function(){var e=new g.CellData;e.content=1<<22|"E".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(var t=0;t<this._bufferService.rows;++t){var r=this._activeBuffer.ybase+this._activeBuffer.y+t,i=this._activeBuffer.lines.get(r);i&&(i.fill(e),i.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},t}(c.Disposable);t.InputHandler=x},844:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.Disposable=void 0;var i=function(){function e(){this._disposables=[],this._isDisposed=!1}return e.prototype.dispose=function(){var e,t;this._isDisposed=!0;try{for(var i=r(this._disposables),n=i.next();!n.done;n=i.next())n.value.dispose()}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this._disposables.length=0},e.prototype.register=function(e){return this._disposables.push(e),e},e.prototype.unregister=function(e){var t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)},e}();function n(e){var t,i;try{for(var n=r(e),o=n.next();!o.done;o=n.next())o.value.dispose()}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}e.length=0}t.Disposable=i,t.disposeArray=n,t.getDisposeArrayDisposable=function(e){return{dispose:function(){return n(e)}}}},6114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.isSafari=t.isLegacyEdge=t.isFirefox=void 0;var r="undefined"==typeof navigator,i=r?"node":navigator.userAgent,n=r?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(n),t.isIpad="iPad"===n,t.isIphone="iPhone"===n,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(n),t.isLinux=n.indexOf("Linux")>=0},6106:function(e,t){var r=this&&this.__generator||function(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SortedList=void 0;var i=function(){function e(e){this._getKey=e,this._array=[]}return e.prototype.clear=function(){this._array.length=0},e.prototype.insert=function(e){if(0!==this._array.length){var t=this._search(this._getKey(e),0,this._array.length-1);this._array.splice(t,0,e)}else this._array.push(e)},e.prototype.delete=function(e){if(0===this._array.length)return!1;var t=this._getKey(e),r=this._search(t,0,this._array.length-1);if(this._getKey(this._array[r])!==t)return!1;do{if(this._array[r]===e)return this._array.splice(r,1),!0}while(++r<this._array.length&&this._getKey(this._array[r])===t);return!1},e.prototype.getKeyIterator=function(e){var t;return r(this,(function(r){switch(r.label){case 0:if(0===this._array.length)return[2];if((t=this._search(e,0,this._array.length-1))<0||t>=this._array.length)return[2];if(this._getKey(this._array[t])!==e)return[2];r.label=1;case 1:return[4,this._array[t]];case 2:r.sent(),r.label=3;case 3:if(++t<this._array.length&&this._getKey(this._array[t])===e)return[3,1];r.label=4;case 4:return[2]}}))},e.prototype.values=function(){return this._array.values()},e.prototype._search=function(e,t,r){if(r<t)return t;var i=Math.floor((t+r)/2);if(this._getKey(this._array[i])>e)return this._search(e,t,i-1);if(this._getKey(this._array[i])<e)return this._search(e,i+1,r);for(;i>0&&this._getKey(this._array[i-1])===e;)i--;return i},e}();t.SortedList=i},8273:(e,t)=>{function r(e,t,r,i){if(void 0===r&&(r=0),void 0===i&&(i=e.length),r>=e.length)return e;r=(e.length+r)%e.length,i=i>=e.length?e.length:(e.length+i)%e.length;for(var n=r;n<i;++n)e[n]=t;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.fillFallback=t.fill=void 0,t.fill=function(e,t,i,n){return e.fill?e.fill(t,i,n):r(e,t,i,n)},t.fillFallback=r,t.concat=function(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}},9282:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;var i=r(643);t.updateWindowsModeWrappedState=function(e){var t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),r=null==t?void 0:t.get(e.cols-1),n=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);n&&r&&(n.isWrapped=r[i.CHAR_DATA_CODE_INDEX]!==i.NULL_CELL_CODE&&r[i.CHAR_DATA_CODE_INDEX]!==i.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;var r=function(){function e(){this.fg=0,this.bg=0,this.extended=new i}return e.toColorRGB=function(e){return[e>>>16&255,e>>>8&255,255&e]},e.fromColorRGB=function(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},e.prototype.clone=function(){var t=new e;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t},e.prototype.isInverse=function(){return 67108864&this.fg},e.prototype.isBold=function(){return 134217728&this.fg},e.prototype.isUnderline=function(){return 268435456&this.fg},e.prototype.isBlink=function(){return 536870912&this.fg},e.prototype.isInvisible=function(){return 1073741824&this.fg},e.prototype.isItalic=function(){return 67108864&this.bg},e.prototype.isDim=function(){return 134217728&this.bg},e.prototype.isStrikethrough=function(){return 2147483648&this.fg},e.prototype.getFgColorMode=function(){return 50331648&this.fg},e.prototype.getBgColorMode=function(){return 50331648&this.bg},e.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},e.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},e.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},e.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},e.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},e.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},e.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},e.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},e.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},e.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},e.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},e.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},e.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},e.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},e.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},e.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},e.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},e}();t.AttributeData=r;var i=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=-1),this.underlineStyle=e,this.underlineColor=t}return e.prototype.clone=function(){return new e(this.underlineStyle,this.underlineColor)},e.prototype.isEmpty=function(){return 0===this.underlineStyle},e}();t.ExtendedAttrs=i},9092:function(e,t,r){var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferStringIterator=t.Buffer=t.MAX_BUFFER_SIZE=void 0;var o=r(6349),s=r(8437),a=r(511),l=r(643),c=r(4634),h=r(4863),u=r(7116),d=r(3734);t.MAX_BUFFER_SIZE=4294967295;var f=function(){function e(e,t,r){this._hasScrollback=e,this._optionsService=t,this._bufferService=r,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=s.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=a.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]),this._whitespaceCell=a.CellData.fromCharData([0,l.WHITESPACE_CELL_CHAR,l.WHITESPACE_CELL_WIDTH,l.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new o.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return e.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell},e.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell},e.prototype.getBlankLine=function(e,t){return new s.BufferLine(this._bufferService.cols,this.getNullCell(e),t)},Object.defineProperty(e.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),e.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var r=e+this._optionsService.rawOptions.scrollback;return r>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:r},e.prototype.fillViewportRows=function(e){if(0===this.lines.length){void 0===e&&(e=s.DEFAULT_ATTR_DATA);for(var t=this._rows;t--;)this.lines.push(this.getBlankLine(e))}},e.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new o.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},e.prototype.resize=function(e,t){var r=this.getNullCell(s.DEFAULT_ATTR_DATA),i=this._getCorrectBufferLength(t);if(i>this.lines.maxLength&&(this.lines.maxLength=i),this.lines.length>0){if(this._cols<e)for(var n=0;n<this.lines.length;n++)this.lines.get(n).resize(e,r);var o=0;if(this._rows<t)for(var a=this._rows;a<t;a++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new s.BufferLine(e,r)):this.ybase>0&&this.lines.length<=this.ybase+this.y+o+1?(this.ybase--,o++,this.ydisp>0&&this.ydisp--):this.lines.push(new s.BufferLine(e,r)));else for(a=this._rows;a>t;a--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(i<this.lines.maxLength){var l=this.lines.length-i;l>0&&(this.lines.trimStart(l),this.ybase=Math.max(this.ybase-l,0),this.ydisp=Math.max(this.ydisp-l,0),this.savedY=Math.max(this.savedY-l,0)),this.lines.maxLength=i}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),o&&(this.y+=o),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(n=0;n<this.lines.length;n++)this.lines.get(n).resize(e,r);this._cols=e,this._rows=t},Object.defineProperty(e.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),e.prototype._reflow=function(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))},e.prototype._reflowLarger=function(e,t){var r=(0,c.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(s.DEFAULT_ATTR_DATA));if(r.length>0){var i=(0,c.reflowLargerCreateNewLayout)(this.lines,r);(0,c.reflowLargerApplyNewLayout)(this.lines,i.layout),this._reflowLargerAdjustViewport(e,t,i.countRemoved)}},e.prototype._reflowLargerAdjustViewport=function(e,t,r){for(var i=this.getNullCell(s.DEFAULT_ATTR_DATA),n=r;n-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new s.BufferLine(e,i))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-r,0)},e.prototype._reflowSmaller=function(e,t){for(var r=this.getNullCell(s.DEFAULT_ATTR_DATA),o=[],a=0,l=this.lines.length-1;l>=0;l--){var h=this.lines.get(l);if(!(!h||!h.isWrapped&&h.getTrimmedLength()<=e)){for(var u=[h];h.isWrapped&&l>0;)h=this.lines.get(--l),u.unshift(h);var d=this.ybase+this.y;if(!(d>=l&&d<l+u.length)){var f,p=u[u.length-1].getTrimmedLength(),g=(0,c.reflowSmallerGetNewLineLengths)(u,this._cols,e),m=g.length-u.length;f=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+m):Math.max(0,this.lines.length-this.lines.maxLength+m);for(var v=[],O=0;O<m;O++){var _=this.getBlankLine(s.DEFAULT_ATTR_DATA,!0);v.push(_)}v.length>0&&(o.push({start:l+u.length+a,newLines:v}),a+=v.length),u.push.apply(u,n([],i(v),!1));var b=g.length-1,y=g[b];0===y&&(y=g[--b]);for(var w=u.length-m-1,S=p;w>=0;){var C=Math.min(S,y);if(void 0===u[b])break;if(u[b].copyCellsFrom(u[w],S-C,y-C,C,!0),0==(y-=C)&&(y=g[--b]),0==(S-=C)){w--;var x=Math.max(w,0);S=(0,c.getWrappedLineTrimmedLength)(u,x,this._cols)}}for(O=0;O<u.length;O++)g[O]<e&&u[O].setCell(g[O],r);for(var k=m-f;k-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+a)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+m,this.ybase+t-1)}}}if(o.length>0){var T=[],P=[];for(O=0;O<this.lines.length;O++)P.push(this.lines.get(O));var Q=this.lines.length,R=Q-1,A=0,$=o[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+a);var L=0;for(O=Math.min(this.lines.maxLength-1,Q+a-1);O>=0;O--)if($&&$.start>R+L){for(var E=$.newLines.length-1;E>=0;E--)this.lines.set(O--,$.newLines[E]);O++,T.push({index:R+1,amount:$.newLines.length}),L+=$.newLines.length,$=o[++A]}else this.lines.set(O,P[R--]);var M=0;for(O=T.length-1;O>=0;O--)T[O].index+=M,this.lines.onInsertEmitter.fire(T[O]),M+=T[O].amount;var D=Math.max(0,Q+a-this.lines.maxLength);D>0&&this.lines.onTrimEmitter.fire(D)}},e.prototype.stringIndexToBufferIndex=function(e,t,r){for(void 0===r&&(r=!1);t;){var i=this.lines.get(e);if(!i)return[-1,-1];for(var n=r?i.getTrimmedLength():i.length,o=0;o<n;++o)if(i.get(o)[l.CHAR_DATA_WIDTH_INDEX]&&(t-=i.get(o)[l.CHAR_DATA_CHAR_INDEX].length||1),t<0)return[e,o];e++}return[e,0]},e.prototype.translateBufferLineToString=function(e,t,r,i){void 0===r&&(r=0);var n=this.lines.get(e);return n?n.translateToString(t,r,i):""},e.prototype.getWrappedRangeForLine=function(e){for(var t=e,r=e;t>0&&this.lines.get(t).isWrapped;)t--;for(;r+1<this.lines.length&&this.lines.get(r+1).isWrapped;)r++;return{first:t,last:r}},e.prototype.setupTabStops=function(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0},e.prototype.prevStop=function(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},e.prototype.nextStop=function(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},e.prototype.clearMarkers=function(e){this._isClearing=!0;for(var t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1},e.prototype.clearAllMarkers=function(){this._isClearing=!0;for(var e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1},e.prototype.addMarker=function(e){var t=this,r=new h.Marker(e);return this.markers.push(r),r.register(this.lines.onTrim((function(e){r.line-=e,r.line<0&&r.dispose()}))),r.register(this.lines.onInsert((function(e){r.line>=e.index&&(r.line+=e.amount)}))),r.register(this.lines.onDelete((function(e){r.line>=e.index&&r.line<e.index+e.amount&&r.dispose(),r.line>e.index&&(r.line-=e.amount)}))),r.register(r.onDispose((function(){return t._removeMarker(r)}))),r},e.prototype._removeMarker=function(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)},e.prototype.iterator=function(e,t,r,i,n){return new p(this,e,t,r,i,n)},e}();t.Buffer=f;var p=function(){function e(e,t,r,i,n,o){void 0===r&&(r=0),void 0===i&&(i=e.lines.length),void 0===n&&(n=0),void 0===o&&(o=0),this._buffer=e,this._trimRight=t,this._startIndex=r,this._endIndex=i,this._startOverscan=n,this._endOverscan=o,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return e.prototype.hasNext=function(){return this._current<this._endIndex},e.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var t="",r=e.first;r<=e.last;++r)t+=this._buffer.translateBufferLineToString(r,this._trimRight);return this._current=e.last+1,{range:e,content:t}},e}();t.BufferStringIterator=p},8437:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;var i=r(482),n=r(643),o=r(511),s=r(3734);t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);var a=function(){function e(e,t,r){void 0===r&&(r=!1),this.isWrapped=r,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);for(var i=t||o.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]),s=0;s<e;++s)this.setCell(s,i);this.length=e}return e.prototype.get=function(e){var t=this._data[3*e+0],r=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:r?(0,i.stringFromCodePoint)(r):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):r]},e.prototype.set=function(e,t){this._data[3*e+1]=t[n.CHAR_DATA_ATTR_INDEX],t[n.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[n.CHAR_DATA_WIDTH_INDEX]<<22},e.prototype.getWidth=function(e){return this._data[3*e+0]>>22},e.prototype.hasWidth=function(e){return 12582912&this._data[3*e+0]},e.prototype.getFg=function(e){return this._data[3*e+1]},e.prototype.getBg=function(e){return this._data[3*e+2]},e.prototype.hasContent=function(e){return 4194303&this._data[3*e+0]},e.prototype.getCodePoint=function(e){var t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t},e.prototype.isCombined=function(e){return 2097152&this._data[3*e+0]},e.prototype.getString=function(e){var t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,i.stringFromCodePoint)(2097151&t):""},e.prototype.loadCell=function(e,t){var r=3*e;return t.content=this._data[r+0],t.fg=this._data[r+1],t.bg=this._data[r+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t},e.prototype.setCell=function(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg},e.prototype.setCellFromCodePoint=function(e,t,r,i,n,o){268435456&n&&(this._extendedAttrs[e]=o),this._data[3*e+0]=t|r<<22,this._data[3*e+1]=i,this._data[3*e+2]=n},e.prototype.addCodepointToCell=function(e,t){var r=this._data[3*e+0];2097152&r?this._combined[e]+=(0,i.stringFromCodePoint)(t):(2097151&r?(this._combined[e]=(0,i.stringFromCodePoint)(2097151&r)+(0,i.stringFromCodePoint)(t),r&=-2097152,r|=2097152):r=t|1<<22,this._data[3*e+0]=r)},e.prototype.insertCells=function(e,t,r,i){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),t<this.length-e){for(var n=new o.CellData,a=this.length-e-t-1;a>=0;--a)this.setCell(e+t+a,this.loadCell(e+a,n));for(a=0;a<t;++a)this.setCell(e+a,r)}else for(a=e;a<this.length;++a)this.setCell(a,r);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs)},e.prototype.deleteCells=function(e,t,r,i){if(e%=this.length,t<this.length-e){for(var n=new o.CellData,a=0;a<this.length-e-t;++a)this.setCell(e+a,this.loadCell(e+t+a,n));for(a=this.length-t;a<this.length;++a)this.setCell(a,r)}else for(a=e;a<this.length;++a)this.setCell(a,r);e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs)},e.prototype.replaceCells=function(e,t,r,i){for(e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs);e<t&&e<this.length;)this.setCell(e++,r)},e.prototype.resize=function(e,t){if(e!==this.length){if(e>this.length){var r=new Uint32Array(3*e);this.length&&(3*e<this._data.length?r.set(this._data.subarray(0,3*e)):r.set(this._data)),this._data=r;for(var i=this.length;i<e;++i)this.setCell(i,t)}else if(e){(r=new Uint32Array(3*e)).set(this._data.subarray(0,3*e)),this._data=r;var n=Object.keys(this._combined);for(i=0;i<n.length;i++){var o=parseInt(n[i],10);o>=e&&delete this._combined[o]}}else this._data=new Uint32Array(0),this._combined={};this.length=e}},e.prototype.fill=function(e){this._combined={},this._extendedAttrs={};for(var t=0;t<this.length;++t)this.setCell(t,e)},e.prototype.copyFrom=function(e){for(var t in this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={},e._combined)this._combined[t]=e._combined[t];for(var t in this._extendedAttrs={},e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped},e.prototype.clone=function(){var t=new e(0);for(var r in t._data=new Uint32Array(this._data),t.length=this.length,this._combined)t._combined[r]=this._combined[r];for(var r in this._extendedAttrs)t._extendedAttrs[r]=this._extendedAttrs[r];return t.isWrapped=this.isWrapped,t},e.prototype.getTrimmedLength=function(){for(var e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0},e.prototype.copyCellsFrom=function(e,t,r,i,n){var o=e._data;if(n)for(var s=i-1;s>=0;s--)for(var a=0;a<3;a++)this._data[3*(r+s)+a]=o[3*(t+s)+a];else for(s=0;s<i;s++)for(a=0;a<3;a++)this._data[3*(r+s)+a]=o[3*(t+s)+a];var l=Object.keys(e._combined);for(a=0;a<l.length;a++){var c=parseInt(l[a],10);c>=t&&(this._combined[c-t+r]=e._combined[c])}},e.prototype.translateToString=function(e,t,r){void 0===e&&(e=!1),void 0===t&&(t=0),void 0===r&&(r=this.length),e&&(r=Math.min(r,this.getTrimmedLength()));for(var o="";t<r;){var s=this._data[3*t+0],a=2097151&s;o+=2097152&s?this._combined[t]:a?(0,i.stringFromCodePoint)(a):n.WHITESPACE_CELL_CHAR,t+=s>>22||1}return o},e}();t.BufferLine=a},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error("Buffer range end ("+e.end.x+", "+e.end.y+") cannot be before start ("+e.start.x+", "+e.start.y+")");return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function r(e,t,r){if(t===e.length-1)return e[t].getTrimmedLength();var i=!e[t].hasContent(r-1)&&1===e[t].getWidth(r-1),n=2===e[t+1].getWidth(0);return i&&n?r-1:r}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,i,n,o){for(var s=[],a=0;a<e.length-1;a++){var l=a,c=e.get(++l);if(c.isWrapped){for(var h=[e.get(a)];l<e.length&&c.isWrapped;)h.push(c),c=e.get(++l);if(n>=a&&n<l)a+=h.length-1;else{for(var u=0,d=r(h,u,t),f=1,p=0;f<h.length;){var g=r(h,f,t),m=g-p,v=i-d,O=Math.min(m,v);h[u].copyCellsFrom(h[f],p,d,O,!1),(d+=O)===i&&(u++,d=0),(p+=O)===g&&(f++,p=0),0===d&&0!==u&&2===h[u-1].getWidth(i-1)&&(h[u].copyCellsFrom(h[u-1],i-1,d++,1,!1),h[u-1].setCell(i-1,o))}h[u].replaceCells(d,i,o);for(var _=0,b=h.length-1;b>0&&(b>u||0===h[b].getTrimmedLength());b--)_++;_>0&&(s.push(a+h.length-_),s.push(_)),a+=h.length-1}}}return s},t.reflowLargerCreateNewLayout=function(e,t){for(var r=[],i=0,n=t[i],o=0,s=0;s<e.length;s++)if(n===s){var a=t[++i];e.onDeleteEmitter.fire({index:s-o,amount:a}),s+=a-1,o+=a,n=t[++i]}else r.push(s);return{layout:r,countRemoved:o}},t.reflowLargerApplyNewLayout=function(e,t){for(var r=[],i=0;i<t.length;i++)r.push(e.get(t[i]));for(i=0;i<r.length;i++)e.set(i,r[i]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,i){for(var n=[],o=e.map((function(i,n){return r(e,n,t)})).reduce((function(e,t){return e+t})),s=0,a=0,l=0;l<o;){if(o-l<i){n.push(o-l);break}s+=i;var c=r(e,a,t);s>c&&(s-=c,a++);var h=2===e[a].getWidth(s-1);h&&s--;var u=h?i-1:i;n.push(u),l+=u}return n},t.getWrappedLineTrimmedLength=r},5295:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;var o=r(9092),s=r(8460),a=function(e){function t(t,r){var i=e.call(this)||this;return i._optionsService=t,i._bufferService=r,i._onBufferActivate=i.register(new s.EventEmitter),i.reset(),i}return n(t,e),Object.defineProperty(t.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._normal=new o.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new o.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(t.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),t.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},t.prototype.activateAltBuffer=function(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},t.prototype.resize=function(e,t){this._normal.resize(e,t),this._alt.resize(e,t)},t.prototype.setupTabStops=function(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)},t}(r(844).Disposable);t.BufferSet=a},511:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;var o=r(482),s=r(643),a=r(3734),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=0,t.fg=0,t.bg=0,t.extended=new a.ExtendedAttrs,t.combinedData="",t}return n(t,e),t.fromCharData=function(e){var r=new t;return r.setFromCharData(e),r},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,o.stringFromCodePoint)(2097151&this.content):""},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;var t=!1;if(e[s.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){var r=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){var i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(r-55296)+i-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(a.AttributeData);t.CellData=l},643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=256,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;var o=r(8460),s=function(e){function t(r){var i=e.call(this)||this;return i.line=r,i._id=t._nextId++,i.isDisposed=!1,i._onDispose=new o.EventEmitter,i}return n(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),e.prototype.dispose.call(this))},t._nextId=1,t}(r(844).Disposable);t.Marker=s},7116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},t.CHARSETS.A={"#":"£"},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},t.CHARSETS.C=t.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},t.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},t.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},t.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},t.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},t.CHARSETS.E=t.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},t.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},t.CHARSETS.H=t.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},t.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(e,t)=>{var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,function(e){e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="",e.BS="\b",e.HT="\t",e.LF="\n",e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""}(r=t.C0||(t.C0={})),(i=t.C1||(t.C1={})).PAD="",i.HOP="",i.BPH="",i.NBH="",i.IND="",i.NEL="",i.SSA="",i.ESA="",i.HTS="",i.HTJ="",i.VTS="",i.PLD="",i.PLU="",i.RI="",i.SS2="",i.SS3="",i.DCS="",i.PU1="",i.PU2="",i.STS="",i.CCH="",i.MW="",i.SPA="",i.EPA="",i.SOS="",i.SGCI="",i.SCI="",i.CSI="",i.ST="",i.OSC="",i.PM="",i.APC="",(t.C1_ESCAPED||(t.C1_ESCAPED={})).ST=r.ESC+"\\"},7399:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;var i=r(2584),n={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(e,t,r,o){var s={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?s.key=t?i.C0.ESC+"OA":i.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?s.key=t?i.C0.ESC+"OD":i.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?s.key=t?i.C0.ESC+"OC":i.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(s.key=t?i.C0.ESC+"OB":i.C0.ESC+"[B");break;case 8:if(e.shiftKey){s.key=i.C0.BS;break}if(e.altKey){s.key=i.C0.ESC+i.C0.DEL;break}s.key=i.C0.DEL;break;case 9:if(e.shiftKey){s.key=i.C0.ESC+"[Z";break}s.key=i.C0.HT,s.cancel=!0;break;case 13:s.key=e.altKey?i.C0.ESC+i.C0.CR:i.C0.CR,s.cancel=!0;break;case 27:s.key=i.C0.ESC,e.altKey&&(s.key=i.C0.ESC+i.C0.ESC),s.cancel=!0;break;case 37:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"D",s.key===i.C0.ESC+"[1;3D"&&(s.key=i.C0.ESC+(r?"b":"[1;5D"))):s.key=t?i.C0.ESC+"OD":i.C0.ESC+"[D";break;case 39:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"C",s.key===i.C0.ESC+"[1;3C"&&(s.key=i.C0.ESC+(r?"f":"[1;5C"))):s.key=t?i.C0.ESC+"OC":i.C0.ESC+"[C";break;case 38:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"A",r||s.key!==i.C0.ESC+"[1;3A"||(s.key=i.C0.ESC+"[1;5A")):s.key=t?i.C0.ESC+"OA":i.C0.ESC+"[A";break;case 40:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"B",r||s.key!==i.C0.ESC+"[1;3B"||(s.key=i.C0.ESC+"[1;5B")):s.key=t?i.C0.ESC+"OB":i.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(s.key=i.C0.ESC+"[2~");break;case 46:s.key=a?i.C0.ESC+"[3;"+(a+1)+"~":i.C0.ESC+"[3~";break;case 36:s.key=a?i.C0.ESC+"[1;"+(a+1)+"H":t?i.C0.ESC+"OH":i.C0.ESC+"[H";break;case 35:s.key=a?i.C0.ESC+"[1;"+(a+1)+"F":t?i.C0.ESC+"OF":i.C0.ESC+"[F";break;case 33:e.shiftKey?s.type=2:e.ctrlKey?s.key=i.C0.ESC+"[5;"+(a+1)+"~":s.key=i.C0.ESC+"[5~";break;case 34:e.shiftKey?s.type=3:e.ctrlKey?s.key=i.C0.ESC+"[6;"+(a+1)+"~":s.key=i.C0.ESC+"[6~";break;case 112:s.key=a?i.C0.ESC+"[1;"+(a+1)+"P":i.C0.ESC+"OP";break;case 113:s.key=a?i.C0.ESC+"[1;"+(a+1)+"Q":i.C0.ESC+"OQ";break;case 114:s.key=a?i.C0.ESC+"[1;"+(a+1)+"R":i.C0.ESC+"OR";break;case 115:s.key=a?i.C0.ESC+"[1;"+(a+1)+"S":i.C0.ESC+"OS";break;case 116:s.key=a?i.C0.ESC+"[15;"+(a+1)+"~":i.C0.ESC+"[15~";break;case 117:s.key=a?i.C0.ESC+"[17;"+(a+1)+"~":i.C0.ESC+"[17~";break;case 118:s.key=a?i.C0.ESC+"[18;"+(a+1)+"~":i.C0.ESC+"[18~";break;case 119:s.key=a?i.C0.ESC+"[19;"+(a+1)+"~":i.C0.ESC+"[19~";break;case 120:s.key=a?i.C0.ESC+"[20;"+(a+1)+"~":i.C0.ESC+"[20~";break;case 121:s.key=a?i.C0.ESC+"[21;"+(a+1)+"~":i.C0.ESC+"[21~";break;case 122:s.key=a?i.C0.ESC+"[23;"+(a+1)+"~":i.C0.ESC+"[23~";break;case 123:s.key=a?i.C0.ESC+"[24;"+(a+1)+"~":i.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(r&&!o||!e.altKey||e.metaKey)!r||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?s.key=e.key:e.key&&e.ctrlKey&&("_"===e.key&&(s.key=i.C0.US),"@"===e.key&&(s.key=i.C0.NUL)):65===e.keyCode&&(s.type=1);else{var l=n[e.keyCode],c=null==l?void 0:l[e.shiftKey?1:0];if(c)s.key=i.C0.ESC+c;else if(e.keyCode>=65&&e.keyCode<=90){var h=e.ctrlKey?e.keyCode-64:e.keyCode+32,u=String.fromCharCode(h);e.shiftKey&&(u=u.toUpperCase()),s.key=i.C0.ESC+u}else"Dead"===e.key&&e.code.startsWith("Key")&&(u=e.code.slice(3,4),e.shiftKey||(u=u.toLowerCase()),s.key=i.C0.ESC+u,s.cancel=!0)}else e.keyCode>=65&&e.keyCode<=90?s.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?s.key=i.C0.NUL:e.keyCode>=51&&e.keyCode<=55?s.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?s.key=i.C0.DEL:219===e.keyCode?s.key=i.C0.ESC:220===e.keyCode?s.key=i.C0.FS:221===e.keyCode&&(s.key=i.C0.GS)}return s}},482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length);for(var i="",n=t;n<r;++n){var o=e[n];o>65535?(o-=65536,i+=String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):i+=String.fromCharCode(o)}return i};var r=function(){function e(){this._interim=0}return e.prototype.clear=function(){this._interim=0},e.prototype.decode=function(e,t){var r=e.length;if(!r)return 0;var i=0,n=0;this._interim&&(56320<=(a=e.charCodeAt(n++))&&a<=57343?t[i++]=1024*(this._interim-55296)+a-56320+65536:(t[i++]=this._interim,t[i++]=a),this._interim=0);for(var o=n;o<r;++o){var s=e.charCodeAt(o);if(55296<=s&&s<=56319){if(++o>=r)return this._interim=s,i;var a;56320<=(a=e.charCodeAt(o))&&a<=57343?t[i++]=1024*(s-55296)+a-56320+65536:(t[i++]=s,t[i++]=a)}else 65279!==s&&(t[i++]=s)}return i},e}();t.StringToUtf32=r;var i=function(){function e(){this.interim=new Uint8Array(3)}return e.prototype.clear=function(){this.interim.fill(0)},e.prototype.decode=function(e,t){var r=e.length;if(!r)return 0;var i,n,o,s,a=0,l=0,c=0;if(this.interim[0]){var h=!1,u=this.interim[0];u&=192==(224&u)?31:224==(240&u)?15:7;for(var d=0,f=void 0;(f=63&this.interim[++d])&&d<4;)u<<=6,u|=f;for(var p=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,g=p-d;c<g;){if(c>=r)return 0;if(128!=(192&(f=e[c++]))){c--,h=!0;break}this.interim[d++]=f,u<<=6,u|=63&f}h||(2===p?u<128?c--:t[a++]=u:3===p?u<2048||u>=55296&&u<=57343||65279===u||(t[a++]=u):u<65536||u>1114111||(t[a++]=u)),this.interim.fill(0)}for(var m=r-4,v=c;v<r;){for(;!(!(v<m)||128&(i=e[v])||128&(n=e[v+1])||128&(o=e[v+2])||128&(s=e[v+3]));)t[a++]=i,t[a++]=n,t[a++]=o,t[a++]=s,v+=4;if((i=e[v++])<128)t[a++]=i;else if(192==(224&i)){if(v>=r)return this.interim[0]=i,a;if(128!=(192&(n=e[v++]))){v--;continue}if((l=(31&i)<<6|63&n)<128){v--;continue}t[a++]=l}else if(224==(240&i)){if(v>=r)return this.interim[0]=i,a;if(128!=(192&(n=e[v++]))){v--;continue}if(v>=r)return this.interim[0]=i,this.interim[1]=n,a;if(128!=(192&(o=e[v++]))){v--;continue}if((l=(15&i)<<12|(63&n)<<6|63&o)<2048||l>=55296&&l<=57343||65279===l)continue;t[a++]=l}else if(240==(248&i)){if(v>=r)return this.interim[0]=i,a;if(128!=(192&(n=e[v++]))){v--;continue}if(v>=r)return this.interim[0]=i,this.interim[1]=n,a;if(128!=(192&(o=e[v++]))){v--;continue}if(v>=r)return this.interim[0]=i,this.interim[1]=n,this.interim[2]=o,a;if(128!=(192&(s=e[v++]))){v--;continue}if((l=(7&i)<<18|(63&n)<<12|(63&o)<<6|63&s)<65536||l>1114111)continue;t[a++]=l}}return a},e}();t.Utf8ToUtf32=i},225:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;var i,n=r(8273),o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],s=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],a=function(){function e(){if(this.version="6",!i){i=new Uint8Array(65536),(0,n.fill)(i,1),i[0]=0,(0,n.fill)(i,0,1,32),(0,n.fill)(i,0,127,160),(0,n.fill)(i,2,4352,4448),i[9001]=2,i[9002]=2,(0,n.fill)(i,2,11904,42192),i[12351]=1,(0,n.fill)(i,2,44032,55204),(0,n.fill)(i,2,63744,64256),(0,n.fill)(i,2,65040,65050),(0,n.fill)(i,2,65072,65136),(0,n.fill)(i,2,65280,65377),(0,n.fill)(i,2,65504,65511);for(var e=0;e<o.length;++e)(0,n.fill)(i,0,o[e][0],o[e][1]+1)}}return e.prototype.wcwidth=function(e){return e<32?0:e<127?1:e<65536?i[e]:function(e,t){var r,i=0,n=t.length-1;if(e<t[0][0]||e>t[n][1])return!1;for(;n>=i;)if(e>t[r=i+n>>1][1])i=r+1;else{if(!(e<t[r][0]))return!0;n=r-1}return!1}(e,s)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1},e}();t.UnicodeV6=a},5981:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;var i=r(8460),n="undefined"==typeof queueMicrotask?function(e){Promise.resolve().then(e)}:queueMicrotask,o=function(){function e(e){this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._onWriteParsed=new i.EventEmitter}return Object.defineProperty(e.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),e.prototype.writeSync=function(e,t){if(void 0!==t&&this._syncCalls>t)this._syncCalls=0;else if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var r;for(this._isSyncWriting=!0;r=this._writeBuffer.shift();){this._action(r);var i=this._callbacks.shift();i&&i()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},e.prototype.write=function(e,t){var r=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout((function(){return r._innerWrite()}))),this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)},e.prototype._innerWrite=function(e,t){var r=this;void 0===e&&(e=0),void 0===t&&(t=!0);for(var i=e||Date.now();this._writeBuffer.length>this._bufferOffset;){var o=this._writeBuffer[this._bufferOffset],s=this._action(o,t);if(s)return void s.catch((function(e){return n((function(){throw e})),Promise.resolve(!1)})).then((function(e){return Date.now()-i>=12?setTimeout((function(){return r._innerWrite(0,e)})):r._innerWrite(i,e)}));var a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-i>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((function(){return r._innerWrite()}))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()},e}();t.WriteBuffer=o},5941:function(e,t){var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;var i=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,n=/^[\da-f]+$/;function o(e,t){var r=e.toString(16),i=r.length<2?"0"+r:r;switch(t){case 4:return r[0];case 8:return i;case 12:return(i+i).slice(0,3);default:return i+i}}t.parseColor=function(e){if(e){var t=e.toLowerCase();if(0===t.indexOf("rgb:")){t=t.slice(4);var r=i.exec(t);if(r){var o=r[1]?15:r[4]?255:r[7]?4095:65535;return[Math.round(parseInt(r[1]||r[4]||r[7]||r[10],16)/o*255),Math.round(parseInt(r[2]||r[5]||r[8]||r[11],16)/o*255),Math.round(parseInt(r[3]||r[6]||r[9]||r[12],16)/o*255)]}}else if(0===t.indexOf("#")&&(t=t.slice(1),n.exec(t)&&[3,6,9,12].includes(t.length))){for(var s=t.length/3,a=[0,0,0],l=0;l<3;++l){var c=parseInt(t.slice(s*l,s*l+s),16);a[l]=1===s?c<<4:2===s?c:3===s?c>>4:c>>8}return a}}},t.toRgbString=function(e,t){void 0===t&&(t=16);var i=r(e,3),n=i[0],s=i[1],a=i[2];return"rgb:"+o(n,t)+"/"+o(s,t)+"/"+o(a,t)}},5770:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;var i=r(482),n=r(8742),o=r(5770),s=[],a=function(){function e(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=s},e.prototype.registerHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var r=this._handlers[e];return r.push(t),{dispose:function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.reset=function(){if(this._active.length)for(var e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=s,this._ident=0},e.prototype.hook=function(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||s,this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].hook(t);else this._handlerFb(this._ident,"HOOK",t)},e.prototype.put=function(e,t,r){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,r);else this._handlerFb(this._ident,"PUT",(0,i.utf32ToString)(e,t,r))},e.prototype.unhook=function(e,t){if(void 0===t&&(t=!0),this._active.length){var r=!1,i=this._active.length-1,n=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,r=t,n=this._stack.fallThrough,this._stack.paused=!1),!n&&!1===r){for(;i>=0&&!0!==(r=this._active[i].unhook(e));i--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,r;i--}for(;i>=0;i--)if((r=this._active[i].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",e);this._active=s,this._ident=0},e}();t.DcsParser=a;var l=new n.Params;l.addParam(0);var c=function(){function e(e){this._handler=e,this._data="",this._params=l,this._hitLimit=!1}return e.prototype.hook=function(e){this._params=e.length>1||e.params[0]?e.clone():l,this._data="",this._hitLimit=!1},e.prototype.put=function(e,t,r){this._hitLimit||(this._data+=(0,i.utf32ToString)(e,t,r),this._data.length>o.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.unhook=function(e){var t=this,r=!1;if(this._hitLimit)r=!1;else if(e&&(r=this._handler(this._data,this._params))instanceof Promise)return r.then((function(e){return t._params=l,t._data="",t._hitLimit=!1,e}));return this._params=l,this._data="",this._hitLimit=!1,r},e}();t.DcsHandler=c},2015:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;var o=r(844),s=r(8273),a=r(8742),l=r(6242),c=r(6351),h=function(){function e(e){this.table=new Uint8Array(e)}return e.prototype.setDefault=function(e,t){(0,s.fill)(this.table,e<<4|t)},e.prototype.add=function(e,t,r,i){this.table[t<<8|e]=r<<4|i},e.prototype.addMany=function(e,t,r,i){for(var n=0;n<e.length;n++)this.table[t<<8|e[n]]=r<<4|i},e}();t.TransitionTable=h;var u=160;t.VT500_TRANSITION_TABLE=function(){var e=new h(4095),t=Array.apply(null,Array(256)).map((function(e,t){return t})),r=function(e,r){return t.slice(e,r)},i=r(32,127),n=r(0,24);n.push(25),n.push.apply(n,r(28,32));var o,s=r(0,14);for(o in e.setDefault(1,0),e.addMany(i,0,2,0),s)e.addMany([24,26,153,154],o,3,0),e.addMany(r(128,144),o,3,0),e.addMany(r(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(n,0,3,0),e.addMany(n,1,3,1),e.add(127,1,0,1),e.addMany(n,8,0,8),e.addMany(n,3,3,3),e.add(127,3,0,3),e.addMany(n,4,3,4),e.add(127,4,0,4),e.addMany(n,6,3,6),e.addMany(n,5,3,5),e.add(127,5,0,5),e.addMany(n,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(i,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(r(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(i,7,0,7),e.addMany(n,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(r(64,127),3,7,0),e.addMany(r(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(r(48,60),4,8,4),e.addMany(r(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(r(32,64),6,0,6),e.add(127,6,0,6),e.addMany(r(64,127),6,0,0),e.addMany(r(32,48),3,9,5),e.addMany(r(32,48),5,9,5),e.addMany(r(48,64),5,0,6),e.addMany(r(64,127),5,7,0),e.addMany(r(32,48),4,9,5),e.addMany(r(32,48),1,9,2),e.addMany(r(32,48),2,9,2),e.addMany(r(48,127),2,10,0),e.addMany(r(48,80),1,10,0),e.addMany(r(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(r(96,127),1,10,0),e.add(80,1,11,9),e.addMany(n,9,0,9),e.add(127,9,0,9),e.addMany(r(28,32),9,0,9),e.addMany(r(32,48),9,9,12),e.addMany(r(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(n,11,0,11),e.addMany(r(32,128),11,0,11),e.addMany(r(28,32),11,0,11),e.addMany(n,10,0,10),e.add(127,10,0,10),e.addMany(r(28,32),10,0,10),e.addMany(r(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(r(32,48),10,9,12),e.addMany(n,12,0,12),e.add(127,12,0,12),e.addMany(r(28,32),12,0,12),e.addMany(r(32,48),12,9,12),e.addMany(r(48,64),12,0,11),e.addMany(r(64,127),12,12,13),e.addMany(r(64,127),10,12,13),e.addMany(r(64,127),9,12,13),e.addMany(n,13,13,13),e.addMany(i,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(u,0,2,0),e.add(u,8,5,8),e.add(u,6,0,6),e.add(u,11,0,11),e.add(u,13,13,13),e}();var d=function(e){function r(r){void 0===r&&(r=t.VT500_TRANSITION_TABLE);var i=e.call(this)||this;return i._transitions=r,i._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},i.initialState=0,i.currentState=i.initialState,i._params=new a.Params,i._params.addParam(0),i._collect=0,i.precedingCodepoint=0,i._printHandlerFb=function(e,t,r){},i._executeHandlerFb=function(e){},i._csiHandlerFb=function(e,t){},i._escHandlerFb=function(e){},i._errorHandlerFb=function(e){return e},i._printHandler=i._printHandlerFb,i._executeHandlers=Object.create(null),i._csiHandlers=Object.create(null),i._escHandlers=Object.create(null),i._oscParser=new l.OscParser,i._dcsParser=new c.DcsParser,i._errorHandler=i._errorHandlerFb,i.registerEscHandler({final:"\\"},(function(){return!0})),i}return n(r,e),r.prototype._identifier=function(e,t){void 0===t&&(t=[64,126]);var r=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if((r=e.prefix.charCodeAt(0))&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var i=0;i<e.intermediates.length;++i){var n=e.intermediates.charCodeAt(i);if(32>n||n>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=n}}if(1!==e.final.length)throw new Error("final must be a single byte");var o=e.final.charCodeAt(0);if(t[0]>o||o>t[1])throw new Error("final must be in range "+t[0]+" .. "+t[1]);return(r<<=8)|o},r.prototype.identToString=function(e){for(var t=[];e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join("")},r.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},r.prototype.setPrintHandler=function(e){this._printHandler=e},r.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},r.prototype.registerEscHandler=function(e,t){var r=this._identifier(e,[48,126]);void 0===this._escHandlers[r]&&(this._escHandlers[r]=[]);var i=this._escHandlers[r];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},r.prototype.clearEscHandler=function(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]},r.prototype.setEscHandlerFallback=function(e){this._escHandlerFb=e},r.prototype.setExecuteHandler=function(e,t){this._executeHandlers[e.charCodeAt(0)]=t},r.prototype.clearExecuteHandler=function(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]},r.prototype.setExecuteHandlerFallback=function(e){this._executeHandlerFb=e},r.prototype.registerCsiHandler=function(e,t){var r=this._identifier(e);void 0===this._csiHandlers[r]&&(this._csiHandlers[r]=[]);var i=this._csiHandlers[r];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},r.prototype.clearCsiHandler=function(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]},r.prototype.setCsiHandlerFallback=function(e){this._csiHandlerFb=e},r.prototype.registerDcsHandler=function(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)},r.prototype.clearDcsHandler=function(e){this._dcsParser.clearHandler(this._identifier(e))},r.prototype.setDcsHandlerFallback=function(e){this._dcsParser.setHandlerFallback(e)},r.prototype.registerOscHandler=function(e,t){return this._oscParser.registerHandler(e,t)},r.prototype.clearOscHandler=function(e){this._oscParser.clearHandler(e)},r.prototype.setOscHandlerFallback=function(e){this._oscParser.setHandlerFallback(e)},r.prototype.setErrorHandler=function(e){this._errorHandler=e},r.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},r.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])},r.prototype._preserveStack=function(e,t,r,i,n){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=r,this._parseStack.transition=i,this._parseStack.chunkPos=n},r.prototype.parse=function(e,t,r){var i,n=0,o=0,s=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,s=this._parseStack.chunkPos+1;else{if(void 0===r||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var a=this._parseStack.handlers,l=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===r&&l>-1)for(;l>=0&&!0!==(i=a[l](this._params));l--)if(i instanceof Promise)return this._parseStack.handlerPos=l,i;this._parseStack.handlers=[];break;case 4:if(!1===r&&l>-1)for(;l>=0&&!0!==(i=a[l]());l--)if(i instanceof Promise)return this._parseStack.handlerPos=l,i;this._parseStack.handlers=[];break;case 6:if(n=e[this._parseStack.chunkPos],i=this._dcsParser.unhook(24!==n&&26!==n,r))return i;27===n&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(n=e[this._parseStack.chunkPos],i=this._oscParser.end(24!==n&&26!==n,r))return i;27===n&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,s=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var c=s;c<t;++c){switch(n=e[c],(o=this._transitions.table[this.currentState<<8|(n<160?n:u)])>>4){case 2:for(var h=c+1;;++h){if(h>=t||(n=e[h])<32||n>126&&n<u){this._printHandler(e,c,h),c=h-1;break}if(++h>=t||(n=e[h])<32||n>126&&n<u){this._printHandler(e,c,h),c=h-1;break}if(++h>=t||(n=e[h])<32||n>126&&n<u){this._printHandler(e,c,h),c=h-1;break}if(++h>=t||(n=e[h])<32||n>126&&n<u){this._printHandler(e,c,h),c=h-1;break}}break;case 3:this._executeHandlers[n]?this._executeHandlers[n]():this._executeHandlerFb(n),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:c,code:n,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var d=(a=this._csiHandlers[this._collect<<8|n])?a.length-1:-1;d>=0&&!0!==(i=a[d](this._params));d--)if(i instanceof Promise)return this._preserveStack(3,a,d,o,c),i;d<0&&this._csiHandlerFb(this._collect<<8|n,this._params),this.precedingCodepoint=0;break;case 8:do{switch(n){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(n-48)}}while(++c<t&&(n=e[c])>47&&n<60);c--;break;case 9:this._collect<<=8,this._collect|=n;break;case 10:for(var f=this._escHandlers[this._collect<<8|n],p=f?f.length-1:-1;p>=0&&!0!==(i=f[p]());p--)if(i instanceof Promise)return this._preserveStack(4,f,p,o,c),i;p<0&&this._escHandlerFb(this._collect<<8|n),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|n,this._params);break;case 13:for(var g=c+1;;++g)if(g>=t||24===(n=e[g])||26===n||27===n||n>127&&n<u){this._dcsParser.put(e,c,g),c=g-1;break}break;case 14:if(i=this._dcsParser.unhook(24!==n&&26!==n))return this._preserveStack(6,[],0,o,c),i;27===n&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var m=c+1;;m++)if(m>=t||(n=e[m])<32||n>127&&n<u){this._oscParser.put(e,c,m),c=m-1;break}break;case 6:if(i=this._oscParser.end(24!==n&&26!==n))return this._preserveStack(5,[],0,o,c),i;27===n&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&o}},r}(o.Disposable);t.EscapeSequenceParser=d},6242:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;var i=r(5770),n=r(482),o=[],s=function(){function e(){this._state=0,this._active=o,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return e.prototype.registerHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var r=this._handlers[e];return r.push(t),{dispose:function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=o},e.prototype.reset=function(){if(2===this._state)for(var e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=o,this._id=-1,this._state=0},e.prototype._start=function(){if(this._active=this._handlers[this._id]||o,this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,"START")},e.prototype._put=function(e,t,r){if(this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].put(e,t,r);else this._handlerFb(this._id,"PUT",(0,n.utf32ToString)(e,t,r))},e.prototype.start=function(){this.reset(),this._state=1},e.prototype.put=function(e,t,r){if(3!==this._state){if(1===this._state)for(;t<r;){var i=e[t++];if(59===i){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&r-t>0&&this._put(e,t,r)}},e.prototype.end=function(e,t){if(void 0===t&&(t=!0),0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){var r=!1,i=this._active.length-1,n=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,r=t,n=this._stack.fallThrough,this._stack.paused=!1),!n&&!1===r){for(;i>=0&&!0!==(r=this._active[i].end(e));i--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,r;i--}for(;i>=0;i--)if((r=this._active[i].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,r}else this._handlerFb(this._id,"END",e);this._active=o,this._id=-1,this._state=0}},e}();t.OscParser=s;var a=function(){function e(e){this._handler=e,this._data="",this._hitLimit=!1}return e.prototype.start=function(){this._data="",this._hitLimit=!1},e.prototype.put=function(e,t,r){this._hitLimit||(this._data+=(0,n.utf32ToString)(e,t,r),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.end=function(e){var t=this,r=!1;if(this._hitLimit)r=!1;else if(e&&(r=this._handler(this._data))instanceof Promise)return r.then((function(e){return t._data="",t._hitLimit=!1,e}));return this._data="",this._hitLimit=!1,r},e}();t.OscHandler=a},8742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;var r=2147483647,i=function(){function e(e,t){if(void 0===e&&(e=32),void 0===t&&(t=32),this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return e.fromArray=function(t){var r=new e;if(!t.length)return r;for(var i=Array.isArray(t[0])?1:0;i<t.length;++i){var n=t[i];if(Array.isArray(n))for(var o=0;o<n.length;++o)r.addSubParam(n[o]);else r.addParam(n)}return r},e.prototype.clone=function(){var t=new e(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t},e.prototype.toArray=function(){for(var e=[],t=0;t<this.length;++t){e.push(this.params[t]);var r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];i-r>0&&e.push(Array.prototype.slice.call(this._subParams,r,i))}return e},e.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},e.prototype.addParam=function(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>r?r:e}},e.prototype.addSubParam=function(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>r?r:e,this._subParamsIdx[this.length-1]++}},e.prototype.hasSubParams=function(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0},e.prototype.getSubParams=function(e){var t=this._subParamsIdx[e]>>8,r=255&this._subParamsIdx[e];return r-t>0?this._subParams.subarray(t,r):null},e.prototype.getSubParamsAll=function(){for(var e={},t=0;t<this.length;++t){var r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];i-r>0&&(e[t]=this._subParams.slice(r,i))}return e},e.prototype.addDigit=function(e){var t;if(!(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var i=this._digitIsSub?this._subParams:this.params,n=i[t-1];i[t-1]=~n?Math.min(10*n+e,r):e}},e}();t.Params=i},5741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0;var r=function(){function e(){this._addons=[]}return e.prototype.dispose=function(){for(var e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()},e.prototype.loadAddon=function(e,t){var r=this,i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=function(){return r._wrappedAddonDispose(i)},t.activate(e)},e.prototype._wrappedAddonDispose=function(e){if(!e.isDisposed){for(var t=-1,r=0;r<this._addons.length;r++)if(this._addons[r]===e){t=r;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},e}();t.AddonManager=r},8771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;var i=r(3785),n=r(511),o=function(){function e(e,t){this._buffer=e,this.type=t}return e.prototype.init=function(e){return this._buffer=e,this},Object.defineProperty(e.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),e.prototype.getLine=function(e){var t=this._buffer.lines.get(e);if(t)return new i.BufferLineApiView(t)},e.prototype.getNullCell=function(){return new n.CellData},e}();t.BufferApiView=o},3785:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;var i=r(511),n=function(){function e(e){this._line=e}return Object.defineProperty(e.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),e.prototype.getCell=function(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new i.CellData)},e.prototype.translateToString=function(e,t,r){return this._line.translateToString(e,t,r)},e}();t.BufferLineApiView=n},8285:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;var i=r(8771),n=r(8460),o=function(){function e(e){var t=this;this._core=e,this._onBufferChange=new n.EventEmitter,this._normal=new i.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new i.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((function(){return t._onBufferChange.fire(t.active)}))}return Object.defineProperty(e.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),e}();t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0;var r=function(){function e(e){this._core=e}return e.prototype.registerCsiHandler=function(e,t){return this._core.registerCsiHandler(e,(function(e){return t(e.toArray())}))},e.prototype.addCsiHandler=function(e,t){return this.registerCsiHandler(e,t)},e.prototype.registerDcsHandler=function(e,t){return this._core.registerDcsHandler(e,(function(e,r){return t(e,r.toArray())}))},e.prototype.addDcsHandler=function(e,t){return this.registerDcsHandler(e,t)},e.prototype.registerEscHandler=function(e,t){return this._core.registerEscHandler(e,t)},e.prototype.addEscHandler=function(e,t){return this.registerEscHandler(e,t)},e.prototype.registerOscHandler=function(e,t){return this._core.registerOscHandler(e,t)},e.prototype.addOscHandler=function(e,t){return this.registerOscHandler(e,t)},e}();t.ParserApi=r},7090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0;var r=function(){function e(e){this._core=e}return e.prototype.register=function(e){this._core.unicodeService.register(e)},Object.defineProperty(e.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(e){this._core.unicodeService.activeVersion=e},enumerable:!1,configurable:!0}),e}();t.UnicodeApi=r},744:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;var a=r(2585),l=r(5295),c=r(8460),h=r(844);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;var u=function(e){function r(r){var i=e.call(this)||this;return i._optionsService=r,i.isUserScrolling=!1,i._onResize=new c.EventEmitter,i._onScroll=new c.EventEmitter,i.cols=Math.max(r.rawOptions.cols||0,t.MINIMUM_COLS),i.rows=Math.max(r.rawOptions.rows||0,t.MINIMUM_ROWS),i.buffers=new l.BufferSet(r,i),i}return n(r,e),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){e.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:t})},r.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},r.prototype.scroll=function(e,t){void 0===t&&(t=!1);var r,i=this.buffer;(r=this._cachedBlankLine)&&r.length===this.cols&&r.getFg(0)===e.fg&&r.getBg(0)===e.bg||(r=i.getBlankLine(e,t),this._cachedBlankLine=r),r.isWrapped=t;var n=i.ybase+i.scrollTop,o=i.ybase+i.scrollBottom;if(0===i.scrollTop){var s=i.lines.isFull;o===i.lines.length-1?s?i.lines.recycle().copyFrom(r):i.lines.push(r.clone()):i.lines.splice(o+1,0,r.clone()),s?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{var a=o-n+1;i.lines.shiftElements(n+1,a-1,-1),i.lines.set(o,r.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)},r.prototype.scrollLines=function(e,t,r){var i=this.buffer;if(e<0){if(0===i.ydisp)return;this.isUserScrolling=!0}else e+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);var n=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+e,i.ybase),0),n!==i.ydisp&&(t||this._onScroll.fire(i.ydisp))},r.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},r.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},r.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},r.prototype.scrollToLine=function(e){var t=e-this.buffer.ydisp;0!==t&&this.scrollLines(t)},o([s(0,a.IOptionsService)],r)}(h.Disposable);t.BufferService=u},7994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0;var r=function(){function e(){this.glevel=0,this._charsets=[]}return e.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},e.prototype.setgLevel=function(e){this.glevel=e,this.charset=this._charsets[e]},e.prototype.setgCharset=function(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)},e}();t.CharsetService=r},1753:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;var s=r(2585),a=r(8460),l={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(e){return 4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)}},VT200:{events:19,restrict:function(e){return 32!==e.action}},DRAG:{events:23,restrict:function(e){return 32!==e.action||3!==e.button}},ANY:{events:31,restrict:function(e){return!0}}};function c(e,t){var r=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(r|=64,r|=e.action):(r|=3&e.button,4&e.button&&(r|=64),8&e.button&&(r|=128),32===e.action?r|=32:0!==e.action||t||(r|=3)),r}var h=String.fromCharCode,u={DEFAULT:function(e){var t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"[M"+h(t[0])+h(t[1])+h(t[2])},SGR:function(e){var t=0===e.action&&4!==e.button?"m":"M";return"[<"+c(e,!0)+";"+e.col+";"+e.row+t}},d=function(){function e(e,t){var r,i,n,s;this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new a.EventEmitter,this._lastEvent=null;try{for(var c=o(Object.keys(l)),h=c.next();!h.done;h=c.next()){var d=h.value;this.addProtocol(d,l[d])}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}try{for(var f=o(Object.keys(u)),p=f.next();!p.done;p=f.next()){var g=p.value;this.addEncoding(g,u[g])}}catch(e){n={error:e}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(n)throw n.error}}this.reset()}return e.prototype.addProtocol=function(e,t){this._protocols[e]=t},e.prototype.addEncoding=function(e,t){this._encodings[e]=t},Object.defineProperty(e.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol "'+e+'"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding "'+e+'"');this._activeEncoding=e},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(e.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),e.prototype.triggerMouseEvent=function(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._compareEvents(this._lastEvent,e))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;var t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0},e.prototype.explainEvents=function(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}},e.prototype._compareEvents=function(e,t){return e.col===t.col&&e.row===t.row&&e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift},i([n(0,s.IBufferService),n(1,s.ICoreService)],e)}();t.CoreMouseService=d},6975:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;var a=r(2585),l=r(8460),c=r(1439),h=r(844),u=Object.freeze({insertMode:!1}),d=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),f=function(e){function t(t,r,i,n){var o=e.call(this)||this;return o._bufferService=r,o._logService=i,o._optionsService=n,o.isCursorInitialized=!1,o.isCursorHidden=!1,o._onData=o.register(new l.EventEmitter),o._onUserInput=o.register(new l.EventEmitter),o._onBinary=o.register(new l.EventEmitter),o._scrollToBottom=t,o.register({dispose:function(){return o._scrollToBottom=void 0}}),o.modes=(0,c.clone)(u),o.decPrivateModes=(0,c.clone)(d),o}return n(t,e),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.modes=(0,c.clone)(u),this.decPrivateModes=(0,c.clone)(d)},t.prototype.triggerDataEvent=function(e,t){if(void 0===t&&(t=!1),!this._optionsService.rawOptions.disableStdin){var r=this._bufferService.buffer;r.ybase!==r.ydisp&&this._scrollToBottom(),t&&this._onUserInput.fire(),this._logService.debug('sending data "'+e+'"',(function(){return e.split("").map((function(e){return e.charCodeAt(0)}))})),this._onData.fire(e)}},t.prototype.triggerBinaryEvent=function(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+e+'"',(function(){return e.split("").map((function(e){return e.charCodeAt(0)}))})),this._onBinary.fire(e))},o([s(1,a.IBufferService),s(2,a.ILogService),s(3,a.IOptionsService)],t)}(h.Disposable);t.CoreService=f},9074:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__generator||function(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationService=void 0;var a=r(8055),l=r(8460),c=r(844),h=r(6106),u=function(e){function t(){var t=e.call(this)||this;return t._decorations=new h.SortedList((function(e){return e.marker.line})),t._onDecorationRegistered=t.register(new l.EventEmitter),t._onDecorationRemoved=t.register(new l.EventEmitter),t}return n(t,e),Object.defineProperty(t.prototype,"onDecorationRegistered",{get:function(){return this._onDecorationRegistered.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDecorationRemoved",{get:function(){return this._onDecorationRemoved.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decorations",{get:function(){return this._decorations.values()},enumerable:!1,configurable:!0}),t.prototype.registerDecoration=function(e){var t=this;if(!e.marker.isDisposed){var r=new d(e);if(r){var i=r.marker.onDispose((function(){return r.dispose()}));r.onDispose((function(){r&&(t._decorations.delete(r)&&t._onDecorationRemoved.fire(r),i.dispose())})),this._decorations.insert(r),this._onDecorationRegistered.fire(r)}return r}},t.prototype.reset=function(){var e,t;try{for(var r=s(this._decorations.values()),i=r.next();!i.done;i=r.next())i.value.dispose()}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this._decorations.clear()},t.prototype.getDecorationsAtLine=function(e){return o(this,(function(t){return[2,this._decorations.getKeyIterator(e)]}))},t.prototype.getDecorationsAtCell=function(e,t,r){var i,n,a,l,c,h,u,d,f,p,g;return o(this,(function(o){switch(o.label){case 0:i=0,n=0,o.label=1;case 1:o.trys.push([1,6,7,8]),a=s(this._decorations.getKeyIterator(t)),l=a.next(),o.label=2;case 2:return l.done?[3,5]:(c=l.value,i=null!==(f=c.options.x)&&void 0!==f?f:0,n=i+(null!==(p=c.options.width)&&void 0!==p?p:1),!(e>=i&&e<n)||r&&(null!==(g=c.options.layer)&&void 0!==g?g:"bottom")!==r?[3,4]:[4,c]);case 3:o.sent(),o.label=4;case 4:return l=a.next(),[3,2];case 5:return[3,8];case 6:return h=o.sent(),u={error:h},[3,8];case 7:try{l&&!l.done&&(d=a.return)&&d.call(a)}finally{if(u)throw u.error}return[7];case 8:return[2]}}))},t.prototype.dispose=function(){var e,t;try{for(var r=s(this._decorations.values()),i=r.next();!i.done;i=r.next()){var n=i.value;this._onDecorationRemoved.fire(n)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.reset()},t}(c.Disposable);t.DecorationService=u;var d=function(e){function t(t){var r=e.call(this)||this;return r.options=t,r.isDisposed=!1,r.onRenderEmitter=r.register(new l.EventEmitter),r.onRender=r.onRenderEmitter.event,r._onDispose=r.register(new l.EventEmitter),r.onDispose=r._onDispose.event,r._cachedBg=null,r._cachedFg=null,r.marker=t.marker,r.options.overviewRulerOptions&&!r.options.overviewRulerOptions.position&&(r.options.overviewRulerOptions.position="full"),r}return n(t,e),Object.defineProperty(t.prototype,"backgroundColorRGB",{get:function(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"foregroundColorRGB",{get:function(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._onDispose.fire(),e.prototype.dispose.call(this))},t}(c.Disposable)},3730:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirtyRowService=void 0;var o=r(2585),s=function(){function e(e){this._bufferService=e,this.clearRange()}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),e.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},e.prototype.markDirty=function(e){e<this._start?this._start=e:e>this._end&&(this._end=e)},e.prototype.markRangeDirty=function(e,t){if(e>t){var r=e;e=t,t=r}e<this._start&&(this._start=e),t>this._end&&(this._end=t)},e.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},i([n(0,o.IBufferService)],e)}();t.DirtyRowService=s},4348:function(e,t,r){var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;var s=r(2585),a=r(8343),l=function(){function e(){for(var e,t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];this._entries=new Map;try{for(var s=i(r),a=s.next();!a.done;a=s.next()){var l=n(a.value,2),c=l[0],h=l[1];this.set(c,h)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}return e.prototype.set=function(e,t){var r=this._entries.get(e);return this._entries.set(e,t),r},e.prototype.forEach=function(e){this._entries.forEach((function(t,r){return e(r,t)}))},e.prototype.has=function(e){return this._entries.has(e)},e.prototype.get=function(e){return this._entries.get(e)},e}();t.ServiceCollection=l;var c=function(){function e(){this._services=new l,this._services.set(s.IInstantiationService,this)}return e.prototype.setService=function(e,t){this._services.set(e,t)},e.prototype.getService=function(e){return this._services.get(e)},e.prototype.createInstance=function(e){for(var t,r,s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];var c=(0,a.getServiceDependencies)(e).sort((function(e,t){return e.index-t.index})),h=[];try{for(var u=i(c),d=u.next();!d.done;d=u.next()){var f=d.value,p=this._services.get(f.id);if(!p)throw new Error("[createInstance] "+e.name+" depends on UNKNOWN service "+f.id+".");h.push(p)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}var g=c.length>0?c[0].index:s.length;if(s.length!==g)throw new Error("[createInstance] First service dependency of "+e.name+" at position "+(g+1)+" conflicts with "+s.length+" static arguments");return new(e.bind.apply(e,o([void 0],n(o(o([],n(s),!1),n(h),!1)),!1)))},e}();t.InstantiationService=c},7866:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;var a=r(2585),l={debug:a.LogLevelEnum.DEBUG,info:a.LogLevelEnum.INFO,warn:a.LogLevelEnum.WARN,error:a.LogLevelEnum.ERROR,off:a.LogLevelEnum.OFF},c=function(){function e(e){var t=this;this._optionsService=e,this.logLevel=a.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange((function(e){"logLevel"===e&&t._updateLogLevel()}))}return e.prototype._updateLogLevel=function(){this.logLevel=l[this._optionsService.rawOptions.logLevel]},e.prototype._evalLazyOptionalParams=function(e){for(var t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())},e.prototype._log=function(e,t,r){this._evalLazyOptionalParams(r),e.call.apply(e,s([console,"xterm.js: "+t],o(r),!1))},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.logLevel<=a.LogLevelEnum.DEBUG&&this._log(console.log,e,t)},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.logLevel<=a.LogLevelEnum.INFO&&this._log(console.info,e,t)},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.logLevel<=a.LogLevelEnum.WARN&&this._log(console.warn,e,t)},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.logLevel<=a.LogLevelEnum.ERROR&&this._log(console.error,e,t)},i([n(0,a.IOptionsService)],e)}();t.LogService=c},7302:function(e,t,r){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=t.DEFAULT_BELL_SOUND=void 0;var n=r(8460),o=r(6114);t.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:t.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:o.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:void 0};var s=["normal","bold","100","200","300","400","500","600","700","800","900"],a=function(){function e(e){this._onOptionChange=new n.EventEmitter;var r=i({},t.DEFAULT_OPTIONS);for(var o in e)if(o in r)try{var s=e[o];r[o]=this._sanitizeAndValidateOption(o,s)}catch(e){console.error(e)}this.rawOptions=r,this.options=i({},r),this._setupOptions()}return Object.defineProperty(e.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),e.prototype._setupOptions=function(){var e=this,r=function(r){if(!(r in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+r+'"');return e.rawOptions[r]},i=function(r,i){if(!(r in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+r+'"');i=e._sanitizeAndValidateOption(r,i),e.rawOptions[r]!==i&&(e.rawOptions[r]=i,e._onOptionChange.fire(r))};for(var n in this.rawOptions){var o={get:r.bind(this,n),set:i.bind(this,n)};Object.defineProperty(this.options,n,o)}},e.prototype.setOption=function(e,t){this.options[e]=t},e.prototype._sanitizeAndValidateOption=function(e,r){switch(e){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":r||(r=t.DEFAULT_OPTIONS[e]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof r&&1<=r&&r<=1e3)break;r=s.includes(r)?r:t.DEFAULT_OPTIONS[e];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(e+" cannot be less than 1, value: "+r);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(e+" cannot be less than 0, value: "+r);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(e+" cannot be less than or equal to 0, value: "+r);case"rows":case"cols":if(!r&&0!==r)throw new Error(e+" must be numeric, value: "+r)}return r},e.prototype.getOption=function(e){return this.options[e]},e}();t.OptionsService=a},8343:(e,t)=>{function r(e,t,r){t.di$target===t?t.di$dependencies.push({id:e,index:r}):(t.di$dependencies=[{id:e,index:r}],t.di$target=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0,t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e.di$dependencies||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);var i=function(e,t,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");r(i,e,n)};return i.toString=function(){return e},t.serviceRegistry.set(e,i),i}},2585:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.IDirtyRowService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;var i,n=r(8343);t.IBufferService=(0,n.createDecorator)("BufferService"),t.ICoreMouseService=(0,n.createDecorator)("CoreMouseService"),t.ICoreService=(0,n.createDecorator)("CoreService"),t.ICharsetService=(0,n.createDecorator)("CharsetService"),t.IDirtyRowService=(0,n.createDecorator)("DirtyRowService"),t.IInstantiationService=(0,n.createDecorator)("InstantiationService"),(i=t.LogLevelEnum||(t.LogLevelEnum={}))[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i[i.OFF=4]="OFF",t.ILogService=(0,n.createDecorator)("LogService"),t.IOptionsService=(0,n.createDecorator)("OptionsService"),t.IUnicodeService=(0,n.createDecorator)("UnicodeService"),t.IDecorationService=(0,n.createDecorator)("DecorationService")},1480:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;var i=r(8460),n=r(225),o=function(){function e(){this._providers=Object.create(null),this._active="",this._onChange=new i.EventEmitter;var e=new n.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._active},set:function(e){if(!this._providers[e])throw new Error('unknown Unicode version "'+e+'"');this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)},enumerable:!1,configurable:!0}),e.prototype.register=function(e){this._providers[e.version]=e},e.prototype.wcwidth=function(e){return this._activeProvider.wcwidth(e)},e.prototype.getStringCellWidth=function(e){for(var t=0,r=e.length,i=0;i<r;++i){var n=e.charCodeAt(i);if(55296<=n&&n<=56319){if(++i>=r)return t+this.wcwidth(n);var o=e.charCodeAt(i);56320<=o&&o<=57343?n=1024*(n-55296)+o-56320+65536:t+=this.wcwidth(o)}t+=this.wcwidth(n)}return t},e}();t.UnicodeService=o}},t={};return function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}(4389)})()}(ew);var tw={exports:{}};!function(e,t){self,e.exports=(()=>{var e={6:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkComputer=t.WebLinkProvider=void 0;var r=function(){function e(e,t,r,i){void 0===i&&(i={}),this._terminal=e,this._regex=t,this._handler=r,this._options=i}return e.prototype.provideLinks=function(e,t){var r=i.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(r))},e.prototype._addCallbacks=function(e){var t=this;return e.map((function(e){return e.leave=t._options.leave,e.hover=function(r,i){if(t._options.hover){var n=e.range;t._options.hover(r,i,n)}},e}))},e}();t.WebLinkProvider=r;var i=function(){function e(){}return e.computeLink=function(t,r,i,n){for(var o,s=new RegExp(r.source,(r.flags||"")+"g"),a=e._translateBufferLineToStringWithWrap(t-1,!1,i),l=a[0],c=a[1],h=-1,u=[];null!==(o=s.exec(l));){var d=o[1];if(!d){console.log("match found without corresponding matchIndex");break}if(h=l.indexOf(d,h+1),s.lastIndex=h+d.length,h<0)break;for(var f=h+d.length,p=c+1;f>i.cols;)f-=i.cols,p++;for(var g=h+1,m=c+1;g>i.cols;)g-=i.cols,m++;var v={start:{x:g,y:m},end:{x:f,y:p}};u.push({range:v,text:d,activate:n})}return u},e._translateBufferLineToStringWithWrap=function(e,t,r){var i,n,o="";do{if(!(a=r.buffer.active.getLine(e)))break;a.isWrapped&&e--,n=a.isWrapped}while(n);var s=e;do{var a,l=r.buffer.active.getLine(e+1);if(i=!!l&&l.isWrapped,!(a=r.buffer.active.getLine(e)))break;o+=a.translateToString(!i&&t).substring(0,r.cols),e++}while(i);return[o,s]},e}();t.LinkComputer=i}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}var i={};return(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.WebLinksAddon=void 0;var t=r(6),n=new RegExp("(?:^|[^\\da-z\\.-]+)((https?:\\/\\/)((([\\da-z\\.-]+)\\.([a-z\\.]{2,18}))|((\\d{1,3}\\.){3}\\d{1,3})|(localhost))(:\\d{1,5})?((\\/[\\/\\w\\.\\-%~:+@]*)*([^:\"'\\s]))?(\\?[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?(#[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?)($|[^\\/\\w\\.\\-%]+)");function o(e,t){var r=window.open();if(r){try{r.opener=null}catch(e){}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}var s=function(){function e(e,t,r){void 0===e&&(e=o),void 0===t&&(t={}),void 0===r&&(r=!1),this._handler=e,this._options=t,this._useLinkProvider=r}return e.prototype.activate=function(e){if(this._terminal=e,this._useLinkProvider&&"registerLinkProvider"in this._terminal){var r=(i=this._options).urlRegex||n;this._linkProvider=this._terminal.registerLinkProvider(new t.WebLinkProvider(this._terminal,r,this._handler,i))}else{var i;(i=this._options).matchIndex=1,this._linkMatcherId=this._terminal.registerLinkMatcher(n,this._handler,i)}},e.prototype.dispose=function(){var e;void 0!==this._linkMatcherId&&void 0!==this._terminal&&this._terminal.deregisterLinkMatcher(this._linkMatcherId),null===(e=this._linkProvider)||void 0===e||e.dispose()},e}();e.WebLinksAddon=s})(),i})()}(tw);var rw={exports:{}};!function(e,t){self,e.exports=(()=>{var e={775:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0;var r=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var e=this._terminal._core;if(0!==e._renderService.dimensions.actualCellWidth&&0!==e._renderService.dimensions.actualCellHeight){var t=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(t.getPropertyValue("height")),i=Math.max(0,parseInt(t.getPropertyValue("width"))),n=window.getComputedStyle(this._terminal.element),o=r-(parseInt(n.getPropertyValue("padding-top"))+parseInt(n.getPropertyValue("padding-bottom"))),s=i-(parseInt(n.getPropertyValue("padding-right"))+parseInt(n.getPropertyValue("padding-left")))-e.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(s/e._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(o/e._renderService.dimensions.actualCellHeight))}}}},e}();t.FitAddon=r}},t={};return function r(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}(775)})()}(rw);const iw=vO([]);function nw(t){let r,n,o,s,a,l,c,h,u,d,m,b,C,k,T,P,Q,R,A,$,L,E,M,D,B,I;return{c(){r=v("div"),n=v("div"),o=_(),s=v("div"),a=v("span"),l=O(t[0]),h=_(),u=v("span"),d=O("WD: "),m=O(t[1]),b=_(),C=v("div"),k=v("button"),T=O("EmailIt"),P=_(),Q=v("button"),R=O("Notes"),A=_(),$=v("button"),L=O("Log"),E=_(),M=v("button"),D=O("Edit Scripts"),w(n,"id","terminal"),x(n,"background-color",t[2].textAreaColor),x(n,"color",t[2].textColor),x(n,"border-color",t[2].borderColor),w(n,"class","svelte-1tua3so"),w(a,"id","modeIndicator"),w(a,"style",c="background-color : "+("insert"===t[0]?t[2].Cyan:t[2].Purple)+"; color: "+t[2].backgroundColor),w(a,"class","svelte-1tua3so"),w(u,"id","workingdir"),w(u,"class","svelte-1tua3so"),w(s,"id","statusline"),x(s,"background-color",t[2].backgroundColor),x(s,"color",t[2].textColor),x(s,"border-color",t[2].borderColor),w(s,"class","svelte-1tua3so"),x(k,"background-color",t[2].textAreaColor),x(k,"color",t[2].textColor),x(k,"border-color",t[2].borderColor),w(k,"class","svelte-1tua3so"),x(Q,"background-color",t[2].textAreaColor),x(Q,"color",t[2].textColor),x(Q,"border-color",t[2].borderColor),w(Q,"class","svelte-1tua3so"),x($,"background-color",t[2].textAreaColor),x($,"color",t[2].textColor),x($,"border-color",t[2].borderColor),w($,"class","svelte-1tua3so"),x(M,"background-color",t[2].textAreaColor),x(M,"color",t[2].textColor),x(M,"border-color",t[2].borderColor),w(M,"class","svelte-1tua3so"),w(C,"id","buttonRow"),w(C,"class","svelte-1tua3so"),w(r,"id","ScriptTermDiv"),x(r,"background-color",t[2].backgroundColor),x(r,"font-family",t[2].font),x(r,"color",t[2].textColor),x(r,"font-size",t[2].fontSize),w(r,"class","svelte-1tua3so")},m(e,i){p(e,r,i),f(r,n),f(r,o),f(r,s),f(s,a),f(a,l),f(s,h),f(s,u),f(u,d),f(u,m),f(r,b),f(r,C),f(C,k),f(k,T),f(C,P),f(C,Q),f(Q,R),f(C,A),f(C,$),f($,L),f(C,E),f(C,M),f(M,D),B||(I=[y(k,"click",t[3]),y(Q,"click",t[4]),y($,"click",t[5]),y(M,"click",t[6])],B=!0)},p(e,t){4&t[0]&&x(n,"background-color",e[2].textAreaColor),4&t[0]&&x(n,"color",e[2].textColor),4&t[0]&&x(n,"border-color",e[2].borderColor),1&t[0]&&S(l,e[0]),5&t[0]&&c!==(c="background-color : "+("insert"===e[0]?e[2].Cyan:e[2].Purple)+"; color: "+e[2].backgroundColor)&&w(a,"style",c),2&t[0]&&S(m,e[1]),4&t[0]&&x(s,"background-color",e[2].backgroundColor),4&t[0]&&x(s,"color",e[2].textColor),4&t[0]&&x(s,"border-color",e[2].borderColor),4&t[0]&&x(k,"background-color",e[2].textAreaColor),4&t[0]&&x(k,"color",e[2].textColor),4&t[0]&&x(k,"border-color",e[2].borderColor),4&t[0]&&x(Q,"background-color",e[2].textAreaColor),4&t[0]&&x(Q,"color",e[2].textColor),4&t[0]&&x(Q,"border-color",e[2].borderColor),4&t[0]&&x($,"background-color",e[2].textAreaColor),4&t[0]&&x($,"color",e[2].textColor),4&t[0]&&x($,"border-color",e[2].borderColor),4&t[0]&&x(M,"background-color",e[2].textAreaColor),4&t[0]&&x(M,"color",e[2].textColor),4&t[0]&&x(M,"border-color",e[2].borderColor),4&t[0]&&x(r,"background-color",e[2].backgroundColor),4&t[0]&&x(r,"font-family",e[2].font),4&t[0]&&x(r,"color",e[2].textColor),4&t[0]&&x(r,"font-size",e[2].fontSize)},i:e,o:e,d(e){e&&g(r),B=!1,i(I)}}}function ow(e,t){return[t.slice(0,e),t.slice(e)]}function sw(e){var t=[e];let r=80,i=0;for(;t[i].length>r;){for(;" "!==t[i][r];)r--;let e=ow(r,t[i]);t=0===i?e:t.slice(0,i).concat(e),i++,r=80}return t=0===i?t[0]:t.join("\n\r           ")}async function aw(e,t,r,i){var n={};void 0!==t&&(n={...n,...t});var o=[];for(const e in n)o.push(`${e}=${n[e]}`);void 0===i&&(i=".");var s=["/bin/zsh","-c",e],a=await window.go.main.App.RunCommandLine("/bin/zsh",s,o,i),l=await window.go.main.App.GetError();void 0===r&&null===r||r(l,a)}function lw(e,t,r){let i,n,o,a;s(e,$O,(e=>r(14,i=e))),s(e,iw,(e=>r(15,n=e))),s(e,yb,(e=>r(16,o=e))),s(e,OO,(e=>r(2,a=e)));let l=null,c=[],h="",u={cd:{command:async function(e){'"'!==e[0]&&"'"!==e[0]||(e=e.slice(1,e.length-1));if(e.length>0){let t=new String(e);if("/"!==e[0]){let r=new String(e),i=new String(p);t=await window.go.main.App.AppendPath(i,r)}await window.go.main.App.DirExists(t)?r(1,p=t):l.write(`    <Error> The path "${t} doesn't exist!\n\n`)}else r(1,p=b);m.valid=!1}},help:{command:async function(e){if(0===(e=e.trim().split(" ")[0]).length)o.forEach((e=>{let t=sw(e.description);l.write(`    ${e.name}    ${t}\n\r`)})),n.length>0&&(l.write("\n\r    Aliases:\n\r\n\r"),n.forEach((e=>{l.write(`    ${e.name}="${e.line}"\n\r`)})));else{let t=o.find((t=>t.name===e));if("undefined"===t)l.write(`\n\r    ${_.red}<Error>${_.default} ${e} is an invalid Command.\n\r`);else{let e=sw(t.help);l.write(`    ${t.name}  -  ${e}\n\r`)}}m.valid=!1}},ls:{command:async function(e){'"'!==e[0]&&"'"!==e[0]||(e=e.slice(1,e.length-1));e=new String(e.trim());var t=new String(p);""!==e&&(t="/"===e[0]?e:await window.go.main.App.AppendPath(t,e));var r=await window.go.main.App.DirExists(t);if(r){var i=await window.go.main.App.ReadDir(t),n=[];for(let e=0;e<i.length;e++){let t=i[e],o=await window.go.main.App.AppendPath(t.Dir,t.Name);(r=await window.go.main.App.DirExists(o))?n.push({name:t.Name,command:`cd '${o}'`}):n.push({name:t.Name,command:`open '${o}'`}),l.write(`    ${t.Name}\n\r`)}m.data=n,m.valid=!0}else{await window.go.main.App.FileExists(t)?(l.write(`    ${e}\n\r`),m.data=[{name:e,tcommand:`ls '${t}'`}]):l.write(`\n\r    ${_.red}<Error>${_.default} ${t} is an invalid Directory.\n\r`)}}},open:{command:async function(e){'"'!==e[0]&&"'"!==e[0]||(e=e.slice(1,e.length-1));"/"!==e[0]&&(e=await window.go.main.App.AppendPath(p,e));e=new String(e.trim()),await window.go.main.App.RunCommandLine("/usr/bin/open",["-t",e],[],""),m.valid=!1}},runscript:{command:async function(e){m.valid=!1;var t=e.split(",");if(t.length<2)l.write(`\n\r    ${_.red}<Error>${_.default} runscript wasn't given enough arguments.\n\r`);else{e=t.splice(1).join(",").trim(),t=t[0].trim();var r=!1;'"'!==e[0]&&"'"!==e[0]||(e=e.slice(1,e.length-1),r=!0),"/"===e[0]||r||(e=await window.go.main.App.AppendPath(p,e),r=!1),e=new String(e.trim()),r?await fetch("http://localhost:9978/api/script/run",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({script:t,text:e})}).then((e=>e.json())).then((e=>{l.write(`\n\r     ${e.text}\n\r`)})):await fetch("http://localhost:9978/api/script/run",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({script:t,text:"",file:e})}).then((e=>e.json())).then((e=>{l.write(`\n\r     ${e.text}\n\r`)}))}m.valid=!1}},edit:{command:async function(e){'"'!==e[0]&&"'"!==e[0]||(e=e.slice(1,e.length-1));"/"!==e[0]&&(e=await window.go.main.App.AppendPath(p,e));e=new String(e.trim());let t=await window.go.main.App.AppendPath(b,".myeditorchoice");if(await window.go.main.App.FileExists(t)){var r=await window.go.main.App.ReadFile(t);(r=r.toString().trim()).endsWith(".app")?await aw(`/usr/bin/open -a ${r} '${e}'`,[],((e,t)=>{}),p):"emacs"===r&&await aw('emacsclient -n -q "'+file+'"',[],((e,t)=>{}),p)}else await aw(`/usr/bin/open '${e}'`,[],((e,t)=>{}),p);m.valid=!1}},alias:{command:async function(e){let t=e.trim().split("=");if(t.length>1){let r=t[1];'"'!==r[0]&&"'"!==r[0]||(r=e.slice(1,r.length-1)),n.push({name:t[0],line:r}),async function(){let e=await window.go.main.App.AppendPath(b,".myaliases");window.go.main.App.WriteFile(e,JSON.stringify(n))}()}else if(""===e.trim()){l.write("   Aliases:\n\r");for(const e of n)l.write(`    ${e.name} = "${e.line}"\n\r`)}else l.write(`\n\r    ${_.red}<Error>${_.default} Not enough parameters for an alias.\n\r`);m.valid=!1}},hist:{command:async function(e){let t=[],r=5;e=parseInt(e.trim()),Number.isInteger(e)&&(r=e);r>c.length-1&&(r=c.length-1);for(let e=c.length-(r+1);e<c.length-1;e++)l.write(`    ${c[e]}\n\r`),t.push({name:c[e],command:c[e]});m.data=t,m.valid=!0}},rm:{command:async function(e){let t=!1;'"'!==e[0]&&"'"!==e[0]||(e=e.slice(1,e.length-1));e=e.trim();var r=new String(p);""!==e?(t=!1,e=new String(e),r="/"===e[0]?e:await window.go.main.App.AppendPath(r,e)):t=!0;var i=await window.go.main.App.DirExists(r);if(i&&t){var n=await window.go.main.App.ReadDir(r),o=[];for(let e=0;e<n.length;e++){let t=n[e],r=await window.go.main.App.AppendPath(t.Dir,t.Name);o.push({name:t.Name,command:`rm '${r}'`}),l.write(`    ${t.Name}\n\r`)}m.data=o,m.valid=!0}else{await window.go.main.App.FileExists(r)||i?await window.go.main.App.DeleteEntries(r):l.write(`\n\r    ${_.red}<Error>${_.default} ${r} is an invalid Directory.\n\r`)}}},mkfile:{command:async function(e){let t=!1;'"'!==e[0]&&"'"!==e[0]||(e=e.slice(1,e.length-1));e=e.trim();var r=new String(p);""!==e?(t=!1,e=new String(e),r="/"===e[0]?e:await window.go.main.App.AppendPath(r,e)):t=!0;await window.go.main.App.FileExists(r)||t?(l.write(`\r\n\r\n    ${_.red}<Error>${_.default} The file "${r}" already exists!\r\n\r\n`),l.prompt()):await window.go.main.App.MakeFile(r)}},mkdir:{command:async function(e){let t=!1;'"'!==e[0]&&"'"!==e[0]||(e=e.slice(1,e.length-1));e=e.trim();var r=new String(p);""!==e?(t=!1,e=new String(e),r="/"===e[0]?e:await window.go.main.App.AppendPath(r,e)):t=!0;await window.go.main.App.DirExists(r)||t?(l.write(`\r\n\r\n    ${_.red}<Error>${_.default} The directory "${r}" already exists!\r\n\r\n`),l.prompt()):await window.go.main.App.MakeDir(r)}}},f="insert",p="~",g=String.fromCharCode(27),m={line:"",data:[],valid:!1},v=0,O=0,_={red:`${g}[31m`,black:`${g}[30m`,green:`${g}[32m`,orange:`${g}[33m`,blue:`${g}[34m`,magenta:`${g}[35m`,cyan:`${g}[36m`,gray:`${g}[37m`,default:`${g}[39m`,up:`${g}[A`,down:`${g}[B`,left:`${g}[D`,right:`${g}[C`},b="";async function y(e){var t=e.trim().split(" ");m.line=e,m.valid=!1,h="";let r=o.filter((e=>e.name===t[0]));if(0===r.length){let e=n.filter((e=>e.name===t[0]));if(0===e.length)l.write(`\r\n\r\n    ${_.red}<Error>${_.default} The command "${t[0]}" wasn't found!\r\n\r\n`),l.prompt();else{var i=e[0].line.split(";");for(const e of i)await y(e)}}else await async function(e,t){await fetch("http://localhost:9978/api/script/run",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({script:e.name,text:t,envVar:{SCRIPTTERMCWD:p}})}).then((e=>e.json())).then((e=>{!function(e){l.write("\r\n"),e=JSON.parse(e),m.data=e.lines,m.valid=!0,void 0!==e.tcommand&&e.tcommand.length>0&&async function(e){c.push(m.line);let t=e.split(" ");if("alias"!==t[0].trim()){let t=e.split(";");for(let e=0;e<t.length;e++){let r=t[e].split(" ");r.length>0&&await u[r[0]].command(r.slice(1).join(" "))}}else await u[t[0]].command(t.slice(1).join(" "));l.prompt()}(e.tcommand);e.lines.forEach((e=>{l.write(`    ${_[e.color]}${e.text}${_.default}\r\n`)}))}(e.text)}))}(r[0],t.slice(1).join(" "))}return L((async()=>{b=await window.go.main.App.GetHomeDir(),r(1,p=b),await window.go.main.App.GetExecutable(),l=new ew.exports.Terminal({rendererType:"canvas",convertEol:!0,cursorBlink:!0,cursorStyle:"bar",theme:{background:a.textAreaColor,black:a.backgroundColor,blue:a.Cyan,brightBlack:a.backgroundColor,brightBlue:a.Cyan,brightCyan:a.Cyan,brightGreen:a.Green,brightMagenta:a.Pink,brightRed:a.Red,brightWhite:a.textColor,brightYellow:a.Yellow,cursor:a.textColor,cursorAccent:a.highlightBackgroundColor,cyan:a.Cyan,foreground:a.textColor,green:a.Green,magenta:a.Pink,red:a.Red,selection:a.highlightBackgroundColor,white:a.textColor,yellow:a.Yellow}});const e=new tw.exports.WebLinksAddon,t=new rw.exports.FitAddon;l.loadAddon(e),l.loadAddon(t),l.open(document.getElementById("terminal")),t.fit(),l.write(" Welcome to Script Terminal!\n"),l.prompt=()=>{l.write(" $ ")},l.prompt(),l.onKey((({key:e,domEvent:t})=>{if("insert"===f)"Enter"===t.key?h&&y(h):"Backspace"===t.key?h&&h.length>=1&&(h=h.slice(0,h.length-1),l.write("\b \b")):"ArrowUp"===t.key||"ArrowDown"===t.key||"ArrowLeft"===t.key||"ArrowRight"===t.key||("Tab"===t.key?(l.write("  "),h+="  "):"Escape"===t.key?"insert"===f?!0===m.valid&&(r(0,f="command"),v=m.data.length-1,O=0,l.write(_.up),l.write(_.right)):r(0,f="insert"):"l"===t.key&&t.ctrlKey?l.clear():(h+=e,l.write(e)));else{let t=0;switch(e){case"i":t=m.data.length-v;for(var i=0;i<t;i++)l.write(_.down);for(i=0;i<O;i++)l.write(_.left);l.write(_.left),r(0,f="insert");break;case"k":0!==v&&(v-=1,l.write(_.up));break;case"j":v<m.data.length-1&&(l.write(_.down),v+=1);break;case"l":O+=1,l.write(_.right);break;case"h":0!==O&&(l.write(_.left),O-=1);break;case"r":t=m.data.length-v;for(i=0;i<t;i++)l.write(_.down);for(i=0;i<O;i++)l.write(_.left);l.write(_.left),r(0,f="insert"),l.write(`${m.data[v].command}\n\r`),y(m.data[v].command)}}})),async function(){let e=await window.go.main.App.AppendPath(b,".myaliases");if(await window.go.main.App.FileExists(e)){let t=await window.go.main.App.ReadFile(e);d(iw,n=JSON.parse(t),n)}}(),l.focus()})),[f,p,a,function(){d($O,i="emailit",i)},function(){d($O,i="notes",i)},function(){d($O,i="viewlog",i)},function(){d($O,i="scripts",i)}]}class cw extends ae{constructor(e){super(),se(this,e,lw,nw,o,{},null,[-1,-1])}}const hw=/[a-zA-Z]/,uw=(e,t=0)=>[...Array(e).keys()].map((e=>e+t));function dw(e,t,r){const i=e.slice();return i[6]=t[r],i}function fw(t){let r;return{c(){r=v("div"),w(r,"class","circle svelte-1cy66mt"),x(r,"animation-delay",t[5]/3*(t[6]-1)+t[4])},m(e,t){p(e,r,t)},p:e,d(e){e&&g(r)}}}function pw(t){let r,i=uw(3,1),n=[];for(let e=0;e<i.length;e+=1)n[e]=fw(dw(t,i,e));return{c(){r=v("div");for(let e=0;e<n.length;e+=1)n[e].c();w(r,"class","wrapper svelte-1cy66mt"),x(r,"--size",t[3]+t[1]),x(r,"--color",t[0]),x(r,"--duration",t[2])},m(e,t){p(e,r,t);for(let e=0;e<n.length;e+=1)n[e].m(r,null)},p(e,[t]){if(48&t){let o;for(i=uw(3,1),o=0;o<i.length;o+=1){const s=dw(e,i,o);n[o]?n[o].p(s,t):(n[o]=fw(s),n[o].c(),n[o].m(r,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=i.length}10&t&&x(r,"--size",e[3]+e[1]),1&t&&x(r,"--color",e[0]),4&t&&x(r,"--duration",e[2])},i:e,o:e,d(e){e&&g(r),m(n,e)}}}function gw(e,t,r){let{color:i="#FF3E00"}=t,{unit:n="px"}=t,{duration:o="1s"}=t,{size:s="60"}=t,a=o.match(hw)[0],l=o.replace(hw,"");return e.$$set=e=>{"color"in e&&r(0,i=e.color),"unit"in e&&r(1,n=e.unit),"duration"in e&&r(2,o=e.duration),"size"in e&&r(3,s=e.size)},[i,n,o,s,a,l]}class mw extends ae{constructor(e){super(),se(this,e,gw,pw,o,{color:0,unit:1,duration:2,size:3})}}function vw(e){let t,r,i,n,o,s,a,l,c;return l=new mw({props:{size:"60",color:"#80ffea",unit:"px",duration:"1s"}}),{c(){t=v("div"),r=v("div"),i=v("h1"),i.textContent="Waiting on the Server!",n=_(),o=v("span"),s=O(e[0]),a=_(),ie(l.$$.fragment),x(i,"margin","auto 60px auto 100px"),x(o,"margin","10px"),x(o,"display","none"),x(r,"display","flex"),x(r,"flex-direction","row"),x(r,"color","white"),x(r,"margin","auto"),x(t,"display","flex"),x(t,"flex-direction","column"),x(t,"width","1000px"),x(t,"height","500px")},m(e,h){p(e,t,h),f(t,r),f(r,i),f(r,n),f(r,o),f(o,s),f(r,a),ne(l,r,null),c=!0},p(e,t){(!c||1&t)&&S(s,e[0])},i(e){c||(ee(l.$$.fragment,e),c=!0)},o(e){te(l.$$.fragment,e),c=!1},d(e){e&&g(t),oe(l)}}}function Ow(t){let r,i;return r=new cw({}),{c(){ie(r.$$.fragment)},m(e,t){ne(r,e,t),i=!0},p:e,i(e){i||(ee(r.$$.fragment,e),i=!0)},o(e){te(r.$$.fragment,e),i=!1},d(e){oe(r,e)}}}function _w(t){let r,i;return r=new Jy({}),{c(){ie(r.$$.fragment)},m(e,t){ne(r,e,t),i=!0},p:e,i(e){i||(ee(r.$$.fragment,e),i=!0)},o(e){te(r.$$.fragment,e),i=!1},d(e){oe(r,e)}}}function bw(t){let r,i;return r=new Pb({}),{c(){ie(r.$$.fragment)},m(e,t){ne(r,e,t),i=!0},p:e,i(e){i||(ee(r.$$.fragment,e),i=!0)},o(e){te(r.$$.fragment,e),i=!1},d(e){oe(r,e)}}}function yw(t){let r,i;return r=new Cb({}),{c(){ie(r.$$.fragment)},m(e,t){ne(r,e,t),i=!0},p:e,i(e){i||(ee(r.$$.fragment,e),i=!0)},o(e){te(r.$$.fragment,e),i=!1},d(e){oe(r,e)}}}function ww(t){let r,i;return r=new S_({}),{c(){ie(r.$$.fragment)},m(e,t){ne(r,e,t),i=!0},p:e,i(e){i||(ee(r.$$.fragment,e),i=!0)},o(e){te(r.$$.fragment,e),i=!1},d(e){oe(r,e)}}}function Sw(t){let r,i;return r=new p_({}),{c(){ie(r.$$.fragment)},m(e,t){ne(r,e,t),i=!0},p:e,i(e){i||(ee(r.$$.fragment,e),i=!0)},o(e){te(r.$$.fragment,e),i=!1},d(e){oe(r,e)}}}function Cw(t){let r,i;return r=new l_({}),{c(){ie(r.$$.fragment)},m(e,t){ne(r,e,t),i=!0},p:e,i(e){i||(ee(r.$$.fragment,e),i=!0)},o(e){te(r.$$.fragment,e),i=!1},d(e){oe(r,e)}}}function xw(e){let t,r,i,n,o,s,a,l,c,h,u;const d=[Cw,Sw,ww,yw,bw,_w,Ow,vw],f=[];function m(e,t){return"emailit"===e[1]?0:"viewlog"===e[1]?1:"notes"===e[1]?2:"scripts"===e[1]?3:"templates"===e[1]?4:"preferences"===e[1]?5:"scriptterm"===e[1]?6:7}return i=m(e),n=f[i]=d[i](e),s=new $_({}),l=new j_({}),{c(){t=v("div"),r=_(),n.c(),o=_(),ie(s.$$.fragment),a=_(),ie(l.$$.fragment),w(t,"id","dragbar"),w(t,"data-wails-drag",""),w(t,"class","svelte-wpwr83")},m(n,d){p(n,t,d),p(n,r,d),f[i].m(n,d),p(n,o,d),ne(s,n,d),p(n,a,d),ne(l,n,d),c=!0,h||(u=y(window,"keydown",e[2]),h=!0)},p(e,[t]){let r=i;i=m(e),i===r?f[i].p(e,t):(K(),te(f[r],1,1,(()=>{f[r]=null})),J(),n=f[i],n?n.p(e,t):(n=f[i]=d[i](e),n.c()),ee(n,1),n.m(o.parentNode,o))},i(e){c||(ee(n),ee(s.$$.fragment,e),ee(l.$$.fragment,e),c=!0)},o(e){te(n),te(s.$$.fragment,e),te(l.$$.fragment,e),c=!1},d(e){e&&g(t),e&&g(r),f[i].d(e),e&&g(o),oe(s,e),e&&g(a),oe(l,e),h=!1,u()}}}function kw(e){return new Promise(((t,r)=>{setTimeout((()=>{console.log("Done waiting"),t(e)}),e)}))}function Tw(e,t,r){let i,n,o,a,l,c,h;s(e,$O,(e=>r(1,i=e))),s(e,IO,(e=>r(5,n=e))),s(e,BO,(e=>r(6,o=e))),s(e,L_,(e=>r(7,a=e))),s(e,yb,(e=>r(8,l=e))),s(e,C_,(e=>r(9,c=e))),s(e,OO,(e=>r(10,h=e)));let u=0,f=0;function p(){fetch("http://localhost:9978/api/theme",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((e=>{d(OO,h=e.theme,h),f++,4===f&&d($O,i="emailit",i),"undefined"!=typeof callback&&callback()})).catch((async()=>{r(0,u++,u),await kw(100),p()}))}function g(){fetch("http://localhost:9978/api/scripts/list",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((e=>{d(C_,c=e.data,c),f++,4===f&&d($O,i="emailit",i),"undefined"!=typeof callback&&callback()})).catch((async()=>{r(0,u++,u),await kw(100),g()}))}function m(){fetch("http://localhost:9978/api/scripts/term/list",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((e=>{d(yb,l=e.data,l),f++,4===f&&d($O,i="emailit",i),"undefined"!=typeof callback&&callback()})).catch((async()=>{r(0,u++,u),await kw(100),m()}))}function v(){fetch("http://localhost:9978/api/template/list",{method:"GET",headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((e=>{d(L_,a=e.templates,a),f++,4===f&&d($O,i="emailit",i),"undefined"!=typeof callback&&callback()})).catch((async()=>{r(0,u++,u),await kw(100),v()}))}return L((async()=>{d($O,i="notready",i),await kw(1e3),g(),m(),v(),p()})),E((()=>{})),[u,i,function(e){if(e.metaKey&&","===e.key)e.preventDefault(),d($O,i="preferences",i);else if(e.ctrlKey)switch(e.key){case"e":d($O,i="emailit",i),e.preventDefault();break;case"v":d($O,i="viewlog",i),e.preventDefault();break;case"n":d($O,i="notes",i),e.preventDefault();break;case"m":d(BO,o=!o,o),e.preventDefault();break;case"t":d(IO,n=!n,n),e.preventDefault();break;case"l":d($O,i="scriptterm",i),e.preventDefault();break;case"p":d($O,i="preferences",i),e.preventDefault()}}]}return new class extends ae{constructor(e){super(),se(this,e,Tw,xw,o,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
